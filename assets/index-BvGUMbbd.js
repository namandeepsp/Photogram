var eR=Object.defineProperty;var tR=Object.getPrototypeOf;var nR=Reflect.get;var iR=(n,e,t)=>e in n?eR(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var z=(n,e,t)=>iR(n,typeof e!="symbol"?e+"":e,t);var ua=(n,e,t)=>nR(tR(n),t,e);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function rR(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Qg={exports:{}},Iu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jb;function sR(){if(Jb)return Iu;Jb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,s,o){var c=null;if(o!==void 0&&(c=""+o),s.key!==void 0&&(c=""+s.key),"key"in s){o={};for(var h in s)h!=="key"&&(o[h]=s[h])}else o=s;return s=o.ref,{$$typeof:n,type:i,key:c,ref:s!==void 0?s:null,props:o}}return Iu.Fragment=e,Iu.jsx=t,Iu.jsxs=t,Iu}var ew;function aR(){return ew||(ew=1,Qg.exports=sR()),Qg.exports}var C=aR(),Wg={exports:{}},Ye={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tw;function oR(){if(tw)return Ye;tw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.iterator;function b(O){return O===null||typeof O!="object"?null:(O=_&&O[_]||O["@@iterator"],typeof O=="function"?O:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,U={};function P(O,W,fe){this.props=O,this.context=W,this.refs=U,this.updater=fe||T}P.prototype.isReactComponent={},P.prototype.setState=function(O,W){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,W,"setState")},P.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function B(){}B.prototype=P.prototype;function G(O,W,fe){this.props=O,this.context=W,this.refs=U,this.updater=fe||T}var Q=G.prototype=new B;Q.constructor=G,A(Q,P.prototype),Q.isPureReactComponent=!0;var ue=Array.isArray,V={H:null,A:null,T:null,S:null},te=Object.prototype.hasOwnProperty;function k(O,W,fe,pe,ge,ve){return fe=ve.ref,{$$typeof:n,type:O,key:W,ref:fe!==void 0?fe:null,props:ve}}function I(O,W){return k(O.type,W,void 0,void 0,void 0,O.props)}function R(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function D(O){var W={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(fe){return W[fe]})}var L=/\/+/g;function H(O,W){return typeof O=="object"&&O!==null&&O.key!=null?D(""+O.key):W.toString(36)}function N(){}function Be(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(N,N):(O.status="pending",O.then(function(W){O.status==="pending"&&(O.status="fulfilled",O.value=W)},function(W){O.status==="pending"&&(O.status="rejected",O.reason=W)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function Ue(O,W,fe,pe,ge){var ve=typeof O;(ve==="undefined"||ve==="boolean")&&(O=null);var ke=!1;if(O===null)ke=!0;else switch(ve){case"bigint":case"string":case"number":ke=!0;break;case"object":switch(O.$$typeof){case n:case e:ke=!0;break;case y:return ke=O._init,Ue(ke(O._payload),W,fe,pe,ge)}}if(ke)return ge=ge(O),ke=pe===""?"."+H(O,0):pe,ue(ge)?(fe="",ke!=null&&(fe=ke.replace(L,"$&/")+"/"),Ue(ge,W,fe,"",function(He){return He})):ge!=null&&(R(ge)&&(ge=I(ge,fe+(ge.key==null||O&&O.key===ge.key?"":(""+ge.key).replace(L,"$&/")+"/")+ke)),W.push(ge)),1;ke=0;var Ke=pe===""?".":pe+":";if(ue(O))for(var Xe=0;Xe<O.length;Xe++)pe=O[Xe],ve=Ke+H(pe,Xe),ke+=Ue(pe,W,fe,ve,ge);else if(Xe=b(O),typeof Xe=="function")for(O=Xe.call(O),Xe=0;!(pe=O.next()).done;)pe=pe.value,ve=Ke+H(pe,Xe++),ke+=Ue(pe,W,fe,ve,ge);else if(ve==="object"){if(typeof O.then=="function")return Ue(Be(O),W,fe,pe,ge);throw W=String(O),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return ke}function ae(O,W,fe){if(O==null)return O;var pe=[],ge=0;return Ue(O,pe,"","",function(ve){return W.call(fe,ve,ge++)}),pe}function we(O){if(O._status===-1){var W=O._result;W=W(),W.then(function(fe){(O._status===0||O._status===-1)&&(O._status=1,O._result=fe)},function(fe){(O._status===0||O._status===-1)&&(O._status=2,O._result=fe)}),O._status===-1&&(O._status=0,O._result=W)}if(O._status===1)return O._result.default;throw O._result}var me=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function de(){}return Ye.Children={map:ae,forEach:function(O,W,fe){ae(O,function(){W.apply(this,arguments)},fe)},count:function(O){var W=0;return ae(O,function(){W++}),W},toArray:function(O){return ae(O,function(W){return W})||[]},only:function(O){if(!R(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Ye.Component=P,Ye.Fragment=t,Ye.Profiler=s,Ye.PureComponent=G,Ye.StrictMode=i,Ye.Suspense=d,Ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,Ye.act=function(){throw Error("act(...) is not supported in production builds of React.")},Ye.cache=function(O){return function(){return O.apply(null,arguments)}},Ye.cloneElement=function(O,W,fe){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var pe=A({},O.props),ge=O.key,ve=void 0;if(W!=null)for(ke in W.ref!==void 0&&(ve=void 0),W.key!==void 0&&(ge=""+W.key),W)!te.call(W,ke)||ke==="key"||ke==="__self"||ke==="__source"||ke==="ref"&&W.ref===void 0||(pe[ke]=W[ke]);var ke=arguments.length-2;if(ke===1)pe.children=fe;else if(1<ke){for(var Ke=Array(ke),Xe=0;Xe<ke;Xe++)Ke[Xe]=arguments[Xe+2];pe.children=Ke}return k(O.type,ge,void 0,void 0,ve,pe)},Ye.createContext=function(O){return O={$$typeof:c,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:o,_context:O},O},Ye.createElement=function(O,W,fe){var pe,ge={},ve=null;if(W!=null)for(pe in W.key!==void 0&&(ve=""+W.key),W)te.call(W,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(ge[pe]=W[pe]);var ke=arguments.length-2;if(ke===1)ge.children=fe;else if(1<ke){for(var Ke=Array(ke),Xe=0;Xe<ke;Xe++)Ke[Xe]=arguments[Xe+2];ge.children=Ke}if(O&&O.defaultProps)for(pe in ke=O.defaultProps,ke)ge[pe]===void 0&&(ge[pe]=ke[pe]);return k(O,ve,void 0,void 0,null,ge)},Ye.createRef=function(){return{current:null}},Ye.forwardRef=function(O){return{$$typeof:h,render:O}},Ye.isValidElement=R,Ye.lazy=function(O){return{$$typeof:y,_payload:{_status:-1,_result:O},_init:we}},Ye.memo=function(O,W){return{$$typeof:m,type:O,compare:W===void 0?null:W}},Ye.startTransition=function(O){var W=V.T,fe={};V.T=fe;try{var pe=O(),ge=V.S;ge!==null&&ge(fe,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(de,me)}catch(ve){me(ve)}finally{V.T=W}},Ye.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},Ye.use=function(O){return V.H.use(O)},Ye.useActionState=function(O,W,fe){return V.H.useActionState(O,W,fe)},Ye.useCallback=function(O,W){return V.H.useCallback(O,W)},Ye.useContext=function(O){return V.H.useContext(O)},Ye.useDebugValue=function(){},Ye.useDeferredValue=function(O,W){return V.H.useDeferredValue(O,W)},Ye.useEffect=function(O,W){return V.H.useEffect(O,W)},Ye.useId=function(){return V.H.useId()},Ye.useImperativeHandle=function(O,W,fe){return V.H.useImperativeHandle(O,W,fe)},Ye.useInsertionEffect=function(O,W){return V.H.useInsertionEffect(O,W)},Ye.useLayoutEffect=function(O,W){return V.H.useLayoutEffect(O,W)},Ye.useMemo=function(O,W){return V.H.useMemo(O,W)},Ye.useOptimistic=function(O,W){return V.H.useOptimistic(O,W)},Ye.useReducer=function(O,W,fe){return V.H.useReducer(O,W,fe)},Ye.useRef=function(O){return V.H.useRef(O)},Ye.useState=function(O){return V.H.useState(O)},Ye.useSyncExternalStore=function(O,W,fe){return V.H.useSyncExternalStore(O,W,fe)},Ye.useTransition=function(){return V.H.useTransition()},Ye.version="19.0.0",Ye}var nw;function yy(){return nw||(nw=1,Wg.exports=oR()),Wg.exports}var j=yy();const Hi=rR(j);var Zg={exports:{}},Ou={},Jg={exports:{}},e0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iw;function lR(){return iw||(iw=1,function(n){function e(ae,we){var me=ae.length;ae.push(we);e:for(;0<me;){var de=me-1>>>1,O=ae[de];if(0<s(O,we))ae[de]=we,ae[me]=O,me=de;else break e}}function t(ae){return ae.length===0?null:ae[0]}function i(ae){if(ae.length===0)return null;var we=ae[0],me=ae.pop();if(me!==we){ae[0]=me;e:for(var de=0,O=ae.length,W=O>>>1;de<W;){var fe=2*(de+1)-1,pe=ae[fe],ge=fe+1,ve=ae[ge];if(0>s(pe,me))ge<O&&0>s(ve,pe)?(ae[de]=ve,ae[ge]=me,de=ge):(ae[de]=pe,ae[fe]=me,de=fe);else if(ge<O&&0>s(ve,me))ae[de]=ve,ae[ge]=me,de=ge;else break e}}return we}function s(ae,we){var me=ae.sortIndex-we.sortIndex;return me!==0?me:ae.id-we.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var d=[],m=[],y=1,_=null,b=3,T=!1,A=!1,U=!1,P=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function Q(ae){for(var we=t(m);we!==null;){if(we.callback===null)i(m);else if(we.startTime<=ae)i(m),we.sortIndex=we.expirationTime,e(d,we);else break;we=t(m)}}function ue(ae){if(U=!1,Q(ae),!A)if(t(d)!==null)A=!0,Be();else{var we=t(m);we!==null&&Ue(ue,we.startTime-ae)}}var V=!1,te=-1,k=5,I=-1;function R(){return!(n.unstable_now()-I<k)}function D(){if(V){var ae=n.unstable_now();I=ae;var we=!0;try{e:{A=!1,U&&(U=!1,B(te),te=-1),T=!0;var me=b;try{t:{for(Q(ae),_=t(d);_!==null&&!(_.expirationTime>ae&&R());){var de=_.callback;if(typeof de=="function"){_.callback=null,b=_.priorityLevel;var O=de(_.expirationTime<=ae);if(ae=n.unstable_now(),typeof O=="function"){_.callback=O,Q(ae),we=!0;break t}_===t(d)&&i(d),Q(ae)}else i(d);_=t(d)}if(_!==null)we=!0;else{var W=t(m);W!==null&&Ue(ue,W.startTime-ae),we=!1}}break e}finally{_=null,b=me,T=!1}we=void 0}}finally{we?L():V=!1}}}var L;if(typeof G=="function")L=function(){G(D)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,N=H.port2;H.port1.onmessage=D,L=function(){N.postMessage(null)}}else L=function(){P(D,0)};function Be(){V||(V=!0,L())}function Ue(ae,we){te=P(function(){ae(n.unstable_now())},we)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ae){ae.callback=null},n.unstable_continueExecution=function(){A||T||(A=!0,Be())},n.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<ae?Math.floor(1e3/ae):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(ae){switch(b){case 1:case 2:case 3:var we=3;break;default:we=b}var me=b;b=we;try{return ae()}finally{b=me}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ae,we){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var me=b;b=ae;try{return we()}finally{b=me}},n.unstable_scheduleCallback=function(ae,we,me){var de=n.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?de+me:de):me=de,ae){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=me+O,ae={id:y++,callback:we,priorityLevel:ae,startTime:me,expirationTime:O,sortIndex:-1},me>de?(ae.sortIndex=me,e(m,ae),t(d)===null&&ae===t(m)&&(U?(B(te),te=-1):U=!0,Ue(ue,me-de))):(ae.sortIndex=O,e(d,ae),A||T||(A=!0,Be())),ae},n.unstable_shouldYield=R,n.unstable_wrapCallback=function(ae){var we=b;return function(){var me=b;b=we;try{return ae.apply(this,arguments)}finally{b=me}}}}(e0)),e0}var rw;function cR(){return rw||(rw=1,Jg.exports=lR()),Jg.exports}var t0={exports:{}},jn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sw;function uR(){if(sw)return jn;sw=1;var n=yy();function e(d){var m="https://react.dev/errors/"+d;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)m+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+d+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(d,m,y){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:_==null?null:""+_,children:d,containerInfo:m,implementation:y}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,m){if(d==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return jn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,jn.createPortal=function(d,m){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return o(d,m,null,y)},jn.flushSync=function(d){var m=c.T,y=i.p;try{if(c.T=null,i.p=2,d)return d()}finally{c.T=m,i.p=y,i.d.f()}},jn.preconnect=function(d,m){typeof d=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,i.d.C(d,m))},jn.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},jn.preinit=function(d,m){if(typeof d=="string"&&m&&typeof m.as=="string"){var y=m.as,_=h(y,m.crossOrigin),b=typeof m.integrity=="string"?m.integrity:void 0,T=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;y==="style"?i.d.S(d,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:_,integrity:b,fetchPriority:T}):y==="script"&&i.d.X(d,{crossOrigin:_,integrity:b,fetchPriority:T,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},jn.preinitModule=function(d,m){if(typeof d=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var y=h(m.as,m.crossOrigin);i.d.M(d,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&i.d.M(d)},jn.preload=function(d,m){if(typeof d=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var y=m.as,_=h(y,m.crossOrigin);i.d.L(d,y,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},jn.preloadModule=function(d,m){if(typeof d=="string")if(m){var y=h(m.as,m.crossOrigin);i.d.m(d,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else i.d.m(d)},jn.requestFormReset=function(d){i.d.r(d)},jn.unstable_batchedUpdates=function(d,m){return d(m)},jn.useFormState=function(d,m,y){return c.H.useFormState(d,m,y)},jn.useFormStatus=function(){return c.H.useHostTransitionStatus()},jn.version="19.0.0",jn}var aw;function KE(){if(aw)return t0.exports;aw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),t0.exports=uR(),t0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ow;function hR(){if(ow)return Ou;ow=1;var n=cR(),e=yy(),t=KE();function i(r){var a="https://react.dev/errors/"+r;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}var o=Symbol.for("react.element"),c=Symbol.for("react.transitional.element"),h=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),b=Symbol.for("react.consumer"),T=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),Q=Symbol.for("react.offscreen"),ue=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function te(r){return r===null||typeof r!="object"?null:(r=V&&r[V]||r["@@iterator"],typeof r=="function"?r:null)}var k=Symbol.for("react.client.reference");function I(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===k?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case d:return"Fragment";case h:return"Portal";case y:return"Profiler";case m:return"StrictMode";case U:return"Suspense";case P:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case T:return(r.displayName||"Context")+".Provider";case b:return(r._context.displayName||"Context")+".Consumer";case A:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case B:return a=r.displayName||null,a!==null?a:I(r.type)||"Memo";case G:a=r._payload,r=r._init;try{return I(r(a))}catch{}}return null}var R=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=Object.assign,L,H;function N(r){if(L===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);L=a&&a[1]||"",H=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+L+r+H}var Be=!1;function Ue(r,a){if(!r||Be)return"";Be=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(a){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(ie){var J=ie}Reflect.construct(r,[],he)}else{try{he.call()}catch(ie){J=ie}r.call(he.prototype)}}else{try{throw Error()}catch(ie){J=ie}(he=r())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(ie){if(ie&&J&&typeof ie.stack=="string")return[ie.stack,J.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),E=g[0],S=g[1];if(E&&S){var M=E.split(`
`),q=S.split(`
`);for(p=u=0;u<M.length&&!M[u].includes("DetermineComponentFrameRoot");)u++;for(;p<q.length&&!q[p].includes("DetermineComponentFrameRoot");)p++;if(u===M.length||p===q.length)for(u=M.length-1,p=q.length-1;1<=u&&0<=p&&M[u]!==q[p];)p--;for(;1<=u&&0<=p;u--,p--)if(M[u]!==q[p]){if(u!==1||p!==1)do if(u--,p--,0>p||M[u]!==q[p]){var re=`
`+M[u].replace(" at new "," at ");return r.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",r.displayName)),re}while(1<=u&&0<=p);break}}}finally{Be=!1,Error.prepareStackTrace=l}return(l=r?r.displayName||r.name:"")?N(l):""}function ae(r){switch(r.tag){case 26:case 27:case 5:return N(r.type);case 16:return N("Lazy");case 13:return N("Suspense");case 19:return N("SuspenseList");case 0:case 15:return r=Ue(r.type,!1),r;case 11:return r=Ue(r.type.render,!1),r;case 1:return r=Ue(r.type,!0),r;default:return""}}function we(r){try{var a="";do a+=ae(r),r=r.return;while(r);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function me(r){var a=r,l=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&4098)!==0&&(l=a.return),r=a.return;while(r)}return a.tag===3?l:null}function de(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function O(r){if(me(r)!==r)throw Error(i(188))}function W(r){var a=r.alternate;if(!a){if(a=me(r),a===null)throw Error(i(188));return a!==r?null:r}for(var l=r,u=a;;){var p=l.return;if(p===null)break;var g=p.alternate;if(g===null){if(u=p.return,u!==null){l=u;continue}break}if(p.child===g.child){for(g=p.child;g;){if(g===l)return O(p),r;if(g===u)return O(p),a;g=g.sibling}throw Error(i(188))}if(l.return!==u.return)l=p,u=g;else{for(var E=!1,S=p.child;S;){if(S===l){E=!0,l=p,u=g;break}if(S===u){E=!0,u=p,l=g;break}S=S.sibling}if(!E){for(S=g.child;S;){if(S===l){E=!0,l=g,u=p;break}if(S===u){E=!0,u=g,l=p;break}S=S.sibling}if(!E)throw Error(i(189))}}if(l.alternate!==u)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?r:a}function fe(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r;for(r=r.child;r!==null;){if(a=fe(r),a!==null)return a;r=r.sibling}return null}var pe=Array.isArray,ge=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},ke=[],Ke=-1;function Xe(r){return{current:r}}function He(r){0>Ke||(r.current=ke[Ke],ke[Ke]=null,Ke--)}function nt(r,a){Ke++,ke[Ke]=r.current,r.current=a}var mn=Xe(null),Xi=Xe(null),Zt=Xe(null),gr=Xe(null);function yr(r,a){switch(nt(Zt,a),nt(Xi,r),nt(mn,null),r=a.nodeType,r){case 9:case 11:a=(a=a.documentElement)&&(a=a.namespaceURI)?Rb(a):0;break;default:if(r=r===8?a.parentNode:a,a=r.tagName,r=r.namespaceURI)r=Rb(r),a=Ib(r,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}He(mn),nt(mn,a)}function Ei(){He(mn),He(Xi),He(Zt)}function Ha(r){r.memoizedState!==null&&nt(gr,r);var a=mn.current,l=Ib(a,r.type);a!==l&&(nt(Xi,r),nt(mn,l))}function Ps(r){Xi.current===r&&(He(mn),He(Xi)),gr.current===r&&(He(gr),Au._currentValue=ve)}var Ls=Object.prototype.hasOwnProperty,Br=n.unstable_scheduleCallback,Zn=n.unstable_cancelCallback,Hr=n.unstable_shouldYield,Us=n.unstable_requestPaint,pn=n.unstable_now,li=n.unstable_getCurrentPriorityLevel,At=n.unstable_ImmediatePriority,Gt=n.unstable_UserBlockingPriority,ci=n.unstable_NormalPriority,Wo=n.unstable_LowPriority,Jn=n.unstable_IdlePriority,Zo=n.log,vr=n.unstable_setDisableYieldValue,Qi=null,gn=null;function Vs(r){if(gn&&typeof gn.onCommitFiberRoot=="function")try{gn.onCommitFiberRoot(Qi,r,void 0,(r.current.flags&128)===128)}catch{}}function qn(r){if(typeof Zo=="function"&&vr(r),gn&&typeof gn.setStrictMode=="function")try{gn.setStrictMode(Qi,r)}catch{}}var yn=Math.clz32?Math.clz32:qa,qr=Math.log,Jo=Math.LN2;function qa(r){return r>>>=0,r===0?32:31-(qr(r)/Jo|0)|0}var Ti=128,Wi=4194304;function Vn(r){var a=r&42;if(a!==0)return a;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function xn(r,a){var l=r.pendingLanes;if(l===0)return 0;var u=0,p=r.suspendedLanes,g=r.pingedLanes,E=r.warmLanes;r=r.finishedLanes!==0;var S=l&134217727;return S!==0?(l=S&~p,l!==0?u=Vn(l):(g&=S,g!==0?u=Vn(g):r||(E=S&~E,E!==0&&(u=Vn(E))))):(S=l&~p,S!==0?u=Vn(S):g!==0?u=Vn(g):r||(E=l&~E,E!==0&&(u=Vn(E)))),u===0?0:a!==0&&a!==u&&(a&p)===0&&(p=u&-u,E=a&-a,p>=E||p===32&&(E&4194176)!==0)?a:u}function _r(r,a){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&a)===0}function $s(r,a){switch(r){case 1:case 2:case 4:case 8:return a+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $(){var r=Ti;return Ti<<=1,(Ti&4194176)===0&&(Ti=128),r}function K(){var r=Wi;return Wi<<=1,(Wi&62914560)===0&&(Wi=4194304),r}function ee(r){for(var a=[],l=0;31>l;l++)a.push(r);return a}function se(r,a){r.pendingLanes|=a,a!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function _e(r,a,l,u,p,g){var E=r.pendingLanes;r.pendingLanes=l,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=l,r.entangledLanes&=l,r.errorRecoveryDisabledLanes&=l,r.shellSuspendCounter=0;var S=r.entanglements,M=r.expirationTimes,q=r.hiddenUpdates;for(l=E&~l;0<l;){var re=31-yn(l),he=1<<re;S[re]=0,M[re]=-1;var J=q[re];if(J!==null)for(q[re]=null,re=0;re<J.length;re++){var ie=J[re];ie!==null&&(ie.lane&=-536870913)}l&=~he}u!==0&&Ne(r,u,0),g!==0&&p===0&&r.tag!==0&&(r.suspendedLanes|=g&~(E&~a))}function Ne(r,a,l){r.pendingLanes|=a,r.suspendedLanes&=~a;var u=31-yn(a);r.entangledLanes|=a,r.entanglements[u]=r.entanglements[u]|1073741824|l&4194218}function Me(r,a){var l=r.entangledLanes|=a;for(r=r.entanglements;l;){var u=31-yn(l),p=1<<u;p&a|r[u]&a&&(r[u]|=a),l&=~p}}function Ie(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Oe(){var r=ge.p;return r!==0?r:(r=window.event,r===void 0?32:Kb(r.type))}function be(r,a){var l=ge.p;try{return ge.p=r,a()}finally{ge.p=l}}var Ae=Math.random().toString(36).slice(2),Se="__reactFiber$"+Ae,Ve="__reactProps$"+Ae,gt="__reactContainer$"+Ae,Pt="__reactEvents$"+Ae,Rt="__reactListeners$"+Ae,pt="__reactHandles$"+Ae,Mt="__reactResources$"+Ae,Gn="__reactMarker$"+Ae;function ui(r){delete r[Se],delete r[Ve],delete r[Pt],delete r[Rt],delete r[pt]}function Kt(r){var a=r[Se];if(a)return a;for(var l=r.parentNode;l;){if(a=l[gt]||l[Se]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(r=kb(r);r!==null;){if(l=r[Se])return l;r=kb(r)}return a}r=l,l=r.parentNode}return null}function Jt(r){if(r=r[Se]||r[gt]){var a=r.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return r}return null}function Ai(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r.stateNode;throw Error(i(33))}function ei(r){var a=r[Mt];return a||(a=r[Mt]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function bt(r){r[Gn]=!0}var br=new Set,Zi={};function Qe(r,a){wt(r,a),wt(r+"Capture",a)}function wt(r,a){for(Zi[r]=a,r=0;r<a.length;r++)br.add(a[r])}var vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ot={},Si={};function Ga(r){return Ls.call(Si,r)?!0:Ls.call(Ot,r)?!1:Gr.test(r)?Si[r]=!0:(Ot[r]=!0,!1)}function wr(r,a,l){if(Ga(a))if(l===null)r.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":r.removeAttribute(a);return;case"boolean":var u=a.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(a);return}}r.setAttribute(a,""+l)}}function js(r,a,l){if(l===null)r.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttribute(a,""+l)}}function Ci(r,a,l,u){if(u===null)r.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttributeNS(a,l,""+u)}}function Kn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Hh(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function tp(r){var a=Hh(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,a),u=""+r[a];if(!r.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,g=l.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return p.call(this)},set:function(E){u=""+E,g.call(this,E)}}),Object.defineProperty(r,a,{enumerable:l.enumerable}),{getValue:function(){return u},setValue:function(E){u=""+E},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function Ka(r){r._valueTracker||(r._valueTracker=tp(r))}function Nc(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var l=a.getValue(),u="";return r&&(u=Hh(r)?r.checked?"true":"false":r.value),r=u,r!==l?(a.setValue(r),!0):!1}function el(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Kr=/[\n"\\]/g;function Ft(r){return r.replace(Kr,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function zs(r,a,l,u,p,g,E,S){r.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?r.type=E:r.removeAttribute("type"),a!=null?E==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+Kn(a)):r.value!==""+Kn(a)&&(r.value=""+Kn(a)):E!=="submit"&&E!=="reset"||r.removeAttribute("value"),a!=null?tl(r,E,Kn(a)):l!=null?tl(r,E,Kn(l)):u!=null&&r.removeAttribute("value"),p==null&&g!=null&&(r.defaultChecked=!!g),p!=null&&(r.checked=p&&typeof p!="function"&&typeof p!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?r.name=""+Kn(S):r.removeAttribute("name")}function Ya(r,a,l,u,p,g,E,S){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(r.type=g),a!=null||l!=null){if(!(g!=="submit"&&g!=="reset"||a!=null))return;l=l!=null?""+Kn(l):"",a=a!=null?""+Kn(a):l,S||a===r.value||(r.value=a),r.defaultValue=a}u=u??p,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=S?r.checked:!!u,r.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(r.name=E)}function tl(r,a,l){a==="number"&&el(r.ownerDocument)===r||r.defaultValue===""+l||(r.defaultValue=""+l)}function yt(r,a,l,u){if(r=r.options,a){a={};for(var p=0;p<l.length;p++)a["$"+l[p]]=!0;for(l=0;l<r.length;l++)p=a.hasOwnProperty("$"+r[l].value),r[l].selected!==p&&(r[l].selected=p),p&&u&&(r[l].defaultSelected=!0)}else{for(l=""+Kn(l),a=null,p=0;p<r.length;p++){if(r[p].value===l){r[p].selected=!0,u&&(r[p].defaultSelected=!0);return}a!==null||r[p].disabled||(a=r[p])}a!==null&&(a.selected=!0)}}function Xa(r,a,l){if(a!=null&&(a=""+Kn(a),a!==r.value&&(r.value=a),l==null)){r.defaultValue!==a&&(r.defaultValue=a);return}r.defaultValue=l!=null?""+Kn(l):""}function Fs(r,a,l,u){if(a==null){if(u!=null){if(l!=null)throw Error(i(92));if(pe(u)){if(1<u.length)throw Error(i(93));u=u[0]}l=u}l==null&&(l=""),a=l}l=Kn(a),r.defaultValue=l,u=r.textContent,u===l&&u!==""&&u!==null&&(r.value=u)}function xi(r,a){if(a){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=a;return}}r.textContent=a}var np=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Pc(r,a,l){var u=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?r.setProperty(a,""):a==="float"?r.cssFloat="":r[a]="":u?r.setProperty(a,l):typeof l!="number"||l===0||np.has(a)?a==="float"?r.cssFloat=l:r[a]=(""+l).trim():r[a]=l+"px"}function qh(r,a,l){if(a!=null&&typeof a!="object")throw Error(i(62));if(r=r.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||a!=null&&a.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var p in a)u=a[p],a.hasOwnProperty(p)&&l[p]!==u&&Pc(r,p,u)}else for(var g in a)a.hasOwnProperty(g)&&Pc(r,g,a[g])}function Lc(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ip=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),rp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Er(r){return rp.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var Ri=null;function nl(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Yr=null,Xr=null;function Qr(r){var a=Jt(r);if(a&&(r=a.stateNode)){var l=r[Ve]||null;e:switch(r=a.stateNode,a.type){case"input":if(zs(r,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Ft(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var u=l[a];if(u!==r&&u.form===r.form){var p=u[Ve]||null;if(!p)throw Error(i(90));zs(u,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(a=0;a<l.length;a++)u=l[a],u.form===r.form&&Nc(u)}break e;case"textarea":Xa(r,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&yt(r,!!l.multiple,a,!1)}}}var Uc=!1;function Gh(r,a,l){if(Uc)return r(a,l);Uc=!0;try{var u=r(a);return u}finally{if(Uc=!1,(Yr!==null||Xr!==null)&&(Ud(),Yr&&(a=Yr,r=Xr,Xr=Yr=null,Qr(a),r)))for(a=0;a<r.length;a++)Qr(r[a])}}function Qa(r,a){var l=r.stateNode;if(l===null)return null;var u=l[Ve]||null;if(u===null)return null;l=u[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(i(231,a,typeof l));return l}var Ii=!1;if(vn)try{var Wa={};Object.defineProperty(Wa,"passive",{get:function(){Ii=!0}}),window.addEventListener("test",Wa,Wa),window.removeEventListener("test",Wa,Wa)}catch{Ii=!1}var Tr=null,Bs=null,Wr=null;function Vc(){if(Wr)return Wr;var r,a=Bs,l=a.length,u,p="value"in Tr?Tr.value:Tr.textContent,g=p.length;for(r=0;r<l&&a[r]===p[r];r++);var E=l-r;for(u=1;u<=E&&a[l-u]===p[g-u];u++);return Wr=p.slice(r,1<u?1-u:void 0)}function Ar(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function Sr(){return!0}function $c(){return!1}function _n(r){function a(l,u,p,g,E){this._reactName=l,this._targetInst=p,this.type=u,this.nativeEvent=g,this.target=E,this.currentTarget=null;for(var S in r)r.hasOwnProperty(S)&&(l=r[S],this[S]=l?l(g):g[S]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Sr:$c,this.isPropagationStopped=$c,this}return D(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Sr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Sr)},persist:function(){},isPersistent:Sr}),a}var Et={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},il=_n(Et),Za=D({},Et,{view:0,detail:0}),Kh=_n(Za),rl,sl,Cr,Ja=D({},Za,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:no,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Cr&&(Cr&&r.type==="mousemove"?(rl=r.screenX-Cr.screenX,sl=r.screenY-Cr.screenY):sl=rl=0,Cr=r),rl)},movementY:function(r){return"movementY"in r?r.movementY:sl}}),Oi=_n(Ja),Yh=D({},Ja,{dataTransfer:0}),sp=_n(Yh),eo=D({},Za,{relatedTarget:0}),al=_n(eo),jc=D({},Et,{animationName:0,elapsedTime:0,pseudoElement:0}),ol=_n(jc),Xh=D({},Et,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),ll=_n(Xh),ap=D({},Et,{data:0}),zc=_n(ap),to={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fc(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=Wh[r])?!!a[r]:!1}function no(){return Fc}var Zh=D({},Za,{key:function(r){if(r.key){var a=to[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=Ar(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Qh[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:no,charCode:function(r){return r.type==="keypress"?Ar(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ar(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),cl=_n(Zh),Jh=D({},Ja,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bc=_n(Jh),Zr=D({},Za,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:no}),ed=_n(Zr),td=D({},Et,{propertyName:0,elapsedTime:0,pseudoElement:0}),nd=_n(td),id=D({},Ja,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),ul=_n(id),Yn=D({},Et,{newState:0,oldState:0}),rd=_n(Yn),sd=[9,13,27,32],xr=vn&&"CompositionEvent"in window,f=null;vn&&"documentMode"in document&&(f=document.documentMode);var v=vn&&"TextEvent"in window&&!f,w=vn&&(!xr||f&&8<f&&11>=f),x=" ",X=!1;function ne(r,a){switch(r){case"keyup":return sd.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ye(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ut=!1;function on(r,a){switch(r){case"compositionend":return ye(a);case"keypress":return a.which!==32?null:(X=!0,x);case"textInput":return r=a.data,r===x&&X?null:r;default:return null}}function ht(r,a){if(ut)return r==="compositionend"||!xr&&ne(r,a)?(r=Vc(),Wr=Bs=Tr=null,ut=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return w&&a.locale!=="ko"?null:a.data;default:return null}}var bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ln(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!bn[r.type]:a==="textarea"}function Jr(r,a,l,u){Yr?Xr?Xr.push(u):Xr=[u]:Yr=u,a=Fd(a,"onChange"),0<a.length&&(l=new il("onChange","change",null,l,u),r.push({event:l,listeners:a}))}var Rn=null,Rr=null;function Hc(r){Tb(r,0)}function ad(r){var a=Ai(r);if(Nc(a))return r}function Zv(r,a){if(r==="change")return a}var Jv=!1;if(vn){var op;if(vn){var lp="oninput"in document;if(!lp){var e_=document.createElement("div");e_.setAttribute("oninput","return;"),lp=typeof e_.oninput=="function"}op=lp}else op=!1;Jv=op&&(!document.documentMode||9<document.documentMode)}function t_(){Rn&&(Rn.detachEvent("onpropertychange",n_),Rr=Rn=null)}function n_(r){if(r.propertyName==="value"&&ad(Rr)){var a=[];Jr(a,Rr,r,nl(r)),Gh(Hc,a)}}function Ox(r,a,l){r==="focusin"?(t_(),Rn=a,Rr=l,Rn.attachEvent("onpropertychange",n_)):r==="focusout"&&t_()}function Dx(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return ad(Rr)}function kx(r,a){if(r==="click")return ad(a)}function Mx(r,a){if(r==="input"||r==="change")return ad(a)}function Nx(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var hi=typeof Object.is=="function"?Object.is:Nx;function qc(r,a){if(hi(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var l=Object.keys(r),u=Object.keys(a);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var p=l[u];if(!Ls.call(a,p)||!hi(r[p],a[p]))return!1}return!0}function i_(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function r_(r,a){var l=i_(r);r=0;for(var u;l;){if(l.nodeType===3){if(u=r+l.textContent.length,r<=a&&u>=a)return{node:l,offset:a-r};r=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=i_(l)}}function s_(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?s_(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function a_(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var a=el(r.document);a instanceof r.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)r=a.contentWindow;else break;a=el(r.document)}return a}function cp(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}function Px(r,a){var l=a_(a);a=r.focusedElem;var u=r.selectionRange;if(l!==a&&a&&a.ownerDocument&&s_(a.ownerDocument.documentElement,a)){if(u!==null&&cp(a)){if(r=u.start,l=u.end,l===void 0&&(l=r),"selectionStart"in a)a.selectionStart=r,a.selectionEnd=Math.min(l,a.value.length);else if(l=(r=a.ownerDocument||document)&&r.defaultView||window,l.getSelection){l=l.getSelection();var p=a.textContent.length,g=Math.min(u.start,p);u=u.end===void 0?g:Math.min(u.end,p),!l.extend&&g>u&&(p=u,u=g,g=p),p=r_(a,g);var E=r_(a,u);p&&E&&(l.rangeCount!==1||l.anchorNode!==p.node||l.anchorOffset!==p.offset||l.focusNode!==E.node||l.focusOffset!==E.offset)&&(r=r.createRange(),r.setStart(p.node,p.offset),l.removeAllRanges(),g>u?(l.addRange(r),l.extend(E.node,E.offset)):(r.setEnd(E.node,E.offset),l.addRange(r)))}}for(r=[],l=a;l=l.parentNode;)l.nodeType===1&&r.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<r.length;a++)l=r[a],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var Lx=vn&&"documentMode"in document&&11>=document.documentMode,hl=null,up=null,Gc=null,hp=!1;function o_(r,a,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;hp||hl==null||hl!==el(u)||(u=hl,"selectionStart"in u&&cp(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Gc&&qc(Gc,u)||(Gc=u,u=Fd(up,"onSelect"),0<u.length&&(a=new il("onSelect","select",null,a,l),r.push({event:a,listeners:u}),a.target=hl)))}function io(r,a){var l={};return l[r.toLowerCase()]=a.toLowerCase(),l["Webkit"+r]="webkit"+a,l["Moz"+r]="moz"+a,l}var dl={animationend:io("Animation","AnimationEnd"),animationiteration:io("Animation","AnimationIteration"),animationstart:io("Animation","AnimationStart"),transitionrun:io("Transition","TransitionRun"),transitionstart:io("Transition","TransitionStart"),transitioncancel:io("Transition","TransitionCancel"),transitionend:io("Transition","TransitionEnd")},dp={},l_={};vn&&(l_=document.createElement("div").style,"AnimationEvent"in window||(delete dl.animationend.animation,delete dl.animationiteration.animation,delete dl.animationstart.animation),"TransitionEvent"in window||delete dl.transitionend.transition);function ro(r){if(dp[r])return dp[r];if(!dl[r])return r;var a=dl[r],l;for(l in a)if(a.hasOwnProperty(l)&&l in l_)return dp[r]=a[l];return r}var c_=ro("animationend"),u_=ro("animationiteration"),h_=ro("animationstart"),Ux=ro("transitionrun"),Vx=ro("transitionstart"),$x=ro("transitioncancel"),d_=ro("transitionend"),f_=new Map,m_="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Ji(r,a){f_.set(r,a),Qe(a,[r])}var Di=[],fl=0,fp=0;function od(){for(var r=fl,a=fp=fl=0;a<r;){var l=Di[a];Di[a++]=null;var u=Di[a];Di[a++]=null;var p=Di[a];Di[a++]=null;var g=Di[a];if(Di[a++]=null,u!==null&&p!==null){var E=u.pending;E===null?p.next=p:(p.next=E.next,E.next=p),u.pending=p}g!==0&&p_(l,p,g)}}function ld(r,a,l,u){Di[fl++]=r,Di[fl++]=a,Di[fl++]=l,Di[fl++]=u,fp|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function mp(r,a,l,u){return ld(r,a,l,u),cd(r)}function Hs(r,a){return ld(r,null,null,a),cd(r)}function p_(r,a,l){r.lanes|=l;var u=r.alternate;u!==null&&(u.lanes|=l);for(var p=!1,g=r.return;g!==null;)g.childLanes|=l,u=g.alternate,u!==null&&(u.childLanes|=l),g.tag===22&&(r=g.stateNode,r===null||r._visibility&1||(p=!0)),r=g,g=g.return;p&&a!==null&&r.tag===3&&(g=r.stateNode,p=31-yn(l),g=g.hiddenUpdates,r=g[p],r===null?g[p]=[a]:r.push(a),a.lane=l|536870912)}function cd(r){if(50<yu)throw yu=0,bg=null,Error(i(185));for(var a=r.return;a!==null;)r=a,a=r.return;return r.tag===3?r.stateNode:null}var ml={},g_=new WeakMap;function ki(r,a){if(typeof r=="object"&&r!==null){var l=g_.get(r);return l!==void 0?l:(a={value:r,source:a,stack:we(a)},g_.set(r,a),a)}return{value:r,source:a,stack:we(a)}}var pl=[],gl=0,ud=null,hd=0,Mi=[],Ni=0,so=null,es=1,ts="";function ao(r,a){pl[gl++]=hd,pl[gl++]=ud,ud=r,hd=a}function y_(r,a,l){Mi[Ni++]=es,Mi[Ni++]=ts,Mi[Ni++]=so,so=r;var u=es;r=ts;var p=32-yn(u)-1;u&=~(1<<p),l+=1;var g=32-yn(a)+p;if(30<g){var E=p-p%5;g=(u&(1<<E)-1).toString(32),u>>=E,p-=E,es=1<<32-yn(a)+p|l<<p|u,ts=g+r}else es=1<<g|l<<p|u,ts=r}function pp(r){r.return!==null&&(ao(r,1),y_(r,1,0))}function gp(r){for(;r===ud;)ud=pl[--gl],pl[gl]=null,hd=pl[--gl],pl[gl]=null;for(;r===so;)so=Mi[--Ni],Mi[Ni]=null,ts=Mi[--Ni],Mi[Ni]=null,es=Mi[--Ni],Mi[Ni]=null}var Xn=null,In=null,vt=!1,er=null,Ir=!1,yp=Error(i(519));function oo(r){var a=Error(i(418,""));throw Xc(ki(a,r)),yp}function v_(r){var a=r.stateNode,l=r.type,u=r.memoizedProps;switch(a[Se]=r,a[Ve]=u,l){case"dialog":ot("cancel",a),ot("close",a);break;case"iframe":case"object":case"embed":ot("load",a);break;case"video":case"audio":for(l=0;l<_u.length;l++)ot(_u[l],a);break;case"source":ot("error",a);break;case"img":case"image":case"link":ot("error",a),ot("load",a);break;case"details":ot("toggle",a);break;case"input":ot("invalid",a),Ya(a,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Ka(a);break;case"select":ot("invalid",a);break;case"textarea":ot("invalid",a),Fs(a,u.value,u.defaultValue,u.children),Ka(a)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||u.suppressHydrationWarning===!0||xb(a.textContent,l)?(u.popover!=null&&(ot("beforetoggle",a),ot("toggle",a)),u.onScroll!=null&&ot("scroll",a),u.onScrollEnd!=null&&ot("scrollend",a),u.onClick!=null&&(a.onclick=Bd),a=!0):a=!1,a||oo(r)}function __(r){for(Xn=r.return;Xn;)switch(Xn.tag){case 3:case 27:Ir=!0;return;case 5:case 13:Ir=!1;return;default:Xn=Xn.return}}function Kc(r){if(r!==Xn)return!1;if(!vt)return __(r),vt=!0,!1;var a=!1,l;if((l=r.tag!==3&&r.tag!==27)&&((l=r.tag===5)&&(l=r.type,l=!(l!=="form"&&l!=="button")||Ug(r.type,r.memoizedProps)),l=!l),l&&(a=!0),a&&In&&oo(r),__(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,a=0;r;){if(r.nodeType===8)if(l=r.data,l==="/$"){if(a===0){In=nr(r.nextSibling);break e}a--}else l!=="$"&&l!=="$!"&&l!=="$?"||a++;r=r.nextSibling}In=null}}else In=Xn?nr(r.stateNode.nextSibling):null;return!0}function Yc(){In=Xn=null,vt=!1}function Xc(r){er===null?er=[r]:er.push(r)}var Qc=Error(i(460)),b_=Error(i(474)),vp={then:function(){}};function w_(r){return r=r.status,r==="fulfilled"||r==="rejected"}function dd(){}function E_(r,a,l){switch(l=r[l],l===void 0?r.push(a):l!==a&&(a.then(dd,dd),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,r===Qc?Error(i(483)):r;default:if(typeof a.status=="string")a.then(dd,dd);else{if(r=Dt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=a,r.status="pending",r.then(function(u){if(a.status==="pending"){var p=a;p.status="fulfilled",p.value=u}},function(u){if(a.status==="pending"){var p=a;p.status="rejected",p.reason=u}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,r===Qc?Error(i(483)):r}throw Wc=a,Qc}}var Wc=null;function T_(){if(Wc===null)throw Error(i(459));var r=Wc;return Wc=null,r}var yl=null,Zc=0;function fd(r){var a=Zc;return Zc+=1,yl===null&&(yl=[]),E_(yl,r,a)}function Jc(r,a){a=a.props.ref,r.ref=a!==void 0?a:null}function md(r,a){throw a.$$typeof===o?Error(i(525)):(r=Object.prototype.toString.call(a),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r)))}function A_(r){var a=r._init;return a(r._payload)}function S_(r){function a(Y,F){if(r){var Z=Y.deletions;Z===null?(Y.deletions=[F],Y.flags|=16):Z.push(F)}}function l(Y,F){if(!r)return null;for(;F!==null;)a(Y,F),F=F.sibling;return null}function u(Y){for(var F=new Map;Y!==null;)Y.key!==null?F.set(Y.key,Y):F.set(Y.index,Y),Y=Y.sibling;return F}function p(Y,F){return Y=na(Y,F),Y.index=0,Y.sibling=null,Y}function g(Y,F,Z){return Y.index=Z,r?(Z=Y.alternate,Z!==null?(Z=Z.index,Z<F?(Y.flags|=33554434,F):Z):(Y.flags|=33554434,F)):(Y.flags|=1048576,F)}function E(Y){return r&&Y.alternate===null&&(Y.flags|=33554434),Y}function S(Y,F,Z,oe){return F===null||F.tag!==6?(F=dg(Z,Y.mode,oe),F.return=Y,F):(F=p(F,Z),F.return=Y,F)}function M(Y,F,Z,oe){var Ce=Z.type;return Ce===d?re(Y,F,Z.props.children,oe,Z.key):F!==null&&(F.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===G&&A_(Ce)===F.type)?(F=p(F,Z.props),Jc(F,Z),F.return=Y,F):(F=kd(Z.type,Z.key,Z.props,null,Y.mode,oe),Jc(F,Z),F.return=Y,F)}function q(Y,F,Z,oe){return F===null||F.tag!==4||F.stateNode.containerInfo!==Z.containerInfo||F.stateNode.implementation!==Z.implementation?(F=fg(Z,Y.mode,oe),F.return=Y,F):(F=p(F,Z.children||[]),F.return=Y,F)}function re(Y,F,Z,oe,Ce){return F===null||F.tag!==7?(F=vo(Z,Y.mode,oe,Ce),F.return=Y,F):(F=p(F,Z),F.return=Y,F)}function he(Y,F,Z){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=dg(""+F,Y.mode,Z),F.return=Y,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case c:return Z=kd(F.type,F.key,F.props,null,Y.mode,Z),Jc(Z,F),Z.return=Y,Z;case h:return F=fg(F,Y.mode,Z),F.return=Y,F;case G:var oe=F._init;return F=oe(F._payload),he(Y,F,Z)}if(pe(F)||te(F))return F=vo(F,Y.mode,Z,null),F.return=Y,F;if(typeof F.then=="function")return he(Y,fd(F),Z);if(F.$$typeof===T)return he(Y,Id(Y,F),Z);md(Y,F)}return null}function J(Y,F,Z,oe){var Ce=F!==null?F.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Ce!==null?null:S(Y,F,""+Z,oe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case c:return Z.key===Ce?M(Y,F,Z,oe):null;case h:return Z.key===Ce?q(Y,F,Z,oe):null;case G:return Ce=Z._init,Z=Ce(Z._payload),J(Y,F,Z,oe)}if(pe(Z)||te(Z))return Ce!==null?null:re(Y,F,Z,oe,null);if(typeof Z.then=="function")return J(Y,F,fd(Z),oe);if(Z.$$typeof===T)return J(Y,F,Id(Y,Z),oe);md(Y,Z)}return null}function ie(Y,F,Z,oe,Ce){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return Y=Y.get(Z)||null,S(F,Y,""+oe,Ce);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case c:return Y=Y.get(oe.key===null?Z:oe.key)||null,M(F,Y,oe,Ce);case h:return Y=Y.get(oe.key===null?Z:oe.key)||null,q(F,Y,oe,Ce);case G:var Je=oe._init;return oe=Je(oe._payload),ie(Y,F,Z,oe,Ce)}if(pe(oe)||te(oe))return Y=Y.get(Z)||null,re(F,Y,oe,Ce,null);if(typeof oe.then=="function")return ie(Y,F,Z,fd(oe),Ce);if(oe.$$typeof===T)return ie(Y,F,Z,Id(F,oe),Ce);md(F,oe)}return null}function De(Y,F,Z,oe){for(var Ce=null,Je=null,Pe=F,$e=F=0,Tn=null;Pe!==null&&$e<Z.length;$e++){Pe.index>$e?(Tn=Pe,Pe=null):Tn=Pe.sibling;var _t=J(Y,Pe,Z[$e],oe);if(_t===null){Pe===null&&(Pe=Tn);break}r&&Pe&&_t.alternate===null&&a(Y,Pe),F=g(_t,F,$e),Je===null?Ce=_t:Je.sibling=_t,Je=_t,Pe=Tn}if($e===Z.length)return l(Y,Pe),vt&&ao(Y,$e),Ce;if(Pe===null){for(;$e<Z.length;$e++)Pe=he(Y,Z[$e],oe),Pe!==null&&(F=g(Pe,F,$e),Je===null?Ce=Pe:Je.sibling=Pe,Je=Pe);return vt&&ao(Y,$e),Ce}for(Pe=u(Pe);$e<Z.length;$e++)Tn=ie(Pe,Y,$e,Z[$e],oe),Tn!==null&&(r&&Tn.alternate!==null&&Pe.delete(Tn.key===null?$e:Tn.key),F=g(Tn,F,$e),Je===null?Ce=Tn:Je.sibling=Tn,Je=Tn);return r&&Pe.forEach(function(ca){return a(Y,ca)}),vt&&ao(Y,$e),Ce}function qe(Y,F,Z,oe){if(Z==null)throw Error(i(151));for(var Ce=null,Je=null,Pe=F,$e=F=0,Tn=null,_t=Z.next();Pe!==null&&!_t.done;$e++,_t=Z.next()){Pe.index>$e?(Tn=Pe,Pe=null):Tn=Pe.sibling;var ca=J(Y,Pe,_t.value,oe);if(ca===null){Pe===null&&(Pe=Tn);break}r&&Pe&&ca.alternate===null&&a(Y,Pe),F=g(ca,F,$e),Je===null?Ce=ca:Je.sibling=ca,Je=ca,Pe=Tn}if(_t.done)return l(Y,Pe),vt&&ao(Y,$e),Ce;if(Pe===null){for(;!_t.done;$e++,_t=Z.next())_t=he(Y,_t.value,oe),_t!==null&&(F=g(_t,F,$e),Je===null?Ce=_t:Je.sibling=_t,Je=_t);return vt&&ao(Y,$e),Ce}for(Pe=u(Pe);!_t.done;$e++,_t=Z.next())_t=ie(Pe,Y,$e,_t.value,oe),_t!==null&&(r&&_t.alternate!==null&&Pe.delete(_t.key===null?$e:_t.key),F=g(_t,F,$e),Je===null?Ce=_t:Je.sibling=_t,Je=_t);return r&&Pe.forEach(function(J5){return a(Y,J5)}),vt&&ao(Y,$e),Ce}function qt(Y,F,Z,oe){if(typeof Z=="object"&&Z!==null&&Z.type===d&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case c:e:{for(var Ce=Z.key;F!==null;){if(F.key===Ce){if(Ce=Z.type,Ce===d){if(F.tag===7){l(Y,F.sibling),oe=p(F,Z.props.children),oe.return=Y,Y=oe;break e}}else if(F.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===G&&A_(Ce)===F.type){l(Y,F.sibling),oe=p(F,Z.props),Jc(oe,Z),oe.return=Y,Y=oe;break e}l(Y,F);break}else a(Y,F);F=F.sibling}Z.type===d?(oe=vo(Z.props.children,Y.mode,oe,Z.key),oe.return=Y,Y=oe):(oe=kd(Z.type,Z.key,Z.props,null,Y.mode,oe),Jc(oe,Z),oe.return=Y,Y=oe)}return E(Y);case h:e:{for(Ce=Z.key;F!==null;){if(F.key===Ce)if(F.tag===4&&F.stateNode.containerInfo===Z.containerInfo&&F.stateNode.implementation===Z.implementation){l(Y,F.sibling),oe=p(F,Z.children||[]),oe.return=Y,Y=oe;break e}else{l(Y,F);break}else a(Y,F);F=F.sibling}oe=fg(Z,Y.mode,oe),oe.return=Y,Y=oe}return E(Y);case G:return Ce=Z._init,Z=Ce(Z._payload),qt(Y,F,Z,oe)}if(pe(Z))return De(Y,F,Z,oe);if(te(Z)){if(Ce=te(Z),typeof Ce!="function")throw Error(i(150));return Z=Ce.call(Z),qe(Y,F,Z,oe)}if(typeof Z.then=="function")return qt(Y,F,fd(Z),oe);if(Z.$$typeof===T)return qt(Y,F,Id(Y,Z),oe);md(Y,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,F!==null&&F.tag===6?(l(Y,F.sibling),oe=p(F,Z),oe.return=Y,Y=oe):(l(Y,F),oe=dg(Z,Y.mode,oe),oe.return=Y,Y=oe),E(Y)):l(Y,F)}return function(Y,F,Z,oe){try{Zc=0;var Ce=qt(Y,F,Z,oe);return yl=null,Ce}catch(Pe){if(Pe===Qc)throw Pe;var Je=Vi(29,Pe,null,Y.mode);return Je.lanes=oe,Je.return=Y,Je}finally{}}}var lo=S_(!0),C_=S_(!1),vl=Xe(null),pd=Xe(0);function x_(r,a){r=ds,nt(pd,r),nt(vl,a),ds=r|a.baseLanes}function _p(){nt(pd,ds),nt(vl,vl.current)}function bp(){ds=pd.current,He(vl),He(pd)}var Pi=Xe(null),Or=null;function qs(r){var a=r.alternate;nt(cn,cn.current&1),nt(Pi,r),Or===null&&(a===null||vl.current!==null||a.memoizedState!==null)&&(Or=r)}function R_(r){if(r.tag===22){if(nt(cn,cn.current),nt(Pi,r),Or===null){var a=r.alternate;a!==null&&a.memoizedState!==null&&(Or=r)}}else Gs()}function Gs(){nt(cn,cn.current),nt(Pi,Pi.current)}function ns(r){He(Pi),Or===r&&(Or=null),He(cn)}var cn=Xe(0);function gd(r){for(var a=r;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var jx=typeof AbortController<"u"?AbortController:function(){var r=[],a=this.signal={aborted:!1,addEventListener:function(l,u){r.push(u)}};this.abort=function(){a.aborted=!0,r.forEach(function(l){return l()})}},zx=n.unstable_scheduleCallback,Fx=n.unstable_NormalPriority,un={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function wp(){return{controller:new jx,data:new Map,refCount:0}}function eu(r){r.refCount--,r.refCount===0&&zx(Fx,function(){r.controller.abort()})}var tu=null,Ep=0,_l=0,bl=null;function Bx(r,a){if(tu===null){var l=tu=[];Ep=0,_l=Rg(),bl={status:"pending",value:void 0,then:function(u){l.push(u)}}}return Ep++,a.then(I_,I_),a}function I_(){if(--Ep===0&&tu!==null){bl!==null&&(bl.status="fulfilled");var r=tu;tu=null,_l=0,bl=null;for(var a=0;a<r.length;a++)(0,r[a])()}}function Hx(r,a){var l=[],u={status:"pending",value:null,reason:null,then:function(p){l.push(p)}};return r.then(function(){u.status="fulfilled",u.value=a;for(var p=0;p<l.length;p++)(0,l[p])(a)},function(p){for(u.status="rejected",u.reason=p,p=0;p<l.length;p++)(0,l[p])(void 0)}),u}var O_=R.S;R.S=function(r,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&Bx(r,a),O_!==null&&O_(r,a)};var co=Xe(null);function Tp(){var r=co.current;return r!==null?r:Dt.pooledCache}function yd(r,a){a===null?nt(co,co.current):nt(co,a.pool)}function D_(){var r=Tp();return r===null?null:{parent:un._currentValue,pool:r}}var Ks=0,We=null,Ct=null,en=null,vd=!1,wl=!1,uo=!1,_d=0,nu=0,El=null,qx=0;function Yt(){throw Error(i(321))}function Ap(r,a){if(a===null)return!1;for(var l=0;l<a.length&&l<r.length;l++)if(!hi(r[l],a[l]))return!1;return!0}function Sp(r,a,l,u,p,g){return Ks=g,We=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,R.H=r===null||r.memoizedState===null?ho:Ys,uo=!1,g=l(u,p),uo=!1,wl&&(g=M_(a,l,u,p)),k_(r),g}function k_(r){R.H=Dr;var a=Ct!==null&&Ct.next!==null;if(Ks=0,en=Ct=We=null,vd=!1,nu=0,El=null,a)throw Error(i(300));r===null||wn||(r=r.dependencies,r!==null&&Rd(r)&&(wn=!0))}function M_(r,a,l,u){We=r;var p=0;do{if(wl&&(El=null),nu=0,wl=!1,25<=p)throw Error(i(301));if(p+=1,en=Ct=null,r.updateQueue!=null){var g=r.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}R.H=fo,g=a(l,u)}while(wl);return g}function Gx(){var r=R.H,a=r.useState()[0];return a=typeof a.then=="function"?iu(a):a,r=r.useState()[0],(Ct!==null?Ct.memoizedState:null)!==r&&(We.flags|=1024),a}function Cp(){var r=_d!==0;return _d=0,r}function xp(r,a,l){a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~l}function Rp(r){if(vd){for(r=r.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}vd=!1}Ks=0,en=Ct=We=null,wl=!1,nu=_d=0,El=null}function ti(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return en===null?We.memoizedState=en=r:en=en.next=r,en}function tn(){if(Ct===null){var r=We.alternate;r=r!==null?r.memoizedState:null}else r=Ct.next;var a=en===null?We.memoizedState:en.next;if(a!==null)en=a,Ct=r;else{if(r===null)throw We.alternate===null?Error(i(467)):Error(i(310));Ct=r,r={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},en===null?We.memoizedState=en=r:en=en.next=r}return en}var bd;bd=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function iu(r){var a=nu;return nu+=1,El===null&&(El=[]),r=E_(El,r,a),a=We,(en===null?a.memoizedState:en.next)===null&&(a=a.alternate,R.H=a===null||a.memoizedState===null?ho:Ys),r}function wd(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return iu(r);if(r.$$typeof===T)return $n(r)}throw Error(i(438,String(r)))}function Ip(r){var a=null,l=We.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var u=We.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(a={data:u.data.map(function(p){return p.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=bd(),We.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(r),u=0;u<r;u++)l[u]=ue;return a.index++,l}function is(r,a){return typeof a=="function"?a(r):a}function Ed(r){var a=tn();return Op(a,Ct,r)}function Op(r,a,l){var u=r.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=l;var p=r.baseQueue,g=u.pending;if(g!==null){if(p!==null){var E=p.next;p.next=g.next,g.next=E}a.baseQueue=p=g,u.pending=null}if(g=r.baseState,p===null)r.memoizedState=g;else{a=p.next;var S=E=null,M=null,q=a,re=!1;do{var he=q.lane&-536870913;if(he!==q.lane?(dt&he)===he:(Ks&he)===he){var J=q.revertLane;if(J===0)M!==null&&(M=M.next={lane:0,revertLane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),he===_l&&(re=!0);else if((Ks&J)===J){q=q.next,J===_l&&(re=!0);continue}else he={lane:0,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},M===null?(S=M=he,E=g):M=M.next=he,We.lanes|=J,ia|=J;he=q.action,uo&&l(g,he),g=q.hasEagerState?q.eagerState:l(g,he)}else J={lane:he,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},M===null?(S=M=J,E=g):M=M.next=J,We.lanes|=he,ia|=he;q=q.next}while(q!==null&&q!==a);if(M===null?E=g:M.next=S,!hi(g,r.memoizedState)&&(wn=!0,re&&(l=bl,l!==null)))throw l;r.memoizedState=g,r.baseState=E,r.baseQueue=M,u.lastRenderedState=g}return p===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Dp(r){var a=tn(),l=a.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=r;var u=l.dispatch,p=l.pending,g=a.memoizedState;if(p!==null){l.pending=null;var E=p=p.next;do g=r(g,E.action),E=E.next;while(E!==p);hi(g,a.memoizedState)||(wn=!0),a.memoizedState=g,a.baseQueue===null&&(a.baseState=g),l.lastRenderedState=g}return[g,u]}function N_(r,a,l){var u=We,p=tn(),g=vt;if(g){if(l===void 0)throw Error(i(407));l=l()}else l=a();var E=!hi((Ct||p).memoizedState,l);if(E&&(p.memoizedState=l,wn=!0),p=p.queue,Np(U_.bind(null,u,p,r),[r]),p.getSnapshot!==a||E||en!==null&&en.memoizedState.tag&1){if(u.flags|=2048,Tl(9,L_.bind(null,u,p,l,a),{destroy:void 0},null),Dt===null)throw Error(i(349));g||(Ks&60)!==0||P_(u,a,l)}return l}function P_(r,a,l){r.flags|=16384,r={getSnapshot:a,value:l},a=We.updateQueue,a===null?(a=bd(),We.updateQueue=a,a.stores=[r]):(l=a.stores,l===null?a.stores=[r]:l.push(r))}function L_(r,a,l,u){a.value=l,a.getSnapshot=u,V_(a)&&$_(r)}function U_(r,a,l){return l(function(){V_(a)&&$_(r)})}function V_(r){var a=r.getSnapshot;r=r.value;try{var l=a();return!hi(r,l)}catch{return!0}}function $_(r){var a=Hs(r,2);a!==null&&Qn(a,r,2)}function kp(r){var a=ti();if(typeof r=="function"){var l=r;if(r=l(),uo){qn(!0);try{l()}finally{qn(!1)}}}return a.memoizedState=a.baseState=r,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:r},a}function j_(r,a,l,u){return r.baseState=l,Op(r,Ct,typeof u=="function"?u:is)}function Kx(r,a,l,u,p){if(Sd(r))throw Error(i(485));if(r=a.action,r!==null){var g={payload:p,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){g.listeners.push(E)}};R.T!==null?l(!0):g.isTransition=!1,u(g),l=a.pending,l===null?(g.next=a.pending=g,z_(a,g)):(g.next=l.next,a.pending=l.next=g)}}function z_(r,a){var l=a.action,u=a.payload,p=r.state;if(a.isTransition){var g=R.T,E={};R.T=E;try{var S=l(p,u),M=R.S;M!==null&&M(E,S),F_(r,a,S)}catch(q){Mp(r,a,q)}finally{R.T=g}}else try{g=l(p,u),F_(r,a,g)}catch(q){Mp(r,a,q)}}function F_(r,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){B_(r,a,u)},function(u){return Mp(r,a,u)}):B_(r,a,l)}function B_(r,a,l){a.status="fulfilled",a.value=l,H_(a),r.state=l,a=r.pending,a!==null&&(l=a.next,l===a?r.pending=null:(l=l.next,a.next=l,z_(r,l)))}function Mp(r,a,l){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do a.status="rejected",a.reason=l,H_(a),a=a.next;while(a!==u)}r.action=null}function H_(r){r=r.listeners;for(var a=0;a<r.length;a++)(0,r[a])()}function q_(r,a){return a}function G_(r,a){if(vt){var l=Dt.formState;if(l!==null){e:{var u=We;if(vt){if(In){t:{for(var p=In,g=Ir;p.nodeType!==8;){if(!g){p=null;break t}if(p=nr(p.nextSibling),p===null){p=null;break t}}g=p.data,p=g==="F!"||g==="F"?p:null}if(p){In=nr(p.nextSibling),u=p.data==="F!";break e}}oo(u)}u=!1}u&&(a=l[0])}}return l=ti(),l.memoizedState=l.baseState=a,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:q_,lastRenderedState:a},l.queue=u,l=u1.bind(null,We,u),u.dispatch=l,u=kp(!1),g=$p.bind(null,We,!1,u.queue),u=ti(),p={state:a,dispatch:null,action:r,pending:null},u.queue=p,l=Kx.bind(null,We,p,g,l),p.dispatch=l,u.memoizedState=r,[a,l,!1]}function K_(r){var a=tn();return Y_(a,Ct,r)}function Y_(r,a,l){a=Op(r,a,q_)[0],r=Ed(is)[0],a=typeof a=="object"&&a!==null&&typeof a.then=="function"?iu(a):a;var u=tn(),p=u.queue,g=p.dispatch;return l!==u.memoizedState&&(We.flags|=2048,Tl(9,Yx.bind(null,p,l),{destroy:void 0},null)),[a,g,r]}function Yx(r,a){r.action=a}function X_(r){var a=tn(),l=Ct;if(l!==null)return Y_(a,l,r);tn(),a=a.memoizedState,l=tn();var u=l.queue.dispatch;return l.memoizedState=r,[a,u,!1]}function Tl(r,a,l,u){return r={tag:r,create:a,inst:l,deps:u,next:null},a=We.updateQueue,a===null&&(a=bd(),We.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=r.next=r:(u=l.next,l.next=r,r.next=u,a.lastEffect=r),r}function Q_(){return tn().memoizedState}function Td(r,a,l,u){var p=ti();We.flags|=r,p.memoizedState=Tl(1|a,l,{destroy:void 0},u===void 0?null:u)}function Ad(r,a,l,u){var p=tn();u=u===void 0?null:u;var g=p.memoizedState.inst;Ct!==null&&u!==null&&Ap(u,Ct.memoizedState.deps)?p.memoizedState=Tl(a,l,g,u):(We.flags|=r,p.memoizedState=Tl(1|a,l,g,u))}function W_(r,a){Td(8390656,8,r,a)}function Np(r,a){Ad(2048,8,r,a)}function Z_(r,a){return Ad(4,2,r,a)}function J_(r,a){return Ad(4,4,r,a)}function e1(r,a){if(typeof a=="function"){r=r();var l=a(r);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function t1(r,a,l){l=l!=null?l.concat([r]):null,Ad(4,4,e1.bind(null,a,r),l)}function Pp(){}function n1(r,a){var l=tn();a=a===void 0?null:a;var u=l.memoizedState;return a!==null&&Ap(a,u[1])?u[0]:(l.memoizedState=[r,a],r)}function i1(r,a){var l=tn();a=a===void 0?null:a;var u=l.memoizedState;if(a!==null&&Ap(a,u[1]))return u[0];if(u=r(),uo){qn(!0);try{r()}finally{qn(!1)}}return l.memoizedState=[u,a],u}function Lp(r,a,l){return l===void 0||(Ks&1073741824)!==0?r.memoizedState=a:(r.memoizedState=l,r=sb(),We.lanes|=r,ia|=r,l)}function r1(r,a,l,u){return hi(l,a)?l:vl.current!==null?(r=Lp(r,l,u),hi(r,a)||(wn=!0),r):(Ks&42)===0?(wn=!0,r.memoizedState=l):(r=sb(),We.lanes|=r,ia|=r,a)}function s1(r,a,l,u,p){var g=ge.p;ge.p=g!==0&&8>g?g:8;var E=R.T,S={};R.T=S,$p(r,!1,a,l);try{var M=p(),q=R.S;if(q!==null&&q(S,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var re=Hx(M,u);ru(r,a,re,pi(r))}else ru(r,a,u,pi(r))}catch(he){ru(r,a,{then:function(){},status:"rejected",reason:he},pi())}finally{ge.p=g,R.T=E}}function Xx(){}function Up(r,a,l,u){if(r.tag!==5)throw Error(i(476));var p=a1(r).queue;s1(r,p,a,ve,l===null?Xx:function(){return o1(r),l(u)})}function a1(r){var a=r.memoizedState;if(a!==null)return a;a={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:ve},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:l},next:null},r.memoizedState=a,r=r.alternate,r!==null&&(r.memoizedState=a),a}function o1(r){var a=a1(r).next.queue;ru(r,a,{},pi())}function Vp(){return $n(Au)}function l1(){return tn().memoizedState}function c1(){return tn().memoizedState}function Qx(r){for(var a=r.return;a!==null;){switch(a.tag){case 24:case 3:var l=pi();r=Ws(l);var u=Zs(a,r,l);u!==null&&(Qn(u,a,l),ou(u,a,l)),a={cache:wp()},r.payload=a;return}a=a.return}}function Wx(r,a,l){var u=pi();l={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Sd(r)?h1(a,l):(l=mp(r,a,l,u),l!==null&&(Qn(l,r,u),d1(l,a,u)))}function u1(r,a,l){var u=pi();ru(r,a,l,u)}function ru(r,a,l,u){var p={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Sd(r))h1(a,p);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=a.lastRenderedReducer,g!==null))try{var E=a.lastRenderedState,S=g(E,l);if(p.hasEagerState=!0,p.eagerState=S,hi(S,E))return ld(r,a,p,0),Dt===null&&od(),!1}catch{}finally{}if(l=mp(r,a,p,u),l!==null)return Qn(l,r,u),d1(l,a,u),!0}return!1}function $p(r,a,l,u){if(u={lane:2,revertLane:Rg(),action:u,hasEagerState:!1,eagerState:null,next:null},Sd(r)){if(a)throw Error(i(479))}else a=mp(r,l,u,2),a!==null&&Qn(a,r,2)}function Sd(r){var a=r.alternate;return r===We||a!==null&&a===We}function h1(r,a){wl=vd=!0;var l=r.pending;l===null?a.next=a:(a.next=l.next,l.next=a),r.pending=a}function d1(r,a,l){if((l&4194176)!==0){var u=a.lanes;u&=r.pendingLanes,l|=u,a.lanes=l,Me(r,l)}}var Dr={readContext:$n,use:wd,useCallback:Yt,useContext:Yt,useEffect:Yt,useImperativeHandle:Yt,useLayoutEffect:Yt,useInsertionEffect:Yt,useMemo:Yt,useReducer:Yt,useRef:Yt,useState:Yt,useDebugValue:Yt,useDeferredValue:Yt,useTransition:Yt,useSyncExternalStore:Yt,useId:Yt};Dr.useCacheRefresh=Yt,Dr.useMemoCache=Yt,Dr.useHostTransitionStatus=Yt,Dr.useFormState=Yt,Dr.useActionState=Yt,Dr.useOptimistic=Yt;var ho={readContext:$n,use:wd,useCallback:function(r,a){return ti().memoizedState=[r,a===void 0?null:a],r},useContext:$n,useEffect:W_,useImperativeHandle:function(r,a,l){l=l!=null?l.concat([r]):null,Td(4194308,4,e1.bind(null,a,r),l)},useLayoutEffect:function(r,a){return Td(4194308,4,r,a)},useInsertionEffect:function(r,a){Td(4,2,r,a)},useMemo:function(r,a){var l=ti();a=a===void 0?null:a;var u=r();if(uo){qn(!0);try{r()}finally{qn(!1)}}return l.memoizedState=[u,a],u},useReducer:function(r,a,l){var u=ti();if(l!==void 0){var p=l(a);if(uo){qn(!0);try{l(a)}finally{qn(!1)}}}else p=a;return u.memoizedState=u.baseState=p,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:p},u.queue=r,r=r.dispatch=Wx.bind(null,We,r),[u.memoizedState,r]},useRef:function(r){var a=ti();return r={current:r},a.memoizedState=r},useState:function(r){r=kp(r);var a=r.queue,l=u1.bind(null,We,a);return a.dispatch=l,[r.memoizedState,l]},useDebugValue:Pp,useDeferredValue:function(r,a){var l=ti();return Lp(l,r,a)},useTransition:function(){var r=kp(!1);return r=s1.bind(null,We,r.queue,!0,!1),ti().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,a,l){var u=We,p=ti();if(vt){if(l===void 0)throw Error(i(407));l=l()}else{if(l=a(),Dt===null)throw Error(i(349));(dt&60)!==0||P_(u,a,l)}p.memoizedState=l;var g={value:l,getSnapshot:a};return p.queue=g,W_(U_.bind(null,u,g,r),[r]),u.flags|=2048,Tl(9,L_.bind(null,u,g,l,a),{destroy:void 0},null),l},useId:function(){var r=ti(),a=Dt.identifierPrefix;if(vt){var l=ts,u=es;l=(u&~(1<<32-yn(u)-1)).toString(32)+l,a=":"+a+"R"+l,l=_d++,0<l&&(a+="H"+l.toString(32)),a+=":"}else l=qx++,a=":"+a+"r"+l.toString(32)+":";return r.memoizedState=a},useCacheRefresh:function(){return ti().memoizedState=Qx.bind(null,We)}};ho.useMemoCache=Ip,ho.useHostTransitionStatus=Vp,ho.useFormState=G_,ho.useActionState=G_,ho.useOptimistic=function(r){var a=ti();a.memoizedState=a.baseState=r;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=$p.bind(null,We,!0,l),l.dispatch=a,[r,a]};var Ys={readContext:$n,use:wd,useCallback:n1,useContext:$n,useEffect:Np,useImperativeHandle:t1,useInsertionEffect:Z_,useLayoutEffect:J_,useMemo:i1,useReducer:Ed,useRef:Q_,useState:function(){return Ed(is)},useDebugValue:Pp,useDeferredValue:function(r,a){var l=tn();return r1(l,Ct.memoizedState,r,a)},useTransition:function(){var r=Ed(is)[0],a=tn().memoizedState;return[typeof r=="boolean"?r:iu(r),a]},useSyncExternalStore:N_,useId:l1};Ys.useCacheRefresh=c1,Ys.useMemoCache=Ip,Ys.useHostTransitionStatus=Vp,Ys.useFormState=K_,Ys.useActionState=K_,Ys.useOptimistic=function(r,a){var l=tn();return j_(l,Ct,r,a)};var fo={readContext:$n,use:wd,useCallback:n1,useContext:$n,useEffect:Np,useImperativeHandle:t1,useInsertionEffect:Z_,useLayoutEffect:J_,useMemo:i1,useReducer:Dp,useRef:Q_,useState:function(){return Dp(is)},useDebugValue:Pp,useDeferredValue:function(r,a){var l=tn();return Ct===null?Lp(l,r,a):r1(l,Ct.memoizedState,r,a)},useTransition:function(){var r=Dp(is)[0],a=tn().memoizedState;return[typeof r=="boolean"?r:iu(r),a]},useSyncExternalStore:N_,useId:l1};fo.useCacheRefresh=c1,fo.useMemoCache=Ip,fo.useHostTransitionStatus=Vp,fo.useFormState=X_,fo.useActionState=X_,fo.useOptimistic=function(r,a){var l=tn();return Ct!==null?j_(l,Ct,r,a):(l.baseState=r,[r,l.queue.dispatch])};function jp(r,a,l,u){a=r.memoizedState,l=l(u,a),l=l==null?a:D({},a,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var zp={isMounted:function(r){return(r=r._reactInternals)?me(r)===r:!1},enqueueSetState:function(r,a,l){r=r._reactInternals;var u=pi(),p=Ws(u);p.payload=a,l!=null&&(p.callback=l),a=Zs(r,p,u),a!==null&&(Qn(a,r,u),ou(a,r,u))},enqueueReplaceState:function(r,a,l){r=r._reactInternals;var u=pi(),p=Ws(u);p.tag=1,p.payload=a,l!=null&&(p.callback=l),a=Zs(r,p,u),a!==null&&(Qn(a,r,u),ou(a,r,u))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var l=pi(),u=Ws(l);u.tag=2,a!=null&&(u.callback=a),a=Zs(r,u,l),a!==null&&(Qn(a,r,l),ou(a,r,l))}};function f1(r,a,l,u,p,g,E){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,g,E):a.prototype&&a.prototype.isPureReactComponent?!qc(l,u)||!qc(p,g):!0}function m1(r,a,l,u){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,u),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,u),a.state!==r&&zp.enqueueReplaceState(a,a.state,null)}function mo(r,a){var l=a;if("ref"in a){l={};for(var u in a)u!=="ref"&&(l[u]=a[u])}if(r=r.defaultProps){l===a&&(l=D({},l));for(var p in r)l[p]===void 0&&(l[p]=r[p])}return l}var Cd=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function p1(r){Cd(r)}function g1(r){console.error(r)}function y1(r){Cd(r)}function xd(r,a){try{var l=r.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(u){setTimeout(function(){throw u})}}function v1(r,a,l){try{var u=r.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Fp(r,a,l){return l=Ws(l),l.tag=3,l.payload={element:null},l.callback=function(){xd(r,a)},l}function _1(r){return r=Ws(r),r.tag=3,r}function b1(r,a,l,u){var p=l.type.getDerivedStateFromError;if(typeof p=="function"){var g=u.value;r.payload=function(){return p(g)},r.callback=function(){v1(a,l,u)}}var E=l.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(r.callback=function(){v1(a,l,u),typeof p!="function"&&(ra===null?ra=new Set([this]):ra.add(this));var S=u.stack;this.componentDidCatch(u.value,{componentStack:S!==null?S:""})})}function Zx(r,a,l,u,p){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(a=l.alternate,a!==null&&au(a,l,p,!0),l=Pi.current,l!==null){switch(l.tag){case 13:return Or===null?Tg():l.alternate===null&&Ht===0&&(Ht=3),l.flags&=-257,l.flags|=65536,l.lanes=p,u===vp?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([u]):a.add(u),Sg(r,u,p)),!1;case 22:return l.flags|=65536,u===vp?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([u]):l.add(u)),Sg(r,u,p)),!1}throw Error(i(435,l.tag))}return Sg(r,u,p),Tg(),!1}if(vt)return a=Pi.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=p,u!==yp&&(r=Error(i(422),{cause:u}),Xc(ki(r,l)))):(u!==yp&&(a=Error(i(423),{cause:u}),Xc(ki(a,l))),r=r.current.alternate,r.flags|=65536,p&=-p,r.lanes|=p,u=ki(u,l),p=Fp(r.stateNode,u,p),ig(r,p),Ht!==4&&(Ht=2)),!1;var g=Error(i(520),{cause:u});if(g=ki(g,l),pu===null?pu=[g]:pu.push(g),Ht!==4&&(Ht=2),a===null)return!0;u=ki(u,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,r=p&-p,l.lanes|=r,r=Fp(l.stateNode,u,r),ig(l,r),!1;case 1:if(a=l.type,g=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(ra===null||!ra.has(g))))return l.flags|=65536,p&=-p,l.lanes|=p,p=_1(p),b1(p,r,l,u),ig(l,p),!1}l=l.return}while(l!==null);return!1}var w1=Error(i(461)),wn=!1;function On(r,a,l,u){a.child=r===null?C_(a,null,l,u):lo(a,r.child,l,u)}function E1(r,a,l,u,p){l=l.render;var g=a.ref;if("ref"in u){var E={};for(var S in u)S!=="ref"&&(E[S]=u[S])}else E=u;return go(a),u=Sp(r,a,l,E,g,p),S=Cp(),r!==null&&!wn?(xp(r,a,p),rs(r,a,p)):(vt&&S&&pp(a),a.flags|=1,On(r,a,u,p),a.child)}function T1(r,a,l,u,p){if(r===null){var g=l.type;return typeof g=="function"&&!hg(g)&&g.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=g,A1(r,a,g,u,p)):(r=kd(l.type,null,u,a,a.mode,p),r.ref=a.ref,r.return=a,a.child=r)}if(g=r.child,!Wp(r,p)){var E=g.memoizedProps;if(l=l.compare,l=l!==null?l:qc,l(E,u)&&r.ref===a.ref)return rs(r,a,p)}return a.flags|=1,r=na(g,u),r.ref=a.ref,r.return=a,a.child=r}function A1(r,a,l,u,p){if(r!==null){var g=r.memoizedProps;if(qc(g,u)&&r.ref===a.ref)if(wn=!1,a.pendingProps=u=g,Wp(r,p))(r.flags&131072)!==0&&(wn=!0);else return a.lanes=r.lanes,rs(r,a,p)}return Bp(r,a,l,u,p)}function S1(r,a,l){var u=a.pendingProps,p=u.children,g=(a.stateNode._pendingVisibility&2)!==0,E=r!==null?r.memoizedState:null;if(su(r,a),u.mode==="hidden"||g){if((a.flags&128)!==0){if(u=E!==null?E.baseLanes|l:l,r!==null){for(p=a.child=r.child,g=0;p!==null;)g=g|p.lanes|p.childLanes,p=p.sibling;a.childLanes=g&~u}else a.childLanes=0,a.child=null;return C1(r,a,u,l)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},r!==null&&yd(a,E!==null?E.cachePool:null),E!==null?x_(a,E):_p(),R_(a);else return a.lanes=a.childLanes=536870912,C1(r,a,E!==null?E.baseLanes|l:l,l)}else E!==null?(yd(a,E.cachePool),x_(a,E),Gs(),a.memoizedState=null):(r!==null&&yd(a,null),_p(),Gs());return On(r,a,p,l),a.child}function C1(r,a,l,u){var p=Tp();return p=p===null?null:{parent:un._currentValue,pool:p},a.memoizedState={baseLanes:l,cachePool:p},r!==null&&yd(a,null),_p(),R_(a),r!==null&&au(r,a,u,!0),null}function su(r,a){var l=a.ref;if(l===null)r!==null&&r.ref!==null&&(a.flags|=2097664);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(r===null||r.ref!==l)&&(a.flags|=2097664)}}function Bp(r,a,l,u,p){return go(a),l=Sp(r,a,l,u,void 0,p),u=Cp(),r!==null&&!wn?(xp(r,a,p),rs(r,a,p)):(vt&&u&&pp(a),a.flags|=1,On(r,a,l,p),a.child)}function x1(r,a,l,u,p,g){return go(a),a.updateQueue=null,l=M_(a,u,l,p),k_(r),u=Cp(),r!==null&&!wn?(xp(r,a,g),rs(r,a,g)):(vt&&u&&pp(a),a.flags|=1,On(r,a,l,g),a.child)}function R1(r,a,l,u,p){if(go(a),a.stateNode===null){var g=ml,E=l.contextType;typeof E=="object"&&E!==null&&(g=$n(E)),g=new l(u,g),a.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=zp,a.stateNode=g,g._reactInternals=a,g=a.stateNode,g.props=u,g.state=a.memoizedState,g.refs={},tg(a),E=l.contextType,g.context=typeof E=="object"&&E!==null?$n(E):ml,g.state=a.memoizedState,E=l.getDerivedStateFromProps,typeof E=="function"&&(jp(a,l,E,u),g.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(E=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),E!==g.state&&zp.enqueueReplaceState(g,g.state,null),cu(a,u,g,p),lu(),g.state=a.memoizedState),typeof g.componentDidMount=="function"&&(a.flags|=4194308),u=!0}else if(r===null){g=a.stateNode;var S=a.memoizedProps,M=mo(l,S);g.props=M;var q=g.context,re=l.contextType;E=ml,typeof re=="object"&&re!==null&&(E=$n(re));var he=l.getDerivedStateFromProps;re=typeof he=="function"||typeof g.getSnapshotBeforeUpdate=="function",S=a.pendingProps!==S,re||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(S||q!==E)&&m1(a,g,u,E),Qs=!1;var J=a.memoizedState;g.state=J,cu(a,u,g,p),lu(),q=a.memoizedState,S||J!==q||Qs?(typeof he=="function"&&(jp(a,l,he,u),q=a.memoizedState),(M=Qs||f1(a,l,M,u,J,q,E))?(re||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(a.flags|=4194308)):(typeof g.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=u,a.memoizedState=q),g.props=u,g.state=q,g.context=E,u=M):(typeof g.componentDidMount=="function"&&(a.flags|=4194308),u=!1)}else{g=a.stateNode,ng(r,a),E=a.memoizedProps,re=mo(l,E),g.props=re,he=a.pendingProps,J=g.context,q=l.contextType,M=ml,typeof q=="object"&&q!==null&&(M=$n(q)),S=l.getDerivedStateFromProps,(q=typeof S=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(E!==he||J!==M)&&m1(a,g,u,M),Qs=!1,J=a.memoizedState,g.state=J,cu(a,u,g,p),lu();var ie=a.memoizedState;E!==he||J!==ie||Qs||r!==null&&r.dependencies!==null&&Rd(r.dependencies)?(typeof S=="function"&&(jp(a,l,S,u),ie=a.memoizedState),(re=Qs||f1(a,l,re,u,J,ie,M)||r!==null&&r.dependencies!==null&&Rd(r.dependencies))?(q||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,ie,M),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,ie,M)),typeof g.componentDidUpdate=="function"&&(a.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof g.componentDidUpdate!="function"||E===r.memoizedProps&&J===r.memoizedState||(a.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===r.memoizedProps&&J===r.memoizedState||(a.flags|=1024),a.memoizedProps=u,a.memoizedState=ie),g.props=u,g.state=ie,g.context=M,u=re):(typeof g.componentDidUpdate!="function"||E===r.memoizedProps&&J===r.memoizedState||(a.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===r.memoizedProps&&J===r.memoizedState||(a.flags|=1024),u=!1)}return g=u,su(r,a),u=(a.flags&128)!==0,g||u?(g=a.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:g.render(),a.flags|=1,r!==null&&u?(a.child=lo(a,r.child,null,p),a.child=lo(a,null,l,p)):On(r,a,l,p),a.memoizedState=g.state,r=a.child):r=rs(r,a,p),r}function I1(r,a,l,u){return Yc(),a.flags|=256,On(r,a,l,u),a.child}var Hp={dehydrated:null,treeContext:null,retryLane:0};function qp(r){return{baseLanes:r,cachePool:D_()}}function Gp(r,a,l){return r=r!==null?r.childLanes&~l:0,a&&(r|=$i),r}function O1(r,a,l){var u=a.pendingProps,p=!1,g=(a.flags&128)!==0,E;if((E=g)||(E=r!==null&&r.memoizedState===null?!1:(cn.current&2)!==0),E&&(p=!0,a.flags&=-129),E=(a.flags&32)!==0,a.flags&=-33,r===null){if(vt){if(p?qs(a):Gs(),vt){var S=In,M;if(M=S){e:{for(M=S,S=Ir;M.nodeType!==8;){if(!S){S=null;break e}if(M=nr(M.nextSibling),M===null){S=null;break e}}S=M}S!==null?(a.memoizedState={dehydrated:S,treeContext:so!==null?{id:es,overflow:ts}:null,retryLane:536870912},M=Vi(18,null,null,0),M.stateNode=S,M.return=a,a.child=M,Xn=a,In=null,M=!0):M=!1}M||oo(a)}if(S=a.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return S.data==="$!"?a.lanes=16:a.lanes=536870912,null;ns(a)}return S=u.children,u=u.fallback,p?(Gs(),p=a.mode,S=Yp({mode:"hidden",children:S},p),u=vo(u,p,l,null),S.return=a,u.return=a,S.sibling=u,a.child=S,p=a.child,p.memoizedState=qp(l),p.childLanes=Gp(r,E,l),a.memoizedState=Hp,u):(qs(a),Kp(a,S))}if(M=r.memoizedState,M!==null&&(S=M.dehydrated,S!==null)){if(g)a.flags&256?(qs(a),a.flags&=-257,a=Xp(r,a,l)):a.memoizedState!==null?(Gs(),a.child=r.child,a.flags|=128,a=null):(Gs(),p=u.fallback,S=a.mode,u=Yp({mode:"visible",children:u.children},S),p=vo(p,S,l,null),p.flags|=2,u.return=a,p.return=a,u.sibling=p,a.child=u,lo(a,r.child,null,l),u=a.child,u.memoizedState=qp(l),u.childLanes=Gp(r,E,l),a.memoizedState=Hp,a=p);else if(qs(a),S.data==="$!"){if(E=S.nextSibling&&S.nextSibling.dataset,E)var q=E.dgst;E=q,u=Error(i(419)),u.stack="",u.digest=E,Xc({value:u,source:null,stack:null}),a=Xp(r,a,l)}else if(wn||au(r,a,l,!1),E=(l&r.childLanes)!==0,wn||E){if(E=Dt,E!==null){if(u=l&-l,(u&42)!==0)u=1;else switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=64;break;case 268435456:u=134217728;break;default:u=0}if(u=(u&(E.suspendedLanes|l))!==0?0:u,u!==0&&u!==M.retryLane)throw M.retryLane=u,Hs(r,u),Qn(E,r,u),w1}S.data==="$?"||Tg(),a=Xp(r,a,l)}else S.data==="$?"?(a.flags|=128,a.child=r.child,a=f5.bind(null,r),S._reactRetry=a,a=null):(r=M.treeContext,In=nr(S.nextSibling),Xn=a,vt=!0,er=null,Ir=!1,r!==null&&(Mi[Ni++]=es,Mi[Ni++]=ts,Mi[Ni++]=so,es=r.id,ts=r.overflow,so=a),a=Kp(a,u.children),a.flags|=4096);return a}return p?(Gs(),p=u.fallback,S=a.mode,M=r.child,q=M.sibling,u=na(M,{mode:"hidden",children:u.children}),u.subtreeFlags=M.subtreeFlags&31457280,q!==null?p=na(q,p):(p=vo(p,S,l,null),p.flags|=2),p.return=a,u.return=a,u.sibling=p,a.child=u,u=p,p=a.child,S=r.child.memoizedState,S===null?S=qp(l):(M=S.cachePool,M!==null?(q=un._currentValue,M=M.parent!==q?{parent:q,pool:q}:M):M=D_(),S={baseLanes:S.baseLanes|l,cachePool:M}),p.memoizedState=S,p.childLanes=Gp(r,E,l),a.memoizedState=Hp,u):(qs(a),l=r.child,r=l.sibling,l=na(l,{mode:"visible",children:u.children}),l.return=a,l.sibling=null,r!==null&&(E=a.deletions,E===null?(a.deletions=[r],a.flags|=16):E.push(r)),a.child=l,a.memoizedState=null,l)}function Kp(r,a){return a=Yp({mode:"visible",children:a},r.mode),a.return=r,r.child=a}function Yp(r,a){return nb(r,a,0,null)}function Xp(r,a,l){return lo(a,r.child,null,l),r=Kp(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function D1(r,a,l){r.lanes|=a;var u=r.alternate;u!==null&&(u.lanes|=a),Jp(r.return,a,l)}function Qp(r,a,l,u,p){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:p}:(g.isBackwards=a,g.rendering=null,g.renderingStartTime=0,g.last=u,g.tail=l,g.tailMode=p)}function k1(r,a,l){var u=a.pendingProps,p=u.revealOrder,g=u.tail;if(On(r,a,u.children,l),u=cn.current,(u&2)!==0)u=u&1|2,a.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&D1(r,l,a);else if(r.tag===19)D1(r,l,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}u&=1}switch(nt(cn,u),p){case"forwards":for(l=a.child,p=null;l!==null;)r=l.alternate,r!==null&&gd(r)===null&&(p=l),l=l.sibling;l=p,l===null?(p=a.child,a.child=null):(p=l.sibling,l.sibling=null),Qp(a,!1,p,l,g);break;case"backwards":for(l=null,p=a.child,a.child=null;p!==null;){if(r=p.alternate,r!==null&&gd(r)===null){a.child=p;break}r=p.sibling,p.sibling=l,l=p,p=r}Qp(a,!0,l,null,g);break;case"together":Qp(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function rs(r,a,l){if(r!==null&&(a.dependencies=r.dependencies),ia|=a.lanes,(l&a.childLanes)===0)if(r!==null){if(au(r,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(r!==null&&a.child!==r.child)throw Error(i(153));if(a.child!==null){for(r=a.child,l=na(r,r.pendingProps),a.child=l,l.return=a;r.sibling!==null;)r=r.sibling,l=l.sibling=na(r,r.pendingProps),l.return=a;l.sibling=null}return a.child}function Wp(r,a){return(r.lanes&a)!==0?!0:(r=r.dependencies,!!(r!==null&&Rd(r)))}function Jx(r,a,l){switch(a.tag){case 3:yr(a,a.stateNode.containerInfo),Xs(a,un,r.memoizedState.cache),Yc();break;case 27:case 5:Ha(a);break;case 4:yr(a,a.stateNode.containerInfo);break;case 10:Xs(a,a.type,a.memoizedProps.value);break;case 13:var u=a.memoizedState;if(u!==null)return u.dehydrated!==null?(qs(a),a.flags|=128,null):(l&a.child.childLanes)!==0?O1(r,a,l):(qs(a),r=rs(r,a,l),r!==null?r.sibling:null);qs(a);break;case 19:var p=(r.flags&128)!==0;if(u=(l&a.childLanes)!==0,u||(au(r,a,l,!1),u=(l&a.childLanes)!==0),p){if(u)return k1(r,a,l);a.flags|=128}if(p=a.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),nt(cn,cn.current),u)break;return null;case 22:case 23:return a.lanes=0,S1(r,a,l);case 24:Xs(a,un,r.memoizedState.cache)}return rs(r,a,l)}function M1(r,a,l){if(r!==null)if(r.memoizedProps!==a.pendingProps)wn=!0;else{if(!Wp(r,l)&&(a.flags&128)===0)return wn=!1,Jx(r,a,l);wn=(r.flags&131072)!==0}else wn=!1,vt&&(a.flags&1048576)!==0&&y_(a,hd,a.index);switch(a.lanes=0,a.tag){case 16:e:{r=a.pendingProps;var u=a.elementType,p=u._init;if(u=p(u._payload),a.type=u,typeof u=="function")hg(u)?(r=mo(u,r),a.tag=1,a=R1(null,a,u,r,l)):(a.tag=0,a=Bp(null,a,u,r,l));else{if(u!=null){if(p=u.$$typeof,p===A){a.tag=11,a=E1(null,a,u,r,l);break e}else if(p===B){a.tag=14,a=T1(null,a,u,r,l);break e}}throw a=I(u)||u,Error(i(306,a,""))}}return a;case 0:return Bp(r,a,a.type,a.pendingProps,l);case 1:return u=a.type,p=mo(u,a.pendingProps),R1(r,a,u,p,l);case 3:e:{if(yr(a,a.stateNode.containerInfo),r===null)throw Error(i(387));var g=a.pendingProps;p=a.memoizedState,u=p.element,ng(r,a),cu(a,g,null,l);var E=a.memoizedState;if(g=E.cache,Xs(a,un,g),g!==p.cache&&eg(a,[un],l,!0),lu(),g=E.element,p.isDehydrated)if(p={element:g,isDehydrated:!1,cache:E.cache},a.updateQueue.baseState=p,a.memoizedState=p,a.flags&256){a=I1(r,a,g,l);break e}else if(g!==u){u=ki(Error(i(424)),a),Xc(u),a=I1(r,a,g,l);break e}else for(In=nr(a.stateNode.containerInfo.firstChild),Xn=a,vt=!0,er=null,Ir=!0,l=C_(a,null,g,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Yc(),g===u){a=rs(r,a,l);break e}On(r,a,g,l)}a=a.child}return a;case 26:return su(r,a),r===null?(l=Lb(a.type,null,a.pendingProps,null))?a.memoizedState=l:vt||(l=a.type,r=a.pendingProps,u=Hd(Zt.current).createElement(l),u[Se]=a,u[Ve]=r,Dn(u,l,r),bt(u),a.stateNode=u):a.memoizedState=Lb(a.type,r.memoizedProps,a.pendingProps,r.memoizedState),null;case 27:return Ha(a),r===null&&vt&&(u=a.stateNode=Mb(a.type,a.pendingProps,Zt.current),Xn=a,Ir=!0,In=nr(u.firstChild)),u=a.pendingProps.children,r!==null||vt?On(r,a,u,l):a.child=lo(a,null,u,l),su(r,a),a.child;case 5:return r===null&&vt&&((p=u=In)&&(u=I5(u,a.type,a.pendingProps,Ir),u!==null?(a.stateNode=u,Xn=a,In=nr(u.firstChild),Ir=!1,p=!0):p=!1),p||oo(a)),Ha(a),p=a.type,g=a.pendingProps,E=r!==null?r.memoizedProps:null,u=g.children,Ug(p,g)?u=null:E!==null&&Ug(p,E)&&(a.flags|=32),a.memoizedState!==null&&(p=Sp(r,a,Gx,null,null,l),Au._currentValue=p),su(r,a),On(r,a,u,l),a.child;case 6:return r===null&&vt&&((r=l=In)&&(l=O5(l,a.pendingProps,Ir),l!==null?(a.stateNode=l,Xn=a,In=null,r=!0):r=!1),r||oo(a)),null;case 13:return O1(r,a,l);case 4:return yr(a,a.stateNode.containerInfo),u=a.pendingProps,r===null?a.child=lo(a,null,u,l):On(r,a,u,l),a.child;case 11:return E1(r,a,a.type,a.pendingProps,l);case 7:return On(r,a,a.pendingProps,l),a.child;case 8:return On(r,a,a.pendingProps.children,l),a.child;case 12:return On(r,a,a.pendingProps.children,l),a.child;case 10:return u=a.pendingProps,Xs(a,a.type,u.value),On(r,a,u.children,l),a.child;case 9:return p=a.type._context,u=a.pendingProps.children,go(a),p=$n(p),u=u(p),a.flags|=1,On(r,a,u,l),a.child;case 14:return T1(r,a,a.type,a.pendingProps,l);case 15:return A1(r,a,a.type,a.pendingProps,l);case 19:return k1(r,a,l);case 22:return S1(r,a,l);case 24:return go(a),u=$n(un),r===null?(p=Tp(),p===null&&(p=Dt,g=wp(),p.pooledCache=g,g.refCount++,g!==null&&(p.pooledCacheLanes|=l),p=g),a.memoizedState={parent:u,cache:p},tg(a),Xs(a,un,p)):((r.lanes&l)!==0&&(ng(r,a),cu(a,null,null,l),lu()),p=r.memoizedState,g=a.memoizedState,p.parent!==u?(p={parent:u,cache:u},a.memoizedState=p,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=p),Xs(a,un,u)):(u=g.cache,Xs(a,un,u),u!==p.cache&&eg(a,[un],l,!0))),On(r,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}var Zp=Xe(null),po=null,ss=null;function Xs(r,a,l){nt(Zp,a._currentValue),a._currentValue=l}function as(r){r._currentValue=Zp.current,He(Zp)}function Jp(r,a,l){for(;r!==null;){var u=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,u!==null&&(u.childLanes|=a)):u!==null&&(u.childLanes&a)!==a&&(u.childLanes|=a),r===l)break;r=r.return}}function eg(r,a,l,u){var p=r.child;for(p!==null&&(p.return=r);p!==null;){var g=p.dependencies;if(g!==null){var E=p.child;g=g.firstContext;e:for(;g!==null;){var S=g;g=p;for(var M=0;M<a.length;M++)if(S.context===a[M]){g.lanes|=l,S=g.alternate,S!==null&&(S.lanes|=l),Jp(g.return,l,r),u||(E=null);break e}g=S.next}}else if(p.tag===18){if(E=p.return,E===null)throw Error(i(341));E.lanes|=l,g=E.alternate,g!==null&&(g.lanes|=l),Jp(E,l,r),E=null}else E=p.child;if(E!==null)E.return=p;else for(E=p;E!==null;){if(E===r){E=null;break}if(p=E.sibling,p!==null){p.return=E.return,E=p;break}E=E.return}p=E}}function au(r,a,l,u){r=null;for(var p=a,g=!1;p!==null;){if(!g){if((p.flags&524288)!==0)g=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var E=p.alternate;if(E===null)throw Error(i(387));if(E=E.memoizedProps,E!==null){var S=p.type;hi(p.pendingProps.value,E.value)||(r!==null?r.push(S):r=[S])}}else if(p===gr.current){if(E=p.alternate,E===null)throw Error(i(387));E.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(r!==null?r.push(Au):r=[Au])}p=p.return}r!==null&&eg(a,r,l,u),a.flags|=262144}function Rd(r){for(r=r.firstContext;r!==null;){if(!hi(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function go(r){po=r,ss=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function $n(r){return N1(po,r)}function Id(r,a){return po===null&&go(r),N1(r,a)}function N1(r,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},ss===null){if(r===null)throw Error(i(308));ss=a,r.dependencies={lanes:0,firstContext:a},r.flags|=524288}else ss=ss.next=a;return l}var Qs=!1;function tg(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ng(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Ws(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Zs(r,a,l){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,($t&2)!==0){var p=u.pending;return p===null?a.next=a:(a.next=p.next,p.next=a),u.pending=a,a=cd(r),p_(r,null,l),a}return ld(r,u,a,l),cd(r)}function ou(r,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194176)!==0)){var u=a.lanes;u&=r.pendingLanes,l|=u,a.lanes=l,Me(r,l)}}function ig(r,a){var l=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var p=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var E={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};g===null?p=g=E:g=g.next=E,l=l.next}while(l!==null);g===null?p=g=a:g=g.next=a}else p=g=a;l={baseState:u.baseState,firstBaseUpdate:p,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=a:r.next=a,l.lastBaseUpdate=a}var rg=!1;function lu(){if(rg){var r=bl;if(r!==null)throw r}}function cu(r,a,l,u){rg=!1;var p=r.updateQueue;Qs=!1;var g=p.firstBaseUpdate,E=p.lastBaseUpdate,S=p.shared.pending;if(S!==null){p.shared.pending=null;var M=S,q=M.next;M.next=null,E===null?g=q:E.next=q,E=M;var re=r.alternate;re!==null&&(re=re.updateQueue,S=re.lastBaseUpdate,S!==E&&(S===null?re.firstBaseUpdate=q:S.next=q,re.lastBaseUpdate=M))}if(g!==null){var he=p.baseState;E=0,re=q=M=null,S=g;do{var J=S.lane&-536870913,ie=J!==S.lane;if(ie?(dt&J)===J:(u&J)===J){J!==0&&J===_l&&(rg=!0),re!==null&&(re=re.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var De=r,qe=S;J=a;var qt=l;switch(qe.tag){case 1:if(De=qe.payload,typeof De=="function"){he=De.call(qt,he,J);break e}he=De;break e;case 3:De.flags=De.flags&-65537|128;case 0:if(De=qe.payload,J=typeof De=="function"?De.call(qt,he,J):De,J==null)break e;he=D({},he,J);break e;case 2:Qs=!0}}J=S.callback,J!==null&&(r.flags|=64,ie&&(r.flags|=8192),ie=p.callbacks,ie===null?p.callbacks=[J]:ie.push(J))}else ie={lane:J,tag:S.tag,payload:S.payload,callback:S.callback,next:null},re===null?(q=re=ie,M=he):re=re.next=ie,E|=J;if(S=S.next,S===null){if(S=p.shared.pending,S===null)break;ie=S,S=ie.next,ie.next=null,p.lastBaseUpdate=ie,p.shared.pending=null}}while(!0);re===null&&(M=he),p.baseState=M,p.firstBaseUpdate=q,p.lastBaseUpdate=re,g===null&&(p.shared.lanes=0),ia|=E,r.lanes=E,r.memoizedState=he}}function P1(r,a){if(typeof r!="function")throw Error(i(191,r));r.call(a)}function L1(r,a){var l=r.callbacks;if(l!==null)for(r.callbacks=null,r=0;r<l.length;r++)P1(l[r],a)}function uu(r,a){try{var l=a.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var p=u.next;l=p;do{if((l.tag&r)===r){u=void 0;var g=l.create,E=l.inst;u=g(),E.destroy=u}l=l.next}while(l!==p)}}catch(S){It(a,a.return,S)}}function Js(r,a,l){try{var u=a.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var g=p.next;u=g;do{if((u.tag&r)===r){var E=u.inst,S=E.destroy;if(S!==void 0){E.destroy=void 0,p=a;var M=l;try{S()}catch(q){It(p,M,q)}}}u=u.next}while(u!==g)}}catch(q){It(a,a.return,q)}}function U1(r){var a=r.updateQueue;if(a!==null){var l=r.stateNode;try{L1(a,l)}catch(u){It(r,r.return,u)}}}function V1(r,a,l){l.props=mo(r.type,r.memoizedProps),l.state=r.memoizedState;try{l.componentWillUnmount()}catch(u){It(r,a,u)}}function yo(r,a){try{var l=r.ref;if(l!==null){var u=r.stateNode;switch(r.tag){case 26:case 27:case 5:var p=u;break;default:p=u}typeof l=="function"?r.refCleanup=l(p):l.current=p}}catch(g){It(r,a,g)}}function di(r,a){var l=r.ref,u=r.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(p){It(r,a,p)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(p){It(r,a,p)}else l.current=null}function $1(r){var a=r.type,l=r.memoizedProps,u=r.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break e;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(p){It(r,r.return,p)}}function j1(r,a,l){try{var u=r.stateNode;A5(u,r.type,l,a),u[Ve]=a}catch(p){It(r,r.return,p)}}function z1(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27||r.tag===4}function sg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||z1(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==27&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function ag(r,a,l){var u=r.tag;if(u===5||u===6)r=r.stateNode,a?l.nodeType===8?l.parentNode.insertBefore(r,a):l.insertBefore(r,a):(l.nodeType===8?(a=l.parentNode,a.insertBefore(r,l)):(a=l,a.appendChild(r)),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=Bd));else if(u!==4&&u!==27&&(r=r.child,r!==null))for(ag(r,a,l),r=r.sibling;r!==null;)ag(r,a,l),r=r.sibling}function Od(r,a,l){var u=r.tag;if(u===5||u===6)r=r.stateNode,a?l.insertBefore(r,a):l.appendChild(r);else if(u!==4&&u!==27&&(r=r.child,r!==null))for(Od(r,a,l),r=r.sibling;r!==null;)Od(r,a,l),r=r.sibling}var os=!1,Bt=!1,og=!1,F1=typeof WeakSet=="function"?WeakSet:Set,En=null,B1=!1;function e5(r,a){if(r=r.containerInfo,Pg=Qd,r=a_(r),cp(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var p=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var E=0,S=-1,M=-1,q=0,re=0,he=r,J=null;t:for(;;){for(var ie;he!==l||p!==0&&he.nodeType!==3||(S=E+p),he!==g||u!==0&&he.nodeType!==3||(M=E+u),he.nodeType===3&&(E+=he.nodeValue.length),(ie=he.firstChild)!==null;)J=he,he=ie;for(;;){if(he===r)break t;if(J===l&&++q===p&&(S=E),J===g&&++re===u&&(M=E),(ie=he.nextSibling)!==null)break;he=J,J=he.parentNode}he=ie}l=S===-1||M===-1?null:{start:S,end:M}}else l=null}l=l||{start:0,end:0}}else l=null;for(Lg={focusedElem:r,selectionRange:l},Qd=!1,En=a;En!==null;)if(a=En,r=a.child,(a.subtreeFlags&1028)!==0&&r!==null)r.return=a,En=r;else for(;En!==null;){switch(a=En,g=a.alternate,r=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&g!==null){r=void 0,l=a,p=g.memoizedProps,g=g.memoizedState,u=l.stateNode;try{var De=mo(l.type,p,l.elementType===l.type);r=u.getSnapshotBeforeUpdate(De,g),u.__reactInternalSnapshotBeforeUpdate=r}catch(qe){It(l,l.return,qe)}}break;case 3:if((r&1024)!==0){if(r=a.stateNode.containerInfo,l=r.nodeType,l===9)jg(r);else if(l===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":jg(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=a.sibling,r!==null){r.return=a.return,En=r;break}En=a.return}return De=B1,B1=!1,De}function H1(r,a,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:cs(r,l),u&4&&uu(5,l);break;case 1:if(cs(r,l),u&4)if(r=l.stateNode,a===null)try{r.componentDidMount()}catch(S){It(l,l.return,S)}else{var p=mo(l.type,a.memoizedProps);a=a.memoizedState;try{r.componentDidUpdate(p,a,r.__reactInternalSnapshotBeforeUpdate)}catch(S){It(l,l.return,S)}}u&64&&U1(l),u&512&&yo(l,l.return);break;case 3:if(cs(r,l),u&64&&(u=l.updateQueue,u!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{L1(u,r)}catch(S){It(l,l.return,S)}}break;case 26:cs(r,l),u&512&&yo(l,l.return);break;case 27:case 5:cs(r,l),a===null&&u&4&&$1(l),u&512&&yo(l,l.return);break;case 12:cs(r,l);break;case 13:cs(r,l),u&4&&K1(r,l);break;case 22:if(p=l.memoizedState!==null||os,!p){a=a!==null&&a.memoizedState!==null||Bt;var g=os,E=Bt;os=p,(Bt=a)&&!E?ea(r,l,(l.subtreeFlags&8772)!==0):cs(r,l),os=g,Bt=E}u&512&&(l.memoizedProps.mode==="manual"?yo(l,l.return):di(l,l.return));break;default:cs(r,l)}}function q1(r){var a=r.alternate;a!==null&&(r.alternate=null,q1(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&ui(a)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var nn=null,fi=!1;function ls(r,a,l){for(l=l.child;l!==null;)G1(r,a,l),l=l.sibling}function G1(r,a,l){if(gn&&typeof gn.onCommitFiberUnmount=="function")try{gn.onCommitFiberUnmount(Qi,l)}catch{}switch(l.tag){case 26:Bt||di(l,a),ls(r,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Bt||di(l,a);var u=nn,p=fi;for(nn=l.stateNode,ls(r,a,l),l=l.stateNode,a=l.attributes;a.length;)l.removeAttributeNode(a[0]);ui(l),nn=u,fi=p;break;case 5:Bt||di(l,a);case 6:p=nn;var g=fi;if(nn=null,ls(r,a,l),nn=p,fi=g,nn!==null)if(fi)try{r=nn,u=l.stateNode,r.nodeType===8?r.parentNode.removeChild(u):r.removeChild(u)}catch(E){It(l,a,E)}else try{nn.removeChild(l.stateNode)}catch(E){It(l,a,E)}break;case 18:nn!==null&&(fi?(a=nn,l=l.stateNode,a.nodeType===8?$g(a.parentNode,l):a.nodeType===1&&$g(a,l),Ru(a)):$g(nn,l.stateNode));break;case 4:u=nn,p=fi,nn=l.stateNode.containerInfo,fi=!0,ls(r,a,l),nn=u,fi=p;break;case 0:case 11:case 14:case 15:Bt||Js(2,l,a),Bt||Js(4,l,a),ls(r,a,l);break;case 1:Bt||(di(l,a),u=l.stateNode,typeof u.componentWillUnmount=="function"&&V1(l,a,u)),ls(r,a,l);break;case 21:ls(r,a,l);break;case 22:Bt||di(l,a),Bt=(u=Bt)||l.memoizedState!==null,ls(r,a,l),Bt=u;break;default:ls(r,a,l)}}function K1(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Ru(r)}catch(l){It(a,a.return,l)}}function t5(r){switch(r.tag){case 13:case 19:var a=r.stateNode;return a===null&&(a=r.stateNode=new F1),a;case 22:return r=r.stateNode,a=r._retryCache,a===null&&(a=r._retryCache=new F1),a;default:throw Error(i(435,r.tag))}}function lg(r,a){var l=t5(r);a.forEach(function(u){var p=m5.bind(null,r,u);l.has(u)||(l.add(u),u.then(p,p))})}function Li(r,a){var l=a.deletions;if(l!==null)for(var u=0;u<l.length;u++){var p=l[u],g=r,E=a,S=E;e:for(;S!==null;){switch(S.tag){case 27:case 5:nn=S.stateNode,fi=!1;break e;case 3:nn=S.stateNode.containerInfo,fi=!0;break e;case 4:nn=S.stateNode.containerInfo,fi=!0;break e}S=S.return}if(nn===null)throw Error(i(160));G1(g,E,p),nn=null,fi=!1,g=p.alternate,g!==null&&(g.return=null),p.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)Y1(a,r),a=a.sibling}var tr=null;function Y1(r,a){var l=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Li(a,r),Ui(r),u&4&&(Js(3,r,r.return),uu(3,r),Js(5,r,r.return));break;case 1:Li(a,r),Ui(r),u&512&&(Bt||l===null||di(l,l.return)),u&64&&os&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(l=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var p=tr;if(Li(a,r),Ui(r),u&512&&(Bt||l===null||di(l,l.return)),u&4){var g=l!==null?l.memoizedState:null;if(u=r.memoizedState,l===null)if(u===null)if(r.stateNode===null){e:{u=r.type,l=r.memoizedProps,p=p.ownerDocument||p;t:switch(u){case"title":g=p.getElementsByTagName("title")[0],(!g||g[Gn]||g[Se]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=p.createElement(u),p.head.insertBefore(g,p.querySelector("head > title"))),Dn(g,u,l),g[Se]=r,bt(g),u=g;break e;case"link":var E=$b("link","href",p).get(u+(l.href||""));if(E){for(var S=0;S<E.length;S++)if(g=E[S],g.getAttribute("href")===(l.href==null?null:l.href)&&g.getAttribute("rel")===(l.rel==null?null:l.rel)&&g.getAttribute("title")===(l.title==null?null:l.title)&&g.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){E.splice(S,1);break t}}g=p.createElement(u),Dn(g,u,l),p.head.appendChild(g);break;case"meta":if(E=$b("meta","content",p).get(u+(l.content||""))){for(S=0;S<E.length;S++)if(g=E[S],g.getAttribute("content")===(l.content==null?null:""+l.content)&&g.getAttribute("name")===(l.name==null?null:l.name)&&g.getAttribute("property")===(l.property==null?null:l.property)&&g.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&g.getAttribute("charset")===(l.charSet==null?null:l.charSet)){E.splice(S,1);break t}}g=p.createElement(u),Dn(g,u,l),p.head.appendChild(g);break;default:throw Error(i(468,u))}g[Se]=r,bt(g),u=g}r.stateNode=u}else jb(p,r.type,r.stateNode);else r.stateNode=Vb(p,u,r.memoizedProps);else g!==u?(g===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):g.count--,u===null?jb(p,r.type,r.stateNode):Vb(p,u,r.memoizedProps)):u===null&&r.stateNode!==null&&j1(r,r.memoizedProps,l.memoizedProps)}break;case 27:if(u&4&&r.alternate===null){p=r.stateNode,g=r.memoizedProps;try{for(var M=p.firstChild;M;){var q=M.nextSibling,re=M.nodeName;M[Gn]||re==="HEAD"||re==="BODY"||re==="SCRIPT"||re==="STYLE"||re==="LINK"&&M.rel.toLowerCase()==="stylesheet"||p.removeChild(M),M=q}for(var he=r.type,J=p.attributes;J.length;)p.removeAttributeNode(J[0]);Dn(p,he,g),p[Se]=r,p[Ve]=g}catch(De){It(r,r.return,De)}}case 5:if(Li(a,r),Ui(r),u&512&&(Bt||l===null||di(l,l.return)),r.flags&32){p=r.stateNode;try{xi(p,"")}catch(De){It(r,r.return,De)}}u&4&&r.stateNode!=null&&(p=r.memoizedProps,j1(r,p,l!==null?l.memoizedProps:p)),u&1024&&(og=!0);break;case 6:if(Li(a,r),Ui(r),u&4){if(r.stateNode===null)throw Error(i(162));u=r.memoizedProps,l=r.stateNode;try{l.nodeValue=u}catch(De){It(r,r.return,De)}}break;case 3:if(Kd=null,p=tr,tr=qd(a.containerInfo),Li(a,r),tr=p,Ui(r),u&4&&l!==null&&l.memoizedState.isDehydrated)try{Ru(a.containerInfo)}catch(De){It(r,r.return,De)}og&&(og=!1,X1(r));break;case 4:u=tr,tr=qd(r.stateNode.containerInfo),Li(a,r),Ui(r),tr=u;break;case 12:Li(a,r),Ui(r);break;case 13:Li(a,r),Ui(r),r.child.flags&8192&&r.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(yg=pn()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,lg(r,u)));break;case 22:if(u&512&&(Bt||l===null||di(l,l.return)),M=r.memoizedState!==null,q=l!==null&&l.memoizedState!==null,re=os,he=Bt,os=re||M,Bt=he||q,Li(a,r),Bt=he,os=re,Ui(r),a=r.stateNode,a._current=r,a._visibility&=-3,a._visibility|=a._pendingVisibility&2,u&8192&&(a._visibility=M?a._visibility&-2:a._visibility|1,M&&(a=os||Bt,l===null||q||a||Al(r)),r.memoizedProps===null||r.memoizedProps.mode!=="manual"))e:for(l=null,a=r;;){if(a.tag===5||a.tag===26||a.tag===27){if(l===null){q=l=a;try{if(p=q.stateNode,M)g=p.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{E=q.stateNode,S=q.memoizedProps.style;var ie=S!=null&&S.hasOwnProperty("display")?S.display:null;E.style.display=ie==null||typeof ie=="boolean"?"":(""+ie).trim()}}catch(De){It(q,q.return,De)}}}else if(a.tag===6){if(l===null){q=a;try{q.stateNode.nodeValue=M?"":q.memoizedProps}catch(De){It(q,q.return,De)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===r)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break e;for(;a.sibling===null;){if(a.return===null||a.return===r)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}u&4&&(u=r.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,lg(r,l))));break;case 19:Li(a,r),Ui(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,lg(r,u)));break;case 21:break;default:Li(a,r),Ui(r)}}function Ui(r){var a=r.flags;if(a&2){try{if(r.tag!==27){e:{for(var l=r.return;l!==null;){if(z1(l)){var u=l;break e}l=l.return}throw Error(i(160))}switch(u.tag){case 27:var p=u.stateNode,g=sg(r);Od(r,g,p);break;case 5:var E=u.stateNode;u.flags&32&&(xi(E,""),u.flags&=-33);var S=sg(r);Od(r,S,E);break;case 3:case 4:var M=u.stateNode.containerInfo,q=sg(r);ag(r,q,M);break;default:throw Error(i(161))}}}catch(re){It(r,r.return,re)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function X1(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var a=r;X1(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),r=r.sibling}}function cs(r,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)H1(r,a.alternate,a),a=a.sibling}function Al(r){for(r=r.child;r!==null;){var a=r;switch(a.tag){case 0:case 11:case 14:case 15:Js(4,a,a.return),Al(a);break;case 1:di(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&V1(a,a.return,l),Al(a);break;case 26:case 27:case 5:di(a,a.return),Al(a);break;case 22:di(a,a.return),a.memoizedState===null&&Al(a);break;default:Al(a)}r=r.sibling}}function ea(r,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var u=a.alternate,p=r,g=a,E=g.flags;switch(g.tag){case 0:case 11:case 15:ea(p,g,l),uu(4,g);break;case 1:if(ea(p,g,l),u=g,p=u.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(q){It(u,u.return,q)}if(u=g,p=u.updateQueue,p!==null){var S=u.stateNode;try{var M=p.shared.hiddenCallbacks;if(M!==null)for(p.shared.hiddenCallbacks=null,p=0;p<M.length;p++)P1(M[p],S)}catch(q){It(u,u.return,q)}}l&&E&64&&U1(g),yo(g,g.return);break;case 26:case 27:case 5:ea(p,g,l),l&&u===null&&E&4&&$1(g),yo(g,g.return);break;case 12:ea(p,g,l);break;case 13:ea(p,g,l),l&&E&4&&K1(p,g);break;case 22:g.memoizedState===null&&ea(p,g,l),yo(g,g.return);break;default:ea(p,g,l)}a=a.sibling}}function cg(r,a){var l=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==l&&(r!=null&&r.refCount++,l!=null&&eu(l))}function ug(r,a){r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&eu(r))}function ta(r,a,l,u){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Q1(r,a,l,u),a=a.sibling}function Q1(r,a,l,u){var p=a.flags;switch(a.tag){case 0:case 11:case 15:ta(r,a,l,u),p&2048&&uu(9,a);break;case 3:ta(r,a,l,u),p&2048&&(r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&eu(r)));break;case 12:if(p&2048){ta(r,a,l,u),r=a.stateNode;try{var g=a.memoizedProps,E=g.id,S=g.onPostCommit;typeof S=="function"&&S(E,a.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(M){It(a,a.return,M)}}else ta(r,a,l,u);break;case 23:break;case 22:g=a.stateNode,a.memoizedState!==null?g._visibility&4?ta(r,a,l,u):hu(r,a):g._visibility&4?ta(r,a,l,u):(g._visibility|=4,Sl(r,a,l,u,(a.subtreeFlags&10256)!==0)),p&2048&&cg(a.alternate,a);break;case 24:ta(r,a,l,u),p&2048&&ug(a.alternate,a);break;default:ta(r,a,l,u)}}function Sl(r,a,l,u,p){for(p=p&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var g=r,E=a,S=l,M=u,q=E.flags;switch(E.tag){case 0:case 11:case 15:Sl(g,E,S,M,p),uu(8,E);break;case 23:break;case 22:var re=E.stateNode;E.memoizedState!==null?re._visibility&4?Sl(g,E,S,M,p):hu(g,E):(re._visibility|=4,Sl(g,E,S,M,p)),p&&q&2048&&cg(E.alternate,E);break;case 24:Sl(g,E,S,M,p),p&&q&2048&&ug(E.alternate,E);break;default:Sl(g,E,S,M,p)}a=a.sibling}}function hu(r,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=r,u=a,p=u.flags;switch(u.tag){case 22:hu(l,u),p&2048&&cg(u.alternate,u);break;case 24:hu(l,u),p&2048&&ug(u.alternate,u);break;default:hu(l,u)}a=a.sibling}}var du=8192;function Cl(r){if(r.subtreeFlags&du)for(r=r.child;r!==null;)W1(r),r=r.sibling}function W1(r){switch(r.tag){case 26:Cl(r),r.flags&du&&r.memoizedState!==null&&B5(tr,r.memoizedState,r.memoizedProps);break;case 5:Cl(r);break;case 3:case 4:var a=tr;tr=qd(r.stateNode.containerInfo),Cl(r),tr=a;break;case 22:r.memoizedState===null&&(a=r.alternate,a!==null&&a.memoizedState!==null?(a=du,du=16777216,Cl(r),du=a):Cl(r));break;default:Cl(r)}}function Z1(r){var a=r.alternate;if(a!==null&&(r=a.child,r!==null)){a.child=null;do a=r.sibling,r.sibling=null,r=a;while(r!==null)}}function fu(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var u=a[l];En=u,eb(u,r)}Z1(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)J1(r),r=r.sibling}function J1(r){switch(r.tag){case 0:case 11:case 15:fu(r),r.flags&2048&&Js(9,r,r.return);break;case 3:fu(r);break;case 12:fu(r);break;case 22:var a=r.stateNode;r.memoizedState!==null&&a._visibility&4&&(r.return===null||r.return.tag!==13)?(a._visibility&=-5,Dd(r)):fu(r);break;default:fu(r)}}function Dd(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var u=a[l];En=u,eb(u,r)}Z1(r)}for(r=r.child;r!==null;){switch(a=r,a.tag){case 0:case 11:case 15:Js(8,a,a.return),Dd(a);break;case 22:l=a.stateNode,l._visibility&4&&(l._visibility&=-5,Dd(a));break;default:Dd(a)}r=r.sibling}}function eb(r,a){for(;En!==null;){var l=En;switch(l.tag){case 0:case 11:case 15:Js(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:eu(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,En=u;else e:for(l=r;En!==null;){u=En;var p=u.sibling,g=u.return;if(q1(u),u===l){En=null;break e}if(p!==null){p.return=g,En=p;break e}En=g}}}function n5(r,a,l,u){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vi(r,a,l,u){return new n5(r,a,l,u)}function hg(r){return r=r.prototype,!(!r||!r.isReactComponent)}function na(r,a){var l=r.alternate;return l===null?(l=Vi(r.tag,a,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=a,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&31457280,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,a=r.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l.refCleanup=r.refCleanup,l}function tb(r,a){r.flags&=31457282;var l=r.alternate;return l===null?(r.childLanes=0,r.lanes=a,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=l.childLanes,r.lanes=l.lanes,r.child=l.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,r.type=l.type,a=l.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),r}function kd(r,a,l,u,p,g){var E=0;if(u=r,typeof r=="function")hg(r)&&(E=1);else if(typeof r=="string")E=z5(r,l,mn.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case d:return vo(l.children,p,g,a);case m:E=8,p|=24;break;case y:return r=Vi(12,l,a,p|2),r.elementType=y,r.lanes=g,r;case U:return r=Vi(13,l,a,p),r.elementType=U,r.lanes=g,r;case P:return r=Vi(19,l,a,p),r.elementType=P,r.lanes=g,r;case Q:return nb(l,p,g,a);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case _:case T:E=10;break e;case b:E=9;break e;case A:E=11;break e;case B:E=14;break e;case G:E=16,u=null;break e}E=29,l=Error(i(130,r===null?"null":typeof r,"")),u=null}return a=Vi(E,l,a,p),a.elementType=r,a.type=u,a.lanes=g,a}function vo(r,a,l,u){return r=Vi(7,r,u,a),r.lanes=l,r}function nb(r,a,l,u){r=Vi(22,r,u,a),r.elementType=Q,r.lanes=l;var p={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var g=p._current;if(g===null)throw Error(i(456));if((p._pendingVisibility&2)===0){var E=Hs(g,2);E!==null&&(p._pendingVisibility|=2,Qn(E,g,2))}},attach:function(){var g=p._current;if(g===null)throw Error(i(456));if((p._pendingVisibility&2)!==0){var E=Hs(g,2);E!==null&&(p._pendingVisibility&=-3,Qn(E,g,2))}}};return r.stateNode=p,r}function dg(r,a,l){return r=Vi(6,r,null,a),r.lanes=l,r}function fg(r,a,l){return a=Vi(4,r.children!==null?r.children:[],r.key,a),a.lanes=l,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}function us(r){r.flags|=4}function ib(r,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!zb(a)){if(a=Pi.current,a!==null&&((dt&4194176)===dt?Or!==null:(dt&62914560)!==dt&&(dt&536870912)===0||a!==Or))throw Wc=vp,b_;r.flags|=8192}}function Md(r,a){a!==null&&(r.flags|=4),r.flags&16384&&(a=r.tag!==22?K():536870912,r.lanes|=a,Rl|=a)}function mu(r,a){if(!vt)switch(r.tailMode){case"hidden":a=r.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function Vt(r){var a=r.alternate!==null&&r.alternate.child===r.child,l=0,u=0;if(a)for(var p=r.child;p!==null;)l|=p.lanes|p.childLanes,u|=p.subtreeFlags&31457280,u|=p.flags&31457280,p.return=r,p=p.sibling;else for(p=r.child;p!==null;)l|=p.lanes|p.childLanes,u|=p.subtreeFlags,u|=p.flags,p.return=r,p=p.sibling;return r.subtreeFlags|=u,r.childLanes=l,a}function i5(r,a,l){var u=a.pendingProps;switch(gp(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(a),null;case 1:return Vt(a),null;case 3:return l=a.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),as(un),Ei(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(r===null||r.child===null)&&(Kc(a)?us(a):r===null||r.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,er!==null&&(wg(er),er=null))),Vt(a),null;case 26:return l=a.memoizedState,r===null?(us(a),l!==null?(Vt(a),ib(a,l)):(Vt(a),a.flags&=-16777217)):l?l!==r.memoizedState?(us(a),Vt(a),ib(a,l)):(Vt(a),a.flags&=-16777217):(r.memoizedProps!==u&&us(a),Vt(a),a.flags&=-16777217),null;case 27:Ps(a),l=Zt.current;var p=a.type;if(r!==null&&a.stateNode!=null)r.memoizedProps!==u&&us(a);else{if(!u){if(a.stateNode===null)throw Error(i(166));return Vt(a),null}r=mn.current,Kc(a)?v_(a):(r=Mb(p,u,l),a.stateNode=r,us(a))}return Vt(a),null;case 5:if(Ps(a),l=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==u&&us(a);else{if(!u){if(a.stateNode===null)throw Error(i(166));return Vt(a),null}if(r=mn.current,Kc(a))v_(a);else{switch(p=Hd(Zt.current),r){case 1:r=p.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:r=p.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":r=p.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":r=p.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":r=p.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof u.is=="string"?p.createElement("select",{is:u.is}):p.createElement("select"),u.multiple?r.multiple=!0:u.size&&(r.size=u.size);break;default:r=typeof u.is=="string"?p.createElement(l,{is:u.is}):p.createElement(l)}}r[Se]=a,r[Ve]=u;e:for(p=a.child;p!==null;){if(p.tag===5||p.tag===6)r.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===a)break e;for(;p.sibling===null;){if(p.return===null||p.return===a)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}a.stateNode=r;e:switch(Dn(r,l,u),l){case"button":case"input":case"select":case"textarea":r=!!u.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&us(a)}}return Vt(a),a.flags&=-16777217,null;case 6:if(r&&a.stateNode!=null)r.memoizedProps!==u&&us(a);else{if(typeof u!="string"&&a.stateNode===null)throw Error(i(166));if(r=Zt.current,Kc(a)){if(r=a.stateNode,l=a.memoizedProps,u=null,p=Xn,p!==null)switch(p.tag){case 27:case 5:u=p.memoizedProps}r[Se]=a,r=!!(r.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||xb(r.nodeValue,l)),r||oo(a)}else r=Hd(r).createTextNode(u),r[Se]=a,a.stateNode=r}return Vt(a),null;case 13:if(u=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(p=Kc(a),u!==null&&u.dehydrated!==null){if(r===null){if(!p)throw Error(i(318));if(p=a.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(i(317));p[Se]=a}else Yc(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Vt(a),p=!1}else er!==null&&(wg(er),er=null),p=!0;if(!p)return a.flags&256?(ns(a),a):(ns(a),null)}if(ns(a),(a.flags&128)!==0)return a.lanes=l,a;if(l=u!==null,r=r!==null&&r.memoizedState!==null,l){u=a.child,p=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(p=u.alternate.memoizedState.cachePool.pool);var g=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==p&&(u.flags|=2048)}return l!==r&&l&&(a.child.flags|=8192),Md(a,a.updateQueue),Vt(a),null;case 4:return Ei(),r===null&&kg(a.stateNode.containerInfo),Vt(a),null;case 10:return as(a.type),Vt(a),null;case 19:if(He(cn),p=a.memoizedState,p===null)return Vt(a),null;if(u=(a.flags&128)!==0,g=p.rendering,g===null)if(u)mu(p,!1);else{if(Ht!==0||r!==null&&(r.flags&128)!==0)for(r=a.child;r!==null;){if(g=gd(r),g!==null){for(a.flags|=128,mu(p,!1),r=g.updateQueue,a.updateQueue=r,Md(a,r),a.subtreeFlags=0,r=l,l=a.child;l!==null;)tb(l,r),l=l.sibling;return nt(cn,cn.current&1|2),a.child}r=r.sibling}p.tail!==null&&pn()>Nd&&(a.flags|=128,u=!0,mu(p,!1),a.lanes=4194304)}else{if(!u)if(r=gd(g),r!==null){if(a.flags|=128,u=!0,r=r.updateQueue,a.updateQueue=r,Md(a,r),mu(p,!0),p.tail===null&&p.tailMode==="hidden"&&!g.alternate&&!vt)return Vt(a),null}else 2*pn()-p.renderingStartTime>Nd&&l!==536870912&&(a.flags|=128,u=!0,mu(p,!1),a.lanes=4194304);p.isBackwards?(g.sibling=a.child,a.child=g):(r=p.last,r!==null?r.sibling=g:a.child=g,p.last=g)}return p.tail!==null?(a=p.tail,p.rendering=a,p.tail=a.sibling,p.renderingStartTime=pn(),a.sibling=null,r=cn.current,nt(cn,u?r&1|2:r&1),a):(Vt(a),null);case 22:case 23:return ns(a),bp(),u=a.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(a.flags|=8192):u&&(a.flags|=8192),u?(l&536870912)!==0&&(a.flags&128)===0&&(Vt(a),a.subtreeFlags&6&&(a.flags|=8192)):Vt(a),l=a.updateQueue,l!==null&&Md(a,l.retryQueue),l=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==l&&(a.flags|=2048),r!==null&&He(co),null;case 24:return l=null,r!==null&&(l=r.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),as(un),Vt(a),null;case 25:return null}throw Error(i(156,a.tag))}function r5(r,a){switch(gp(a),a.tag){case 1:return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return as(un),Ei(),r=a.flags,(r&65536)!==0&&(r&128)===0?(a.flags=r&-65537|128,a):null;case 26:case 27:case 5:return Ps(a),null;case 13:if(ns(a),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(i(340));Yc()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return He(cn),null;case 4:return Ei(),null;case 10:return as(a.type),null;case 22:case 23:return ns(a),bp(),r!==null&&He(co),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 24:return as(un),null;case 25:return null;default:return null}}function rb(r,a){switch(gp(a),a.tag){case 3:as(un),Ei();break;case 26:case 27:case 5:Ps(a);break;case 4:Ei();break;case 13:ns(a);break;case 19:He(cn);break;case 10:as(a.type);break;case 22:case 23:ns(a),bp(),r!==null&&He(co);break;case 24:as(un)}}var s5={getCacheForType:function(r){var a=$n(un),l=a.data.get(r);return l===void 0&&(l=r(),a.data.set(r,l)),l}},a5=typeof WeakMap=="function"?WeakMap:Map,$t=0,Dt=null,tt=null,dt=0,kt=0,mi=null,hs=!1,xl=!1,mg=!1,ds=0,Ht=0,ia=0,_o=0,pg=0,$i=0,Rl=0,pu=null,kr=null,gg=!1,yg=0,Nd=1/0,Pd=null,ra=null,Ld=!1,bo=null,gu=0,vg=0,_g=null,yu=0,bg=null;function pi(){if(($t&2)!==0&&dt!==0)return dt&-dt;if(R.T!==null){var r=_l;return r!==0?r:Rg()}return Oe()}function sb(){$i===0&&($i=(dt&536870912)===0||vt?$():536870912);var r=Pi.current;return r!==null&&(r.flags|=32),$i}function Qn(r,a,l){(r===Dt&&kt===2||r.cancelPendingCommit!==null)&&(Il(r,0),fs(r,dt,$i,!1)),se(r,l),(($t&2)===0||r!==Dt)&&(r===Dt&&(($t&2)===0&&(_o|=l),Ht===4&&fs(r,dt,$i,!1)),Mr(r))}function ab(r,a,l){if(($t&6)!==0)throw Error(i(327));var u=!l&&(a&60)===0&&(a&r.expiredLanes)===0||_r(r,a),p=u?c5(r,a):Ag(r,a,!0),g=u;do{if(p===0){xl&&!u&&fs(r,a,0,!1);break}else if(p===6)fs(r,a,0,!hs);else{if(l=r.current.alternate,g&&!o5(l)){p=Ag(r,a,!1),g=!1;continue}if(p===2){if(g=a,r.errorRecoveryDisabledLanes&g)var E=0;else E=r.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){a=E;e:{var S=r;p=pu;var M=S.current.memoizedState.isDehydrated;if(M&&(Il(S,E).flags|=256),E=Ag(S,E,!1),E!==2){if(mg&&!M){S.errorRecoveryDisabledLanes|=g,_o|=g,p=4;break e}g=kr,kr=p,g!==null&&wg(g)}p=E}if(g=!1,p!==2)continue}}if(p===1){Il(r,0),fs(r,a,0,!0);break}e:{switch(u=r,p){case 0:case 1:throw Error(i(345));case 4:if((a&4194176)===a){fs(u,a,$i,!hs);break e}break;case 2:kr=null;break;case 3:case 5:break;default:throw Error(i(329))}if(u.finishedWork=l,u.finishedLanes=a,(a&62914560)===a&&(g=yg+300-pn(),10<g)){if(fs(u,a,$i,!hs),xn(u,0)!==0)break e;u.timeoutHandle=Ob(ob.bind(null,u,l,kr,Pd,gg,a,$i,_o,Rl,hs,2,-0,0),g);break e}ob(u,l,kr,Pd,gg,a,$i,_o,Rl,hs,0,-0,0)}}break}while(!0);Mr(r)}function wg(r){kr===null?kr=r:kr.push.apply(kr,r)}function ob(r,a,l,u,p,g,E,S,M,q,re,he,J){var ie=a.subtreeFlags;if((ie&8192||(ie&16785408)===16785408)&&(Tu={stylesheets:null,count:0,unsuspend:F5},W1(a),a=H5(),a!==null)){r.cancelPendingCommit=a(mb.bind(null,r,l,u,p,E,S,M,1,he,J)),fs(r,g,E,!q);return}mb(r,l,u,p,E,S,M,re,he,J)}function o5(r){for(var a=r;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var p=l[u],g=p.getSnapshot;p=p.value;try{if(!hi(g(),p))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function fs(r,a,l,u){a&=~pg,a&=~_o,r.suspendedLanes|=a,r.pingedLanes&=~a,u&&(r.warmLanes|=a),u=r.expirationTimes;for(var p=a;0<p;){var g=31-yn(p),E=1<<g;u[g]=-1,p&=~E}l!==0&&Ne(r,l,a)}function Ud(){return($t&6)===0?(vu(0),!1):!0}function Eg(){if(tt!==null){if(kt===0)var r=tt.return;else r=tt,ss=po=null,Rp(r),yl=null,Zc=0,r=tt;for(;r!==null;)rb(r.alternate,r),r=r.return;tt=null}}function Il(r,a){r.finishedWork=null,r.finishedLanes=0;var l=r.timeoutHandle;l!==-1&&(r.timeoutHandle=-1,C5(l)),l=r.cancelPendingCommit,l!==null&&(r.cancelPendingCommit=null,l()),Eg(),Dt=r,tt=l=na(r.current,null),dt=a,kt=0,mi=null,hs=!1,xl=_r(r,a),mg=!1,Rl=$i=pg=_o=ia=Ht=0,kr=pu=null,gg=!1,(a&8)!==0&&(a|=a&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=a;0<u;){var p=31-yn(u),g=1<<p;a|=r[p],u&=~g}return ds=a,od(),l}function lb(r,a){We=null,R.H=Dr,a===Qc?(a=T_(),kt=3):a===b_?(a=T_(),kt=4):kt=a===w1?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,mi=a,tt===null&&(Ht=1,xd(r,ki(a,r.current)))}function cb(){var r=R.H;return R.H=Dr,r===null?Dr:r}function ub(){var r=R.A;return R.A=s5,r}function Tg(){Ht=4,hs||(dt&4194176)!==dt&&Pi.current!==null||(xl=!0),(ia&134217727)===0&&(_o&134217727)===0||Dt===null||fs(Dt,dt,$i,!1)}function Ag(r,a,l){var u=$t;$t|=2;var p=cb(),g=ub();(Dt!==r||dt!==a)&&(Pd=null,Il(r,a)),a=!1;var E=Ht;e:do try{if(kt!==0&&tt!==null){var S=tt,M=mi;switch(kt){case 8:Eg(),E=6;break e;case 3:case 2:case 6:Pi.current===null&&(a=!0);var q=kt;if(kt=0,mi=null,Ol(r,S,M,q),l&&xl){E=0;break e}break;default:q=kt,kt=0,mi=null,Ol(r,S,M,q)}}l5(),E=Ht;break}catch(re){lb(r,re)}while(!0);return a&&r.shellSuspendCounter++,ss=po=null,$t=u,R.H=p,R.A=g,tt===null&&(Dt=null,dt=0,od()),E}function l5(){for(;tt!==null;)hb(tt)}function c5(r,a){var l=$t;$t|=2;var u=cb(),p=ub();Dt!==r||dt!==a?(Pd=null,Nd=pn()+500,Il(r,a)):xl=_r(r,a);e:do try{if(kt!==0&&tt!==null){a=tt;var g=mi;t:switch(kt){case 1:kt=0,mi=null,Ol(r,a,g,1);break;case 2:if(w_(g)){kt=0,mi=null,db(a);break}a=function(){kt===2&&Dt===r&&(kt=7),Mr(r)},g.then(a,a);break e;case 3:kt=7;break e;case 4:kt=5;break e;case 7:w_(g)?(kt=0,mi=null,db(a)):(kt=0,mi=null,Ol(r,a,g,7));break;case 5:var E=null;switch(tt.tag){case 26:E=tt.memoizedState;case 5:case 27:var S=tt;if(!E||zb(E)){kt=0,mi=null;var M=S.sibling;if(M!==null)tt=M;else{var q=S.return;q!==null?(tt=q,Vd(q)):tt=null}break t}}kt=0,mi=null,Ol(r,a,g,5);break;case 6:kt=0,mi=null,Ol(r,a,g,6);break;case 8:Eg(),Ht=6;break e;default:throw Error(i(462))}}u5();break}catch(re){lb(r,re)}while(!0);return ss=po=null,R.H=u,R.A=p,$t=l,tt!==null?0:(Dt=null,dt=0,od(),Ht)}function u5(){for(;tt!==null&&!Hr();)hb(tt)}function hb(r){var a=M1(r.alternate,r,ds);r.memoizedProps=r.pendingProps,a===null?Vd(r):tt=a}function db(r){var a=r,l=a.alternate;switch(a.tag){case 15:case 0:a=x1(l,a,a.pendingProps,a.type,void 0,dt);break;case 11:a=x1(l,a,a.pendingProps,a.type.render,a.ref,dt);break;case 5:Rp(a);default:rb(l,a),a=tt=tb(a,ds),a=M1(l,a,ds)}r.memoizedProps=r.pendingProps,a===null?Vd(r):tt=a}function Ol(r,a,l,u){ss=po=null,Rp(a),yl=null,Zc=0;var p=a.return;try{if(Zx(r,p,a,l,dt)){Ht=1,xd(r,ki(l,r.current)),tt=null;return}}catch(g){if(p!==null)throw tt=p,g;Ht=1,xd(r,ki(l,r.current)),tt=null;return}a.flags&32768?(vt||u===1?r=!0:xl||(dt&536870912)!==0?r=!1:(hs=r=!0,(u===2||u===3||u===6)&&(u=Pi.current,u!==null&&u.tag===13&&(u.flags|=16384))),fb(a,r)):Vd(a)}function Vd(r){var a=r;do{if((a.flags&32768)!==0){fb(a,hs);return}r=a.return;var l=i5(a.alternate,a,ds);if(l!==null){tt=l;return}if(a=a.sibling,a!==null){tt=a;return}tt=a=r}while(a!==null);Ht===0&&(Ht=5)}function fb(r,a){do{var l=r5(r.alternate,r);if(l!==null){l.flags&=32767,tt=l;return}if(l=r.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(r=r.sibling,r!==null)){tt=r;return}tt=r=l}while(r!==null);Ht=6,tt=null}function mb(r,a,l,u,p,g,E,S,M,q){var re=R.T,he=ge.p;try{ge.p=2,R.T=null,h5(r,a,l,u,he,p,g,E,S,M,q)}finally{R.T=re,ge.p=he}}function h5(r,a,l,u,p,g,E,S){do Dl();while(bo!==null);if(($t&6)!==0)throw Error(i(327));var M=r.finishedWork;if(u=r.finishedLanes,M===null)return null;if(r.finishedWork=null,r.finishedLanes=0,M===r.current)throw Error(i(177));r.callbackNode=null,r.callbackPriority=0,r.cancelPendingCommit=null;var q=M.lanes|M.childLanes;if(q|=fp,_e(r,u,q,g,E,S),r===Dt&&(tt=Dt=null,dt=0),(M.subtreeFlags&10256)===0&&(M.flags&10256)===0||Ld||(Ld=!0,vg=q,_g=l,p5(ci,function(){return Dl(),null})),l=(M.flags&15990)!==0,(M.subtreeFlags&15990)!==0||l?(l=R.T,R.T=null,g=ge.p,ge.p=2,E=$t,$t|=4,e5(r,M),Y1(M,r),Px(Lg,r.containerInfo),Qd=!!Pg,Lg=Pg=null,r.current=M,H1(r,M.alternate,M),Us(),$t=E,ge.p=g,R.T=l):r.current=M,Ld?(Ld=!1,bo=r,gu=u):pb(r,q),q=r.pendingLanes,q===0&&(ra=null),Vs(M.stateNode),Mr(r),a!==null)for(p=r.onRecoverableError,M=0;M<a.length;M++)q=a[M],p(q.value,{componentStack:q.stack});return(gu&3)!==0&&Dl(),q=r.pendingLanes,(u&4194218)!==0&&(q&42)!==0?r===bg?yu++:(yu=0,bg=r):yu=0,vu(0),null}function pb(r,a){(r.pooledCacheLanes&=a)===0&&(a=r.pooledCache,a!=null&&(r.pooledCache=null,eu(a)))}function Dl(){if(bo!==null){var r=bo,a=vg;vg=0;var l=Ie(gu),u=R.T,p=ge.p;try{if(ge.p=32>l?32:l,R.T=null,bo===null)var g=!1;else{l=_g,_g=null;var E=bo,S=gu;if(bo=null,gu=0,($t&6)!==0)throw Error(i(331));var M=$t;if($t|=4,J1(E.current),Q1(E,E.current,S,l),$t=M,vu(0,!1),gn&&typeof gn.onPostCommitFiberRoot=="function")try{gn.onPostCommitFiberRoot(Qi,E)}catch{}g=!0}return g}finally{ge.p=p,R.T=u,pb(r,a)}}return!1}function gb(r,a,l){a=ki(l,a),a=Fp(r.stateNode,a,2),r=Zs(r,a,2),r!==null&&(se(r,2),Mr(r))}function It(r,a,l){if(r.tag===3)gb(r,r,l);else for(;a!==null;){if(a.tag===3){gb(a,r,l);break}else if(a.tag===1){var u=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ra===null||!ra.has(u))){r=ki(l,r),l=_1(2),u=Zs(a,l,2),u!==null&&(b1(l,u,a,r),se(u,2),Mr(u));break}}a=a.return}}function Sg(r,a,l){var u=r.pingCache;if(u===null){u=r.pingCache=new a5;var p=new Set;u.set(a,p)}else p=u.get(a),p===void 0&&(p=new Set,u.set(a,p));p.has(l)||(mg=!0,p.add(l),r=d5.bind(null,r,a,l),a.then(r,r))}function d5(r,a,l){var u=r.pingCache;u!==null&&u.delete(a),r.pingedLanes|=r.suspendedLanes&l,r.warmLanes&=~l,Dt===r&&(dt&l)===l&&(Ht===4||Ht===3&&(dt&62914560)===dt&&300>pn()-yg?($t&2)===0&&Il(r,0):pg|=l,Rl===dt&&(Rl=0)),Mr(r)}function yb(r,a){a===0&&(a=K()),r=Hs(r,a),r!==null&&(se(r,a),Mr(r))}function f5(r){var a=r.memoizedState,l=0;a!==null&&(l=a.retryLane),yb(r,l)}function m5(r,a){var l=0;switch(r.tag){case 13:var u=r.stateNode,p=r.memoizedState;p!==null&&(l=p.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(a),yb(r,l)}function p5(r,a){return Br(r,a)}var $d=null,kl=null,Cg=!1,jd=!1,xg=!1,wo=0;function Mr(r){r!==kl&&r.next===null&&(kl===null?$d=kl=r:kl=kl.next=r),jd=!0,Cg||(Cg=!0,y5(g5))}function vu(r,a){if(!xg&&jd){xg=!0;do for(var l=!1,u=$d;u!==null;){if(r!==0){var p=u.pendingLanes;if(p===0)var g=0;else{var E=u.suspendedLanes,S=u.pingedLanes;g=(1<<31-yn(42|r)+1)-1,g&=p&~(E&~S),g=g&201326677?g&201326677|1:g?g|2:0}g!==0&&(l=!0,bb(u,g))}else g=dt,g=xn(u,u===Dt?g:0),(g&3)===0||_r(u,g)||(l=!0,bb(u,g));u=u.next}while(l);xg=!1}}function g5(){jd=Cg=!1;var r=0;wo!==0&&(S5()&&(r=wo),wo=0);for(var a=pn(),l=null,u=$d;u!==null;){var p=u.next,g=vb(u,a);g===0?(u.next=null,l===null?$d=p:l.next=p,p===null&&(kl=l)):(l=u,(r!==0||(g&3)!==0)&&(jd=!0)),u=p}vu(r)}function vb(r,a){for(var l=r.suspendedLanes,u=r.pingedLanes,p=r.expirationTimes,g=r.pendingLanes&-62914561;0<g;){var E=31-yn(g),S=1<<E,M=p[E];M===-1?((S&l)===0||(S&u)!==0)&&(p[E]=$s(S,a)):M<=a&&(r.expiredLanes|=S),g&=~S}if(a=Dt,l=dt,l=xn(r,r===a?l:0),u=r.callbackNode,l===0||r===a&&kt===2||r.cancelPendingCommit!==null)return u!==null&&u!==null&&Zn(u),r.callbackNode=null,r.callbackPriority=0;if((l&3)===0||_r(r,l)){if(a=l&-l,a===r.callbackPriority)return a;switch(u!==null&&Zn(u),Ie(l)){case 2:case 8:l=Gt;break;case 32:l=ci;break;case 268435456:l=Jn;break;default:l=ci}return u=_b.bind(null,r),l=Br(l,u),r.callbackPriority=a,r.callbackNode=l,a}return u!==null&&u!==null&&Zn(u),r.callbackPriority=2,r.callbackNode=null,2}function _b(r,a){var l=r.callbackNode;if(Dl()&&r.callbackNode!==l)return null;var u=dt;return u=xn(r,r===Dt?u:0),u===0?null:(ab(r,u,a),vb(r,pn()),r.callbackNode!=null&&r.callbackNode===l?_b.bind(null,r):null)}function bb(r,a){if(Dl())return null;ab(r,a,!0)}function y5(r){x5(function(){($t&6)!==0?Br(At,r):r()})}function Rg(){return wo===0&&(wo=$()),wo}function wb(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Er(""+r)}function Eb(r,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,r.id&&l.setAttribute("form",r.id),a.parentNode.insertBefore(l,a),r=new FormData(r),l.parentNode.removeChild(l),r}function v5(r,a,l,u,p){if(a==="submit"&&l&&l.stateNode===p){var g=wb((p[Ve]||null).action),E=u.submitter;E&&(a=(a=E[Ve]||null)?wb(a.formAction):E.getAttribute("formAction"),a!==null&&(g=a,E=null));var S=new il("action","action",null,u,p);r.push({event:S,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(wo!==0){var M=E?Eb(p,E):new FormData(p);Up(l,{pending:!0,data:M,method:p.method,action:g},null,M)}}else typeof g=="function"&&(S.preventDefault(),M=E?Eb(p,E):new FormData(p),Up(l,{pending:!0,data:M,method:p.method,action:g},g,M))},currentTarget:p}]})}}for(var Ig=0;Ig<m_.length;Ig++){var Og=m_[Ig],_5=Og.toLowerCase(),b5=Og[0].toUpperCase()+Og.slice(1);Ji(_5,"on"+b5)}Ji(c_,"onAnimationEnd"),Ji(u_,"onAnimationIteration"),Ji(h_,"onAnimationStart"),Ji("dblclick","onDoubleClick"),Ji("focusin","onFocus"),Ji("focusout","onBlur"),Ji(Ux,"onTransitionRun"),Ji(Vx,"onTransitionStart"),Ji($x,"onTransitionCancel"),Ji(d_,"onTransitionEnd"),wt("onMouseEnter",["mouseout","mouseover"]),wt("onMouseLeave",["mouseout","mouseover"]),wt("onPointerEnter",["pointerout","pointerover"]),wt("onPointerLeave",["pointerout","pointerover"]),Qe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qe("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _u="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),w5=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_u));function Tb(r,a){a=(a&4)!==0;for(var l=0;l<r.length;l++){var u=r[l],p=u.event;u=u.listeners;e:{var g=void 0;if(a)for(var E=u.length-1;0<=E;E--){var S=u[E],M=S.instance,q=S.currentTarget;if(S=S.listener,M!==g&&p.isPropagationStopped())break e;g=S,p.currentTarget=q;try{g(p)}catch(re){Cd(re)}p.currentTarget=null,g=M}else for(E=0;E<u.length;E++){if(S=u[E],M=S.instance,q=S.currentTarget,S=S.listener,M!==g&&p.isPropagationStopped())break e;g=S,p.currentTarget=q;try{g(p)}catch(re){Cd(re)}p.currentTarget=null,g=M}}}}function ot(r,a){var l=a[Pt];l===void 0&&(l=a[Pt]=new Set);var u=r+"__bubble";l.has(u)||(Ab(a,r,2,!1),l.add(u))}function Dg(r,a,l){var u=0;a&&(u|=4),Ab(l,r,u,a)}var zd="_reactListening"+Math.random().toString(36).slice(2);function kg(r){if(!r[zd]){r[zd]=!0,br.forEach(function(l){l!=="selectionchange"&&(w5.has(l)||Dg(l,!1,r),Dg(l,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[zd]||(a[zd]=!0,Dg("selectionchange",!1,a))}}function Ab(r,a,l,u){switch(Kb(a)){case 2:var p=K5;break;case 8:p=Y5;break;default:p=qg}l=p.bind(null,a,l,r),p=void 0,!Ii||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(p=!0),u?p!==void 0?r.addEventListener(a,l,{capture:!0,passive:p}):r.addEventListener(a,l,!0):p!==void 0?r.addEventListener(a,l,{passive:p}):r.addEventListener(a,l,!1)}function Mg(r,a,l,u,p){var g=u;if((a&1)===0&&(a&2)===0&&u!==null)e:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var S=u.stateNode.containerInfo;if(S===p||S.nodeType===8&&S.parentNode===p)break;if(E===4)for(E=u.return;E!==null;){var M=E.tag;if((M===3||M===4)&&(M=E.stateNode.containerInfo,M===p||M.nodeType===8&&M.parentNode===p))return;E=E.return}for(;S!==null;){if(E=Kt(S),E===null)return;if(M=E.tag,M===5||M===6||M===26||M===27){u=g=E;continue e}S=S.parentNode}}u=u.return}Gh(function(){var q=g,re=nl(l),he=[];e:{var J=f_.get(r);if(J!==void 0){var ie=il,De=r;switch(r){case"keypress":if(Ar(l)===0)break e;case"keydown":case"keyup":ie=cl;break;case"focusin":De="focus",ie=al;break;case"focusout":De="blur",ie=al;break;case"beforeblur":case"afterblur":ie=al;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=Oi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=sp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=ed;break;case c_:case u_:case h_:ie=ol;break;case d_:ie=nd;break;case"scroll":case"scrollend":ie=Kh;break;case"wheel":ie=ul;break;case"copy":case"cut":case"paste":ie=ll;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=Bc;break;case"toggle":case"beforetoggle":ie=rd}var qe=(a&4)!==0,qt=!qe&&(r==="scroll"||r==="scrollend"),Y=qe?J!==null?J+"Capture":null:J;qe=[];for(var F=q,Z;F!==null;){var oe=F;if(Z=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||Z===null||Y===null||(oe=Qa(F,Y),oe!=null&&qe.push(bu(F,oe,Z))),qt)break;F=F.return}0<qe.length&&(J=new ie(J,De,null,l,re),he.push({event:J,listeners:qe}))}}if((a&7)===0){e:{if(J=r==="mouseover"||r==="pointerover",ie=r==="mouseout"||r==="pointerout",J&&l!==Ri&&(De=l.relatedTarget||l.fromElement)&&(Kt(De)||De[gt]))break e;if((ie||J)&&(J=re.window===re?re:(J=re.ownerDocument)?J.defaultView||J.parentWindow:window,ie?(De=l.relatedTarget||l.toElement,ie=q,De=De?Kt(De):null,De!==null&&(qt=me(De),qe=De.tag,De!==qt||qe!==5&&qe!==27&&qe!==6)&&(De=null)):(ie=null,De=q),ie!==De)){if(qe=Oi,oe="onMouseLeave",Y="onMouseEnter",F="mouse",(r==="pointerout"||r==="pointerover")&&(qe=Bc,oe="onPointerLeave",Y="onPointerEnter",F="pointer"),qt=ie==null?J:Ai(ie),Z=De==null?J:Ai(De),J=new qe(oe,F+"leave",ie,l,re),J.target=qt,J.relatedTarget=Z,oe=null,Kt(re)===q&&(qe=new qe(Y,F+"enter",De,l,re),qe.target=Z,qe.relatedTarget=qt,oe=qe),qt=oe,ie&&De)t:{for(qe=ie,Y=De,F=0,Z=qe;Z;Z=Ml(Z))F++;for(Z=0,oe=Y;oe;oe=Ml(oe))Z++;for(;0<F-Z;)qe=Ml(qe),F--;for(;0<Z-F;)Y=Ml(Y),Z--;for(;F--;){if(qe===Y||Y!==null&&qe===Y.alternate)break t;qe=Ml(qe),Y=Ml(Y)}qe=null}else qe=null;ie!==null&&Sb(he,J,ie,qe,!1),De!==null&&qt!==null&&Sb(he,qt,De,qe,!0)}}e:{if(J=q?Ai(q):window,ie=J.nodeName&&J.nodeName.toLowerCase(),ie==="select"||ie==="input"&&J.type==="file")var Ce=Zv;else if(ln(J))if(Jv)Ce=Mx;else{Ce=Dx;var Je=Ox}else ie=J.nodeName,!ie||ie.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?q&&Lc(q.elementType)&&(Ce=Zv):Ce=kx;if(Ce&&(Ce=Ce(r,q))){Jr(he,Ce,l,re);break e}Je&&Je(r,J,q),r==="focusout"&&q&&J.type==="number"&&q.memoizedProps.value!=null&&tl(J,"number",J.value)}switch(Je=q?Ai(q):window,r){case"focusin":(ln(Je)||Je.contentEditable==="true")&&(hl=Je,up=q,Gc=null);break;case"focusout":Gc=up=hl=null;break;case"mousedown":hp=!0;break;case"contextmenu":case"mouseup":case"dragend":hp=!1,o_(he,l,re);break;case"selectionchange":if(Lx)break;case"keydown":case"keyup":o_(he,l,re)}var Pe;if(xr)e:{switch(r){case"compositionstart":var $e="onCompositionStart";break e;case"compositionend":$e="onCompositionEnd";break e;case"compositionupdate":$e="onCompositionUpdate";break e}$e=void 0}else ut?ne(r,l)&&($e="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&($e="onCompositionStart");$e&&(w&&l.locale!=="ko"&&(ut||$e!=="onCompositionStart"?$e==="onCompositionEnd"&&ut&&(Pe=Vc()):(Tr=re,Bs="value"in Tr?Tr.value:Tr.textContent,ut=!0)),Je=Fd(q,$e),0<Je.length&&($e=new zc($e,r,null,l,re),he.push({event:$e,listeners:Je}),Pe?$e.data=Pe:(Pe=ye(l),Pe!==null&&($e.data=Pe)))),(Pe=v?on(r,l):ht(r,l))&&($e=Fd(q,"onBeforeInput"),0<$e.length&&(Je=new zc("onBeforeInput","beforeinput",null,l,re),he.push({event:Je,listeners:$e}),Je.data=Pe)),v5(he,r,q,l,re)}Tb(he,a)})}function bu(r,a,l){return{instance:r,listener:a,currentTarget:l}}function Fd(r,a){for(var l=a+"Capture",u=[];r!==null;){var p=r,g=p.stateNode;p=p.tag,p!==5&&p!==26&&p!==27||g===null||(p=Qa(r,l),p!=null&&u.unshift(bu(r,p,g)),p=Qa(r,a),p!=null&&u.push(bu(r,p,g))),r=r.return}return u}function Ml(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function Sb(r,a,l,u,p){for(var g=a._reactName,E=[];l!==null&&l!==u;){var S=l,M=S.alternate,q=S.stateNode;if(S=S.tag,M!==null&&M===u)break;S!==5&&S!==26&&S!==27||q===null||(M=q,p?(q=Qa(l,g),q!=null&&E.unshift(bu(l,q,M))):p||(q=Qa(l,g),q!=null&&E.push(bu(l,q,M)))),l=l.return}E.length!==0&&r.push({event:a,listeners:E})}var E5=/\r\n?/g,T5=/\u0000|\uFFFD/g;function Cb(r){return(typeof r=="string"?r:""+r).replace(E5,`
`).replace(T5,"")}function xb(r,a){return a=Cb(a),Cb(r)===a}function Bd(){}function xt(r,a,l,u,p,g){switch(l){case"children":typeof u=="string"?a==="body"||a==="textarea"&&u===""||xi(r,u):(typeof u=="number"||typeof u=="bigint")&&a!=="body"&&xi(r,""+u);break;case"className":js(r,"class",u);break;case"tabIndex":js(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":js(r,l,u);break;case"style":qh(r,u,g);break;case"data":if(a!=="object"){js(r,"data",u);break}case"src":case"href":if(u===""&&(a!=="a"||l!=="href")){r.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(l);break}u=Er(""+u),r.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(l==="formAction"?(a!=="input"&&xt(r,a,"name",p.name,p,null),xt(r,a,"formEncType",p.formEncType,p,null),xt(r,a,"formMethod",p.formMethod,p,null),xt(r,a,"formTarget",p.formTarget,p,null)):(xt(r,a,"encType",p.encType,p,null),xt(r,a,"method",p.method,p,null),xt(r,a,"target",p.target,p,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(l);break}u=Er(""+u),r.setAttribute(l,u);break;case"onClick":u!=null&&(r.onclick=Bd);break;case"onScroll":u!=null&&ot("scroll",r);break;case"onScrollEnd":u!=null&&ot("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(p.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}l=Er(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(l,""+u):r.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(l,""):r.removeAttribute(l);break;case"capture":case"download":u===!0?r.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(l,u):r.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(l,u):r.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(l):r.setAttribute(l,u);break;case"popover":ot("beforetoggle",r),ot("toggle",r),wr(r,"popover",u);break;case"xlinkActuate":Ci(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Ci(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Ci(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Ci(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Ci(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Ci(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Ci(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Ci(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Ci(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":wr(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=ip.get(l)||l,wr(r,l,u))}}function Ng(r,a,l,u,p,g){switch(l){case"style":qh(r,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(p.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"children":typeof u=="string"?xi(r,u):(typeof u=="number"||typeof u=="bigint")&&xi(r,""+u);break;case"onScroll":u!=null&&ot("scroll",r);break;case"onScrollEnd":u!=null&&ot("scrollend",r);break;case"onClick":u!=null&&(r.onclick=Bd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zi.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(p=l.endsWith("Capture"),a=l.slice(2,p?l.length-7:void 0),g=r[Ve]||null,g=g!=null?g[l]:null,typeof g=="function"&&r.removeEventListener(a,g,p),typeof u=="function")){typeof g!="function"&&g!==null&&(l in r?r[l]=null:r.hasAttribute(l)&&r.removeAttribute(l)),r.addEventListener(a,u,p);break e}l in r?r[l]=u:u===!0?r.setAttribute(l,""):wr(r,l,u)}}}function Dn(r,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ot("error",r),ot("load",r);var u=!1,p=!1,g;for(g in l)if(l.hasOwnProperty(g)){var E=l[g];if(E!=null)switch(g){case"src":u=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:xt(r,a,g,E,l,null)}}p&&xt(r,a,"srcSet",l.srcSet,l,null),u&&xt(r,a,"src",l.src,l,null);return;case"input":ot("invalid",r);var S=g=E=p=null,M=null,q=null;for(u in l)if(l.hasOwnProperty(u)){var re=l[u];if(re!=null)switch(u){case"name":p=re;break;case"type":E=re;break;case"checked":M=re;break;case"defaultChecked":q=re;break;case"value":g=re;break;case"defaultValue":S=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(137,a));break;default:xt(r,a,u,re,l,null)}}Ya(r,g,S,M,q,E,p,!1),Ka(r);return;case"select":ot("invalid",r),u=E=g=null;for(p in l)if(l.hasOwnProperty(p)&&(S=l[p],S!=null))switch(p){case"value":g=S;break;case"defaultValue":E=S;break;case"multiple":u=S;default:xt(r,a,p,S,l,null)}a=g,l=E,r.multiple=!!u,a!=null?yt(r,!!u,a,!1):l!=null&&yt(r,!!u,l,!0);return;case"textarea":ot("invalid",r),g=p=u=null;for(E in l)if(l.hasOwnProperty(E)&&(S=l[E],S!=null))switch(E){case"value":u=S;break;case"defaultValue":p=S;break;case"children":g=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(i(91));break;default:xt(r,a,E,S,l,null)}Fs(r,u,p,g),Ka(r);return;case"option":for(M in l)if(l.hasOwnProperty(M)&&(u=l[M],u!=null))switch(M){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:xt(r,a,M,u,l,null)}return;case"dialog":ot("cancel",r),ot("close",r);break;case"iframe":case"object":ot("load",r);break;case"video":case"audio":for(u=0;u<_u.length;u++)ot(_u[u],r);break;case"image":ot("error",r),ot("load",r);break;case"details":ot("toggle",r);break;case"embed":case"source":case"link":ot("error",r),ot("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in l)if(l.hasOwnProperty(q)&&(u=l[q],u!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:xt(r,a,q,u,l,null)}return;default:if(Lc(a)){for(re in l)l.hasOwnProperty(re)&&(u=l[re],u!==void 0&&Ng(r,a,re,u,l,void 0));return}}for(S in l)l.hasOwnProperty(S)&&(u=l[S],u!=null&&xt(r,a,S,u,l,null))}function A5(r,a,l,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,g=null,E=null,S=null,M=null,q=null,re=null;for(ie in l){var he=l[ie];if(l.hasOwnProperty(ie)&&he!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":M=he;default:u.hasOwnProperty(ie)||xt(r,a,ie,null,u,he)}}for(var J in u){var ie=u[J];if(he=l[J],u.hasOwnProperty(J)&&(ie!=null||he!=null))switch(J){case"type":g=ie;break;case"name":p=ie;break;case"checked":q=ie;break;case"defaultChecked":re=ie;break;case"value":E=ie;break;case"defaultValue":S=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(137,a));break;default:ie!==he&&xt(r,a,J,ie,u,he)}}zs(r,E,S,M,q,re,g,p);return;case"select":ie=E=S=J=null;for(g in l)if(M=l[g],l.hasOwnProperty(g)&&M!=null)switch(g){case"value":break;case"multiple":ie=M;default:u.hasOwnProperty(g)||xt(r,a,g,null,u,M)}for(p in u)if(g=u[p],M=l[p],u.hasOwnProperty(p)&&(g!=null||M!=null))switch(p){case"value":J=g;break;case"defaultValue":S=g;break;case"multiple":E=g;default:g!==M&&xt(r,a,p,g,u,M)}a=S,l=E,u=ie,J!=null?yt(r,!!l,J,!1):!!u!=!!l&&(a!=null?yt(r,!!l,a,!0):yt(r,!!l,l?[]:"",!1));return;case"textarea":ie=J=null;for(S in l)if(p=l[S],l.hasOwnProperty(S)&&p!=null&&!u.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:xt(r,a,S,null,u,p)}for(E in u)if(p=u[E],g=l[E],u.hasOwnProperty(E)&&(p!=null||g!=null))switch(E){case"value":J=p;break;case"defaultValue":ie=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(i(91));break;default:p!==g&&xt(r,a,E,p,u,g)}Xa(r,J,ie);return;case"option":for(var De in l)if(J=l[De],l.hasOwnProperty(De)&&J!=null&&!u.hasOwnProperty(De))switch(De){case"selected":r.selected=!1;break;default:xt(r,a,De,null,u,J)}for(M in u)if(J=u[M],ie=l[M],u.hasOwnProperty(M)&&J!==ie&&(J!=null||ie!=null))switch(M){case"selected":r.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:xt(r,a,M,J,u,ie)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var qe in l)J=l[qe],l.hasOwnProperty(qe)&&J!=null&&!u.hasOwnProperty(qe)&&xt(r,a,qe,null,u,J);for(q in u)if(J=u[q],ie=l[q],u.hasOwnProperty(q)&&J!==ie&&(J!=null||ie!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,a));break;default:xt(r,a,q,J,u,ie)}return;default:if(Lc(a)){for(var qt in l)J=l[qt],l.hasOwnProperty(qt)&&J!==void 0&&!u.hasOwnProperty(qt)&&Ng(r,a,qt,void 0,u,J);for(re in u)J=u[re],ie=l[re],!u.hasOwnProperty(re)||J===ie||J===void 0&&ie===void 0||Ng(r,a,re,J,u,ie);return}}for(var Y in l)J=l[Y],l.hasOwnProperty(Y)&&J!=null&&!u.hasOwnProperty(Y)&&xt(r,a,Y,null,u,J);for(he in u)J=u[he],ie=l[he],!u.hasOwnProperty(he)||J===ie||J==null&&ie==null||xt(r,a,he,J,u,ie)}var Pg=null,Lg=null;function Hd(r){return r.nodeType===9?r:r.ownerDocument}function Rb(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ib(r,a){if(r===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&a==="foreignObject"?0:r}function Ug(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Vg=null;function S5(){var r=window.event;return r&&r.type==="popstate"?r===Vg?!1:(Vg=r,!0):(Vg=null,!1)}var Ob=typeof setTimeout=="function"?setTimeout:void 0,C5=typeof clearTimeout=="function"?clearTimeout:void 0,Db=typeof Promise=="function"?Promise:void 0,x5=typeof queueMicrotask=="function"?queueMicrotask:typeof Db<"u"?function(r){return Db.resolve(null).then(r).catch(R5)}:Ob;function R5(r){setTimeout(function(){throw r})}function $g(r,a){var l=a,u=0;do{var p=l.nextSibling;if(r.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(u===0){r.removeChild(p),Ru(a);return}u--}else l!=="$"&&l!=="$?"&&l!=="$!"||u++;l=p}while(l);Ru(a)}function jg(r){var a=r.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":jg(l),ui(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}r.removeChild(l)}}function I5(r,a,l,u){for(;r.nodeType===1;){var p=l;if(r.nodeName.toLowerCase()!==a.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[Gn])switch(a){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(g=r.getAttribute("rel"),g==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(g!==p.rel||r.getAttribute("href")!==(p.href==null?null:p.href)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||r.getAttribute("title")!==(p.title==null?null:p.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(g=r.getAttribute("src"),(g!==(p.src==null?null:p.src)||r.getAttribute("type")!==(p.type==null?null:p.type)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&g&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(a==="input"&&r.type==="hidden"){var g=p.name==null?null:""+p.name;if(p.type==="hidden"&&r.getAttribute("name")===g)return r}else return r;if(r=nr(r.nextSibling),r===null)break}return null}function O5(r,a,l){if(a==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!l||(r=nr(r.nextSibling),r===null))return null;return r}function nr(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return r}function kb(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(a===0)return r;a--}else l==="/$"&&a++}r=r.previousSibling}return null}function Mb(r,a,l){switch(a=Hd(l),r){case"html":if(r=a.documentElement,!r)throw Error(i(452));return r;case"head":if(r=a.head,!r)throw Error(i(453));return r;case"body":if(r=a.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}var ji=new Map,Nb=new Set;function qd(r){return typeof r.getRootNode=="function"?r.getRootNode():r.ownerDocument}var ms=ge.d;ge.d={f:D5,r:k5,D:M5,C:N5,L:P5,m:L5,X:V5,S:U5,M:$5};function D5(){var r=ms.f(),a=Ud();return r||a}function k5(r){var a=Jt(r);a!==null&&a.tag===5&&a.type==="form"?o1(a):ms.r(r)}var Nl=typeof document>"u"?null:document;function Pb(r,a,l){var u=Nl;if(u&&typeof a=="string"&&a){var p=Ft(a);p='link[rel="'+r+'"][href="'+p+'"]',typeof l=="string"&&(p+='[crossorigin="'+l+'"]'),Nb.has(p)||(Nb.add(p),r={rel:r,crossOrigin:l,href:a},u.querySelector(p)===null&&(a=u.createElement("link"),Dn(a,"link",r),bt(a),u.head.appendChild(a)))}}function M5(r){ms.D(r),Pb("dns-prefetch",r,null)}function N5(r,a){ms.C(r,a),Pb("preconnect",r,a)}function P5(r,a,l){ms.L(r,a,l);var u=Nl;if(u&&r&&a){var p='link[rel="preload"][as="'+Ft(a)+'"]';a==="image"&&l&&l.imageSrcSet?(p+='[imagesrcset="'+Ft(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(p+='[imagesizes="'+Ft(l.imageSizes)+'"]')):p+='[href="'+Ft(r)+'"]';var g=p;switch(a){case"style":g=Pl(r);break;case"script":g=Ll(r)}ji.has(g)||(r=D({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:r,as:a},l),ji.set(g,r),u.querySelector(p)!==null||a==="style"&&u.querySelector(wu(g))||a==="script"&&u.querySelector(Eu(g))||(a=u.createElement("link"),Dn(a,"link",r),bt(a),u.head.appendChild(a)))}}function L5(r,a){ms.m(r,a);var l=Nl;if(l&&r){var u=a&&typeof a.as=="string"?a.as:"script",p='link[rel="modulepreload"][as="'+Ft(u)+'"][href="'+Ft(r)+'"]',g=p;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Ll(r)}if(!ji.has(g)&&(r=D({rel:"modulepreload",href:r},a),ji.set(g,r),l.querySelector(p)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Eu(g)))return}u=l.createElement("link"),Dn(u,"link",r),bt(u),l.head.appendChild(u)}}}function U5(r,a,l){ms.S(r,a,l);var u=Nl;if(u&&r){var p=ei(u).hoistableStyles,g=Pl(r);a=a||"default";var E=p.get(g);if(!E){var S={loading:0,preload:null};if(E=u.querySelector(wu(g)))S.loading=5;else{r=D({rel:"stylesheet",href:r,"data-precedence":a},l),(l=ji.get(g))&&zg(r,l);var M=E=u.createElement("link");bt(M),Dn(M,"link",r),M._p=new Promise(function(q,re){M.onload=q,M.onerror=re}),M.addEventListener("load",function(){S.loading|=1}),M.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Gd(E,a,u)}E={type:"stylesheet",instance:E,count:1,state:S},p.set(g,E)}}}function V5(r,a){ms.X(r,a);var l=Nl;if(l&&r){var u=ei(l).hoistableScripts,p=Ll(r),g=u.get(p);g||(g=l.querySelector(Eu(p)),g||(r=D({src:r,async:!0},a),(a=ji.get(p))&&Fg(r,a),g=l.createElement("script"),bt(g),Dn(g,"link",r),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(p,g))}}function $5(r,a){ms.M(r,a);var l=Nl;if(l&&r){var u=ei(l).hoistableScripts,p=Ll(r),g=u.get(p);g||(g=l.querySelector(Eu(p)),g||(r=D({src:r,async:!0,type:"module"},a),(a=ji.get(p))&&Fg(r,a),g=l.createElement("script"),bt(g),Dn(g,"link",r),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(p,g))}}function Lb(r,a,l,u){var p=(p=Zt.current)?qd(p):null;if(!p)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Pl(l.href),l=ei(p).hoistableStyles,u=l.get(a),u||(u={type:"style",instance:null,count:0,state:null},l.set(a,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){r=Pl(l.href);var g=ei(p).hoistableStyles,E=g.get(r);if(E||(p=p.ownerDocument||p,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(r,E),(g=p.querySelector(wu(r)))&&!g._p&&(E.instance=g,E.state.loading=5),ji.has(r)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},ji.set(r,l),g||j5(p,r,l,E.state))),a&&u===null)throw Error(i(528,""));return E}if(a&&u!==null)throw Error(i(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Ll(l),l=ei(p).hoistableScripts,u=l.get(a),u||(u={type:"script",instance:null,count:0,state:null},l.set(a,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Pl(r){return'href="'+Ft(r)+'"'}function wu(r){return'link[rel="stylesheet"]['+r+"]"}function Ub(r){return D({},r,{"data-precedence":r.precedence,precedence:null})}function j5(r,a,l,u){r.querySelector('link[rel="preload"][as="style"]['+a+"]")?u.loading=1:(a=r.createElement("link"),u.preload=a,a.addEventListener("load",function(){return u.loading|=1}),a.addEventListener("error",function(){return u.loading|=2}),Dn(a,"link",l),bt(a),r.head.appendChild(a))}function Ll(r){return'[src="'+Ft(r)+'"]'}function Eu(r){return"script[async]"+r}function Vb(r,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var u=r.querySelector('style[data-href~="'+Ft(l.href)+'"]');if(u)return a.instance=u,bt(u),u;var p=D({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),bt(u),Dn(u,"style",p),Gd(u,l.precedence,r),a.instance=u;case"stylesheet":p=Pl(l.href);var g=r.querySelector(wu(p));if(g)return a.state.loading|=4,a.instance=g,bt(g),g;u=Ub(l),(p=ji.get(p))&&zg(u,p),g=(r.ownerDocument||r).createElement("link"),bt(g);var E=g;return E._p=new Promise(function(S,M){E.onload=S,E.onerror=M}),Dn(g,"link",u),a.state.loading|=4,Gd(g,l.precedence,r),a.instance=g;case"script":return g=Ll(l.src),(p=r.querySelector(Eu(g)))?(a.instance=p,bt(p),p):(u=l,(p=ji.get(g))&&(u=D({},l),Fg(u,p)),r=r.ownerDocument||r,p=r.createElement("script"),bt(p),Dn(p,"link",u),r.head.appendChild(p),a.instance=p);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(u=a.instance,a.state.loading|=4,Gd(u,l.precedence,r));return a.instance}function Gd(r,a,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=u.length?u[u.length-1]:null,g=p,E=0;E<u.length;E++){var S=u[E];if(S.dataset.precedence===a)g=S;else if(g!==p)break}g?g.parentNode.insertBefore(r,g.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(r,a.firstChild))}function zg(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.title==null&&(r.title=a.title)}function Fg(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.integrity==null&&(r.integrity=a.integrity)}var Kd=null;function $b(r,a,l){if(Kd===null){var u=new Map,p=Kd=new Map;p.set(l,u)}else p=Kd,u=p.get(l),u||(u=new Map,p.set(l,u));if(u.has(r))return u;for(u.set(r,null),l=l.getElementsByTagName(r),p=0;p<l.length;p++){var g=l[p];if(!(g[Gn]||g[Se]||r==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var E=g.getAttribute(a)||"";E=r+E;var S=u.get(E);S?S.push(g):u.set(E,[g])}}return u}function jb(r,a,l){r=r.ownerDocument||r,r.head.insertBefore(l,a==="title"?r.querySelector("head > title"):null)}function z5(r,a,l){if(l===1||a.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return r=a.disabled,typeof a.precedence=="string"&&r==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function zb(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var Tu=null;function F5(){}function B5(r,a,l){if(Tu===null)throw Error(i(475));var u=Tu;if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var p=Pl(l.href),g=r.querySelector(wu(p));if(g){r=g._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(u.count++,u=Yd.bind(u),r.then(u,u)),a.state.loading|=4,a.instance=g,bt(g);return}g=r.ownerDocument||r,l=Ub(l),(p=ji.get(p))&&zg(l,p),g=g.createElement("link"),bt(g);var E=g;E._p=new Promise(function(S,M){E.onload=S,E.onerror=M}),Dn(g,"link",l),a.instance=g}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(u.count++,a=Yd.bind(u),r.addEventListener("load",a),r.addEventListener("error",a))}}function H5(){if(Tu===null)throw Error(i(475));var r=Tu;return r.stylesheets&&r.count===0&&Bg(r,r.stylesheets),0<r.count?function(a){var l=setTimeout(function(){if(r.stylesheets&&Bg(r,r.stylesheets),r.unsuspend){var u=r.unsuspend;r.unsuspend=null,u()}},6e4);return r.unsuspend=a,function(){r.unsuspend=null,clearTimeout(l)}}:null}function Yd(){if(this.count--,this.count===0){if(this.stylesheets)Bg(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Xd=null;function Bg(r,a){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Xd=new Map,a.forEach(q5,r),Xd=null,Yd.call(r))}function q5(r,a){if(!(a.state.loading&4)){var l=Xd.get(r);if(l)var u=l.get(null);else{l=new Map,Xd.set(r,l);for(var p=r.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<p.length;g++){var E=p[g];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(l.set(E.dataset.precedence,E),u=E)}u&&l.set(null,u)}p=a.instance,E=p.getAttribute("data-precedence"),g=l.get(E)||u,g===u&&l.set(null,p),l.set(E,p),this.count++,u=Yd.bind(this),p.addEventListener("load",u),p.addEventListener("error",u),g?g.parentNode.insertBefore(p,g.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(p,r.firstChild)),a.state.loading|=4}}var Au={$$typeof:T,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function G5(r,a,l,u,p,g,E,S){this.tag=1,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ee(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ee(0),this.hiddenUpdates=ee(null),this.identifierPrefix=u,this.onUncaughtError=p,this.onCaughtError=g,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function Fb(r,a,l,u,p,g,E,S,M,q,re,he){return r=new G5(r,a,l,E,S,M,q,he),a=1,g===!0&&(a|=24),g=Vi(3,null,null,a),r.current=g,g.stateNode=r,a=wp(),a.refCount++,r.pooledCache=a,a.refCount++,g.memoizedState={element:u,isDehydrated:l,cache:a},tg(g),r}function Bb(r){return r?(r=ml,r):ml}function Hb(r,a,l,u,p,g){p=Bb(p),u.context===null?u.context=p:u.pendingContext=p,u=Ws(a),u.payload={element:l},g=g===void 0?null:g,g!==null&&(u.callback=g),l=Zs(r,u,a),l!==null&&(Qn(l,r,a),ou(l,r,a))}function qb(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<a?l:a}}function Hg(r,a){qb(r,a),(r=r.alternate)&&qb(r,a)}function Gb(r){if(r.tag===13){var a=Hs(r,67108864);a!==null&&Qn(a,r,67108864),Hg(r,67108864)}}var Qd=!0;function K5(r,a,l,u){var p=R.T;R.T=null;var g=ge.p;try{ge.p=2,qg(r,a,l,u)}finally{ge.p=g,R.T=p}}function Y5(r,a,l,u){var p=R.T;R.T=null;var g=ge.p;try{ge.p=8,qg(r,a,l,u)}finally{ge.p=g,R.T=p}}function qg(r,a,l,u){if(Qd){var p=Gg(u);if(p===null)Mg(r,a,u,Wd,l),Yb(r,u);else if(Q5(p,r,a,l,u))u.stopPropagation();else if(Yb(r,u),a&4&&-1<X5.indexOf(r)){for(;p!==null;){var g=Jt(p);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var E=Vn(g.pendingLanes);if(E!==0){var S=g;for(S.pendingLanes|=2,S.entangledLanes|=2;E;){var M=1<<31-yn(E);S.entanglements[1]|=M,E&=~M}Mr(g),($t&6)===0&&(Nd=pn()+500,vu(0))}}break;case 13:S=Hs(g,2),S!==null&&Qn(S,g,2),Ud(),Hg(g,2)}if(g=Gg(u),g===null&&Mg(r,a,u,Wd,l),g===p)break;p=g}p!==null&&u.stopPropagation()}else Mg(r,a,u,null,l)}}function Gg(r){return r=nl(r),Kg(r)}var Wd=null;function Kg(r){if(Wd=null,r=Kt(r),r!==null){var a=me(r);if(a===null)r=null;else{var l=a.tag;if(l===13){if(r=de(a),r!==null)return r;r=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null)}}return Wd=r,null}function Kb(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(li()){case At:return 2;case Gt:return 8;case ci:case Wo:return 32;case Jn:return 268435456;default:return 32}default:return 32}}var Yg=!1,sa=null,aa=null,oa=null,Su=new Map,Cu=new Map,la=[],X5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Yb(r,a){switch(r){case"focusin":case"focusout":sa=null;break;case"dragenter":case"dragleave":aa=null;break;case"mouseover":case"mouseout":oa=null;break;case"pointerover":case"pointerout":Su.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cu.delete(a.pointerId)}}function xu(r,a,l,u,p,g){return r===null||r.nativeEvent!==g?(r={blockedOn:a,domEventName:l,eventSystemFlags:u,nativeEvent:g,targetContainers:[p]},a!==null&&(a=Jt(a),a!==null&&Gb(a)),r):(r.eventSystemFlags|=u,a=r.targetContainers,p!==null&&a.indexOf(p)===-1&&a.push(p),r)}function Q5(r,a,l,u,p){switch(a){case"focusin":return sa=xu(sa,r,a,l,u,p),!0;case"dragenter":return aa=xu(aa,r,a,l,u,p),!0;case"mouseover":return oa=xu(oa,r,a,l,u,p),!0;case"pointerover":var g=p.pointerId;return Su.set(g,xu(Su.get(g)||null,r,a,l,u,p)),!0;case"gotpointercapture":return g=p.pointerId,Cu.set(g,xu(Cu.get(g)||null,r,a,l,u,p)),!0}return!1}function Xb(r){var a=Kt(r.target);if(a!==null){var l=me(a);if(l!==null){if(a=l.tag,a===13){if(a=de(l),a!==null){r.blockedOn=a,be(r.priority,function(){if(l.tag===13){var u=pi(),p=Hs(l,u);p!==null&&Qn(p,l,u),Hg(l,u)}});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Zd(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var l=Gg(r.nativeEvent);if(l===null){l=r.nativeEvent;var u=new l.constructor(l.type,l);Ri=u,l.target.dispatchEvent(u),Ri=null}else return a=Jt(l),a!==null&&Gb(a),r.blockedOn=l,!1;a.shift()}return!0}function Qb(r,a,l){Zd(r)&&l.delete(a)}function W5(){Yg=!1,sa!==null&&Zd(sa)&&(sa=null),aa!==null&&Zd(aa)&&(aa=null),oa!==null&&Zd(oa)&&(oa=null),Su.forEach(Qb),Cu.forEach(Qb)}function Jd(r,a){r.blockedOn===a&&(r.blockedOn=null,Yg||(Yg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,W5)))}var ef=null;function Wb(r){ef!==r&&(ef=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){ef===r&&(ef=null);for(var a=0;a<r.length;a+=3){var l=r[a],u=r[a+1],p=r[a+2];if(typeof u!="function"){if(Kg(u||l)===null)continue;break}var g=Jt(l);g!==null&&(r.splice(a,3),a-=3,Up(g,{pending:!0,data:p,method:l.method,action:u},u,p))}}))}function Ru(r){function a(M){return Jd(M,r)}sa!==null&&Jd(sa,r),aa!==null&&Jd(aa,r),oa!==null&&Jd(oa,r),Su.forEach(a),Cu.forEach(a);for(var l=0;l<la.length;l++){var u=la[l];u.blockedOn===r&&(u.blockedOn=null)}for(;0<la.length&&(l=la[0],l.blockedOn===null);)Xb(l),l.blockedOn===null&&la.shift();if(l=(r.ownerDocument||r).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var p=l[u],g=l[u+1],E=p[Ve]||null;if(typeof g=="function")E||Wb(l);else if(E){var S=null;if(g&&g.hasAttribute("formAction")){if(p=g,E=g[Ve]||null)S=E.formAction;else if(Kg(p)!==null)continue}else S=E.action;typeof S=="function"?l[u+1]=S:(l.splice(u,3),u-=3),Wb(l)}}}function Xg(r){this._internalRoot=r}tf.prototype.render=Xg.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(i(409));var l=a.current,u=pi();Hb(l,u,r,a,null,null)},tf.prototype.unmount=Xg.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;r.tag===0&&Dl(),Hb(r.current,2,null,r,null,null),Ud(),a[gt]=null}};function tf(r){this._internalRoot=r}tf.prototype.unstable_scheduleHydration=function(r){if(r){var a=Oe();r={blockedOn:null,target:r,priority:a};for(var l=0;l<la.length&&a!==0&&a<la[l].priority;l++);la.splice(l,0,r),l===0&&Xb(r)}};var Zb=e.version;if(Zb!=="19.0.0")throw Error(i(527,Zb,"19.0.0"));ge.findDOMNode=function(r){var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=W(a),r=r!==null?fe(r):null,r=r===null?null:r.stateNode,r};var Z5={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:R,findFiberByHostInstance:Kt,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nf.isDisabled&&nf.supportsFiber)try{Qi=nf.inject(Z5),gn=nf}catch{}}return Ou.createRoot=function(r,a){if(!s(r))throw Error(i(299));var l=!1,u="",p=p1,g=g1,E=y1,S=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(g=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(S=a.unstable_transitionCallbacks)),a=Fb(r,1,!1,null,null,l,u,p,g,E,S,null),r[gt]=a.current,kg(r.nodeType===8?r.parentNode:r),new Xg(a)},Ou.hydrateRoot=function(r,a,l){if(!s(r))throw Error(i(299));var u=!1,p="",g=p1,E=g1,S=y1,M=null,q=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(E=l.onCaughtError),l.onRecoverableError!==void 0&&(S=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(M=l.unstable_transitionCallbacks),l.formState!==void 0&&(q=l.formState)),a=Fb(r,1,!0,a,l??null,u,p,g,E,S,M,q),a.context=Bb(null),l=a.current,u=pi(),p=Ws(u),p.callback=null,Zs(l,p,u),a.current.lanes=u,se(a,u),Mr(a),r[gt]=a.current,kg(r),new tf(a)},Ou.version="19.0.0",Ou}var lw;function dR(){if(lw)return Zg.exports;lw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Zg.exports=hR(),Zg.exports}var fR=dR(),Du={},cw;function mR(){if(cw)return Du;cw=1,Object.defineProperty(Du,"__esModule",{value:!0}),Du.parse=c,Du.serialize=m;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,o=(()=>{const b=function(){};return b.prototype=Object.create(null),b})();function c(b,T){const A=new o,U=b.length;if(U<2)return A;const P=(T==null?void 0:T.decode)||y;let B=0;do{const G=b.indexOf("=",B);if(G===-1)break;const Q=b.indexOf(";",B),ue=Q===-1?U:Q;if(G>ue){B=b.lastIndexOf(";",G-1)+1;continue}const V=h(b,B,G),te=d(b,G,V),k=b.slice(V,te);if(A[k]===void 0){let I=h(b,G+1,ue),R=d(b,ue,I);const D=P(b.slice(I,R));A[k]=D}B=ue+1}while(B<U);return A}function h(b,T,A){do{const U=b.charCodeAt(T);if(U!==32&&U!==9)return T}while(++T<A);return A}function d(b,T,A){for(;T>A;){const U=b.charCodeAt(--T);if(U!==32&&U!==9)return T+1}return A}function m(b,T,A){const U=(A==null?void 0:A.encode)||encodeURIComponent;if(!n.test(b))throw new TypeError(`argument name is invalid: ${b}`);const P=U(T);if(!e.test(P))throw new TypeError(`argument val is invalid: ${T}`);let B=b+"="+P;if(!A)return B;if(A.maxAge!==void 0){if(!Number.isInteger(A.maxAge))throw new TypeError(`option maxAge is invalid: ${A.maxAge}`);B+="; Max-Age="+A.maxAge}if(A.domain){if(!t.test(A.domain))throw new TypeError(`option domain is invalid: ${A.domain}`);B+="; Domain="+A.domain}if(A.path){if(!i.test(A.path))throw new TypeError(`option path is invalid: ${A.path}`);B+="; Path="+A.path}if(A.expires){if(!_(A.expires)||!Number.isFinite(A.expires.valueOf()))throw new TypeError(`option expires is invalid: ${A.expires}`);B+="; Expires="+A.expires.toUTCString()}if(A.httpOnly&&(B+="; HttpOnly"),A.secure&&(B+="; Secure"),A.partitioned&&(B+="; Partitioned"),A.priority)switch(typeof A.priority=="string"?A.priority.toLowerCase():void 0){case"low":B+="; Priority=Low";break;case"medium":B+="; Priority=Medium";break;case"high":B+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${A.priority}`)}if(A.sameSite)switch(typeof A.sameSite=="string"?A.sameSite.toLowerCase():A.sameSite){case!0:case"strict":B+="; SameSite=Strict";break;case"lax":B+="; SameSite=Lax";break;case"none":B+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${A.sameSite}`)}return B}function y(b){if(b.indexOf("%")===-1)return b;try{return decodeURIComponent(b)}catch{return b}}function _(b){return s.call(b)==="[object Date]"}return Du}mR();/**
 * react-router v7.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var YE=n=>{throw TypeError(n)},pR=(n,e,t)=>e.has(n)||YE("Cannot "+t),n0=(n,e,t)=>(pR(n,e,"read from private field"),t?t.call(n):e.get(n)),gR=(n,e,t)=>e.has(n)?YE("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),uw="popstate";function yR(n={}){function e(i,s){let{pathname:o,search:c,hash:h}=i.location;return lh("",{pathname:o,search:c,hash:h},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(i,s){return typeof s=="string"?s:Ra(s)}return _R(e,t,null,n)}function st(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Cn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function vR(){return Math.random().toString(36).substring(2,10)}function hw(n,e){return{usr:n.state,key:n.key,idx:e}}function lh(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?La(e):e,state:t,key:e&&e.key||i||vR()}}function Ra({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function La(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function _R(n,e,t,i={}){let{window:s=document.defaultView,v5Compat:o=!1}=i,c=s.history,h="POP",d=null,m=y();m==null&&(m=0,c.replaceState({...c.state,idx:m},""));function y(){return(c.state||{idx:null}).idx}function _(){h="POP";let P=y(),B=P==null?null:P-m;m=P,d&&d({action:h,location:U.location,delta:B})}function b(P,B){h="PUSH";let G=lh(U.location,P,B);m=y()+1;let Q=hw(G,m),ue=U.createHref(G);try{c.pushState(Q,"",ue)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;s.location.assign(ue)}o&&d&&d({action:h,location:U.location,delta:1})}function T(P,B){h="REPLACE";let G=lh(U.location,P,B);m=y();let Q=hw(G,m),ue=U.createHref(G);c.replaceState(Q,"",ue),o&&d&&d({action:h,location:U.location,delta:0})}function A(P){let B=s.location.origin!=="null"?s.location.origin:s.location.href,G=typeof P=="string"?P:Ra(P);return G=G.replace(/ $/,"%20"),st(B,`No window.location.(origin|href) available to create URL for href: ${G}`),new URL(G,B)}let U={get action(){return h},get location(){return n(s,c)},listen(P){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(uw,_),d=P,()=>{s.removeEventListener(uw,_),d=null}},createHref(P){return e(s,P)},createURL:A,encodeLocation(P){let B=A(P);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:b,replace:T,go(P){return c.go(P)}};return U}var ju,dw=class{constructor(n){if(gR(this,ju,new Map),n)for(let[e,t]of n)this.set(e,t)}get(n){if(n0(this,ju).has(n))return n0(this,ju).get(n);if(n.defaultValue!==void 0)return n.defaultValue;throw new Error("No value found for context")}set(n,e){n0(this,ju).set(n,e)}};ju=new WeakMap;var bR=new Set(["lazy","caseSensitive","path","id","index","children"]);function wR(n){return n.index===!0}function Pf(n,e,t=[],i={}){return n.map((s,o)=>{let c=[...t,String(o)],h=typeof s.id=="string"?s.id:c.join("-");if(st(s.index!==!0||!s.children,"Cannot specify children on an index route"),st(!i[h],`Found a route id collision on id "${h}".  Route id's must be globally unique within Data Router usages`),wR(s)){let d={...s,...e(s),id:h};return i[h]=d,d}else{let d={...s,...e(s),id:h,children:void 0};return i[h]=d,s.children&&(d.children=Pf(s.children,e,c,i)),d}})}function pa(n,e,t="/"){return bf(n,e,t,!1)}function bf(n,e,t,i){let s=typeof e=="string"?La(e):e,o=Gi(s.pathname||"/",t);if(o==null)return null;let c=XE(n);TR(c);let h=null;for(let d=0;h==null&&d<c.length;++d){let m=NR(o);h=kR(c[d],m,i)}return h}function ER(n,e){let{route:t,pathname:i,params:s}=n;return{id:t.id,pathname:i,params:s,data:e[t.id],handle:t.handle}}function XE(n,e=[],t=[],i=""){let s=(o,c,h)=>{let d={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};d.relativePath.startsWith("/")&&(st(d.relativePath.startsWith(i),`Absolute route path "${d.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(i.length));let m=Ur([i,d.relativePath]),y=t.concat(d);o.children&&o.children.length>0&&(st(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),XE(o.children,e,y,m)),!(o.path==null&&!o.index)&&e.push({path:m,score:OR(m,o.index),routesMeta:y})};return n.forEach((o,c)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))s(o,c);else for(let d of QE(o.path))s(o,c,d)}),e}function QE(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(i.length===0)return s?[o,""]:[o];let c=QE(i.join("/")),h=[];return h.push(...c.map(d=>d===""?o:[o,d].join("/"))),s&&h.push(...c),h.map(d=>n.startsWith("/")&&d===""?"/":d)}function TR(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:DR(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var AR=/^:[\w-]+$/,SR=3,CR=2,xR=1,RR=10,IR=-2,fw=n=>n==="*";function OR(n,e){let t=n.split("/"),i=t.length;return t.some(fw)&&(i+=IR),e&&(i+=CR),t.filter(s=>!fw(s)).reduce((s,o)=>s+(AR.test(o)?SR:o===""?xR:RR),i)}function DR(n,e){return n.length===e.length&&n.slice(0,-1).every((i,s)=>i===e[s])?n[n.length-1]-e[e.length-1]:0}function kR(n,e,t=!1){let{routesMeta:i}=n,s={},o="/",c=[];for(let h=0;h<i.length;++h){let d=i[h],m=h===i.length-1,y=o==="/"?e:e.slice(o.length)||"/",_=Lf({path:d.relativePath,caseSensitive:d.caseSensitive,end:m},y),b=d.route;if(!_&&m&&t&&!i[i.length-1].route.index&&(_=Lf({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},y)),!_)return null;Object.assign(s,_.params),c.push({params:s,pathname:Ur([o,_.pathname]),pathnameBase:UR(Ur([o,_.pathnameBase])),route:b}),_.pathnameBase!=="/"&&(o=Ur([o,_.pathnameBase]))}return c}function Lf(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=MR(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let o=s[0],c=o.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:i.reduce((m,{paramName:y,isOptional:_},b)=>{if(y==="*"){let A=h[b]||"";c=o.slice(0,o.length-A.length).replace(/(.)\/+$/,"$1")}const T=h[b];return _&&!T?m[y]=void 0:m[y]=(T||"").replace(/%2F/g,"/"),m},{}),pathname:o,pathnameBase:c,pattern:n}}function MR(n,e=!1,t=!0){Cn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,d)=>(i.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function NR(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Cn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Gi(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function PR(n,e="/"){let{pathname:t,search:i="",hash:s=""}=typeof n=="string"?La(n):n;return{pathname:t?t.startsWith("/")?t:LR(t,e):e,search:VR(i),hash:$R(s)}}function LR(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function i0(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function WE(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function cm(n){let e=WE(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function um(n,e,t,i=!1){let s;typeof n=="string"?s=La(n):(s={...n},st(!s.pathname||!s.pathname.includes("?"),i0("?","pathname","search",s)),st(!s.pathname||!s.pathname.includes("#"),i0("#","pathname","hash",s)),st(!s.search||!s.search.includes("#"),i0("#","search","hash",s)));let o=n===""||s.pathname==="",c=o?"/":s.pathname,h;if(c==null)h=t;else{let _=e.length-1;if(!i&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),_-=1;s.pathname=b.join("/")}h=_>=0?e[_]:"/"}let d=PR(s,h),m=c&&c!=="/"&&c.endsWith("/"),y=(o||c===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(m||y)&&(d.pathname+="/"),d}var Ur=n=>n.join("/").replace(/\/\/+/g,"/"),UR=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),VR=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,$R=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,Uf=class{constructor(n,e,t,i=!1){this.status=n,this.statusText=e||"",this.internal=i,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function ch(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var ZE=["POST","PUT","PATCH","DELETE"],jR=new Set(ZE),zR=["GET",...ZE],FR=new Set(zR),BR=new Set([301,302,303,307,308]),HR=new Set([307,308]),r0={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},qR={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ku={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},vy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,GR=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),JE="remix-router-transitions",eT=Symbol("ResetLoaderData");function KR(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";st(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let i=n.mapRouteProperties||GR,s={},o=Pf(n.routes,i,void 0,s),c,h=n.basename||"/",d=n.dataStrategy||ZR,m={unstable_middleware:!1,...n.future},y=null,_=new Set,b=null,T=null,A=null,U=n.hydrationData!=null,P=pa(o,n.history.location,h),B=!1,G=null;if(P==null&&!n.patchRoutesOnNavigation){let $=Bi(404,{pathname:n.history.location.pathname}),{matches:K,route:ee}=Sw(o);P=K,G={[ee.id]:$}}P&&!n.hydrationData&&Vn(P,o,n.history.location.pathname).active&&(P=null);let Q;if(P)if(P.some($=>$.route.lazy))Q=!1;else if(!P.some($=>$.route.loader))Q=!0;else{let $=n.hydrationData?n.hydrationData.loaderData:null,K=n.hydrationData?n.hydrationData.errors:null;if(K){let ee=P.findIndex(se=>K[se.route.id]!==void 0);Q=P.slice(0,ee+1).every(se=>!R0(se.route,$,K))}else Q=P.every(ee=>!R0(ee.route,$,K))}else{Q=!1,P=[];let $=Vn(null,o,n.history.location.pathname);$.active&&$.matches&&(B=!0,P=$.matches)}let ue,V={historyAction:n.history.action,location:n.history.location,matches:P,initialized:Q,navigation:r0,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||G,fetchers:new Map,blockers:new Map},te="POP",k=!1,I,R=!1,D=new Map,L=null,H=!1,N=!1,Be=new Set,Ue=new Map,ae=0,we=-1,me=new Map,de=new Set,O=new Map,W=new Map,fe=new Set,pe=new Map,ge,ve=null;function ke(){if(y=n.history.listen(({action:$,location:K,delta:ee})=>{if(ge){ge(),ge=void 0;return}Cn(pe.size===0||ee!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let se=yn({currentLocation:V.location,nextLocation:K,historyAction:$});if(se&&ee!=null){let _e=new Promise(Ne=>{ge=Ne});n.history.go(ee*-1),qn(se,{state:"blocked",location:K,proceed(){qn(se,{state:"proceeding",proceed:void 0,reset:void 0,location:K}),_e.then(()=>n.history.go(ee))},reset(){let Ne=new Map(V.blockers);Ne.set(se,ku),He({blockers:Ne})}});return}return Zt($,K)}),t){uI(e,D);let $=()=>hI(e,D);e.addEventListener("pagehide",$),L=()=>e.removeEventListener("pagehide",$)}return V.initialized||Zt("POP",V.location,{initialHydration:!0}),ue}function Ke(){y&&y(),L&&L(),_.clear(),I&&I.abort(),V.fetchers.forEach(($,K)=>ci(K)),V.blockers.forEach(($,K)=>Vs(K))}function Xe($){return _.add($),()=>_.delete($)}function He($,K={}){V={...V,...$};let ee=[],se=[];V.fetchers.forEach((_e,Ne)=>{_e.state==="idle"&&(fe.has(Ne)?ee.push(Ne):se.push(Ne))}),fe.forEach(_e=>{!V.fetchers.has(_e)&&!Ue.has(_e)&&ee.push(_e)}),[..._].forEach(_e=>_e(V,{deletedFetchers:ee,viewTransitionOpts:K.viewTransitionOpts,flushSync:K.flushSync===!0})),ee.forEach(_e=>ci(_e)),se.forEach(_e=>V.fetchers.delete(_e))}function nt($,K,{flushSync:ee}={}){var be,Ae;let se=V.actionData!=null&&V.navigation.formMethod!=null&&sr(V.navigation.formMethod)&&V.navigation.state==="loading"&&((be=$.state)==null?void 0:be._isRedirect)!==!0,_e;K.actionData?Object.keys(K.actionData).length>0?_e=K.actionData:_e=null:se?_e=V.actionData:_e=null;let Ne=K.loaderData?Tw(V.loaderData,K.loaderData,K.matches||[],K.errors):V.loaderData,Me=V.blockers;Me.size>0&&(Me=new Map(Me),Me.forEach((Se,Ve)=>Me.set(Ve,ku)));let Ie=k===!0||V.navigation.formMethod!=null&&sr(V.navigation.formMethod)&&((Ae=$.state)==null?void 0:Ae._isRedirect)!==!0;c&&(o=c,c=void 0),H||te==="POP"||(te==="PUSH"?n.history.push($,$.state):te==="REPLACE"&&n.history.replace($,$.state));let Oe;if(te==="POP"){let Se=D.get(V.location.pathname);Se&&Se.has($.pathname)?Oe={currentLocation:V.location,nextLocation:$}:D.has($.pathname)&&(Oe={currentLocation:$,nextLocation:V.location})}else if(R){let Se=D.get(V.location.pathname);Se?Se.add($.pathname):(Se=new Set([$.pathname]),D.set(V.location.pathname,Se)),Oe={currentLocation:V.location,nextLocation:$}}He({...K,actionData:_e,loaderData:Ne,historyAction:te,location:$,initialized:!0,navigation:r0,revalidation:"idle",restoreScrollPosition:Wi($,K.matches||V.matches),preventScrollReset:Ie,blockers:Me},{viewTransitionOpts:Oe,flushSync:ee===!0}),te="POP",k=!1,R=!1,H=!1,N=!1,ve==null||ve.resolve(),ve=null}async function mn($,K){if(typeof $=="number"){n.history.go($);return}let ee=x0(V.location,V.matches,h,$,K==null?void 0:K.fromRouteId,K==null?void 0:K.relative),{path:se,submission:_e,error:Ne}=mw(!1,ee,K),Me=V.location,Ie=lh(V.location,se,K&&K.state);Ie={...Ie,...n.history.encodeLocation(Ie)};let Oe=K&&K.replace!=null?K.replace:void 0,be="PUSH";Oe===!0?be="REPLACE":Oe===!1||_e!=null&&sr(_e.formMethod)&&_e.formAction===V.location.pathname+V.location.search&&(be="REPLACE");let Ae=K&&"preventScrollReset"in K?K.preventScrollReset===!0:void 0,Se=(K&&K.flushSync)===!0,Ve=yn({currentLocation:Me,nextLocation:Ie,historyAction:be});if(Ve){qn(Ve,{state:"blocked",location:Ie,proceed(){qn(Ve,{state:"proceeding",proceed:void 0,reset:void 0,location:Ie}),mn($,K)},reset(){let gt=new Map(V.blockers);gt.set(Ve,ku),He({blockers:gt})}});return}await Zt(be,Ie,{submission:_e,pendingError:Ne,preventScrollReset:Ae,replace:K&&K.replace,enableViewTransition:K&&K.viewTransition,flushSync:Se})}function Xi(){ve||(ve=dI()),pn(),He({revalidation:"loading"});let $=ve.promise;return V.navigation.state==="submitting"?$:V.navigation.state==="idle"?(Zt(V.historyAction,V.location,{startUninterruptedRevalidation:!0}),$):(Zt(te||V.historyAction,V.navigation.location,{overrideNavigation:V.navigation,enableViewTransition:R===!0}),$)}async function Zt($,K,ee){I&&I.abort(),I=null,te=$,H=(ee&&ee.startUninterruptedRevalidation)===!0,Ti(V.location,V.matches),k=(ee&&ee.preventScrollReset)===!0,R=(ee&&ee.enableViewTransition)===!0;let se=c||o,_e=ee&&ee.overrideNavigation,Ne=ee!=null&&ee.initialHydration&&V.matches&&V.matches.length>0&&!B?V.matches:pa(se,K,h),Me=(ee&&ee.flushSync)===!0;if(Ne&&V.initialized&&!N&&sI(V.location,K)&&!(ee&&ee.submission&&sr(ee.submission.formMethod))){nt(K,{matches:Ne},{flushSync:Me});return}let Ie=Vn(Ne,se,K.pathname);if(Ie.active&&Ie.matches&&(Ne=Ie.matches),!Ne){let{error:Rt,notFoundMatches:pt,route:Mt}=qr(K.pathname);nt(K,{matches:pt,loaderData:{},errors:{[Mt.id]:Rt}},{flushSync:Me});return}I=new AbortController;let Oe=Ul(n.history,K,I.signal,ee&&ee.submission),be=new dw(n.unstable_getContext?await n.unstable_getContext():void 0),Ae;if(ee&&ee.pendingError)Ae=[Ro(Ne).route.id,{type:"error",error:ee.pendingError}];else if(ee&&ee.submission&&sr(ee.submission.formMethod)){let Rt=await gr(Oe,K,ee.submission,Ne,be,Ie.active,{replace:ee.replace,flushSync:Me});if(Rt.shortCircuited)return;if(Rt.pendingActionResult){let[pt,Mt]=Rt.pendingActionResult;if(yi(Mt)&&ch(Mt.error)&&Mt.error.status===404){I=null,nt(K,{matches:Rt.matches,loaderData:{},errors:{[pt]:Mt.error}});return}}Ne=Rt.matches||Ne,Ae=Rt.pendingActionResult,_e=s0(K,ee.submission),Me=!1,Ie.active=!1,Oe=Ul(n.history,Oe.url,Oe.signal)}let{shortCircuited:Se,matches:Ve,loaderData:gt,errors:Pt}=await yr(Oe,K,Ne,be,Ie.active,_e,ee&&ee.submission,ee&&ee.fetcherSubmission,ee&&ee.replace,ee&&ee.initialHydration===!0,Me,Ae);Se||(I=null,nt(K,{matches:Ve||Ne,...Aw(Ae),loaderData:gt,errors:Pt}))}async function gr($,K,ee,se,_e,Ne,Me={}){pn();let Ie=lI(K,ee);if(He({navigation:Ie},{flushSync:Me.flushSync===!0}),Ne){let Ae=await xn(se,K.pathname,$.signal);if(Ae.type==="aborted")return{shortCircuited:!0};if(Ae.type==="error"){let Se=Ro(Ae.partialMatches).route.id;return{matches:Ae.partialMatches,pendingActionResult:[Se,{type:"error",error:Ae.error}]}}else if(Ae.matches)se=Ae.matches;else{let{notFoundMatches:Se,error:Ve,route:gt}=qr(K.pathname);return{matches:Se,pendingActionResult:[gt.id,{type:"error",error:Ve}]}}}let Oe,be=zu(se,K);if(!be.route.action&&!be.route.lazy)Oe={type:"error",error:Bi(405,{method:$.method,pathname:K.pathname,routeId:be.route.id})};else{let Ae=await Hr("action",$,[be],se,_e,null);if(Oe=Ae[be.route.id],!Oe){for(let Se of se)if(Ae[Se.route.id]){Oe=Ae[Se.route.id];break}}if($.signal.aborted)return{shortCircuited:!0}}if(Io(Oe)){let Ae;return Me&&Me.replace!=null?Ae=Me.replace:Ae=bw(Oe.response.headers.get("Location"),new URL($.url),h)===V.location.pathname+V.location.search,await Zn($,Oe,!0,{submission:ee,replace:Ae}),{shortCircuited:!0}}if(yi(Oe)){let Ae=Ro(se,be.route.id);return(Me&&Me.replace)!==!0&&(te="PUSH"),{matches:se,pendingActionResult:[Ae.route.id,Oe]}}return{matches:se,pendingActionResult:[be.route.id,Oe]}}async function yr($,K,ee,se,_e,Ne,Me,Ie,Oe,be,Ae,Se){let Ve=Ne||s0(K,Me),gt=Me||Ie||xw(Ve),Pt=!H&&!be;if(_e){if(Pt){let wt=Ei(Se);He({navigation:Ve,...wt!==void 0?{actionData:wt}:{}},{flushSync:Ae})}let Qe=await xn(ee,K.pathname,$.signal);if(Qe.type==="aborted")return{shortCircuited:!0};if(Qe.type==="error"){let wt=Ro(Qe.partialMatches).route.id;return{matches:Qe.partialMatches,loaderData:{},errors:{[wt]:Qe.error}}}else if(Qe.matches)ee=Qe.matches;else{let{error:wt,notFoundMatches:vn,route:Gr}=qr(K.pathname);return{matches:vn,loaderData:{},errors:{[Gr.id]:wt}}}}let Rt=c||o,[pt,Mt]=gw(n.history,V,ee,gt,K,be===!0,N,Be,fe,O,de,Rt,h,Se);if(we=++ae,pt.length===0&&Mt.length===0){let Qe=vr();return nt(K,{matches:ee,loaderData:{},errors:Se&&yi(Se[1])?{[Se[0]]:Se[1].error}:null,...Aw(Se),...Qe?{fetchers:new Map(V.fetchers)}:{}},{flushSync:Ae}),{shortCircuited:!0}}if(Pt){let Qe={};if(!_e){Qe.navigation=Ve;let wt=Ei(Se);wt!==void 0&&(Qe.actionData=wt)}Mt.length>0&&(Qe.fetchers=Ha(Mt)),He(Qe,{flushSync:Ae})}Mt.forEach(Qe=>{Jn(Qe.key),Qe.controller&&Ue.set(Qe.key,Qe.controller)});let Gn=()=>Mt.forEach(Qe=>Jn(Qe.key));I&&I.signal.addEventListener("abort",Gn);let{loaderResults:ui,fetcherResults:Kt}=await Us(ee,pt,Mt,$,se);if($.signal.aborted)return{shortCircuited:!0};I&&I.signal.removeEventListener("abort",Gn),Mt.forEach(Qe=>Ue.delete(Qe.key));let Jt=rf(ui);if(Jt)return await Zn($,Jt.result,!0,{replace:Oe}),{shortCircuited:!0};if(Jt=rf(Kt),Jt)return de.add(Jt.key),await Zn($,Jt.result,!0,{replace:Oe}),{shortCircuited:!0};let{loaderData:Ai,errors:ei}=Ew(V,ee,ui,Se,Mt,Kt);be&&V.errors&&(ei={...V.errors,...ei});let bt=vr(),br=Qi(we),Zi=bt||br||Mt.length>0;return{matches:ee,loaderData:Ai,errors:ei,...Zi?{fetchers:new Map(V.fetchers)}:{}}}function Ei($){if($&&!yi($[1]))return{[$[0]]:$[1].data};if(V.actionData)return Object.keys(V.actionData).length===0?null:V.actionData}function Ha($){return $.forEach(K=>{let ee=V.fetchers.get(K.key),se=Mu(void 0,ee?ee.data:void 0);V.fetchers.set(K.key,se)}),new Map(V.fetchers)}async function Ps($,K,ee,se){Jn($);let _e=(se&&se.flushSync)===!0,Ne=c||o,Me=x0(V.location,V.matches,h,ee,K,se==null?void 0:se.relative),Ie=pa(Ne,Me,h),Oe=Vn(Ie,Ne,Me);if(Oe.active&&Oe.matches&&(Ie=Oe.matches),!Ie){At($,K,Bi(404,{pathname:Me}),{flushSync:_e});return}let{path:be,submission:Ae,error:Se}=mw(!0,Me,se);if(Se){At($,K,Se,{flushSync:_e});return}let Ve=zu(Ie,be),gt=new dw(n.unstable_getContext?await n.unstable_getContext():void 0),Pt=(se&&se.preventScrollReset)===!0;if(Ae&&sr(Ae.formMethod)){await Ls($,K,be,Ve,Ie,gt,Oe.active,_e,Pt,Ae);return}O.set($,{routeId:K,path:be}),await Br($,K,be,Ve,Ie,gt,Oe.active,_e,Pt,Ae)}async function Ls($,K,ee,se,_e,Ne,Me,Ie,Oe,be){pn(),O.delete($);function Ae(Ot){if(!Ot.route.action&&!Ot.route.lazy){let Si=Bi(405,{method:be.formMethod,pathname:ee,routeId:K});return At($,K,Si,{flushSync:Ie}),!0}return!1}if(!Me&&Ae(se))return;let Se=V.fetchers.get($);li($,cI(be,Se),{flushSync:Ie});let Ve=new AbortController,gt=Ul(n.history,ee,Ve.signal,be);if(Me){let Ot=await xn(_e,ee,gt.signal,$);if(Ot.type==="aborted")return;if(Ot.type==="error"){At($,K,Ot.error,{flushSync:Ie});return}else if(Ot.matches){if(_e=Ot.matches,se=zu(_e,ee),Ae(se))return}else{At($,K,Bi(404,{pathname:ee}),{flushSync:Ie});return}}Ue.set($,Ve);let Pt=ae,pt=(await Hr("action",gt,[se],_e,Ne,$))[se.route.id];if(gt.signal.aborted){Ue.get($)===Ve&&Ue.delete($);return}if(fe.has($)){if(Io(pt)||yi(pt)){li($,fa(void 0));return}}else{if(Io(pt))if(Ue.delete($),we>Pt){li($,fa(void 0));return}else return de.add($),li($,Mu(be)),Zn(gt,pt,!1,{fetcherSubmission:be,preventScrollReset:Oe});if(yi(pt)){At($,K,pt.error);return}}let Mt=V.navigation.location||V.location,Gn=Ul(n.history,Mt,Ve.signal),ui=c||o,Kt=V.navigation.state!=="idle"?pa(ui,V.navigation.location,h):V.matches;st(Kt,"Didn't find any matches after fetcher action");let Jt=++ae;me.set($,Jt);let Ai=Mu(be,pt.data);V.fetchers.set($,Ai);let[ei,bt]=gw(n.history,V,Kt,be,Mt,!1,N,Be,fe,O,de,ui,h,[se.route.id,pt]);bt.filter(Ot=>Ot.key!==$).forEach(Ot=>{let Si=Ot.key,Ga=V.fetchers.get(Si),wr=Mu(void 0,Ga?Ga.data:void 0);V.fetchers.set(Si,wr),Jn(Si),Ot.controller&&Ue.set(Si,Ot.controller)}),He({fetchers:new Map(V.fetchers)});let br=()=>bt.forEach(Ot=>Jn(Ot.key));Ve.signal.addEventListener("abort",br);let{loaderResults:Zi,fetcherResults:Qe}=await Us(Kt,ei,bt,Gn,Ne);if(Ve.signal.aborted)return;Ve.signal.removeEventListener("abort",br),me.delete($),Ue.delete($),bt.forEach(Ot=>Ue.delete(Ot.key));let wt=rf(Zi);if(wt)return Zn(Gn,wt.result,!1,{preventScrollReset:Oe});if(wt=rf(Qe),wt)return de.add(wt.key),Zn(Gn,wt.result,!1,{preventScrollReset:Oe});let{loaderData:vn,errors:Gr}=Ew(V,Kt,Zi,void 0,bt,Qe);if(V.fetchers.has($)){let Ot=fa(pt.data);V.fetchers.set($,Ot)}Qi(Jt),V.navigation.state==="loading"&&Jt>we?(st(te,"Expected pending action"),I&&I.abort(),nt(V.navigation.location,{matches:Kt,loaderData:vn,errors:Gr,fetchers:new Map(V.fetchers)})):(He({errors:Gr,loaderData:Tw(V.loaderData,vn,Kt,Gr),fetchers:new Map(V.fetchers)}),N=!1)}async function Br($,K,ee,se,_e,Ne,Me,Ie,Oe,be){let Ae=V.fetchers.get($);li($,Mu(be,Ae?Ae.data:void 0),{flushSync:Ie});let Se=new AbortController,Ve=Ul(n.history,ee,Se.signal);if(Me){let pt=await xn(_e,ee,Ve.signal,$);if(pt.type==="aborted")return;if(pt.type==="error"){At($,K,pt.error,{flushSync:Ie});return}else if(pt.matches)_e=pt.matches,se=zu(_e,ee);else{At($,K,Bi(404,{pathname:ee}),{flushSync:Ie});return}}Ue.set($,Se);let gt=ae,Rt=(await Hr("loader",Ve,[se],_e,Ne,$))[se.route.id];if(Ue.get($)===Se&&Ue.delete($),!Ve.signal.aborted){if(fe.has($)){li($,fa(void 0));return}if(Io(Rt))if(we>gt){li($,fa(void 0));return}else{de.add($),await Zn(Ve,Rt,!1,{preventScrollReset:Oe});return}if(yi(Rt)){At($,K,Rt.error);return}li($,fa(Rt.data))}}async function Zn($,K,ee,{submission:se,fetcherSubmission:_e,preventScrollReset:Ne,replace:Me}={}){K.response.headers.has("X-Remix-Revalidate")&&(N=!0);let Ie=K.response.headers.get("Location");st(Ie,"Expected a Location header on the redirect Response"),Ie=bw(Ie,new URL($.url),h);let Oe=lh(V.location,Ie,{_isRedirect:!0});if(t){let Pt=!1;if(K.response.headers.has("X-Remix-Reload-Document"))Pt=!0;else if(vy.test(Ie)){const Rt=n.history.createURL(Ie);Pt=Rt.origin!==e.location.origin||Gi(Rt.pathname,h)==null}if(Pt){Me?e.location.replace(Ie):e.location.assign(Ie);return}}I=null;let be=Me===!0||K.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Ae,formAction:Se,formEncType:Ve}=V.navigation;!se&&!_e&&Ae&&Se&&Ve&&(se=xw(V.navigation));let gt=se||_e;if(HR.has(K.response.status)&&gt&&sr(gt.formMethod))await Zt(be,Oe,{submission:{...gt,formAction:Ie},preventScrollReset:Ne||k,enableViewTransition:ee?R:void 0});else{let Pt=s0(Oe,se);await Zt(be,Oe,{overrideNavigation:Pt,fetcherSubmission:_e,preventScrollReset:Ne||k,enableViewTransition:ee?R:void 0})}}async function Hr($,K,ee,se,_e,Ne){let Me,Ie={};try{Me=await eI(d,$,K,ee,se,Ne,s,i,_e,m.unstable_middleware)}catch(Oe){return ee.forEach(be=>{Ie[be.route.id]={type:"error",error:Oe}}),Ie}for(let[Oe,be]of Object.entries(Me))if(aI(be)){let Ae=be.result;Ie[Oe]={type:"redirect",response:iI(Ae,K,Oe,se,h)}}else Ie[Oe]=await nI(be);return Ie}async function Us($,K,ee,se,_e){let Ne=Hr("loader",se,K,$,_e,null),Me=Promise.all(ee.map(async be=>{if(be.matches&&be.match&&be.controller){let Se=(await Hr("loader",Ul(n.history,be.path,be.controller.signal),[be.match],be.matches,_e,be.key))[be.match.route.id];return{[be.key]:Se}}else return Promise.resolve({[be.key]:{type:"error",error:Bi(404,{pathname:be.path})}})})),Ie=await Ne,Oe=(await Me).reduce((be,Ae)=>Object.assign(be,Ae),{});return{loaderResults:Ie,fetcherResults:Oe}}function pn(){N=!0,O.forEach(($,K)=>{Ue.has(K)&&Be.add(K),Jn(K)})}function li($,K,ee={}){V.fetchers.set($,K),He({fetchers:new Map(V.fetchers)},{flushSync:(ee&&ee.flushSync)===!0})}function At($,K,ee,se={}){let _e=Ro(V.matches,K);ci($),He({errors:{[_e.route.id]:ee},fetchers:new Map(V.fetchers)},{flushSync:(se&&se.flushSync)===!0})}function Gt($){return W.set($,(W.get($)||0)+1),fe.has($)&&fe.delete($),V.fetchers.get($)||qR}function ci($){let K=V.fetchers.get($);Ue.has($)&&!(K&&K.state==="loading"&&me.has($))&&Jn($),O.delete($),me.delete($),de.delete($),fe.delete($),Be.delete($),V.fetchers.delete($)}function Wo($){let K=(W.get($)||0)-1;K<=0?(W.delete($),fe.add($)):W.set($,K),He({fetchers:new Map(V.fetchers)})}function Jn($){let K=Ue.get($);K&&(K.abort(),Ue.delete($))}function Zo($){for(let K of $){let ee=Gt(K),se=fa(ee.data);V.fetchers.set(K,se)}}function vr(){let $=[],K=!1;for(let ee of de){let se=V.fetchers.get(ee);st(se,`Expected fetcher: ${ee}`),se.state==="loading"&&(de.delete(ee),$.push(ee),K=!0)}return Zo($),K}function Qi($){let K=[];for(let[ee,se]of me)if(se<$){let _e=V.fetchers.get(ee);st(_e,`Expected fetcher: ${ee}`),_e.state==="loading"&&(Jn(ee),me.delete(ee),K.push(ee))}return Zo(K),K.length>0}function gn($,K){let ee=V.blockers.get($)||ku;return pe.get($)!==K&&pe.set($,K),ee}function Vs($){V.blockers.delete($),pe.delete($)}function qn($,K){let ee=V.blockers.get($)||ku;st(ee.state==="unblocked"&&K.state==="blocked"||ee.state==="blocked"&&K.state==="blocked"||ee.state==="blocked"&&K.state==="proceeding"||ee.state==="blocked"&&K.state==="unblocked"||ee.state==="proceeding"&&K.state==="unblocked",`Invalid blocker state transition: ${ee.state} -> ${K.state}`);let se=new Map(V.blockers);se.set($,K),He({blockers:se})}function yn({currentLocation:$,nextLocation:K,historyAction:ee}){if(pe.size===0)return;pe.size>1&&Cn(!1,"A router only supports one blocker at a time");let se=Array.from(pe.entries()),[_e,Ne]=se[se.length-1],Me=V.blockers.get(_e);if(!(Me&&Me.state==="proceeding")&&Ne({currentLocation:$,nextLocation:K,historyAction:ee}))return _e}function qr($){let K=Bi(404,{pathname:$}),ee=c||o,{matches:se,route:_e}=Sw(ee);return{notFoundMatches:se,route:_e,error:K}}function Jo($,K,ee){if(b=$,A=K,T=ee||null,!U&&V.navigation===r0){U=!0;let se=Wi(V.location,V.matches);se!=null&&He({restoreScrollPosition:se})}return()=>{b=null,A=null,T=null}}function qa($,K){return T&&T($,K.map(se=>ER(se,V.loaderData)))||$.key}function Ti($,K){if(b&&A){let ee=qa($,K);b[ee]=A()}}function Wi($,K){if(b){let ee=qa($,K),se=b[ee];if(typeof se=="number")return se}return null}function Vn($,K,ee){if(n.patchRoutesOnNavigation)if($){if(Object.keys($[0].params).length>0)return{active:!0,matches:bf(K,ee,h,!0)}}else return{active:!0,matches:bf(K,ee,h,!0)||[]};return{active:!1,matches:null}}async function xn($,K,ee,se){if(!n.patchRoutesOnNavigation)return{type:"success",matches:$};let _e=$;for(;;){let Ne=c==null,Me=c||o,Ie=s;try{await n.patchRoutesOnNavigation({signal:ee,path:K,matches:_e,fetcherKey:se,patch:(Ae,Se)=>{ee.aborted||vw(Ae,Se,Me,Ie,i)}})}catch(Ae){return{type:"error",error:Ae,partialMatches:_e}}finally{Ne&&!ee.aborted&&(o=[...o])}if(ee.aborted)return{type:"aborted"};let Oe=pa(Me,K,h);if(Oe)return{type:"success",matches:Oe};let be=bf(Me,K,h,!0);if(!be||_e.length===be.length&&_e.every((Ae,Se)=>Ae.route.id===be[Se].route.id))return{type:"success",matches:null};_e=be}}function _r($){s={},c=Pf($,i,void 0,s)}function $s($,K){let ee=c==null;vw($,K,c||o,s,i),ee&&(o=[...o],He({}))}return ue={get basename(){return h},get future(){return m},get state(){return V},get routes(){return o},get window(){return e},initialize:ke,subscribe:Xe,enableScrollRestoration:Jo,navigate:mn,fetch:Ps,revalidate:Xi,createHref:$=>n.history.createHref($),encodeLocation:$=>n.history.encodeLocation($),getFetcher:Gt,deleteFetcher:Wo,dispose:Ke,getBlocker:gn,deleteBlocker:Vs,patchRoutes:$s,_internalFetchControllers:Ue,_internalSetRoutes:_r},ue}function YR(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function x0(n,e,t,i,s,o){let c,h;if(s){c=[];for(let m of e)if(c.push(m),m.route.id===s){h=m;break}}else c=e,h=e[e.length-1];let d=um(i||".",cm(c),Gi(n.pathname,t)||n.pathname,o==="path");if(i==null&&(d.search=n.search,d.hash=n.hash),(i==null||i===""||i===".")&&h){let m=_y(d.search);if(h.route.index&&!m)d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index";else if(!h.route.index&&m){let y=new URLSearchParams(d.search),_=y.getAll("index");y.delete("index"),_.filter(T=>T).forEach(T=>y.append("index",T));let b=y.toString();d.search=b?`?${b}`:""}}return t!=="/"&&(d.pathname=d.pathname==="/"?t:Ur([t,d.pathname])),Ra(d)}function mw(n,e,t){if(!t||!YR(t))return{path:e};if(t.formMethod&&!oI(t.formMethod))return{path:e,error:Bi(405,{method:t.formMethod})};let i=()=>({path:e,error:Bi(400,{type:"invalid-body"})}),o=(t.formMethod||"get").toUpperCase(),c=iT(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!sr(o))return i();let _=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((b,[T,A])=>`${b}${T}=${A}
`,""):String(t.body);return{path:e,submission:{formMethod:o,formAction:c,formEncType:t.formEncType,formData:void 0,json:void 0,text:_}}}else if(t.formEncType==="application/json"){if(!sr(o))return i();try{let _=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:o,formAction:c,formEncType:t.formEncType,formData:void 0,json:_,text:void 0}}}catch{return i()}}}st(typeof FormData=="function","FormData is not available in this environment");let h,d;if(t.formData)h=O0(t.formData),d=t.formData;else if(t.body instanceof FormData)h=O0(t.body),d=t.body;else if(t.body instanceof URLSearchParams)h=t.body,d=ww(h);else if(t.body==null)h=new URLSearchParams,d=new FormData;else try{h=new URLSearchParams(t.body),d=ww(h)}catch{return i()}let m={formMethod:o,formAction:c,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:d,json:void 0,text:void 0};if(sr(m.formMethod))return{path:e,submission:m};let y=La(e);return n&&y.search&&_y(y.search)&&h.append("index",""),y.search=`?${h}`,{path:Ra(y),submission:m}}function pw(n,e,t=!1){let i=n.findIndex(s=>s.route.id===e);return i>=0?n.slice(0,t?i+1:i):n}function gw(n,e,t,i,s,o,c,h,d,m,y,_,b,T){let A=T?yi(T[1])?T[1].error:T[1].data:void 0,U=n.createURL(e.location),P=n.createURL(s),B=t;o&&e.errors?B=pw(t,Object.keys(e.errors)[0],!0):T&&yi(T[1])&&(B=pw(t,T[0]));let G=T?T[1].statusCode:void 0,Q=G&&G>=400,ue=B.filter((te,k)=>{let{route:I}=te;if(I.lazy)return!0;if(I.loader==null)return!1;if(o)return R0(I,e.loaderData,e.errors);if(XR(e.loaderData,e.matches[k],te))return!0;let R=e.matches[k],D=te;return yw(te,{currentUrl:U,currentParams:R.params,nextUrl:P,nextParams:D.params,...i,actionResult:A,actionStatus:G,defaultShouldRevalidate:Q?!1:c||U.pathname+U.search===P.pathname+P.search||U.search!==P.search||QR(R,D)})}),V=[];return m.forEach((te,k)=>{if(o||!t.some(H=>H.route.id===te.routeId)||d.has(k))return;let I=pa(_,te.path,b);if(!I){V.push({key:k,routeId:te.routeId,path:te.path,matches:null,match:null,controller:null});return}let R=e.fetchers.get(k),D=zu(I,te.path),L=!1;y.has(k)?L=!1:h.has(k)?(h.delete(k),L=!0):R&&R.state!=="idle"&&R.data===void 0?L=c:L=yw(D,{currentUrl:U,currentParams:e.matches[e.matches.length-1].params,nextUrl:P,nextParams:t[t.length-1].params,...i,actionResult:A,actionStatus:G,defaultShouldRevalidate:Q?!1:c}),L&&V.push({key:k,routeId:te.routeId,path:te.path,matches:I,match:D,controller:new AbortController})}),[ue,V]}function R0(n,e,t){if(n.lazy)return!0;if(!n.loader)return!1;let i=e!=null&&e[n.id]!==void 0,s=t!=null&&t[n.id]!==void 0;return!i&&s?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!i&&!s}function XR(n,e,t){let i=!e||t.route.id!==e.route.id,s=!n.hasOwnProperty(t.route.id);return i||s}function QR(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function yw(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function vw(n,e,t,i,s){let o;if(n){let d=i[n];st(d,`No route found to patch children into: routeId = ${n}`),d.children||(d.children=[]),o=d.children}else o=t;let c=e.filter(d=>!o.some(m=>tT(d,m))),h=Pf(c,s,[n||"_","patch",String((o==null?void 0:o.length)||"0")],i);o.push(...h)}function tT(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,i)=>{var s;return(s=e.children)==null?void 0:s.some(o=>tT(t,o))}):!1}async function WR(n,e,t){if(!n.lazy)return;let i=await n.lazy();if(!n.lazy)return;let s=t[n.id];st(s,"No route found in manifest");let o={};for(let c in i){let d=s[c]!==void 0&&c!=="hasErrorBoundary";Cn(!d,`Route "${s.id}" has a static property "${c}" defined but its lazy function is also returning a value for this property. The lazy route property "${c}" will be ignored.`),!d&&!bR.has(c)&&(o[c]=i[c])}Object.assign(s,o),Object.assign(s,{...e(s),lazy:void 0})}async function _w(n){let e=n.matches.filter(s=>s.shouldLoad),t={};return(await Promise.all(e.map(s=>s.resolve()))).forEach((s,o)=>{t[e[o].route.id]=s}),t}async function ZR(n){return n.matches.some(e=>e.route.unstable_middleware)?JR(n,!1,()=>_w(n),e=>({[e.routeId]:{type:"error",result:e.error}})):_w(n)}async function JR(n,e,t,i){let{matches:s,request:o,params:c,context:h}=n,d={handlerResult:void 0,propagateResult:e};try{let m=s.flatMap(_=>_.route.unstable_middleware?_.route.unstable_middleware.map(b=>[_.route.id,b]):[]),y=await nT({request:o,params:c,context:h},m,d,t);return d.propagateResult?y:d.handlerResult}catch(m){if(!(m instanceof I0))throw m;let y=await i(m);return d.handlerResult?Object.assign(d.handlerResult,y):y}}var I0=class{constructor(n,e){this.routeId=n,this.error=e}};async function nT(n,e,t,i,s=0){let{request:o}=n;if(o.signal.aborted)throw o.signal.reason?o.signal.reason:new Error(`Request aborted without an \`AbortSignal.reason\`: ${o.method} ${o.url}`);let c=e[s];if(!c)return t.handlerResult=await i(),t.handlerResult;let[h,d]=c,m=!1,y,_=async()=>{if(m)throw new Error("You may only call `next()` once per middleware");m=!0;let b=await nT(n,e,t,i,s+1);if(t.propagateResult)return y=b,y};try{let b=await d({request:n.request,params:n.params,context:n.context},_);return m?b===void 0?y:b:_()}catch(b){throw b instanceof I0?b:new I0(h,b)}}async function eI(n,e,t,i,s,o,c,h,d,m){let y=s.map(T=>T.route.lazy?WR(T.route,h,c):void 0);m&&await Promise.all(y);let _=s.map((T,A)=>{let U=y[A],P=i.some(G=>G.route.id===T.route.id);return{...T,shouldLoad:P,resolve:async G=>(G&&t.method==="GET"&&(T.route.lazy||T.route.loader)&&(P=!0),P?tI(e,t,T,U,G,d):Promise.resolve({type:"data",result:void 0}))}}),b=await n({matches:_,request:t,params:s[0].params,fetcherKey:o,context:d});try{await Promise.all(y)}catch{}return b}async function tI(n,e,t,i,s,o){let c,h,d=m=>{let y,_=new Promise((A,U)=>y=U);h=()=>y(),e.signal.addEventListener("abort",h);let b=A=>typeof m!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${n}" [routeId: ${t.route.id}]`)):m({request:e,params:t.params,context:o},...A!==void 0?[A]:[]),T=(async()=>{try{return{type:"data",result:await(s?s(U=>b(U)):b())}}catch(A){return{type:"error",result:A}}})();return Promise.race([T,_])};try{let m=t.route[n];if(i)if(m){let y,[_]=await Promise.all([d(m).catch(b=>{y=b}),i]);if(y!==void 0)throw y;c=_}else if(await i,m=t.route[n],m)c=await d(m);else if(n==="action"){let y=new URL(e.url),_=y.pathname+y.search;throw Bi(405,{method:e.method,pathname:_,routeId:t.route.id})}else return{type:"data",result:void 0};else if(m)c=await d(m);else{let y=new URL(e.url),_=y.pathname+y.search;throw Bi(404,{pathname:_})}}catch(m){return{type:"error",result:m}}finally{h&&e.signal.removeEventListener("abort",h)}return c}async function nI(n){var i,s,o,c,h,d;let{result:e,type:t}=n;if(rT(e)){let m;try{let y=e.headers.get("Content-Type");y&&/\bapplication\/json\b/.test(y)?e.body==null?m=null:m=await e.json():m=await e.text()}catch(y){return{type:"error",error:y}}return t==="error"?{type:"error",error:new Uf(e.status,e.statusText,m),statusCode:e.status,headers:e.headers}:{type:"data",data:m,statusCode:e.status,headers:e.headers}}return t==="error"?Cw(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(i=e.init)==null?void 0:i.status,headers:(s=e.init)!=null&&s.headers?new Headers(e.init.headers):void 0}:{type:"error",error:new Uf(((o=e.init)==null?void 0:o.status)||500,void 0,e.data),statusCode:ch(e)?e.status:void 0,headers:(c=e.init)!=null&&c.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:ch(e)?e.status:void 0}:Cw(e)?{type:"data",data:e.data,statusCode:(h=e.init)==null?void 0:h.status,headers:(d=e.init)!=null&&d.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function iI(n,e,t,i,s){let o=n.headers.get("Location");if(st(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!vy.test(o)){let c=i.slice(0,i.findIndex(h=>h.route.id===t)+1);o=x0(new URL(e.url),c,s,o),n.headers.set("Location",o)}return n}function bw(n,e,t){if(vy.test(n)){let i=n,s=i.startsWith("//")?new URL(e.protocol+i):new URL(i),o=Gi(s.pathname,t)!=null;if(s.origin===e.origin&&o)return s.pathname+s.search+s.hash}return n}function Ul(n,e,t,i){let s=n.createURL(iT(e)).toString(),o={signal:t};if(i&&sr(i.formMethod)){let{formMethod:c,formEncType:h}=i;o.method=c.toUpperCase(),h==="application/json"?(o.headers=new Headers({"Content-Type":h}),o.body=JSON.stringify(i.json)):h==="text/plain"?o.body=i.text:h==="application/x-www-form-urlencoded"&&i.formData?o.body=O0(i.formData):o.body=i.formData}return new Request(s,o)}function O0(n){let e=new URLSearchParams;for(let[t,i]of n.entries())e.append(t,typeof i=="string"?i:i.name);return e}function ww(n){let e=new FormData;for(let[t,i]of n.entries())e.append(t,i);return e}function rI(n,e,t,i=!1,s=!1){let o={},c=null,h,d=!1,m={},y=t&&yi(t[1])?t[1].error:void 0;return n.forEach(_=>{if(!(_.route.id in e))return;let b=_.route.id,T=e[b];if(st(!Io(T),"Cannot handle redirect results in processLoaderData"),yi(T)){let A=T.error;if(y!==void 0&&(A=y,y=void 0),c=c||{},s)c[b]=A;else{let U=Ro(n,b);c[U.route.id]==null&&(c[U.route.id]=A)}i||(o[b]=eT),d||(d=!0,h=ch(T.error)?T.error.status:500),T.headers&&(m[b]=T.headers)}else o[b]=T.data,T.statusCode&&T.statusCode!==200&&!d&&(h=T.statusCode),T.headers&&(m[b]=T.headers)}),y!==void 0&&t&&(c={[t[0]]:y},o[t[0]]=void 0),{loaderData:o,errors:c,statusCode:h||200,loaderHeaders:m}}function Ew(n,e,t,i,s,o){let{loaderData:c,errors:h}=rI(e,t,i);return s.forEach(d=>{let{key:m,match:y,controller:_}=d,b=o[m];if(st(b,"Did not find corresponding fetcher result"),!(_&&_.signal.aborted))if(yi(b)){let T=Ro(n.matches,y==null?void 0:y.route.id);h&&h[T.route.id]||(h={...h,[T.route.id]:b.error}),n.fetchers.delete(m)}else if(Io(b))st(!1,"Unhandled fetcher revalidation redirect");else{let T=fa(b.data);n.fetchers.set(m,T)}}),{loaderData:c,errors:h}}function Tw(n,e,t,i){let s=Object.entries(e).filter(([,o])=>o!==eT).reduce((o,[c,h])=>(o[c]=h,o),{});for(let o of t){let c=o.route.id;if(!e.hasOwnProperty(c)&&n.hasOwnProperty(c)&&o.route.loader&&(s[c]=n[c]),i&&i.hasOwnProperty(c))break}return s}function Aw(n){return n?yi(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function Ro(n,e){return(e?n.slice(0,n.findIndex(i=>i.route.id===e)+1):[...n]).reverse().find(i=>i.route.hasErrorBoundary===!0)||n[0]}function Sw(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Bi(n,{pathname:e,routeId:t,method:i,type:s,message:o}={}){let c="Unknown Server Error",h="Unknown @remix-run/router error";return n===400?(c="Bad Request",i&&e&&t?h=`You made a ${i} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:s==="invalid-body"&&(h="Unable to encode submission body")):n===403?(c="Forbidden",h=`Route "${t}" does not match URL "${e}"`):n===404?(c="Not Found",h=`No route matches URL "${e}"`):n===405&&(c="Method Not Allowed",i&&e&&t?h=`You made a ${i.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:i&&(h=`Invalid request method "${i.toUpperCase()}"`)),new Uf(n||500,c,new Error(h),!0)}function rf(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[i,s]=e[t];if(Io(s))return{key:i,result:s}}}function iT(n){let e=typeof n=="string"?La(n):n;return Ra({...e,hash:""})}function sI(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function aI(n){return rT(n.result)&&BR.has(n.result.status)}function yi(n){return n.type==="error"}function Io(n){return(n&&n.type)==="redirect"}function Cw(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function rT(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function oI(n){return FR.has(n.toUpperCase())}function sr(n){return jR.has(n.toUpperCase())}function _y(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function zu(n,e){let t=typeof e=="string"?La(e).search:e.search;if(n[n.length-1].route.index&&_y(t||""))return n[n.length-1];let i=WE(n);return i[i.length-1]}function xw(n){let{formMethod:e,formAction:t,formEncType:i,text:s,formData:o,json:c}=n;if(!(!e||!t||!i)){if(s!=null)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:void 0,text:s};if(o!=null)return{formMethod:e,formAction:t,formEncType:i,formData:o,json:void 0,text:void 0};if(c!==void 0)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:c,text:void 0}}}function s0(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function lI(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Mu(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function cI(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function fa(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function uI(n,e){try{let t=n.sessionStorage.getItem(JE);if(t){let i=JSON.parse(t);for(let[s,o]of Object.entries(i||{}))o&&Array.isArray(o)&&e.set(s,new Set(o||[]))}}catch{}}function hI(n,e){if(e.size>0){let t={};for(let[i,s]of e)t[i]=[...s];try{n.sessionStorage.setItem(JE,JSON.stringify(t))}catch(i){Cn(!1,`Failed to save applied view transitions in sessionStorage (${i}).`)}}}function dI(){let n,e,t=new Promise((i,s)=>{n=async o=>{i(o);try{await t}catch{}},e=async o=>{s(o);try{await t}catch{}}});return{promise:t,resolve:n,reject:e}}var qo=j.createContext(null);qo.displayName="DataRouter";var Ah=j.createContext(null);Ah.displayName="DataRouterState";var by=j.createContext({isTransitioning:!1});by.displayName="ViewTransition";var sT=j.createContext(new Map);sT.displayName="Fetchers";var fI=j.createContext(null);fI.displayName="Await";var dr=j.createContext(null);dr.displayName="Navigation";var hm=j.createContext(null);hm.displayName="Location";var fr=j.createContext({outlet:null,matches:[],isDataRoute:!1});fr.displayName="Route";var wy=j.createContext(null);wy.displayName="RouteError";function mI(n,{relative:e}={}){st(yc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=j.useContext(dr),{hash:s,pathname:o,search:c}=Sh(n,{relative:e}),h=o;return t!=="/"&&(h=o==="/"?t:Ur([t,o])),i.createHref({pathname:h,search:c,hash:s})}function yc(){return j.useContext(hm)!=null}function mr(){return st(yc(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(hm).location}var aT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function oT(n){j.useContext(dr).static||j.useLayoutEffect(n)}function Go(){let{isDataRoute:n}=j.useContext(fr);return n?II():pI()}function pI(){st(yc(),"useNavigate() may be used only in the context of a <Router> component.");let n=j.useContext(qo),{basename:e,navigator:t}=j.useContext(dr),{matches:i}=j.useContext(fr),{pathname:s}=mr(),o=JSON.stringify(cm(i)),c=j.useRef(!1);return oT(()=>{c.current=!0}),j.useCallback((d,m={})=>{if(Cn(c.current,aT),!c.current)return;if(typeof d=="number"){t.go(d);return}let y=um(d,JSON.parse(o),s,m.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Ur([e,y.pathname])),(m.replace?t.replace:t.push)(y,m.state,m)},[e,t,o,s,n])}var gI=j.createContext(null);function yI(n){let e=j.useContext(fr).outlet;return e&&j.createElement(gI.Provider,{value:n},e)}function Sh(n,{relative:e}={}){let{matches:t}=j.useContext(fr),{pathname:i}=mr(),s=JSON.stringify(cm(t));return j.useMemo(()=>um(n,JSON.parse(s),i,e==="path"),[n,s,i,e])}function vI(n,e,t,i){st(yc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:o}=j.useContext(dr),{matches:c}=j.useContext(fr),h=c[c.length-1],d=h?h.params:{},m=h?h.pathname:"/",y=h?h.pathnameBase:"/",_=h&&h.route;{let G=_&&_.path||"";lT(m,!_||G.endsWith("*")||G.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${G}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${G}"> to <Route path="${G==="/"?"*":`${G}/*`}">.`)}let b=mr(),T;T=b;let A=T.pathname||"/",U=A;if(y!=="/"){let G=y.replace(/^\//,"").split("/");U="/"+A.replace(/^\//,"").split("/").slice(G.length).join("/")}let P=!o&&t&&t.matches&&t.matches.length>0?t.matches:pa(n,{pathname:U});return Cn(_||P!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),Cn(P==null||P[P.length-1].route.element!==void 0||P[P.length-1].route.Component!==void 0||P[P.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),TI(P&&P.map(G=>Object.assign({},G,{params:Object.assign({},d,G.params),pathname:Ur([y,s.encodeLocation?s.encodeLocation(G.pathname).pathname:G.pathname]),pathnameBase:G.pathnameBase==="/"?y:Ur([y,s.encodeLocation?s.encodeLocation(G.pathnameBase).pathname:G.pathnameBase])})),c,t,i)}function _I(){let n=RI(),e=ch(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:o},"ErrorBoundary")," or"," ",j.createElement("code",{style:o},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),t?j.createElement("pre",{style:s},t):null,c)}var bI=j.createElement(_I,null),wI=class extends j.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?j.createElement(fr.Provider,{value:this.props.routeContext},j.createElement(wy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function EI({routeContext:n,match:e,children:t}){let i=j.useContext(qo);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),j.createElement(fr.Provider,{value:n},t)}function TI(n,e=[],t=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,o=t==null?void 0:t.errors;if(o!=null){let d=s.findIndex(m=>m.route.id&&(o==null?void 0:o[m.route.id])!==void 0);st(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,d+1))}let c=!1,h=-1;if(t)for(let d=0;d<s.length;d++){let m=s[d];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=d),m.route.id){let{loaderData:y,errors:_}=t,b=m.route.loader&&!y.hasOwnProperty(m.route.id)&&(!_||_[m.route.id]===void 0);if(m.route.lazy||b){c=!0,h>=0?s=s.slice(0,h+1):s=[s[0]];break}}}return s.reduceRight((d,m,y)=>{let _,b=!1,T=null,A=null;t&&(_=o&&m.route.id?o[m.route.id]:void 0,T=m.route.errorElement||bI,c&&(h<0&&y===0?(lT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,A=null):h===y&&(b=!0,A=m.route.hydrateFallbackElement||null)));let U=e.concat(s.slice(0,y+1)),P=()=>{let B;return _?B=T:b?B=A:m.route.Component?B=j.createElement(m.route.Component,null):m.route.element?B=m.route.element:B=d,j.createElement(EI,{match:m,routeContext:{outlet:d,matches:U,isDataRoute:t!=null},children:B})};return t&&(m.route.ErrorBoundary||m.route.errorElement||y===0)?j.createElement(wI,{location:t.location,revalidation:t.revalidation,component:T,error:_,children:P(),routeContext:{outlet:null,matches:U,isDataRoute:!0}}):P()},null)}function Ey(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function AI(n){let e=j.useContext(qo);return st(e,Ey(n)),e}function SI(n){let e=j.useContext(Ah);return st(e,Ey(n)),e}function CI(n){let e=j.useContext(fr);return st(e,Ey(n)),e}function Ty(n){let e=CI(n),t=e.matches[e.matches.length-1];return st(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function xI(){return Ty("useRouteId")}function RI(){var i;let n=j.useContext(wy),e=SI("useRouteError"),t=Ty("useRouteError");return n!==void 0?n:(i=e.errors)==null?void 0:i[t]}function II(){let{router:n}=AI("useNavigate"),e=Ty("useNavigate"),t=j.useRef(!1);return oT(()=>{t.current=!0}),j.useCallback(async(s,o={})=>{Cn(t.current,aT),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...o}))},[n,e])}var Rw={};function lT(n,e,t){!e&&!Rw[n]&&(Rw[n]=!0,Cn(!1,t))}var Iw={};function Ow(n,e){!n&&!Iw[e]&&(Iw[e]=!0,console.warn(e))}function OI(n){let e={hasErrorBoundary:n.hasErrorBoundary||n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&(n.element&&Cn(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:j.createElement(n.Component),Component:void 0})),n.HydrateFallback&&(n.hydrateFallbackElement&&Cn(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:j.createElement(n.HydrateFallback),HydrateFallback:void 0})),n.ErrorBoundary&&(n.errorElement&&Cn(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:j.createElement(n.ErrorBoundary),ErrorBoundary:void 0})),e}var DI=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=i=>{this.status==="pending"&&(this.status="resolved",e(i))},this.reject=i=>{this.status==="pending"&&(this.status="rejected",t(i))}})}};function kI({router:n,flushSync:e}){let[t,i]=j.useState(n.state),[s,o]=j.useState(),[c,h]=j.useState({isTransitioning:!1}),[d,m]=j.useState(),[y,_]=j.useState(),[b,T]=j.useState(),A=j.useRef(new Map),U=j.useCallback((Q,{deletedFetchers:ue,flushSync:V,viewTransitionOpts:te})=>{Q.fetchers.forEach((I,R)=>{I.data!==void 0&&A.current.set(R,I.data)}),ue.forEach(I=>A.current.delete(I)),Ow(V===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let k=n.window!=null&&n.window.document!=null&&typeof n.window.document.startViewTransition=="function";if(Ow(te==null||k,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!te||!k){e&&V?e(()=>i(Q)):j.startTransition(()=>i(Q));return}if(e&&V){e(()=>{y&&(d&&d.resolve(),y.skipTransition()),h({isTransitioning:!0,flushSync:!0,currentLocation:te.currentLocation,nextLocation:te.nextLocation})});let I=n.window.document.startViewTransition(()=>{e(()=>i(Q))});I.finished.finally(()=>{e(()=>{m(void 0),_(void 0),o(void 0),h({isTransitioning:!1})})}),e(()=>_(I));return}y?(d&&d.resolve(),y.skipTransition(),T({state:Q,currentLocation:te.currentLocation,nextLocation:te.nextLocation})):(o(Q),h({isTransitioning:!0,flushSync:!1,currentLocation:te.currentLocation,nextLocation:te.nextLocation}))},[n.window,e,y,d]);j.useLayoutEffect(()=>n.subscribe(U),[n,U]),j.useEffect(()=>{c.isTransitioning&&!c.flushSync&&m(new DI)},[c]),j.useEffect(()=>{if(d&&s&&n.window){let Q=s,ue=d.promise,V=n.window.document.startViewTransition(async()=>{j.startTransition(()=>i(Q)),await ue});V.finished.finally(()=>{m(void 0),_(void 0),o(void 0),h({isTransitioning:!1})}),_(V)}},[s,d,n.window]),j.useEffect(()=>{d&&s&&t.location.key===s.location.key&&d.resolve()},[d,y,t.location,s]),j.useEffect(()=>{!c.isTransitioning&&b&&(o(b.state),h({isTransitioning:!0,flushSync:!1,currentLocation:b.currentLocation,nextLocation:b.nextLocation}),T(void 0))},[c.isTransitioning,b]);let P=j.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:Q=>n.navigate(Q),push:(Q,ue,V)=>n.navigate(Q,{state:ue,preventScrollReset:V==null?void 0:V.preventScrollReset}),replace:(Q,ue,V)=>n.navigate(Q,{replace:!0,state:ue,preventScrollReset:V==null?void 0:V.preventScrollReset})}),[n]),B=n.basename||"/",G=j.useMemo(()=>({router:n,navigator:P,static:!1,basename:B}),[n,P,B]);return j.createElement(j.Fragment,null,j.createElement(qo.Provider,{value:G},j.createElement(Ah.Provider,{value:t},j.createElement(sT.Provider,{value:A.current},j.createElement(by.Provider,{value:c},j.createElement(UI,{basename:B,location:t.location,navigationType:t.historyAction,navigator:P},j.createElement(MI,{routes:n.routes,future:n.future,state:t})))))),null)}var MI=j.memo(NI);function NI({routes:n,future:e,state:t}){return vI(n,void 0,t,e)}function PI({to:n,replace:e,state:t,relative:i}){st(yc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=j.useContext(dr);Cn(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=j.useContext(fr),{pathname:c}=mr(),h=Go(),d=um(n,cm(o),c,i==="path"),m=JSON.stringify(d);return j.useEffect(()=>{h(JSON.parse(m),{replace:e,state:t,relative:i})},[h,m,i,e,t]),null}function LI(n){return yI(n.context)}function UI({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:s,static:o=!1}){st(!yc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),h=j.useMemo(()=>({basename:c,navigator:s,static:o,future:{}}),[c,s,o]);typeof t=="string"&&(t=La(t));let{pathname:d="/",search:m="",hash:y="",state:_=null,key:b="default"}=t,T=j.useMemo(()=>{let A=Gi(d,c);return A==null?null:{location:{pathname:A,search:m,hash:y,state:_,key:b},navigationType:i}},[c,d,m,y,_,b,i]);return Cn(T!=null,`<Router basename="${c}"> is not able to match the URL "${d}${m}${y}" because it does not start with the basename, so the <Router> won't render anything.`),T==null?null:j.createElement(dr.Provider,{value:h},j.createElement(hm.Provider,{children:e,value:T}))}var wf="get",Ef="application/x-www-form-urlencoded";function dm(n){return n!=null&&typeof n.tagName=="string"}function VI(n){return dm(n)&&n.tagName.toLowerCase()==="button"}function $I(n){return dm(n)&&n.tagName.toLowerCase()==="form"}function jI(n){return dm(n)&&n.tagName.toLowerCase()==="input"}function zI(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function FI(n,e){return n.button===0&&(!e||e==="_self")&&!zI(n)}var sf=null;function BI(){if(sf===null)try{new FormData(document.createElement("form"),0),sf=!1}catch{sf=!0}return sf}var HI=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function a0(n){return n!=null&&!HI.has(n)?(Cn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ef}"`),null):n}function qI(n,e){let t,i,s,o,c;if($I(n)){let h=n.getAttribute("action");i=h?Gi(h,e):null,t=n.getAttribute("method")||wf,s=a0(n.getAttribute("enctype"))||Ef,o=new FormData(n)}else if(VI(n)||jI(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||h.getAttribute("action");if(i=d?Gi(d,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||wf,s=a0(n.getAttribute("formenctype"))||a0(h.getAttribute("enctype"))||Ef,o=new FormData(h,n),!BI()){let{name:m,type:y,value:_}=n;if(y==="image"){let b=m?`${m}.`:"";o.append(`${b}x`,"0"),o.append(`${b}y`,"0")}else m&&o.append(m,_)}}else{if(dm(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=wf,i=null,s=Ef,c=n}return o&&s==="text/plain"&&(c=o,o=void 0),{action:i,method:t.toLowerCase(),encType:s,formData:o,body:c}}function Ay(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function GI(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function KI(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function YI(n,e,t){let i=await Promise.all(n.map(async s=>{let o=e.routes[s.route.id];if(o){let c=await GI(o,t);return c.links?c.links():[]}return[]}));return ZI(i.flat(1).filter(KI).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Dw(n,e,t,i,s,o){let c=(d,m)=>t[m]?d.route.id!==t[m].route.id:!0,h=(d,m)=>{var y;return t[m].pathname!==d.pathname||((y=t[m].route.path)==null?void 0:y.endsWith("*"))&&t[m].params["*"]!==d.params["*"]};return o==="assets"?e.filter((d,m)=>c(d,m)||h(d,m)):o==="data"?e.filter((d,m)=>{var _;let y=i.routes[d.route.id];if(!y||!y.hasLoader)return!1;if(c(d,m)||h(d,m))return!0;if(d.route.shouldRevalidate){let b=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((_=t[0])==null?void 0:_.params)||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function XI(n,e,{includeHydrateFallback:t}={}){return QI(n.map(i=>{let s=e.routes[i.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function QI(n){return[...new Set(n)]}function WI(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function ZI(n,e){let t=new Set;return new Set(e),n.reduce((i,s)=>{let o=JSON.stringify(WI(s));return t.has(o)||(t.add(o),i.push({key:o,link:s})),i},[])}function JI(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Gi(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function cT(){let n=j.useContext(qo);return Ay(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function e4(){let n=j.useContext(Ah);return Ay(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Sy=j.createContext(void 0);Sy.displayName="FrameworkContext";function uT(){let n=j.useContext(Sy);return Ay(n,"You must render this element inside a <HydratedRouter> element"),n}function t4(n,e){let t=j.useContext(Sy),[i,s]=j.useState(!1),[o,c]=j.useState(!1),{onFocus:h,onBlur:d,onMouseEnter:m,onMouseLeave:y,onTouchStart:_}=e,b=j.useRef(null);j.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let U=B=>{B.forEach(G=>{c(G.isIntersecting)})},P=new IntersectionObserver(U,{threshold:.5});return b.current&&P.observe(b.current),()=>{P.disconnect()}}},[n]),j.useEffect(()=>{if(i){let U=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(U)}}},[i]);let T=()=>{s(!0)},A=()=>{s(!1),c(!1)};return t?n!=="intent"?[o,b,{}]:[o,b,{onFocus:Nu(h,T),onBlur:Nu(d,A),onMouseEnter:Nu(m,T),onMouseLeave:Nu(y,A),onTouchStart:Nu(_,T)}]:[!1,b,{}]}function Nu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function n4({page:n,...e}){let{router:t}=cT(),i=j.useMemo(()=>pa(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?j.createElement(r4,{page:n,matches:i,...e}):null}function i4(n){let{manifest:e,routeModules:t}=uT(),[i,s]=j.useState([]);return j.useEffect(()=>{let o=!1;return YI(n,e,t).then(c=>{o||s(c)}),()=>{o=!0}},[n,e,t]),i}function r4({page:n,matches:e,...t}){let i=mr(),{manifest:s,routeModules:o}=uT(),{basename:c}=cT(),{loaderData:h,matches:d}=e4(),m=j.useMemo(()=>Dw(n,e,d,s,i,"data"),[n,e,d,s,i]),y=j.useMemo(()=>Dw(n,e,d,s,i,"assets"),[n,e,d,s,i]),_=j.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let A=new Set,U=!1;if(e.forEach(B=>{var Q;let G=s.routes[B.route.id];!G||!G.hasLoader||(!m.some(ue=>ue.route.id===B.route.id)&&B.route.id in h&&((Q=o[B.route.id])!=null&&Q.shouldRevalidate)||G.hasClientLoader?U=!0:A.add(B.route.id))}),A.size===0)return[];let P=JI(n,c);return U&&A.size>0&&P.searchParams.set("_routes",e.filter(B=>A.has(B.route.id)).map(B=>B.route.id).join(",")),[P.pathname+P.search]},[c,h,i,s,m,e,n,o]),b=j.useMemo(()=>XI(y,s),[y,s]),T=i4(y);return j.createElement(j.Fragment,null,_.map(A=>j.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...t})),b.map(A=>j.createElement("link",{key:A,rel:"modulepreload",href:A,...t})),T.map(({key:A,link:U})=>j.createElement("link",{key:A,...U})))}function s4(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var hT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{hT&&(window.__reactRouterVersion="7.3.0")}catch{}function a4(n,e){return KR({basename:e==null?void 0:e.basename,unstable_getContext:e==null?void 0:e.unstable_getContext,future:e==null?void 0:e.future,history:yR({window:e==null?void 0:e.window}),hydrationData:o4(),routes:n,mapRouteProperties:OI,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window}).initialize()}function o4(){let n=window==null?void 0:window.__staticRouterHydrationData;return n&&n.errors&&(n={...n,errors:l4(n.errors)}),n}function l4(n){if(!n)return null;let e=Object.entries(n),t={};for(let[i,s]of e)if(s&&s.__type==="RouteErrorResponse")t[i]=new Uf(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let o=window[s.__subType];if(typeof o=="function")try{let c=new o(s.message);c.stack="",t[i]=c}catch{}}if(t[i]==null){let o=new Error(s.message);o.stack="",t[i]=o}}else t[i]=s;return t}var dT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Lo=j.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:s,reloadDocument:o,replace:c,state:h,target:d,to:m,preventScrollReset:y,viewTransition:_,...b},T){let{basename:A}=j.useContext(dr),U=typeof m=="string"&&dT.test(m),P,B=!1;if(typeof m=="string"&&U&&(P=m,hT))try{let R=new URL(window.location.href),D=m.startsWith("//")?new URL(R.protocol+m):new URL(m),L=Gi(D.pathname,A);D.origin===R.origin&&L!=null?m=L+D.search+D.hash:B=!0}catch{Cn(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let G=mI(m,{relative:s}),[Q,ue,V]=t4(i,b),te=d4(m,{replace:c,state:h,target:d,preventScrollReset:y,relative:s,viewTransition:_});function k(R){e&&e(R),R.defaultPrevented||te(R)}let I=j.createElement("a",{...b,...V,href:P||G,onClick:B||o?e:k,ref:s4(T,ue),target:d,"data-discover":!U&&t==="render"?"true":void 0});return Q&&!U?j.createElement(j.Fragment,null,I,j.createElement(n4,{page:G})):I});Lo.displayName="Link";var c4=j.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:s=!1,style:o,to:c,viewTransition:h,children:d,...m},y){let _=Sh(c,{relative:m.relative}),b=mr(),T=j.useContext(Ah),{navigator:A,basename:U}=j.useContext(dr),P=T!=null&&y4(_)&&h===!0,B=A.encodeLocation?A.encodeLocation(_).pathname:_.pathname,G=b.pathname,Q=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;t||(G=G.toLowerCase(),Q=Q?Q.toLowerCase():null,B=B.toLowerCase()),Q&&U&&(Q=Gi(Q,U)||Q);const ue=B!=="/"&&B.endsWith("/")?B.length-1:B.length;let V=G===B||!s&&G.startsWith(B)&&G.charAt(ue)==="/",te=Q!=null&&(Q===B||!s&&Q.startsWith(B)&&Q.charAt(B.length)==="/"),k={isActive:V,isPending:te,isTransitioning:P},I=V?e:void 0,R;typeof i=="function"?R=i(k):R=[i,V?"active":null,te?"pending":null,P?"transitioning":null].filter(Boolean).join(" ");let D=typeof o=="function"?o(k):o;return j.createElement(Lo,{...m,"aria-current":I,className:R,ref:y,style:D,to:c,viewTransition:h},typeof d=="function"?d(k):d)});c4.displayName="NavLink";var u4=j.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:s,state:o,method:c=wf,action:h,onSubmit:d,relative:m,preventScrollReset:y,viewTransition:_,...b},T)=>{let A=p4(),U=g4(h,{relative:m}),P=c.toLowerCase()==="get"?"get":"post",B=typeof h=="string"&&dT.test(h),G=Q=>{if(d&&d(Q),Q.defaultPrevented)return;Q.preventDefault();let ue=Q.nativeEvent.submitter,V=(ue==null?void 0:ue.getAttribute("formmethod"))||c;A(ue||Q.currentTarget,{fetcherKey:e,method:V,navigate:t,replace:s,state:o,relative:m,preventScrollReset:y,viewTransition:_})};return j.createElement("form",{ref:T,method:P,action:U,onSubmit:i?d:G,...b,"data-discover":!B&&n==="render"?"true":void 0})});u4.displayName="Form";function h4(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function fT(n){let e=j.useContext(qo);return st(e,h4(n)),e}function d4(n,{target:e,replace:t,state:i,preventScrollReset:s,relative:o,viewTransition:c}={}){let h=Go(),d=mr(),m=Sh(n,{relative:o});return j.useCallback(y=>{if(FI(y,e)){y.preventDefault();let _=t!==void 0?t:Ra(d)===Ra(m);h(n,{replace:_,state:i,preventScrollReset:s,relative:o,viewTransition:c})}},[d,h,m,t,i,e,n,s,o,c])}var f4=0,m4=()=>`__${String(++f4)}__`;function p4(){let{router:n}=fT("useSubmit"),{basename:e}=j.useContext(dr),t=xI();return j.useCallback(async(i,s={})=>{let{action:o,method:c,encType:h,formData:d,body:m}=qI(i,e);if(s.navigate===!1){let y=s.fetcherKey||m4();await n.fetch(y,t,s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:m,formMethod:s.method||c,formEncType:s.encType||h,flushSync:s.flushSync})}else await n.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:m,formMethod:s.method||c,formEncType:s.encType||h,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function g4(n,{relative:e}={}){let{basename:t}=j.useContext(dr),i=j.useContext(fr);st(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),o={...Sh(n||".",{relative:e})},c=mr();if(n==null){o.search=c.search;let h=new URLSearchParams(o.search),d=h.getAll("index");if(d.some(y=>y==="")){h.delete("index"),d.filter(_=>_).forEach(_=>h.append("index",_));let y=h.toString();o.search=y?`?${y}`:""}}return(!n||n===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:Ur([t,o.pathname])),Ra(o)}function y4(n,e={}){let t=j.useContext(by);st(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=fT("useViewTransitionState"),s=Sh(n,{relative:e.relative});if(!t.isTransitioning)return!1;let o=Gi(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=Gi(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Lf(s.pathname,c)!=null||Lf(s.pathname,o)!=null}new TextEncoder;var v4=KE();/**
 * react-router v7.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _4(n){return j.createElement(kI,{flushSync:v4.flushSync,...n})}const b4=()=>{};var kw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},w4=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const s=n[t++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[t++];e[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[t++],c=n[t++],h=n[t++],d=((s&7)<<18|(o&63)<<12|(c&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const o=n[t++],c=n[t++];e[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|c&63)}}return e.join("")},pT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const o=n[s],c=s+1<n.length,h=c?n[s+1]:0,d=s+2<n.length,m=d?n[s+2]:0,y=o>>2,_=(o&3)<<4|h>>4;let b=(h&15)<<2|m>>6,T=m&63;d||(T=64,c||(b=64)),i.push(t[y],t[_],t[b],t[T])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(mT(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):w4(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const o=t[n.charAt(s++)],h=s<n.length?t[n.charAt(s)]:0;++s;const m=s<n.length?t[n.charAt(s)]:64;++s;const _=s<n.length?t[n.charAt(s)]:64;if(++s,o==null||h==null||m==null||_==null)throw new E4;const b=o<<2|h>>4;if(i.push(b),m!==64){const T=h<<4&240|m>>2;if(i.push(T),_!==64){const A=m<<6&192|_;i.push(A)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class E4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const T4=function(n){const e=mT(n);return pT.encodeByteArray(e,!0)},Vf=function(n){return T4(n).replace(/\./g,"")},gT=function(n){try{return pT.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S4=()=>A4().__FIREBASE_DEFAULTS__,C4=()=>{if(typeof process>"u"||typeof kw>"u")return;const n=kw.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},x4=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&gT(n[1]);return e&&JSON.parse(e)},fm=()=>{try{return b4()||S4()||C4()||x4()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},yT=n=>{var e,t;return(t=(e=fm())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},R4=n=>{const e=yT(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},vT=()=>{var n;return(n=fm())===null||n===void 0?void 0:n.config},_T=n=>{var e;return(e=fm())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O4(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Vf(JSON.stringify(t)),Vf(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function D4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Hn())}function k4(){var n;const e=(n=fm())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function M4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function N4(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function P4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function L4(){const n=Hn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function U4(){return!k4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function V4(){try{return typeof indexedDB=="object"}catch{return!1}}function $4(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j4="FirebaseError";class Ds extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=j4,Object.setPrototypeOf(this,Ds.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ch.prototype.create)}}class Ch{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],c=o?z4(o,i):"Error",h=`${this.serviceName}: ${c} (${s}).`;return new Ds(s,h,i)}}function z4(n,e){return n.replace(F4,(t,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const F4=/\{\$([^}]+)}/g;function B4(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Uo(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const s of t){if(!i.includes(s))return!1;const o=n[s],c=e[s];if(Mw(o)&&Mw(c)){if(!Uo(o,c))return!1}else if(o!==c)return!1}for(const s of i)if(!t.includes(s))return!1;return!0}function Mw(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xh(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Fu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,o]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function Bu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function H4(n,e){const t=new q4(n,e);return t.subscribe.bind(t)}class q4{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let s;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");G4(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:i},s.next===void 0&&(s.next=o0),s.error===void 0&&(s.error=o0),s.complete===void 0&&(s.complete=o0);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function G4(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function o0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(n){return n&&n._delegate?n._delegate:n}class Vo{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new I4;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(X4(e))try{this.getOrInitializeService({instanceIdentifier:xo})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(e=xo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xo){return this.instances.has(e)}getOptions(e=xo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[o,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);i===h&&c.resolve(s)}return s}onInit(e,t){var i;const s=this.normalizeInstanceIdentifier(t),o=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(s,o);const c=this.instances.get(s);return c&&e(c,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const s of i)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Y4(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=xo){return this.component?this.component.multipleInstances?e:xo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Y4(n){return n===xo?void 0:n}function X4(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new K4(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(rt||(rt={}));const W4={debug:rt.DEBUG,verbose:rt.VERBOSE,info:rt.INFO,warn:rt.WARN,error:rt.ERROR,silent:rt.SILENT},Z4=rt.INFO,J4={[rt.DEBUG]:"log",[rt.VERBOSE]:"log",[rt.INFO]:"info",[rt.WARN]:"warn",[rt.ERROR]:"error"},e3=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),s=J4[e];if(s)console[s](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Cy{constructor(e){this.name=e,this._logLevel=Z4,this._logHandler=e3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in rt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?W4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,rt.DEBUG,...e),this._logHandler(this,rt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,rt.VERBOSE,...e),this._logHandler(this,rt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,rt.INFO,...e),this._logHandler(this,rt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,rt.WARN,...e),this._logHandler(this,rt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,rt.ERROR,...e),this._logHandler(this,rt.ERROR,...e)}}const t3=(n,e)=>e.some(t=>n instanceof t);let Nw,Pw;function n3(){return Nw||(Nw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function i3(){return Pw||(Pw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bT=new WeakMap,D0=new WeakMap,wT=new WeakMap,l0=new WeakMap,xy=new WeakMap;function r3(n){const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",c)},o=()=>{t(wa(n.result)),s()},c=()=>{i(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&bT.set(t,n)}).catch(()=>{}),xy.set(e,n),e}function s3(n){if(D0.has(n))return;const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",c),n.removeEventListener("abort",c)},o=()=>{t(),s()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",c),n.addEventListener("abort",c)});D0.set(n,e)}let k0={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return D0.get(n);if(e==="objectStoreNames")return n.objectStoreNames||wT.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return wa(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function a3(n){k0=n(k0)}function o3(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(c0(this),e,...t);return wT.set(i,e.sort?e.sort():[e]),wa(i)}:i3().includes(n)?function(...e){return n.apply(c0(this),e),wa(bT.get(this))}:function(...e){return wa(n.apply(c0(this),e))}}function l3(n){return typeof n=="function"?o3(n):(n instanceof IDBTransaction&&s3(n),t3(n,n3())?new Proxy(n,k0):n)}function wa(n){if(n instanceof IDBRequest)return r3(n);if(l0.has(n))return l0.get(n);const e=l3(n);return e!==n&&(l0.set(n,e),xy.set(e,n)),e}const c0=n=>xy.get(n);function c3(n,e,{blocked:t,upgrade:i,blocking:s,terminated:o}={}){const c=indexedDB.open(n,e),h=wa(c);return i&&c.addEventListener("upgradeneeded",d=>{i(wa(c.result),d.oldVersion,d.newVersion,wa(c.transaction),d)}),t&&c.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),h.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const u3=["get","getKey","getAll","getAllKeys","count"],h3=["put","add","delete","clear"],u0=new Map;function Lw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(u0.get(e))return u0.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,s=h3.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(s||u3.includes(t)))return;const o=async function(c,...h){const d=this.transaction(c,s?"readwrite":"readonly");let m=d.store;return i&&(m=m.index(h.shift())),(await Promise.all([m[t](...h),s&&d.done]))[0]};return u0.set(e,o),o}a3(n=>({...n,get:(e,t,i)=>Lw(e,t)||n.get(e,t,i),has:(e,t)=>!!Lw(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(f3(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function f3(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const M0="@firebase/app",Uw="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As=new Cy("@firebase/app"),m3="@firebase/app-compat",p3="@firebase/analytics-compat",g3="@firebase/analytics",y3="@firebase/app-check-compat",v3="@firebase/app-check",_3="@firebase/auth",b3="@firebase/auth-compat",w3="@firebase/database",E3="@firebase/data-connect",T3="@firebase/database-compat",A3="@firebase/functions",S3="@firebase/functions-compat",C3="@firebase/installations",x3="@firebase/installations-compat",R3="@firebase/messaging",I3="@firebase/messaging-compat",O3="@firebase/performance",D3="@firebase/performance-compat",k3="@firebase/remote-config",M3="@firebase/remote-config-compat",N3="@firebase/storage",P3="@firebase/storage-compat",L3="@firebase/firestore",U3="@firebase/vertexai",V3="@firebase/firestore-compat",$3="firebase",j3="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0="[DEFAULT]",z3={[M0]:"fire-core",[m3]:"fire-core-compat",[g3]:"fire-analytics",[p3]:"fire-analytics-compat",[v3]:"fire-app-check",[y3]:"fire-app-check-compat",[_3]:"fire-auth",[b3]:"fire-auth-compat",[w3]:"fire-rtdb",[E3]:"fire-data-connect",[T3]:"fire-rtdb-compat",[A3]:"fire-fn",[S3]:"fire-fn-compat",[C3]:"fire-iid",[x3]:"fire-iid-compat",[R3]:"fire-fcm",[I3]:"fire-fcm-compat",[O3]:"fire-perf",[D3]:"fire-perf-compat",[k3]:"fire-rc",[M3]:"fire-rc-compat",[N3]:"fire-gcs",[P3]:"fire-gcs-compat",[L3]:"fire-fst",[V3]:"fire-fst-compat",[U3]:"fire-vertex","fire-js":"fire-js",[$3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f=new Map,F3=new Map,P0=new Map;function Vw(n,e){try{n.container.addComponent(e)}catch(t){As.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Jl(n){const e=n.name;if(P0.has(e))return As.debug(`There were multiple attempts to register component ${e}.`),!1;P0.set(e,n);for(const t of $f.values())Vw(t,n);for(const t of F3.values())Vw(t,n);return!0}function Ry(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function _i(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ea=new Ch("app","Firebase",B3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Vo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ea.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vc=j3;function ET(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:N0,automaticDataCollectionEnabled:!1},e),s=i.name;if(typeof s!="string"||!s)throw Ea.create("bad-app-name",{appName:String(s)});if(t||(t=vT()),!t)throw Ea.create("no-options");const o=$f.get(s);if(o){if(Uo(t,o.options)&&Uo(i,o.config))return o;throw Ea.create("duplicate-app",{appName:s})}const c=new Q4(s);for(const d of P0.values())c.addComponent(d);const h=new H3(t,i,c);return $f.set(s,h),h}function TT(n=N0){const e=$f.get(n);if(!e&&n===N0&&vT())return ET();if(!e)throw Ea.create("no-app",{appName:n});return e}function Ta(n,e,t){var i;let s=(i=z3[n])!==null&&i!==void 0?i:n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&c&&h.push("and"),c&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),As.warn(h.join(" "));return}Jl(new Vo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q3="firebase-heartbeat-database",G3=1,uh="firebase-heartbeat-store";let h0=null;function AT(){return h0||(h0=c3(q3,G3,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(uh)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ea.create("idb-open",{originalErrorMessage:n.message})})),h0}async function K3(n){try{const t=(await AT()).transaction(uh),i=await t.objectStore(uh).get(ST(n));return await t.done,i}catch(e){if(e instanceof Ds)As.warn(e.message);else{const t=Ea.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});As.warn(t.message)}}}async function $w(n,e){try{const i=(await AT()).transaction(uh,"readwrite");await i.objectStore(uh).put(e,ST(n)),await i.done}catch(t){if(t instanceof Ds)As.warn(t.message);else{const i=Ea.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});As.warn(i.message)}}}function ST(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y3=1024,X3=30;class Q3{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Z3(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=jw();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>X3){const c=J3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){As.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=jw(),{heartbeatsToSend:i,unsentEntries:s}=W3(this._heartbeatsCache.heartbeats),o=Vf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return As.warn(t),""}}}function jw(){return new Date().toISOString().substring(0,10)}function W3(n,e=Y3){const t=[];let i=n.slice();for(const s of n){const o=t.find(c=>c.agent===s.agent);if(o){if(o.dates.push(s.date),zw(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),zw(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class Z3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return V4()?$4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await K3(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return $w(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return $w(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function zw(n){return Vf(JSON.stringify({version:2,heartbeats:n})).length}function J3(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eO(n){Jl(new Vo("platform-logger",e=>new d3(e),"PRIVATE")),Jl(new Vo("heartbeat",e=>new Q3(e),"PRIVATE")),Ta(M0,Uw,n),Ta(M0,Uw,"esm2017"),Ta("fire-js","")}eO("");function Iy(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(t[i[s]]=n[i[s]]);return t}function CT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const tO=CT,xT=new Ch("auth","Firebase",CT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jf=new Cy("@firebase/auth");function nO(n,...e){jf.logLevel<=rt.WARN&&jf.warn(`Auth (${vc}): ${n}`,...e)}function Tf(n,...e){jf.logLevel<=rt.ERROR&&jf.error(`Auth (${vc}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ki(n,...e){throw Dy(n,...e)}function ar(n,...e){return Dy(n,...e)}function Oy(n,e,t){const i=Object.assign(Object.assign({},tO()),{[e]:t});return new Ch("auth","Firebase",i).create(e,{appName:n.name})}function Es(n){return Oy(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function iO(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Ki(n,"argument-error"),Oy(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Dy(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return xT.create(n,...e)}function je(n,e,...t){if(!n)throw Dy(e,...t)}function _s(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Tf(e),new Error(e)}function Ss(n,e){n||_s(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function rO(){return Fw()==="http:"||Fw()==="https:"}function Fw(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rO()||N4()||"connection"in navigator)?navigator.onLine:!0}function aO(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ss(t>e,"Short delay should be less than long delay!"),this.isMobile=D4()||P4()}get(){return sO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ky(n,e){Ss(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_s("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_s("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_s("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO=new Rh(3e4,6e4);function Ua(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function ks(n,e,t,i,s={}){return IT(n,s,async()=>{let o={},c={};i&&(e==="GET"?c=i:o={body:JSON.stringify(i)});const h=xh(Object.assign({key:n.config.apiKey},c)).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:d},o);return M4()||(m.referrerPolicy="no-referrer"),RT.fetch()(OT(n,n.config.apiHost,t,h),m)})}async function IT(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},oO),e);try{const s=new uO(n),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw af(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const h=o.ok?c.errorMessage:c.error.message,[d,m]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw af(n,"credential-already-in-use",c);if(d==="EMAIL_EXISTS")throw af(n,"email-already-in-use",c);if(d==="USER_DISABLED")throw af(n,"user-disabled",c);const y=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Oy(n,y,m);Ki(n,y)}}catch(s){if(s instanceof Ds)throw s;Ki(n,"network-request-failed",{message:String(s)})}}async function Ih(n,e,t,i,s={}){const o=await ks(n,e,t,i,s);return"mfaPendingCredential"in o&&Ki(n,"multi-factor-auth-required",{_serverResponse:o}),o}function OT(n,e,t,i){const s=`${e}${t}?${i}`;return n.config.emulator?ky(n.config,s):`${n.config.apiScheme}://${s}`}function cO(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class uO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(ar(this.auth,"network-request-failed")),lO.get())})}}function af(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const s=ar(n,e,i);return s.customData._tokenResponse=t,s}function Bw(n){return n!==void 0&&n.enterprise!==void 0}class hO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return cO(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function dO(n,e){return ks(n,"GET","/v2/recaptchaConfig",Ua(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fO(n,e){return ks(n,"POST","/v1/accounts:delete",e)}async function DT(n,e){return ks(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function mO(n,e=!1){const t=fn(n),i=await t.getIdToken(e),s=My(i);je(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,c=o==null?void 0:o.sign_in_provider;return{claims:s,token:i,authTime:Wu(d0(s.auth_time)),issuedAtTime:Wu(d0(s.iat)),expirationTime:Wu(d0(s.exp)),signInProvider:c||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function d0(n){return Number(n)*1e3}function My(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Tf("JWT malformed, contained fewer than 3 sections"),null;try{const s=gT(t);return s?JSON.parse(s):(Tf("Failed to decode base64 JWT payload"),null)}catch(s){return Tf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Hw(n){const e=My(n);return je(e,"internal-error"),je(typeof e.exp<"u","internal-error"),je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ec(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Ds&&pO(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function pO({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wu(this.lastLoginAt),this.creationTime=Wu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zf(n){var e;const t=n.auth,i=await n.getIdToken(),s=await ec(n,DT(t,{idToken:i}));je(s==null?void 0:s.users.length,t,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const c=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?kT(o.providerUserInfo):[],h=vO(n.providerData,c),d=n.isAnonymous,m=!(n.email&&o.passwordHash)&&!(h!=null&&h.length),y=d?m:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new U0(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(n,_)}async function yO(n){const e=fn(n);await zf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function vO(n,e){return[...n.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function kT(n){return n.map(e=>{var{providerId:t}=e,i=Iy(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _O(n,e){const t=await IT(n,{},async()=>{const i=xh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,c=OT(n,s,"/v1/token",`key=${o}`),h=await n._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",RT.fetch()(c,{method:"POST",headers:h,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function bO(n,e){return ks(n,"POST","/v2/accounts:revokeToken",Ua(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){je(e.idToken,"internal-error"),je(typeof e.idToken<"u","internal-error"),je(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Hw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){je(e.length!==0,"internal-error");const t=Hw(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:s,expiresIn:o}=await _O(e,t);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:s,expirationTime:o}=t,c=new Xl;return i&&(je(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),s&&(je(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),o&&(je(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xl,this.toJSON())}_performRefresh(){return _s("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ha(n,e){je(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class bs{constructor(e){var{uid:t,auth:i,stsTokenManager:s}=e,o=Iy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new U0(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await ec(this,this.stsTokenManager.getToken(this.auth,e));return je(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return mO(this,e)}reload(){return yO(this)}_assign(e){this!==e&&(je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new bs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await zf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_i(this.auth.app))return Promise.reject(Es(this.auth));const e=await this.getIdToken();return await ec(this,fO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,s,o,c,h,d,m,y;const _=(i=t.displayName)!==null&&i!==void 0?i:void 0,b=(s=t.email)!==null&&s!==void 0?s:void 0,T=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,A=(c=t.photoURL)!==null&&c!==void 0?c:void 0,U=(h=t.tenantId)!==null&&h!==void 0?h:void 0,P=(d=t._redirectEventId)!==null&&d!==void 0?d:void 0,B=(m=t.createdAt)!==null&&m!==void 0?m:void 0,G=(y=t.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:Q,emailVerified:ue,isAnonymous:V,providerData:te,stsTokenManager:k}=t;je(Q&&k,e,"internal-error");const I=Xl.fromJSON(this.name,k);je(typeof Q=="string",e,"internal-error"),ha(_,e.name),ha(b,e.name),je(typeof ue=="boolean",e,"internal-error"),je(typeof V=="boolean",e,"internal-error"),ha(T,e.name),ha(A,e.name),ha(U,e.name),ha(P,e.name),ha(B,e.name),ha(G,e.name);const R=new bs({uid:Q,auth:e,email:b,emailVerified:ue,displayName:_,isAnonymous:V,photoURL:A,phoneNumber:T,tenantId:U,stsTokenManager:I,createdAt:B,lastLoginAt:G});return te&&Array.isArray(te)&&(R.providerData=te.map(D=>Object.assign({},D))),P&&(R._redirectEventId=P),R}static async _fromIdTokenResponse(e,t,i=!1){const s=new Xl;s.updateFromServerResponse(t);const o=new bs({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await zf(o),o}static async _fromGetAccountInfoResponse(e,t,i){const s=t.users[0];je(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?kT(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),h=new Xl;h.updateFromIdToken(i);const d=new bs({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:c}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new U0(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,m),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw=new Map;function ws(n){Ss(n instanceof Function,"Expected a class definition");let e=qw.get(n);return e?(Ss(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,qw.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}MT.type="NONE";const Gw=MT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(n,e,t){return`firebase:${n}:${e}:${t}`}class Ql{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=Af(this.userKey,s.apiKey,o),this.fullPersistenceKey=Af("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?bs._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Ql(ws(Gw),e,i);const s=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let o=s[0]||ws(Gw);const c=Af(i,e.config.apiKey,e.name);let h=null;for(const m of t)try{const y=await m._get(c);if(y){const _=bs._fromJSON(e,y);m!==o&&(h=_),o=m;break}}catch{}const d=s.filter(m=>m._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Ql(o,e,i):(o=d[0],h&&await o._set(c,h.toJSON()),await Promise.all(t.map(async m=>{if(m!==o)try{await m._remove(c)}catch{}})),new Ql(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(UT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(NT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($T(e))return"Blackberry";if(jT(e))return"Webos";if(PT(e))return"Safari";if((e.includes("chrome/")||LT(e))&&!e.includes("edge/"))return"Chrome";if(VT(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function NT(n=Hn()){return/firefox\//i.test(n)}function PT(n=Hn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function LT(n=Hn()){return/crios\//i.test(n)}function UT(n=Hn()){return/iemobile/i.test(n)}function VT(n=Hn()){return/android/i.test(n)}function $T(n=Hn()){return/blackberry/i.test(n)}function jT(n=Hn()){return/webos/i.test(n)}function Ny(n=Hn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function wO(n=Hn()){var e;return Ny(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function EO(){return L4()&&document.documentMode===10}function zT(n=Hn()){return Ny(n)||VT(n)||jT(n)||$T(n)||/windows phone/i.test(n)||UT(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FT(n,e=[]){let t;switch(n){case"Browser":t=Kw(Hn());break;case"Worker":t=`${Kw(Hn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${vc}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=o=>new Promise((c,h)=>{try{const d=e(o);c(d)}catch(d){h(d)}});i.onAbort=t,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AO(n,e={}){return ks(n,"GET","/v2/passwordPolicy",Ua(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SO=6;class CO{constructor(e){var t,i,s,o;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:SO,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,s,o,c,h;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(t=d.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),d.isValid&&(d.isValid=(i=d.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(s=d.containsLowercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(c=d.containsNumericCharacter)!==null&&c!==void 0?c:!0),d.isValid&&(d.isValid=(h=d.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),d}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e,t,i,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yw(this),this.idTokenSubscription=new Yw(this),this.beforeStateQueue=new TO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ws(t)),this._initializationPromise=this.queue(async()=>{var i,s;if(!this._deleted&&(this.persistenceManager=await Ql.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await DT(this,{idToken:e}),i=await bs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(_i(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=s==null?void 0:s._redirectEventId,d=await this.tryRedirectSignIn(e);(!c||c===h)&&(d!=null&&d.user)&&(s=d.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await zf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=aO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_i(this.app))return Promise.reject(Es(this));const t=e?fn(e):null;return t&&je(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _i(this.app)?Promise.reject(Es(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _i(this.app)?Promise.reject(Es(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ws(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await AO(this),t=new CO(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ch("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await bO(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ws(e)||this._popupRedirectResolver;je(t,this,"argument-error"),this.redirectPersistenceManager=await Ql.create(this,[ws(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(je(h,this,"internal-error"),h.then(()=>{c||o(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,i,s);return()=>{c=!0,d()}}else{const d=e.addObserver(t);return()=>{c=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=FT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(_i(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&nO(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Va(n){return fn(n)}class Yw{constructor(e){this.auth=e,this.observer=null,this.addObserver=H4(t=>this.observer=t)}get next(){return je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function RO(n){mm=n}function BT(n){return mm.loadJS(n)}function IO(){return mm.recaptchaEnterpriseScript}function OO(){return mm.gapiScript}function DO(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class kO{constructor(){this.enterprise=new MO}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class MO{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const NO="recaptcha-enterprise",HT="NO_RECAPTCHA";class PO{constructor(e){this.type=NO,this.auth=Va(e)}async verify(e="verify",t=!1){async function i(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,h)=>{dO(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const m=new hO(d);return o.tenantId==null?o._agentRecaptchaConfig=m:o._tenantRecaptchaConfigs[o.tenantId]=m,c(m.siteKey)}}).catch(d=>{h(d)})})}function s(o,c,h){const d=window.grecaptcha;Bw(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(m=>{c(m)}).catch(()=>{c(HT)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new kO().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{i(this.auth).then(h=>{if(!t&&Bw(window.grecaptcha))s(h,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let d=IO();d.length!==0&&(d+=h),BT(d).then(()=>{s(h,o,c)}).catch(m=>{c(m)})}}).catch(h=>{c(h)})})}}async function Xw(n,e,t,i=!1,s=!1){const o=new PO(n);let c;if(s)c=HT;else try{c=await o.verify(t)}catch{c=await o.verify(t,!0)}const h=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const d=h.phoneEnrollmentInfo.phoneNumber,m=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const d=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return i?Object.assign(h,{captchaResp:c}):Object.assign(h,{captchaResponse:c}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function V0(n,e,t,i,s){var o;if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Xw(n,e,t,t==="getOobCode");return i(n,c)}else return i(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await Xw(n,e,t,t==="getOobCode");return i(n,h)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LO(n,e){const t=Ry(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(Uo(o,e??{}))return s;Ki(s,"already-initialized")}return t.initialize({options:e})}function UO(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(ws);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function VO(n,e,t){const i=Va(n);je(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,o=qT(e),{host:c,port:h}=$O(e),d=h===null?"":`:${h}`,m={url:`${o}//${c}${d}/`},y=Object.freeze({host:c,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){je(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),je(Uo(m,i.config.emulator)&&Uo(y,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=m,i.emulatorConfig=y,i.settings.appVerificationDisabledForTesting=!0,jO()}function qT(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function $O(n){const e=qT(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const o=s[1];return{host:o,port:Qw(i.substr(o.length+1))}}else{const[o,c]=i.split(":");return{host:o,port:Qw(c)}}}function Qw(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function jO(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return _s("not implemented")}_getIdTokenResponse(e){return _s("not implemented")}_linkToIdToken(e,t){return _s("not implemented")}_getReauthenticationResolver(e){return _s("not implemented")}}async function zO(n,e){return ks(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FO(n,e){return Ih(n,"POST","/v1/accounts:signInWithPassword",Ua(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BO(n,e){return Ih(n,"POST","/v1/accounts:signInWithEmailLink",Ua(n,e))}async function HO(n,e){return Ih(n,"POST","/v1/accounts:signInWithEmailLink",Ua(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh extends Py{constructor(e,t,i,s=null){super("password",i),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new hh(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new hh(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return V0(e,t,"signInWithPassword",FO);case"emailLink":return BO(e,{email:this._email,oobCode:this._password});default:Ki(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return V0(e,i,"signUpPassword",zO);case"emailLink":return HO(e,{idToken:t,email:this._email,oobCode:this._password});default:Ki(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wl(n,e){return Ih(n,"POST","/v1/accounts:signInWithIdp",Ua(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qO="http://localhost";class $o extends Py{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new $o(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ki("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=t,o=Iy(t,["providerId","signInMethod"]);if(!i||!s)return null;const c=new $o(i,s);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Wl(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Wl(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Wl(e,t)}buildRequest(){const e={requestUri:qO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=xh(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GO(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function KO(n){const e=Fu(Bu(n)).link,t=e?Fu(Bu(e)).deep_link_id:null,i=Fu(Bu(n)).deep_link_id;return(i?Fu(Bu(i)).link:null)||i||t||e||n}class Ly{constructor(e){var t,i,s,o,c,h;const d=Fu(Bu(e)),m=(t=d.apiKey)!==null&&t!==void 0?t:null,y=(i=d.oobCode)!==null&&i!==void 0?i:null,_=GO((s=d.mode)!==null&&s!==void 0?s:null);je(m&&y&&_,"argument-error"),this.apiKey=m,this.operation=_,this.code=y,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(c=d.languageCode)!==null&&c!==void 0?c:null,this.tenantId=(h=d.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const t=KO(e);try{return new Ly(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(){this.providerId=_c.PROVIDER_ID}static credential(e,t){return hh._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Ly.parseLink(t);return je(i,"argument-error"),hh._fromEmailAndCode(e,i.code,i.tenantId)}}_c.PROVIDER_ID="password";_c.EMAIL_PASSWORD_SIGN_IN_METHOD="password";_c.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh extends Uy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga extends Oh{constructor(){super("facebook.com")}static credential(e){return $o._fromParams({providerId:ga.PROVIDER_ID,signInMethod:ga.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ga.credentialFromTaggedObject(e)}static credentialFromError(e){return ga.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ga.credential(e.oauthAccessToken)}catch{return null}}}ga.FACEBOOK_SIGN_IN_METHOD="facebook.com";ga.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs extends Oh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return $o._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return vs.credential(t,i)}catch{return null}}}vs.GOOGLE_SIGN_IN_METHOD="google.com";vs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya extends Oh{constructor(){super("github.com")}static credential(e){return $o._fromParams({providerId:ya.PROVIDER_ID,signInMethod:ya.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ya.credentialFromTaggedObject(e)}static credentialFromError(e){return ya.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ya.credential(e.oauthAccessToken)}catch{return null}}}ya.GITHUB_SIGN_IN_METHOD="github.com";ya.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va extends Oh{constructor(){super("twitter.com")}static credential(e,t){return $o._fromParams({providerId:va.PROVIDER_ID,signInMethod:va.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return va.credentialFromTaggedObject(e)}static credentialFromError(e){return va.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return va.credential(t,i)}catch{return null}}}va.TWITTER_SIGN_IN_METHOD="twitter.com";va.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YO(n,e){return Ih(n,"POST","/v1/accounts:signUp",Ua(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,s=!1){const o=await bs._fromIdTokenResponse(e,i,s),c=Ww(i);return new jo({user:o,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const s=Ww(i);return new jo({user:e,providerId:s,_tokenResponse:i,operationType:t})}}function Ww(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff extends Ds{constructor(e,t,i,s){var o;super(t.code,t.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Ff.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,s){return new Ff(e,t,i,s)}}function GT(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Ff._fromErrorAndOperation(n,o,e,i):o})}async function XO(n,e,t=!1){const i=await ec(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return jo._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QO(n,e,t=!1){const{auth:i}=n;if(_i(i.app))return Promise.reject(Es(i));const s="reauthenticate";try{const o=await ec(n,GT(i,s,e,n),t);je(o.idToken,i,"internal-error");const c=My(o.idToken);je(c,i,"internal-error");const{sub:h}=c;return je(n.uid===h,i,"user-mismatch"),jo._forOperation(n,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Ki(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KT(n,e,t=!1){if(_i(n.app))return Promise.reject(Es(n));const i="signIn",s=await GT(n,i,e),o=await jo._fromIdTokenResponse(n,i,s);return t||await n._updateCurrentUser(o.user),o}async function WO(n,e){return KT(Va(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YT(n){const e=Va(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function ZO(n,e,t){if(_i(n.app))return Promise.reject(Es(n));const i=Va(n),c=await V0(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",YO).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&YT(n),d}),h=await jo._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(h.user),h}function JO(n,e,t){return _i(n.app)?Promise.reject(Es(n)):WO(fn(n),_c.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&YT(n),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e7(n,e){return ks(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t7(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const i=fn(n),o={idToken:await i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await ec(i,e7(i.auth,o));i.displayName=c.displayName||null,i.photoURL=c.photoUrl||null;const h=i.providerData.find(({providerId:d})=>d==="password");h&&(h.displayName=i.displayName,h.photoURL=i.photoURL),await i._updateTokensIfNecessary(c)}function n7(n,e,t,i){return fn(n).onIdTokenChanged(e,t,i)}function i7(n,e,t){return fn(n).beforeAuthStateChanged(e,t)}function XT(n,e,t,i){return fn(n).onAuthStateChanged(e,t,i)}function r7(n){return fn(n).signOut()}const Bf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Bf,"1"),this.storage.removeItem(Bf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s7=1e3,a7=10;class WT extends QT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=zT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),s=this.localCache[t];i!==s&&e(t,s,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,h,d)=>{this.notifyListeners(c,d)});return}const i=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);EO()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,a7):s()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},s7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}WT.type="LOCAL";const o7=WT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT extends QT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ZT.type="SESSION";const JT=ZT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l7(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const i=new pm(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:s,data:o}=t.data,c=this.handlersMap[s];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const h=Array.from(c).map(async m=>m(t.origin,o)),d=await l7(h);t.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}pm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vy(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c7{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,c;return new Promise((h,d)=>{const m=Vy("",20);s.port1.start();const y=setTimeout(()=>{d(new Error("unsupported_event"))},i);c={messageChannel:s,onMessage(_){const b=_;if(b.data.eventId===m)switch(b.data.status){case"ack":clearTimeout(y),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(b.data.response);break;default:clearTimeout(y),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(){return window}function u7(n){Vr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(){return typeof Vr().WorkerGlobalScope<"u"&&typeof Vr().importScripts=="function"}async function h7(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function d7(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function f7(){return eA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA="firebaseLocalStorageDb",m7=1,Hf="firebaseLocalStorage",nA="fbase_key";class Dh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function gm(n,e){return n.transaction([Hf],e?"readwrite":"readonly").objectStore(Hf)}function p7(){const n=indexedDB.deleteDatabase(tA);return new Dh(n).toPromise()}function $0(){const n=indexedDB.open(tA,m7);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Hf,{keyPath:nA})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Hf)?e(i):(i.close(),await p7(),e(await $0()))})})}async function Zw(n,e,t){const i=gm(n,!0).put({[nA]:e,value:t});return new Dh(i).toPromise()}async function g7(n,e){const t=gm(n,!1).get(e),i=await new Dh(t).toPromise();return i===void 0?null:i.value}function Jw(n,e){const t=gm(n,!0).delete(e);return new Dh(t).toPromise()}const y7=800,v7=3;class iA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $0(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>v7)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return eA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pm._getInstance(f7()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await h7(),!this.activeServiceWorker)return;this.sender=new c7(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||d7()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $0();return await Zw(e,Bf,"1"),await Jw(e,Bf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Zw(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>g7(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Jw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=gm(s,!1).getAll();return new Dh(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),y7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}iA.type="LOCAL";const _7=iA;new Rh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(n,e){return e?ws(e):(je(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y extends Py{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Wl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Wl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function b7(n){return KT(n.auth,new $y(n),n.bypassAuthState)}function w7(n){const{auth:e,user:t}=n;return je(t,e,"internal-error"),QO(t,new $y(n),n.bypassAuthState)}async function E7(n){const{auth:e,user:t}=n;return je(t,e,"internal-error"),XO(t,new $y(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e,t,i,s,o=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:s,tenantId:o,error:c,type:h}=e;if(c){this.reject(c);return}const d={auth:this.auth,requestUri:t,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return b7;case"linkViaPopup":case"linkViaRedirect":return E7;case"reauthViaPopup":case"reauthViaRedirect":return w7;default:Ki(this.auth,"internal-error")}}resolve(e){Ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T7=new Rh(2e3,1e4);async function A7(n,e,t){if(_i(n.app))return Promise.reject(ar(n,"operation-not-supported-in-this-environment"));const i=Va(n);iO(n,e,Uy);const s=rA(i,t);return new Oo(i,"signInViaPopup",e,s).executeNotNull()}class Oo extends sA{constructor(e,t,i,s,o){super(e,t,s,o),this.provider=i,this.authWindow=null,this.pollId=null,Oo.currentPopupAction&&Oo.currentPopupAction.cancel(),Oo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return je(e,this.auth,"internal-error"),e}async onExecution(){Ss(this.filter.length===1,"Popup operations only handle one event");const e=Vy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ar(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ar(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Oo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ar(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,T7.get())};e()}}Oo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S7="pendingRedirect",Sf=new Map;class C7 extends sA{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Sf.get(this.auth._key());if(!e){try{const i=await x7(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Sf.set(this.auth._key(),e)}return this.bypassAuthState||Sf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function x7(n,e){const t=O7(e),i=I7(n);if(!await i._isAvailable())return!1;const s=await i._get(t)==="true";return await i._remove(t),s}function R7(n,e){Sf.set(n._key(),e)}function I7(n){return ws(n._redirectPersistence)}function O7(n){return Af(S7,n.config.apiKey,n.name)}async function D7(n,e,t=!1){if(_i(n.app))return Promise.reject(Es(n));const i=Va(n),s=rA(i,e),c=await new C7(i,s,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k7=10*60*1e3;class M7{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!N7(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!aA(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(ar(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=k7&&this.cachedEventUids.clear(),this.cachedEventUids.has(e2(e))}saveEventToCache(e){this.cachedEventUids.add(e2(e)),this.lastProcessedEventTime=Date.now()}}function e2(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function aA({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function N7(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return aA(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P7(n,e={}){return ks(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L7=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,U7=/^https?/;async function V7(n){if(n.config.emulator)return;const{authorizedDomains:e}=await P7(n);for(const t of e)try{if($7(t))return}catch{}Ki(n,"unauthorized-domain")}function $7(n){const e=L0(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!U7.test(t))return!1;if(L7.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j7=new Rh(3e4,6e4);function t2(){const n=Vr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function z7(n){return new Promise((e,t)=>{var i,s,o;function c(){t2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{t2(),t(ar(n,"network-request-failed"))},timeout:j7.get()})}if(!((s=(i=Vr().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=Vr().gapi)===null||o===void 0)&&o.load)c();else{const h=DO("iframefcb");return Vr()[h]=()=>{gapi.load?c():t(ar(n,"network-request-failed"))},BT(`${OO()}?onload=${h}`).catch(d=>t(d))}}).catch(e=>{throw Cf=null,e})}let Cf=null;function F7(n){return Cf=Cf||z7(n),Cf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B7=new Rh(5e3,15e3),H7="__/auth/iframe",q7="emulator/auth/iframe",G7={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},K7=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Y7(n){const e=n.config;je(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?ky(e,q7):`https://${n.config.authDomain}/${H7}`,i={apiKey:e.apiKey,appName:n.name,v:vc},s=K7.get(n.config.apiHost);s&&(i.eid=s);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${t}?${xh(i).slice(1)}`}async function X7(n){const e=await F7(n),t=Vr().gapi;return je(t,n,"internal-error"),e.open({where:document.body,url:Y7(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:G7,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const c=ar(n,"network-request-failed"),h=Vr().setTimeout(()=>{o(c)},B7.get());function d(){Vr().clearTimeout(h),s(i)}i.ping(d).then(d,()=>{o(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q7={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},W7=500,Z7=600,J7="_blank",eD="http://localhost";class n2{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function tD(n,e,t,i=W7,s=Z7){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const d=Object.assign(Object.assign({},Q7),{width:i.toString(),height:s.toString(),top:o,left:c}),m=Hn().toLowerCase();t&&(h=LT(m)?J7:t),NT(m)&&(e=e||eD,d.scrollbars="yes");const y=Object.entries(d).reduce((b,[T,A])=>`${b}${T}=${A},`,"");if(wO(m)&&h!=="_self")return nD(e||"",h),new n2(null);const _=window.open(e||"",h,y);je(_,n,"popup-blocked");try{_.focus()}catch{}return new n2(_)}function nD(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD="__/auth/handler",rD="emulator/auth/handler",sD=encodeURIComponent("fac");async function i2(n,e,t,i,s,o){je(n.config.authDomain,n,"auth-domain-config-required"),je(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:vc,eventId:s};if(e instanceof Uy){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",B4(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,_]of Object.entries({}))c[y]=_}if(e instanceof Oh){const y=e.getScopes().filter(_=>_!=="");y.length>0&&(c.scopes=y.join(","))}n.tenantId&&(c.tid=n.tenantId);const h=c;for(const y of Object.keys(h))h[y]===void 0&&delete h[y];const d=await n._getAppCheckToken(),m=d?`#${sD}=${encodeURIComponent(d)}`:"";return`${aD(n)}?${xh(h).slice(1)}${m}`}function aD({config:n}){return n.emulator?ky(n,rD):`https://${n.authDomain}/${iD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0="webStorageSupport";class oD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=JT,this._completeRedirectFn=D7,this._overrideRedirectResult=R7}async _openPopup(e,t,i,s){var o;Ss((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const c=await i2(e,t,i,L0(),s);return tD(e,c,Vy())}async _openRedirect(e,t,i,s){await this._originValidation(e);const o=await i2(e,t,i,L0(),s);return u7(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(Ss(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await X7(e),i=new M7(e);return t.register("authEvent",s=>(je(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(f0,{type:f0},s=>{var o;const c=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[f0];c!==void 0&&t(!!c),Ki(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=V7(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return zT()||PT()||Ny()}}const lD=oD;var r2="@firebase/auth",s2="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function hD(n){Jl(new Vo("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=i.options;je(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:FT(n)},m=new xO(i,s,o,d);return UO(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Jl(new Vo("auth-internal",e=>{const t=Va(e.getProvider("auth").getImmediate());return(i=>new cD(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ta(r2,s2,uD(n)),Ta(r2,s2,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD=5*60,fD=_T("authIdTokenMaxAge")||dD;let a2=null;const mD=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>fD)return;const s=t==null?void 0:t.token;a2!==s&&(a2=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function oA(n=TT()){const e=Ry(n,"auth");if(e.isInitialized())return e.getImmediate();const t=LO(n,{popupRedirectResolver:lD,persistence:[_7,o7,JT]}),i=_T("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const c=mD(o.toString());i7(t,c,()=>c(t.currentUser)),n7(t,h=>c(h))}}const s=yT("auth");return s&&VO(t,`http://${s}`),t}function pD(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}RO({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=s=>{const o=ar("internal-error");o.customData=s,t(o)},i.type="text/javascript",i.charset="UTF-8",pD().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});hD("Browser");var gD="firebase",yD="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ta(gD,yD,"app");var o2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Aa,lA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,I){function R(){}R.prototype=I.prototype,k.D=I.prototype,k.prototype=new R,k.prototype.constructor=k,k.C=function(D,L,H){for(var N=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)N[Be-2]=arguments[Be];return I.prototype[L].apply(D,N)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(k,I,R){R||(R=0);var D=Array(16);if(typeof I=="string")for(var L=0;16>L;++L)D[L]=I.charCodeAt(R++)|I.charCodeAt(R++)<<8|I.charCodeAt(R++)<<16|I.charCodeAt(R++)<<24;else for(L=0;16>L;++L)D[L]=I[R++]|I[R++]<<8|I[R++]<<16|I[R++]<<24;I=k.g[0],R=k.g[1],L=k.g[2];var H=k.g[3],N=I+(H^R&(L^H))+D[0]+3614090360&4294967295;I=R+(N<<7&4294967295|N>>>25),N=H+(L^I&(R^L))+D[1]+3905402710&4294967295,H=I+(N<<12&4294967295|N>>>20),N=L+(R^H&(I^R))+D[2]+606105819&4294967295,L=H+(N<<17&4294967295|N>>>15),N=R+(I^L&(H^I))+D[3]+3250441966&4294967295,R=L+(N<<22&4294967295|N>>>10),N=I+(H^R&(L^H))+D[4]+4118548399&4294967295,I=R+(N<<7&4294967295|N>>>25),N=H+(L^I&(R^L))+D[5]+1200080426&4294967295,H=I+(N<<12&4294967295|N>>>20),N=L+(R^H&(I^R))+D[6]+2821735955&4294967295,L=H+(N<<17&4294967295|N>>>15),N=R+(I^L&(H^I))+D[7]+4249261313&4294967295,R=L+(N<<22&4294967295|N>>>10),N=I+(H^R&(L^H))+D[8]+1770035416&4294967295,I=R+(N<<7&4294967295|N>>>25),N=H+(L^I&(R^L))+D[9]+2336552879&4294967295,H=I+(N<<12&4294967295|N>>>20),N=L+(R^H&(I^R))+D[10]+4294925233&4294967295,L=H+(N<<17&4294967295|N>>>15),N=R+(I^L&(H^I))+D[11]+2304563134&4294967295,R=L+(N<<22&4294967295|N>>>10),N=I+(H^R&(L^H))+D[12]+1804603682&4294967295,I=R+(N<<7&4294967295|N>>>25),N=H+(L^I&(R^L))+D[13]+4254626195&4294967295,H=I+(N<<12&4294967295|N>>>20),N=L+(R^H&(I^R))+D[14]+2792965006&4294967295,L=H+(N<<17&4294967295|N>>>15),N=R+(I^L&(H^I))+D[15]+1236535329&4294967295,R=L+(N<<22&4294967295|N>>>10),N=I+(L^H&(R^L))+D[1]+4129170786&4294967295,I=R+(N<<5&4294967295|N>>>27),N=H+(R^L&(I^R))+D[6]+3225465664&4294967295,H=I+(N<<9&4294967295|N>>>23),N=L+(I^R&(H^I))+D[11]+643717713&4294967295,L=H+(N<<14&4294967295|N>>>18),N=R+(H^I&(L^H))+D[0]+3921069994&4294967295,R=L+(N<<20&4294967295|N>>>12),N=I+(L^H&(R^L))+D[5]+3593408605&4294967295,I=R+(N<<5&4294967295|N>>>27),N=H+(R^L&(I^R))+D[10]+38016083&4294967295,H=I+(N<<9&4294967295|N>>>23),N=L+(I^R&(H^I))+D[15]+3634488961&4294967295,L=H+(N<<14&4294967295|N>>>18),N=R+(H^I&(L^H))+D[4]+3889429448&4294967295,R=L+(N<<20&4294967295|N>>>12),N=I+(L^H&(R^L))+D[9]+568446438&4294967295,I=R+(N<<5&4294967295|N>>>27),N=H+(R^L&(I^R))+D[14]+3275163606&4294967295,H=I+(N<<9&4294967295|N>>>23),N=L+(I^R&(H^I))+D[3]+4107603335&4294967295,L=H+(N<<14&4294967295|N>>>18),N=R+(H^I&(L^H))+D[8]+1163531501&4294967295,R=L+(N<<20&4294967295|N>>>12),N=I+(L^H&(R^L))+D[13]+2850285829&4294967295,I=R+(N<<5&4294967295|N>>>27),N=H+(R^L&(I^R))+D[2]+4243563512&4294967295,H=I+(N<<9&4294967295|N>>>23),N=L+(I^R&(H^I))+D[7]+1735328473&4294967295,L=H+(N<<14&4294967295|N>>>18),N=R+(H^I&(L^H))+D[12]+2368359562&4294967295,R=L+(N<<20&4294967295|N>>>12),N=I+(R^L^H)+D[5]+4294588738&4294967295,I=R+(N<<4&4294967295|N>>>28),N=H+(I^R^L)+D[8]+2272392833&4294967295,H=I+(N<<11&4294967295|N>>>21),N=L+(H^I^R)+D[11]+1839030562&4294967295,L=H+(N<<16&4294967295|N>>>16),N=R+(L^H^I)+D[14]+4259657740&4294967295,R=L+(N<<23&4294967295|N>>>9),N=I+(R^L^H)+D[1]+2763975236&4294967295,I=R+(N<<4&4294967295|N>>>28),N=H+(I^R^L)+D[4]+1272893353&4294967295,H=I+(N<<11&4294967295|N>>>21),N=L+(H^I^R)+D[7]+4139469664&4294967295,L=H+(N<<16&4294967295|N>>>16),N=R+(L^H^I)+D[10]+3200236656&4294967295,R=L+(N<<23&4294967295|N>>>9),N=I+(R^L^H)+D[13]+681279174&4294967295,I=R+(N<<4&4294967295|N>>>28),N=H+(I^R^L)+D[0]+3936430074&4294967295,H=I+(N<<11&4294967295|N>>>21),N=L+(H^I^R)+D[3]+3572445317&4294967295,L=H+(N<<16&4294967295|N>>>16),N=R+(L^H^I)+D[6]+76029189&4294967295,R=L+(N<<23&4294967295|N>>>9),N=I+(R^L^H)+D[9]+3654602809&4294967295,I=R+(N<<4&4294967295|N>>>28),N=H+(I^R^L)+D[12]+3873151461&4294967295,H=I+(N<<11&4294967295|N>>>21),N=L+(H^I^R)+D[15]+530742520&4294967295,L=H+(N<<16&4294967295|N>>>16),N=R+(L^H^I)+D[2]+3299628645&4294967295,R=L+(N<<23&4294967295|N>>>9),N=I+(L^(R|~H))+D[0]+4096336452&4294967295,I=R+(N<<6&4294967295|N>>>26),N=H+(R^(I|~L))+D[7]+1126891415&4294967295,H=I+(N<<10&4294967295|N>>>22),N=L+(I^(H|~R))+D[14]+2878612391&4294967295,L=H+(N<<15&4294967295|N>>>17),N=R+(H^(L|~I))+D[5]+4237533241&4294967295,R=L+(N<<21&4294967295|N>>>11),N=I+(L^(R|~H))+D[12]+1700485571&4294967295,I=R+(N<<6&4294967295|N>>>26),N=H+(R^(I|~L))+D[3]+2399980690&4294967295,H=I+(N<<10&4294967295|N>>>22),N=L+(I^(H|~R))+D[10]+4293915773&4294967295,L=H+(N<<15&4294967295|N>>>17),N=R+(H^(L|~I))+D[1]+2240044497&4294967295,R=L+(N<<21&4294967295|N>>>11),N=I+(L^(R|~H))+D[8]+1873313359&4294967295,I=R+(N<<6&4294967295|N>>>26),N=H+(R^(I|~L))+D[15]+4264355552&4294967295,H=I+(N<<10&4294967295|N>>>22),N=L+(I^(H|~R))+D[6]+2734768916&4294967295,L=H+(N<<15&4294967295|N>>>17),N=R+(H^(L|~I))+D[13]+1309151649&4294967295,R=L+(N<<21&4294967295|N>>>11),N=I+(L^(R|~H))+D[4]+4149444226&4294967295,I=R+(N<<6&4294967295|N>>>26),N=H+(R^(I|~L))+D[11]+3174756917&4294967295,H=I+(N<<10&4294967295|N>>>22),N=L+(I^(H|~R))+D[2]+718787259&4294967295,L=H+(N<<15&4294967295|N>>>17),N=R+(H^(L|~I))+D[9]+3951481745&4294967295,k.g[0]=k.g[0]+I&4294967295,k.g[1]=k.g[1]+(L+(N<<21&4294967295|N>>>11))&4294967295,k.g[2]=k.g[2]+L&4294967295,k.g[3]=k.g[3]+H&4294967295}i.prototype.u=function(k,I){I===void 0&&(I=k.length);for(var R=I-this.blockSize,D=this.B,L=this.h,H=0;H<I;){if(L==0)for(;H<=R;)s(this,k,H),H+=this.blockSize;if(typeof k=="string"){for(;H<I;)if(D[L++]=k.charCodeAt(H++),L==this.blockSize){s(this,D),L=0;break}}else for(;H<I;)if(D[L++]=k[H++],L==this.blockSize){s(this,D),L=0;break}}this.h=L,this.o+=I},i.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var I=1;I<k.length-8;++I)k[I]=0;var R=8*this.o;for(I=k.length-8;I<k.length;++I)k[I]=R&255,R/=256;for(this.u(k),k=Array(16),I=R=0;4>I;++I)for(var D=0;32>D;D+=8)k[R++]=this.g[I]>>>D&255;return k};function o(k,I){var R=h;return Object.prototype.hasOwnProperty.call(R,k)?R[k]:R[k]=I(k)}function c(k,I){this.h=I;for(var R=[],D=!0,L=k.length-1;0<=L;L--){var H=k[L]|0;D&&H==I||(R[L]=H,D=!1)}this.g=R}var h={};function d(k){return-128<=k&&128>k?o(k,function(I){return new c([I|0],0>I?-1:0)}):new c([k|0],0>k?-1:0)}function m(k){if(isNaN(k)||!isFinite(k))return _;if(0>k)return P(m(-k));for(var I=[],R=1,D=0;k>=R;D++)I[D]=k/R|0,R*=4294967296;return new c(I,0)}function y(k,I){if(k.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(k.charAt(0)=="-")return P(y(k.substring(1),I));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=m(Math.pow(I,8)),D=_,L=0;L<k.length;L+=8){var H=Math.min(8,k.length-L),N=parseInt(k.substring(L,L+H),I);8>H?(H=m(Math.pow(I,H)),D=D.j(H).add(m(N))):(D=D.j(R),D=D.add(m(N)))}return D}var _=d(0),b=d(1),T=d(16777216);n=c.prototype,n.m=function(){if(U(this))return-P(this).m();for(var k=0,I=1,R=0;R<this.g.length;R++){var D=this.i(R);k+=(0<=D?D:4294967296+D)*I,I*=4294967296}return k},n.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(A(this))return"0";if(U(this))return"-"+P(this).toString(k);for(var I=m(Math.pow(k,6)),R=this,D="";;){var L=ue(R,I).g;R=B(R,L.j(I));var H=((0<R.g.length?R.g[0]:R.h)>>>0).toString(k);if(R=L,A(R))return H+D;for(;6>H.length;)H="0"+H;D=H+D}},n.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function A(k){if(k.h!=0)return!1;for(var I=0;I<k.g.length;I++)if(k.g[I]!=0)return!1;return!0}function U(k){return k.h==-1}n.l=function(k){return k=B(this,k),U(k)?-1:A(k)?0:1};function P(k){for(var I=k.g.length,R=[],D=0;D<I;D++)R[D]=~k.g[D];return new c(R,~k.h).add(b)}n.abs=function(){return U(this)?P(this):this},n.add=function(k){for(var I=Math.max(this.g.length,k.g.length),R=[],D=0,L=0;L<=I;L++){var H=D+(this.i(L)&65535)+(k.i(L)&65535),N=(H>>>16)+(this.i(L)>>>16)+(k.i(L)>>>16);D=N>>>16,H&=65535,N&=65535,R[L]=N<<16|H}return new c(R,R[R.length-1]&-2147483648?-1:0)};function B(k,I){return k.add(P(I))}n.j=function(k){if(A(this)||A(k))return _;if(U(this))return U(k)?P(this).j(P(k)):P(P(this).j(k));if(U(k))return P(this.j(P(k)));if(0>this.l(T)&&0>k.l(T))return m(this.m()*k.m());for(var I=this.g.length+k.g.length,R=[],D=0;D<2*I;D++)R[D]=0;for(D=0;D<this.g.length;D++)for(var L=0;L<k.g.length;L++){var H=this.i(D)>>>16,N=this.i(D)&65535,Be=k.i(L)>>>16,Ue=k.i(L)&65535;R[2*D+2*L]+=N*Ue,G(R,2*D+2*L),R[2*D+2*L+1]+=H*Ue,G(R,2*D+2*L+1),R[2*D+2*L+1]+=N*Be,G(R,2*D+2*L+1),R[2*D+2*L+2]+=H*Be,G(R,2*D+2*L+2)}for(D=0;D<I;D++)R[D]=R[2*D+1]<<16|R[2*D];for(D=I;D<2*I;D++)R[D]=0;return new c(R,0)};function G(k,I){for(;(k[I]&65535)!=k[I];)k[I+1]+=k[I]>>>16,k[I]&=65535,I++}function Q(k,I){this.g=k,this.h=I}function ue(k,I){if(A(I))throw Error("division by zero");if(A(k))return new Q(_,_);if(U(k))return I=ue(P(k),I),new Q(P(I.g),P(I.h));if(U(I))return I=ue(k,P(I)),new Q(P(I.g),I.h);if(30<k.g.length){if(U(k)||U(I))throw Error("slowDivide_ only works with positive integers.");for(var R=b,D=I;0>=D.l(k);)R=V(R),D=V(D);var L=te(R,1),H=te(D,1);for(D=te(D,2),R=te(R,2);!A(D);){var N=H.add(D);0>=N.l(k)&&(L=L.add(R),H=N),D=te(D,1),R=te(R,1)}return I=B(k,L.j(I)),new Q(L,I)}for(L=_;0<=k.l(I);){for(R=Math.max(1,Math.floor(k.m()/I.m())),D=Math.ceil(Math.log(R)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),H=m(R),N=H.j(I);U(N)||0<N.l(k);)R-=D,H=m(R),N=H.j(I);A(H)&&(H=b),L=L.add(H),k=B(k,N)}return new Q(L,k)}n.A=function(k){return ue(this,k).h},n.and=function(k){for(var I=Math.max(this.g.length,k.g.length),R=[],D=0;D<I;D++)R[D]=this.i(D)&k.i(D);return new c(R,this.h&k.h)},n.or=function(k){for(var I=Math.max(this.g.length,k.g.length),R=[],D=0;D<I;D++)R[D]=this.i(D)|k.i(D);return new c(R,this.h|k.h)},n.xor=function(k){for(var I=Math.max(this.g.length,k.g.length),R=[],D=0;D<I;D++)R[D]=this.i(D)^k.i(D);return new c(R,this.h^k.h)};function V(k){for(var I=k.g.length+1,R=[],D=0;D<I;D++)R[D]=k.i(D)<<1|k.i(D-1)>>>31;return new c(R,k.h)}function te(k,I){var R=I>>5;I%=32;for(var D=k.g.length-R,L=[],H=0;H<D;H++)L[H]=0<I?k.i(H+R)>>>I|k.i(H+R+1)<<32-I:k.i(H+R);return new c(L,k.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,lA=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=y,Aa=c}).apply(typeof o2<"u"?o2:typeof self<"u"?self:typeof window<"u"?window:{});var of=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cA,Hu,uA,xf,j0,hA,dA,fA;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,v,w){return f==Array.prototype||f==Object.prototype||(f[v]=w.value),f};function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof of=="object"&&of];for(var v=0;v<f.length;++v){var w=f[v];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var i=t(this);function s(f,v){if(v)e:{var w=i;f=f.split(".");for(var x=0;x<f.length-1;x++){var X=f[x];if(!(X in w))break e;w=w[X]}f=f[f.length-1],x=w[f],v=v(x),v!=x&&v!=null&&e(w,f,{configurable:!0,writable:!0,value:v})}}function o(f,v){f instanceof String&&(f+="");var w=0,x=!1,X={next:function(){if(!x&&w<f.length){var ne=w++;return{value:v(ne,f[ne]),done:!1}}return x=!0,{done:!0,value:void 0}}};return X[Symbol.iterator]=function(){return X},X}s("Array.prototype.values",function(f){return f||function(){return o(this,function(v,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},h=this||self;function d(f){var v=typeof f;return v=v!="object"?v:f?Array.isArray(f)?"array":v:"null",v=="array"||v=="object"&&typeof f.length=="number"}function m(f){var v=typeof f;return v=="object"&&f!=null||v=="function"}function y(f,v,w){return f.call.apply(f.bind,arguments)}function _(f,v,w){if(!f)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var X=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(X,x),f.apply(v,X)}}return function(){return f.apply(v,arguments)}}function b(f,v,w){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:_,b.apply(null,arguments)}function T(f,v){var w=Array.prototype.slice.call(arguments,1);return function(){var x=w.slice();return x.push.apply(x,arguments),f.apply(this,x)}}function A(f,v){function w(){}w.prototype=v.prototype,f.aa=v.prototype,f.prototype=new w,f.prototype.constructor=f,f.Qb=function(x,X,ne){for(var ye=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)ye[ut-2]=arguments[ut];return v.prototype[X].apply(x,ye)}}function U(f){const v=f.length;if(0<v){const w=Array(v);for(let x=0;x<v;x++)w[x]=f[x];return w}return[]}function P(f,v){for(let w=1;w<arguments.length;w++){const x=arguments[w];if(d(x)){const X=f.length||0,ne=x.length||0;f.length=X+ne;for(let ye=0;ye<ne;ye++)f[X+ye]=x[ye]}else f.push(x)}}class B{constructor(v,w){this.i=v,this.j=w,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function G(f){return/^[\s\xa0]*$/.test(f)}function Q(){var f=h.navigator;return f&&(f=f.userAgent)?f:""}function ue(f){return ue[" "](f),f}ue[" "]=function(){};var V=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function te(f,v,w){for(const x in f)v.call(w,f[x],x,f)}function k(f,v){for(const w in f)v.call(void 0,f[w],w,f)}function I(f){const v={};for(const w in f)v[w]=f[w];return v}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(f,v){let w,x;for(let X=1;X<arguments.length;X++){x=arguments[X];for(w in x)f[w]=x[w];for(let ne=0;ne<R.length;ne++)w=R[ne],Object.prototype.hasOwnProperty.call(x,w)&&(f[w]=x[w])}}function L(f){var v=1;f=f.split(":");const w=[];for(;0<v&&f.length;)w.push(f.shift()),v--;return f.length&&w.push(f.join(":")),w}function H(f){h.setTimeout(()=>{throw f},0)}function N(){var f=de;let v=null;return f.g&&(v=f.g,f.g=f.g.next,f.g||(f.h=null),v.next=null),v}class Be{constructor(){this.h=this.g=null}add(v,w){const x=Ue.get();x.set(v,w),this.h?this.h.next=x:this.g=x,this.h=x}}var Ue=new B(()=>new ae,f=>f.reset());class ae{constructor(){this.next=this.g=this.h=null}set(v,w){this.h=v,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let we,me=!1,de=new Be,O=()=>{const f=h.Promise.resolve(void 0);we=()=>{f.then(W)}};var W=()=>{for(var f;f=N();){try{f.h.call(f.g)}catch(w){H(w)}var v=Ue;v.j(f),100>v.h&&(v.h++,f.next=v.g,v.g=f)}me=!1};function fe(){this.s=this.s,this.C=this.C}fe.prototype.s=!1,fe.prototype.ma=function(){this.s||(this.s=!0,this.N())},fe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pe(f,v){this.type=f,this.g=this.target=v,this.defaultPrevented=!1}pe.prototype.h=function(){this.defaultPrevented=!0};var ge=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var f=!1,v=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const w=()=>{};h.addEventListener("test",w,v),h.removeEventListener("test",w,v)}catch{}return f}();function ve(f,v){if(pe.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var w=this.type=f.type,x=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=v,v=f.relatedTarget){if(V){e:{try{ue(v.nodeName);var X=!0;break e}catch{}X=!1}X||(v=null)}}else w=="mouseover"?v=f.fromElement:w=="mouseout"&&(v=f.toElement);this.relatedTarget=v,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:ke[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&ve.aa.h.call(this)}}A(ve,pe);var ke={2:"touch",3:"pen",4:"mouse"};ve.prototype.h=function(){ve.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Ke="closure_listenable_"+(1e6*Math.random()|0),Xe=0;function He(f,v,w,x,X){this.listener=f,this.proxy=null,this.src=v,this.type=w,this.capture=!!x,this.ha=X,this.key=++Xe,this.da=this.fa=!1}function nt(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function mn(f){this.src=f,this.g={},this.h=0}mn.prototype.add=function(f,v,w,x,X){var ne=f.toString();f=this.g[ne],f||(f=this.g[ne]=[],this.h++);var ye=Zt(f,v,x,X);return-1<ye?(v=f[ye],w||(v.fa=!1)):(v=new He(v,this.src,ne,!!x,X),v.fa=w,f.push(v)),v};function Xi(f,v){var w=v.type;if(w in f.g){var x=f.g[w],X=Array.prototype.indexOf.call(x,v,void 0),ne;(ne=0<=X)&&Array.prototype.splice.call(x,X,1),ne&&(nt(v),f.g[w].length==0&&(delete f.g[w],f.h--))}}function Zt(f,v,w,x){for(var X=0;X<f.length;++X){var ne=f[X];if(!ne.da&&ne.listener==v&&ne.capture==!!w&&ne.ha==x)return X}return-1}var gr="closure_lm_"+(1e6*Math.random()|0),yr={};function Ei(f,v,w,x,X){if(Array.isArray(v)){for(var ne=0;ne<v.length;ne++)Ei(f,v[ne],w,x,X);return null}return w=li(w),f&&f[Ke]?f.K(v,w,m(x)?!!x.capture:!1,X):Ha(f,v,w,!1,x,X)}function Ha(f,v,w,x,X,ne){if(!v)throw Error("Invalid event type");var ye=m(X)?!!X.capture:!!X,ut=Us(f);if(ut||(f[gr]=ut=new mn(f)),w=ut.add(v,w,x,ye,ne),w.proxy)return w;if(x=Ps(),w.proxy=x,x.src=f,x.listener=w,f.addEventListener)ge||(X=ye),X===void 0&&(X=!1),f.addEventListener(v.toString(),x,X);else if(f.attachEvent)f.attachEvent(Zn(v.toString()),x);else if(f.addListener&&f.removeListener)f.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Ps(){function f(w){return v.call(f.src,f.listener,w)}const v=Hr;return f}function Ls(f,v,w,x,X){if(Array.isArray(v))for(var ne=0;ne<v.length;ne++)Ls(f,v[ne],w,x,X);else x=m(x)?!!x.capture:!!x,w=li(w),f&&f[Ke]?(f=f.i,v=String(v).toString(),v in f.g&&(ne=f.g[v],w=Zt(ne,w,x,X),-1<w&&(nt(ne[w]),Array.prototype.splice.call(ne,w,1),ne.length==0&&(delete f.g[v],f.h--)))):f&&(f=Us(f))&&(v=f.g[v.toString()],f=-1,v&&(f=Zt(v,w,x,X)),(w=-1<f?v[f]:null)&&Br(w))}function Br(f){if(typeof f!="number"&&f&&!f.da){var v=f.src;if(v&&v[Ke])Xi(v.i,f);else{var w=f.type,x=f.proxy;v.removeEventListener?v.removeEventListener(w,x,f.capture):v.detachEvent?v.detachEvent(Zn(w),x):v.addListener&&v.removeListener&&v.removeListener(x),(w=Us(v))?(Xi(w,f),w.h==0&&(w.src=null,v[gr]=null)):nt(f)}}}function Zn(f){return f in yr?yr[f]:yr[f]="on"+f}function Hr(f,v){if(f.da)f=!0;else{v=new ve(v,this);var w=f.listener,x=f.ha||f.src;f.fa&&Br(f),f=w.call(x,v)}return f}function Us(f){return f=f[gr],f instanceof mn?f:null}var pn="__closure_events_fn_"+(1e9*Math.random()>>>0);function li(f){return typeof f=="function"?f:(f[pn]||(f[pn]=function(v){return f.handleEvent(v)}),f[pn])}function At(){fe.call(this),this.i=new mn(this),this.M=this,this.F=null}A(At,fe),At.prototype[Ke]=!0,At.prototype.removeEventListener=function(f,v,w,x){Ls(this,f,v,w,x)};function Gt(f,v){var w,x=f.F;if(x)for(w=[];x;x=x.F)w.push(x);if(f=f.M,x=v.type||v,typeof v=="string")v=new pe(v,f);else if(v instanceof pe)v.target=v.target||f;else{var X=v;v=new pe(x,f),D(v,X)}if(X=!0,w)for(var ne=w.length-1;0<=ne;ne--){var ye=v.g=w[ne];X=ci(ye,x,!0,v)&&X}if(ye=v.g=f,X=ci(ye,x,!0,v)&&X,X=ci(ye,x,!1,v)&&X,w)for(ne=0;ne<w.length;ne++)ye=v.g=w[ne],X=ci(ye,x,!1,v)&&X}At.prototype.N=function(){if(At.aa.N.call(this),this.i){var f=this.i,v;for(v in f.g){for(var w=f.g[v],x=0;x<w.length;x++)nt(w[x]);delete f.g[v],f.h--}}this.F=null},At.prototype.K=function(f,v,w,x){return this.i.add(String(f),v,!1,w,x)},At.prototype.L=function(f,v,w,x){return this.i.add(String(f),v,!0,w,x)};function ci(f,v,w,x){if(v=f.i.g[String(v)],!v)return!0;v=v.concat();for(var X=!0,ne=0;ne<v.length;++ne){var ye=v[ne];if(ye&&!ye.da&&ye.capture==w){var ut=ye.listener,on=ye.ha||ye.src;ye.fa&&Xi(f.i,ye),X=ut.call(on,x)!==!1&&X}}return X&&!x.defaultPrevented}function Wo(f,v,w){if(typeof f=="function")w&&(f=b(f,w));else if(f&&typeof f.handleEvent=="function")f=b(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:h.setTimeout(f,v||0)}function Jn(f){f.g=Wo(()=>{f.g=null,f.i&&(f.i=!1,Jn(f))},f.l);const v=f.h;f.h=null,f.m.apply(null,v)}class Zo extends fe{constructor(v,w){super(),this.m=v,this.l=w,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Jn(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vr(f){fe.call(this),this.h=f,this.g={}}A(vr,fe);var Qi=[];function gn(f){te(f.g,function(v,w){this.g.hasOwnProperty(w)&&Br(v)},f),f.g={}}vr.prototype.N=function(){vr.aa.N.call(this),gn(this)},vr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vs=h.JSON.stringify,qn=h.JSON.parse,yn=class{stringify(f){return h.JSON.stringify(f,void 0)}parse(f){return h.JSON.parse(f,void 0)}};function qr(){}qr.prototype.h=null;function Jo(f){return f.h||(f.h=f.i())}function qa(){}var Ti={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Wi(){pe.call(this,"d")}A(Wi,pe);function Vn(){pe.call(this,"c")}A(Vn,pe);var xn={},_r=null;function $s(){return _r=_r||new At}xn.La="serverreachability";function $(f){pe.call(this,xn.La,f)}A($,pe);function K(f){const v=$s();Gt(v,new $(v))}xn.STAT_EVENT="statevent";function ee(f,v){pe.call(this,xn.STAT_EVENT,f),this.stat=v}A(ee,pe);function se(f){const v=$s();Gt(v,new ee(v,f))}xn.Ma="timingevent";function _e(f,v){pe.call(this,xn.Ma,f),this.size=v}A(_e,pe);function Ne(f,v){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){f()},v)}function Me(){this.g=!0}Me.prototype.xa=function(){this.g=!1};function Ie(f,v,w,x,X,ne){f.info(function(){if(f.g)if(ne)for(var ye="",ut=ne.split("&"),on=0;on<ut.length;on++){var ht=ut[on].split("=");if(1<ht.length){var bn=ht[0];ht=ht[1];var ln=bn.split("_");ye=2<=ln.length&&ln[1]=="type"?ye+(bn+"="+ht+"&"):ye+(bn+"=redacted&")}}else ye=null;else ye=ne;return"XMLHTTP REQ ("+x+") [attempt "+X+"]: "+v+`
`+w+`
`+ye})}function Oe(f,v,w,x,X,ne,ye){f.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+X+"]: "+v+`
`+w+`
`+ne+" "+ye})}function be(f,v,w,x){f.info(function(){return"XMLHTTP TEXT ("+v+"): "+Se(f,w)+(x?" "+x:"")})}function Ae(f,v){f.info(function(){return"TIMEOUT: "+v})}Me.prototype.info=function(){};function Se(f,v){if(!f.g)return v;if(!v)return null;try{var w=JSON.parse(v);if(w){for(f=0;f<w.length;f++)if(Array.isArray(w[f])){var x=w[f];if(!(2>x.length)){var X=x[1];if(Array.isArray(X)&&!(1>X.length)){var ne=X[0];if(ne!="noop"&&ne!="stop"&&ne!="close")for(var ye=1;ye<X.length;ye++)X[ye]=""}}}}return Vs(w)}catch{return v}}var Ve={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},gt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Pt;function Rt(){}A(Rt,qr),Rt.prototype.g=function(){return new XMLHttpRequest},Rt.prototype.i=function(){return{}},Pt=new Rt;function pt(f,v,w,x){this.j=f,this.i=v,this.l=w,this.R=x||1,this.U=new vr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Mt}function Mt(){this.i=null,this.g="",this.h=!1}var Gn={},ui={};function Kt(f,v,w){f.L=1,f.v=Xa(Ft(v)),f.m=w,f.P=!0,Jt(f,null)}function Jt(f,v){f.F=Date.now(),bt(f),f.A=Ft(f.v);var w=f.A,x=f.R;Array.isArray(x)||(x=[String(x)]),Xr(w.i,"t",x),f.C=0,w=f.j.J,f.h=new Mt,f.g=nd(f.j,w?v:null,!f.m),0<f.O&&(f.M=new Zo(b(f.Y,f,f.g),f.O)),v=f.U,w=f.g,x=f.ca;var X="readystatechange";Array.isArray(X)||(X&&(Qi[0]=X.toString()),X=Qi);for(var ne=0;ne<X.length;ne++){var ye=Ei(w,X[ne],x||v.handleEvent,!1,v.h||v);if(!ye)break;v.g[ye.key]=ye}v=f.H?I(f.H):{},f.m?(f.u||(f.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,v)):(f.u="GET",f.g.ea(f.A,f.u,null,v)),K(),Ie(f.i,f.u,f.A,f.l,f.R,f.m)}pt.prototype.ca=function(f){f=f.target;const v=this.M;v&&Oi(f)==3?v.j():this.Y(f)},pt.prototype.Y=function(f){try{if(f==this.g)e:{const ln=Oi(this.g);var v=this.g.Ba();const Jr=this.g.Z();if(!(3>ln)&&(ln!=3||this.g&&(this.h.h||this.g.oa()||Yh(this.g)))){this.J||ln!=4||v==7||(v==8||0>=Jr?K(3):K(2)),Zi(this);var w=this.g.Z();this.X=w;t:if(Ai(this)){var x=Yh(this.g);f="";var X=x.length,ne=Oi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){wt(this),Qe(this);var ye="";break t}this.h.i=new h.TextDecoder}for(v=0;v<X;v++)this.h.h=!0,f+=this.h.i.decode(x[v],{stream:!(ne&&v==X-1)});x.length=0,this.h.g+=f,this.C=0,ye=this.h.g}else ye=this.g.oa();if(this.o=w==200,Oe(this.i,this.u,this.A,this.l,this.R,ln,w),this.o){if(this.T&&!this.K){t:{if(this.g){var ut,on=this.g;if((ut=on.g?on.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(ut)){var ht=ut;break t}}ht=null}if(w=ht)be(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vn(this,w);else{this.o=!1,this.s=3,se(12),wt(this),Qe(this);break e}}if(this.P){w=!0;let Rn;for(;!this.J&&this.C<ye.length;)if(Rn=ei(this,ye),Rn==ui){ln==4&&(this.s=4,se(14),w=!1),be(this.i,this.l,null,"[Incomplete Response]");break}else if(Rn==Gn){this.s=4,se(15),be(this.i,this.l,ye,"[Invalid Chunk]"),w=!1;break}else be(this.i,this.l,Rn,null),vn(this,Rn);if(Ai(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ln!=4||ye.length!=0||this.h.h||(this.s=1,se(16),w=!1),this.o=this.o&&w,!w)be(this.i,this.l,ye,"[Invalid Chunked Response]"),wt(this),Qe(this);else if(0<ye.length&&!this.W){this.W=!0;var bn=this.j;bn.g==this&&bn.ba&&!bn.M&&(bn.j.info("Great, no buffering proxy detected. Bytes received: "+ye.length),no(bn),bn.M=!0,se(11))}}else be(this.i,this.l,ye,null),vn(this,ye);ln==4&&wt(this),this.o&&!this.J&&(ln==4?Jh(this.j,this):(this.o=!1,bt(this)))}else sp(this.g),w==400&&0<ye.indexOf("Unknown SID")?(this.s=3,se(12)):(this.s=0,se(13)),wt(this),Qe(this)}}}catch{}finally{}};function Ai(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function ei(f,v){var w=f.C,x=v.indexOf(`
`,w);return x==-1?ui:(w=Number(v.substring(w,x)),isNaN(w)?Gn:(x+=1,x+w>v.length?ui:(v=v.slice(x,x+w),f.C=x+w,v)))}pt.prototype.cancel=function(){this.J=!0,wt(this)};function bt(f){f.S=Date.now()+f.I,br(f,f.I)}function br(f,v){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Ne(b(f.ba,f),v)}function Zi(f){f.B&&(h.clearTimeout(f.B),f.B=null)}pt.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(Ae(this.i,this.A),this.L!=2&&(K(),se(17)),wt(this),this.s=2,Qe(this)):br(this,this.S-f)};function Qe(f){f.j.G==0||f.J||Jh(f.j,f)}function wt(f){Zi(f);var v=f.M;v&&typeof v.ma=="function"&&v.ma(),f.M=null,gn(f.U),f.g&&(v=f.g,f.g=null,v.abort(),v.ma())}function vn(f,v){try{var w=f.j;if(w.G!=0&&(w.g==f||wr(w.h,f))){if(!f.K&&wr(w.h,f)&&w.G==3){try{var x=w.Da.g.parse(v)}catch{x=null}if(Array.isArray(x)&&x.length==3){var X=x;if(X[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<f.F)cl(w),ol(w);else break e;Fc(w),se(18)}}else w.za=X[1],0<w.za-w.T&&37500>X[2]&&w.F&&w.v==0&&!w.C&&(w.C=Ne(b(w.Za,w),6e3));if(1>=Ga(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else Zr(w,11)}else if((f.K||w.g==f)&&cl(w),!G(v))for(X=w.Da.g.parse(v),v=0;v<X.length;v++){let ht=X[v];if(w.T=ht[0],ht=ht[1],w.G==2)if(ht[0]=="c"){w.K=ht[1],w.ia=ht[2];const bn=ht[3];bn!=null&&(w.la=bn,w.j.info("VER="+w.la));const ln=ht[4];ln!=null&&(w.Aa=ln,w.j.info("SVER="+w.Aa));const Jr=ht[5];Jr!=null&&typeof Jr=="number"&&0<Jr&&(x=1.5*Jr,w.L=x,w.j.info("backChannelRequestTimeoutMs_="+x)),x=w;const Rn=f.g;if(Rn){const Rr=Rn.g?Rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Rr){var ne=x.h;ne.g||Rr.indexOf("spdy")==-1&&Rr.indexOf("quic")==-1&&Rr.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(js(ne,ne.h),ne.h=null))}if(x.D){const Hc=Rn.g?Rn.g.getResponseHeader("X-HTTP-Session-Id"):null;Hc&&(x.ya=Hc,yt(x.I,x.D,Hc))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-f.F,w.j.info("Handshake RTT: "+w.R+"ms")),x=w;var ye=f;if(x.qa=td(x,x.J?x.ia:null,x.W),ye.K){Ci(x.h,ye);var ut=ye,on=x.L;on&&(ut.I=on),ut.B&&(Zi(ut),bt(ut)),x.g=ye}else Wh(x);0<w.i.length&&ll(w)}else ht[0]!="stop"&&ht[0]!="close"||Zr(w,7);else w.G==3&&(ht[0]=="stop"||ht[0]=="close"?ht[0]=="stop"?Zr(w,7):jc(w):ht[0]!="noop"&&w.l&&w.l.ta(ht),w.v=0)}}K(4)}catch{}}var Gr=class{constructor(f,v){this.g=f,this.map=v}};function Ot(f){this.l=f||10,h.PerformanceNavigationTiming?(f=h.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Si(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Ga(f){return f.h?1:f.g?f.g.size:0}function wr(f,v){return f.h?f.h==v:f.g?f.g.has(v):!1}function js(f,v){f.g?f.g.add(v):f.h=v}function Ci(f,v){f.h&&f.h==v?f.h=null:f.g&&f.g.has(v)&&f.g.delete(v)}Ot.prototype.cancel=function(){if(this.i=Kn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Kn(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let v=f.i;for(const w of f.g.values())v=v.concat(w.D);return v}return U(f.i)}function Hh(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(d(f)){for(var v=[],w=f.length,x=0;x<w;x++)v.push(f[x]);return v}v=[],w=0;for(x in f)v[w++]=f[x];return v}function tp(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(d(f)||typeof f=="string"){var v=[];f=f.length;for(var w=0;w<f;w++)v.push(w);return v}v=[],w=0;for(const x in f)v[w++]=x;return v}}}function Ka(f,v){if(f.forEach&&typeof f.forEach=="function")f.forEach(v,void 0);else if(d(f)||typeof f=="string")Array.prototype.forEach.call(f,v,void 0);else for(var w=tp(f),x=Hh(f),X=x.length,ne=0;ne<X;ne++)v.call(void 0,x[ne],w&&w[ne],f)}var Nc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function el(f,v){if(f){f=f.split("&");for(var w=0;w<f.length;w++){var x=f[w].indexOf("="),X=null;if(0<=x){var ne=f[w].substring(0,x);X=f[w].substring(x+1)}else ne=f[w];v(ne,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function Kr(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Kr){this.h=f.h,zs(this,f.j),this.o=f.o,this.g=f.g,Ya(this,f.s),this.l=f.l;var v=f.i,w=new Er;w.i=v.i,v.g&&(w.g=new Map(v.g),w.h=v.h),tl(this,w),this.m=f.m}else f&&(v=String(f).match(Nc))?(this.h=!1,zs(this,v[1]||"",!0),this.o=Fs(v[2]||""),this.g=Fs(v[3]||"",!0),Ya(this,v[4]),this.l=Fs(v[5]||"",!0),tl(this,v[6]||"",!0),this.m=Fs(v[7]||"")):(this.h=!1,this.i=new Er(null,this.h))}Kr.prototype.toString=function(){var f=[],v=this.j;v&&f.push(xi(v,Pc,!0),":");var w=this.g;return(w||v=="file")&&(f.push("//"),(v=this.o)&&f.push(xi(v,Pc,!0),"@"),f.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&f.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&f.push("/"),f.push(xi(w,w.charAt(0)=="/"?Lc:qh,!0))),(w=this.i.toString())&&f.push("?",w),(w=this.m)&&f.push("#",xi(w,rp)),f.join("")};function Ft(f){return new Kr(f)}function zs(f,v,w){f.j=w?Fs(v,!0):v,f.j&&(f.j=f.j.replace(/:$/,""))}function Ya(f,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);f.s=v}else f.s=null}function tl(f,v,w){v instanceof Er?(f.i=v,Uc(f.i,f.h)):(w||(v=xi(v,ip)),f.i=new Er(v,f.h))}function yt(f,v,w){f.i.set(v,w)}function Xa(f){return yt(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Fs(f,v){return f?v?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function xi(f,v,w){return typeof f=="string"?(f=encodeURI(f).replace(v,np),w&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function np(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Pc=/[#\/\?@]/g,qh=/[#\?:]/g,Lc=/[#\?]/g,ip=/[#\?@]/g,rp=/#/g;function Er(f,v){this.h=this.g=null,this.i=f||null,this.j=!!v}function Ri(f){f.g||(f.g=new Map,f.h=0,f.i&&el(f.i,function(v,w){f.add(decodeURIComponent(v.replace(/\+/g," ")),w)}))}n=Er.prototype,n.add=function(f,v){Ri(this),this.i=null,f=Qr(this,f);var w=this.g.get(f);return w||this.g.set(f,w=[]),w.push(v),this.h+=1,this};function nl(f,v){Ri(f),v=Qr(f,v),f.g.has(v)&&(f.i=null,f.h-=f.g.get(v).length,f.g.delete(v))}function Yr(f,v){return Ri(f),v=Qr(f,v),f.g.has(v)}n.forEach=function(f,v){Ri(this),this.g.forEach(function(w,x){w.forEach(function(X){f.call(v,X,x,this)},this)},this)},n.na=function(){Ri(this);const f=Array.from(this.g.values()),v=Array.from(this.g.keys()),w=[];for(let x=0;x<v.length;x++){const X=f[x];for(let ne=0;ne<X.length;ne++)w.push(v[x])}return w},n.V=function(f){Ri(this);let v=[];if(typeof f=="string")Yr(this,f)&&(v=v.concat(this.g.get(Qr(this,f))));else{f=Array.from(this.g.values());for(let w=0;w<f.length;w++)v=v.concat(f[w])}return v},n.set=function(f,v){return Ri(this),this.i=null,f=Qr(this,f),Yr(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[v]),this.h+=1,this},n.get=function(f,v){return f?(f=this.V(f),0<f.length?String(f[0]):v):v};function Xr(f,v,w){nl(f,v),0<w.length&&(f.i=null,f.g.set(Qr(f,v),U(w)),f.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],v=Array.from(this.g.keys());for(var w=0;w<v.length;w++){var x=v[w];const ne=encodeURIComponent(String(x)),ye=this.V(x);for(x=0;x<ye.length;x++){var X=ne;ye[x]!==""&&(X+="="+encodeURIComponent(String(ye[x]))),f.push(X)}}return this.i=f.join("&")};function Qr(f,v){return v=String(v),f.j&&(v=v.toLowerCase()),v}function Uc(f,v){v&&!f.j&&(Ri(f),f.i=null,f.g.forEach(function(w,x){var X=x.toLowerCase();x!=X&&(nl(this,x),Xr(this,X,w))},f)),f.j=v}function Gh(f,v){const w=new Me;if(h.Image){const x=new Image;x.onload=T(Ii,w,"TestLoadImage: loaded",!0,v,x),x.onerror=T(Ii,w,"TestLoadImage: error",!1,v,x),x.onabort=T(Ii,w,"TestLoadImage: abort",!1,v,x),x.ontimeout=T(Ii,w,"TestLoadImage: timeout",!1,v,x),h.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=f}else v(!1)}function Qa(f,v){const w=new Me,x=new AbortController,X=setTimeout(()=>{x.abort(),Ii(w,"TestPingServer: timeout",!1,v)},1e4);fetch(f,{signal:x.signal}).then(ne=>{clearTimeout(X),ne.ok?Ii(w,"TestPingServer: ok",!0,v):Ii(w,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(X),Ii(w,"TestPingServer: error",!1,v)})}function Ii(f,v,w,x,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),x(w)}catch{}}function Wa(){this.g=new yn}function Tr(f,v,w){const x=w||"";try{Ka(f,function(X,ne){let ye=X;m(X)&&(ye=Vs(X)),v.push(x+ne+"="+encodeURIComponent(ye))})}catch(X){throw v.push(x+"type="+encodeURIComponent("_badmap")),X}}function Bs(f){this.l=f.Ub||null,this.j=f.eb||!1}A(Bs,qr),Bs.prototype.g=function(){return new Wr(this.l,this.j)},Bs.prototype.i=function(f){return function(){return f}}({});function Wr(f,v){At.call(this),this.D=f,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(Wr,At),n=Wr.prototype,n.open=function(f,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=v,this.readyState=1,Sr(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(v.body=f),(this.D||h).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ar(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Sr(this)),this.g&&(this.readyState=3,Sr(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Vc(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function Vc(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var v=f.value?f.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!f.done}))&&(this.response=this.responseText+=v)}f.done?Ar(this):Sr(this),this.readyState==3&&Vc(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,Ar(this))},n.Qa=function(f){this.g&&(this.response=f,Ar(this))},n.ga=function(){this.g&&Ar(this)};function Ar(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Sr(f)}n.setRequestHeader=function(f,v){this.u.append(f,v)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],v=this.h.entries();for(var w=v.next();!w.done;)w=w.value,f.push(w[0]+": "+w[1]),w=v.next();return f.join(`\r
`)};function Sr(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Wr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function $c(f){let v="";return te(f,function(w,x){v+=x,v+=":",v+=w,v+=`\r
`}),v}function _n(f,v,w){e:{for(x in w){var x=!1;break e}x=!0}x||(w=$c(w),typeof f=="string"?w!=null&&encodeURIComponent(String(w)):yt(f,v,w))}function Et(f){At.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(Et,At);var il=/^https?$/i,Za=["POST","PUT"];n=Et.prototype,n.Ha=function(f){this.J=f},n.ea=function(f,v,w,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);v=v?v.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pt.g(),this.v=this.o?Jo(this.o):Jo(Pt),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(v,String(f),!0),this.B=!1}catch(ne){Kh(this,ne);return}if(f=w||"",w=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var X in x)w.set(X,x[X]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const ne of x.keys())w.set(ne,x.get(ne));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(w.keys()).find(ne=>ne.toLowerCase()=="content-type"),X=h.FormData&&f instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Za,v,void 0))||x||X||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,ye]of w)this.g.setRequestHeader(ne,ye);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ja(this),this.u=!0,this.g.send(f),this.u=!1}catch(ne){Kh(this,ne)}};function Kh(f,v){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=v,f.m=5,rl(f),Cr(f)}function rl(f){f.A||(f.A=!0,Gt(f,"complete"),Gt(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Gt(this,"complete"),Gt(this,"abort"),Cr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Cr(this,!0)),Et.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?sl(this):this.bb())},n.bb=function(){sl(this)};function sl(f){if(f.h&&typeof c<"u"&&(!f.v[1]||Oi(f)!=4||f.Z()!=2)){if(f.u&&Oi(f)==4)Wo(f.Ea,0,f);else if(Gt(f,"readystatechange"),Oi(f)==4){f.h=!1;try{const ye=f.Z();e:switch(ye){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var w;if(!(w=v)){var x;if(x=ye===0){var X=String(f.D).match(Nc)[1]||null;!X&&h.self&&h.self.location&&(X=h.self.location.protocol.slice(0,-1)),x=!il.test(X?X.toLowerCase():"")}w=x}if(w)Gt(f,"complete"),Gt(f,"success");else{f.m=6;try{var ne=2<Oi(f)?f.g.statusText:""}catch{ne=""}f.l=ne+" ["+f.Z()+"]",rl(f)}}finally{Cr(f)}}}}function Cr(f,v){if(f.g){Ja(f);const w=f.g,x=f.v[0]?()=>{}:null;f.g=null,f.v=null,v||Gt(f,"ready");try{w.onreadystatechange=x}catch{}}}function Ja(f){f.I&&(h.clearTimeout(f.I),f.I=null)}n.isActive=function(){return!!this.g};function Oi(f){return f.g?f.g.readyState:0}n.Z=function(){try{return 2<Oi(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var v=this.g.responseText;return f&&v.indexOf(f)==0&&(v=v.substring(f.length)),qn(v)}};function Yh(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function sp(f){const v={};f=(f.g&&2<=Oi(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<f.length;x++){if(G(f[x]))continue;var w=L(f[x]);const X=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const ne=v[X]||[];v[X]=ne,ne.push(w)}k(v,function(x){return x.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function eo(f,v,w){return w&&w.internalChannelParams&&w.internalChannelParams[f]||v}function al(f){this.Aa=0,this.i=[],this.j=new Me,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=eo("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=eo("baseRetryDelayMs",5e3,f),this.cb=eo("retryDelaySeedMs",1e4,f),this.Wa=eo("forwardChannelMaxRetries",2,f),this.wa=eo("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Ot(f&&f.concurrentRequestLimit),this.Da=new Wa,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=al.prototype,n.la=8,n.G=1,n.connect=function(f,v,w,x){se(0),this.W=f,this.H=v||{},w&&x!==void 0&&(this.H.OSID=w,this.H.OAID=x),this.F=this.X,this.I=td(this,null,this.W),ll(this)};function jc(f){if(Xh(f),f.G==3){var v=f.U++,w=Ft(f.I);if(yt(w,"SID",f.K),yt(w,"RID",v),yt(w,"TYPE","terminate"),to(f,w),v=new pt(f,f.j,v),v.L=2,v.v=Xa(Ft(w)),w=!1,h.navigator&&h.navigator.sendBeacon)try{w=h.navigator.sendBeacon(v.v.toString(),"")}catch{}!w&&h.Image&&(new Image().src=v.v,w=!0),w||(v.g=nd(v.j,null),v.g.ea(v.v)),v.F=Date.now(),bt(v)}ed(f)}function ol(f){f.g&&(no(f),f.g.cancel(),f.g=null)}function Xh(f){ol(f),f.u&&(h.clearTimeout(f.u),f.u=null),cl(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&h.clearTimeout(f.s),f.s=null)}function ll(f){if(!Si(f.h)&&!f.s){f.s=!0;var v=f.Ga;we||O(),me||(we(),me=!0),de.add(v,f),f.B=0}}function ap(f,v){return Ga(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=v.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Ne(b(f.Ga,f,v),Bc(f,f.B)),f.B++,!0)}n.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const X=new pt(this,this.j,f);let ne=this.o;if(this.S&&(ne?(ne=I(ne),D(ne,this.S)):ne=this.S),this.m!==null||this.O||(X.H=ne,ne=null),this.P)e:{for(var v=0,w=0;w<this.i.length;w++){t:{var x=this.i[w];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(v+=x,4096<v){v=w;break e}if(v===4096||w===this.i.length-1){v=w+1;break e}}v=1e3}else v=1e3;v=Qh(this,X,v),w=Ft(this.I),yt(w,"RID",f),yt(w,"CVER",22),this.D&&yt(w,"X-HTTP-Session-Id",this.D),to(this,w),ne&&(this.O?v="headers="+encodeURIComponent(String($c(ne)))+"&"+v:this.m&&_n(w,this.m,ne)),js(this.h,X),this.Ua&&yt(w,"TYPE","init"),this.P?(yt(w,"$req",v),yt(w,"SID","null"),X.T=!0,Kt(X,w,null)):Kt(X,w,v),this.G=2}}else this.G==3&&(f?zc(this,f):this.i.length==0||Si(this.h)||zc(this))};function zc(f,v){var w;v?w=v.l:w=f.U++;const x=Ft(f.I);yt(x,"SID",f.K),yt(x,"RID",w),yt(x,"AID",f.T),to(f,x),f.m&&f.o&&_n(x,f.m,f.o),w=new pt(f,f.j,w,f.B+1),f.m===null&&(w.H=f.o),v&&(f.i=v.D.concat(f.i)),v=Qh(f,w,1e3),w.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),js(f.h,w),Kt(w,x,v)}function to(f,v){f.H&&te(f.H,function(w,x){yt(v,x,w)}),f.l&&Ka({},function(w,x){yt(v,x,w)})}function Qh(f,v,w){w=Math.min(f.i.length,w);var x=f.l?b(f.l.Na,f.l,f):null;e:{var X=f.i;let ne=-1;for(;;){const ye=["count="+w];ne==-1?0<w?(ne=X[0].g,ye.push("ofs="+ne)):ne=0:ye.push("ofs="+ne);let ut=!0;for(let on=0;on<w;on++){let ht=X[on].g;const bn=X[on].map;if(ht-=ne,0>ht)ne=Math.max(0,X[on].g-100),ut=!1;else try{Tr(bn,ye,"req"+ht+"_")}catch{x&&x(bn)}}if(ut){x=ye.join("&");break e}}}return f=f.i.splice(0,w),v.D=f,x}function Wh(f){if(!f.g&&!f.u){f.Y=1;var v=f.Fa;we||O(),me||(we(),me=!0),de.add(v,f),f.v=0}}function Fc(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Ne(b(f.Fa,f),Bc(f,f.v)),f.v++,!0)}n.Fa=function(){if(this.u=null,Zh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Ne(b(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,se(10),ol(this),Zh(this))};function no(f){f.A!=null&&(h.clearTimeout(f.A),f.A=null)}function Zh(f){f.g=new pt(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var v=Ft(f.qa);yt(v,"RID","rpc"),yt(v,"SID",f.K),yt(v,"AID",f.T),yt(v,"CI",f.F?"0":"1"),!f.F&&f.ja&&yt(v,"TO",f.ja),yt(v,"TYPE","xmlhttp"),to(f,v),f.m&&f.o&&_n(v,f.m,f.o),f.L&&(f.g.I=f.L);var w=f.g;f=f.ia,w.L=1,w.v=Xa(Ft(v)),w.m=null,w.P=!0,Jt(w,f)}n.Za=function(){this.C!=null&&(this.C=null,ol(this),Fc(this),se(19))};function cl(f){f.C!=null&&(h.clearTimeout(f.C),f.C=null)}function Jh(f,v){var w=null;if(f.g==v){cl(f),no(f),f.g=null;var x=2}else if(wr(f.h,v))w=v.D,Ci(f.h,v),x=1;else return;if(f.G!=0){if(v.o)if(x==1){w=v.m?v.m.length:0,v=Date.now()-v.F;var X=f.B;x=$s(),Gt(x,new _e(x,w)),ll(f)}else Wh(f);else if(X=v.s,X==3||X==0&&0<v.X||!(x==1&&ap(f,v)||x==2&&Fc(f)))switch(w&&0<w.length&&(v=f.h,v.i=v.i.concat(w)),X){case 1:Zr(f,5);break;case 4:Zr(f,10);break;case 3:Zr(f,6);break;default:Zr(f,2)}}}function Bc(f,v){let w=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(w*=2),w*v}function Zr(f,v){if(f.j.info("Error code "+v),v==2){var w=b(f.fb,f),x=f.Xa;const X=!x;x=new Kr(x||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||zs(x,"https"),Xa(x),X?Gh(x.toString(),w):Qa(x.toString(),w)}else se(2);f.G=0,f.l&&f.l.sa(v),ed(f),Xh(f)}n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),se(2)):(this.j.info("Failed to ping google.com"),se(1))};function ed(f){if(f.G=0,f.ka=[],f.l){const v=Kn(f.h);(v.length!=0||f.i.length!=0)&&(P(f.ka,v),P(f.ka,f.i),f.h.i.length=0,U(f.i),f.i.length=0),f.l.ra()}}function td(f,v,w){var x=w instanceof Kr?Ft(w):new Kr(w);if(x.g!="")v&&(x.g=v+"."+x.g),Ya(x,x.s);else{var X=h.location;x=X.protocol,v=v?v+"."+X.hostname:X.hostname,X=+X.port;var ne=new Kr(null);x&&zs(ne,x),v&&(ne.g=v),X&&Ya(ne,X),w&&(ne.l=w),x=ne}return w=f.D,v=f.ya,w&&v&&yt(x,w,v),yt(x,"VER",f.la),to(f,x),x}function nd(f,v,w){if(v&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=f.Ca&&!f.pa?new Et(new Bs({eb:w})):new Et(f.pa),v.Ha(f.J),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function id(){}n=id.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ul(){}ul.prototype.g=function(f,v){return new Yn(f,v)};function Yn(f,v){At.call(this),this.g=new al(v),this.l=f,this.h=v&&v.messageUrlParams||null,f=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(f?f["X-WebChannel-Content-Type"]=v.messageContentType:f={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(f?f["X-WebChannel-Client-Profile"]=v.va:f={"X-WebChannel-Client-Profile":v.va}),this.g.S=f,(f=v&&v.Sb)&&!G(f)&&(this.g.m=f),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!G(v)&&(this.g.D=v,f=this.h,f!==null&&v in f&&(f=this.h,v in f&&delete f[v])),this.j=new xr(this)}A(Yn,At),Yn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Yn.prototype.close=function(){jc(this.g)},Yn.prototype.o=function(f){var v=this.g;if(typeof f=="string"){var w={};w.__data__=f,f=w}else this.u&&(w={},w.__data__=Vs(f),f=w);v.i.push(new Gr(v.Ya++,f)),v.G==3&&ll(v)},Yn.prototype.N=function(){this.g.l=null,delete this.j,jc(this.g),delete this.g,Yn.aa.N.call(this)};function rd(f){Wi.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var v=f.__sm__;if(v){e:{for(const w in v){f=w;break e}f=void 0}(this.i=f)&&(f=this.i,v=v!==null&&f in v?v[f]:void 0),this.data=v}else this.data=f}A(rd,Wi);function sd(){Vn.call(this),this.status=1}A(sd,Vn);function xr(f){this.g=f}A(xr,id),xr.prototype.ua=function(){Gt(this.g,"a")},xr.prototype.ta=function(f){Gt(this.g,new rd(f))},xr.prototype.sa=function(f){Gt(this.g,new sd)},xr.prototype.ra=function(){Gt(this.g,"b")},ul.prototype.createWebChannel=ul.prototype.g,Yn.prototype.send=Yn.prototype.o,Yn.prototype.open=Yn.prototype.m,Yn.prototype.close=Yn.prototype.close,fA=function(){return new ul},dA=function(){return $s()},hA=xn,j0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ve.NO_ERROR=0,Ve.TIMEOUT=8,Ve.HTTP_ERROR=6,xf=Ve,gt.COMPLETE="complete",uA=gt,qa.EventType=Ti,Ti.OPEN="a",Ti.CLOSE="b",Ti.ERROR="c",Ti.MESSAGE="d",At.prototype.listen=At.prototype.K,Hu=qa,Et.prototype.listenOnce=Et.prototype.L,Et.prototype.getLastError=Et.prototype.Ka,Et.prototype.getLastErrorCode=Et.prototype.Ba,Et.prototype.getStatus=Et.prototype.Z,Et.prototype.getResponseJson=Et.prototype.Oa,Et.prototype.getResponseText=Et.prototype.oa,Et.prototype.send=Et.prototype.ea,Et.prototype.setWithCredentials=Et.prototype.Ha,cA=Et}).apply(typeof of<"u"?of:typeof self<"u"?self:typeof window<"u"?window:{});const l2="@firebase/firestore",c2="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Fn.UNAUTHENTICATED=new Fn(null),Fn.GOOGLE_CREDENTIALS=new Fn("google-credentials-uid"),Fn.FIRST_PARTY=new Fn("first-party-uid"),Fn.MOCK_USER=new Fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bc="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo=new Cy("@firebase/firestore");function zl(){return zo.logLevel}function Ee(n,...e){if(zo.logLevel<=rt.DEBUG){const t=e.map(jy);zo.debug(`Firestore (${bc}): ${n}`,...t)}}function Cs(n,...e){if(zo.logLevel<=rt.ERROR){const t=e.map(jy);zo.error(`Firestore (${bc}): ${n}`,...t)}}function tc(n,...e){if(zo.logLevel<=rt.WARN){const t=e.map(jy);zo.warn(`Firestore (${bc}): ${n}`,...t)}}function jy(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(n="Unexpected state"){const e=`FIRESTORE (${bc}) INTERNAL ASSERTION FAILED: `+n;throw Cs(e),new Error(e)}function Tt(n,e){n||ze()}function Ge(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends Ds{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Fn.UNAUTHENTICATED))}shutdown(){}}class _D{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class bD{constructor(e){this.t=e,this.currentUser=Fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Tt(this.o===void 0);let i=this.i;const s=d=>this.i!==i?(i=this.i,t(d)):Promise.resolve();let o=new Ts;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ts,e.enqueueRetryable(()=>s(this.currentUser))};const c=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await s(this.currentUser)})},h=d=>{Ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(d=>h(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(Ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ts)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(Ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Tt(typeof i.accessToken=="string"),new mA(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Tt(e===null||typeof e=="string"),new Fn(e)}}class wD{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=Fn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class ED{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new wD(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Fn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class u2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TD{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,_i(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){Tt(this.o===void 0);const i=o=>{o.error!=null&&Ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.R;return this.R=o.token,Ee("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const s=o=>{Ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?s(o):Ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new u2(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Tt(typeof t.token=="string"),this.R=t.token,new u2(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AD(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=AD(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<t&&(i+=e.charAt(s[o]%62))}return i}}function lt(n,e){return n<e?-1:n>e?1:0}function nc(n,e,t){return n.length===e.length&&n.every((i,s)=>t(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2=-62135596800,d2=1e6;class hn{static now(){return hn.fromMillis(Date.now())}static fromDate(e){return hn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*d2);return new hn(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Te(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Te(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<h2)throw new Te(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/d2}_compareTo(e){return this.seconds===e.seconds?lt(this.nanoseconds,e.nanoseconds):lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-h2;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{static fromTimestamp(e){return new Fe(e)}static min(){return new Fe(new hn(0,0))}static max(){return new Fe(new hn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2="__name__";class Pr{constructor(e,t,i){t===void 0?t=0:t>e.length&&ze(),i===void 0?i=e.length-t:i>e.length-t&&ze(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Pr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Pr?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let s=0;s<i;s++){const o=Pr.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return Math.sign(e.length-t.length)}static compareSegments(e,t){const i=Pr.isNumericId(e),s=Pr.isNumericId(t);return i&&!s?-1:!i&&s?1:i&&s?Pr.extractNumericId(e).compare(Pr.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Aa.fromString(e.substring(4,e.length-2))}}class Nt extends Pr{construct(e,t,i){return new Nt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Te(le.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(s=>s.length>0))}return new Nt(t)}static emptyPath(){return new Nt([])}}const SD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pn extends Pr{construct(e,t,i){return new Pn(e,t,i)}static isValidIdentifier(e){return SD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===f2}static keyField(){return new Pn([f2])}static fromServerFormat(e){const t=[];let i="",s=0;const o=()=>{if(i.length===0)throw new Te(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new Te(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new Te(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,s+=2}else h==="`"?(c=!c,s++):h!=="."||c?(i+=h,s++):(o(),s++)}if(o(),c)throw new Te(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pn(t)}static emptyPath(){return new Pn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e){this.path=e}static fromPath(e){return new Le(Nt.fromString(e))}static fromName(e){return new Le(Nt.fromString(e).popFirst(5))}static empty(){return new Le(Nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Nt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Le(new Nt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dh=-1;function CD(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=Fe.fromTimestamp(i===1e9?new hn(t+1,0):new hn(t,i));return new Ia(s,Le.empty(),e)}function xD(n){return new Ia(n.readTime,n.key,dh)}class Ia{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ia(Fe.min(),Le.empty(),dh)}static max(){return new Ia(Fe.max(),Le.empty(),dh)}}function RD(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Le.comparator(n.documentKey,e.documentKey),t!==0?t:lt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class OD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wc(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==ID)throw n;Ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ze(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ce((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(i,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ce?t:ce.resolve(t)}catch(t){return ce.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.reject(t)}static resolve(e){return new ce((t,i)=>{t(e)})}static reject(e){return new ce((t,i)=>{i(e)})}static waitFor(e){return new ce((t,i)=>{let s=0,o=0,c=!1;e.forEach(h=>{++s,h.next(()=>{++o,c&&o===s&&t()},d=>i(d))}),c=!0,o===s&&t()})}static or(e){let t=ce.resolve(!1);for(const i of e)t=t.next(s=>s?ce.resolve(s):i());return t}static forEach(e,t){const i=[];return e.forEach((s,o)=>{i.push(t.call(this,s,o))}),this.waitFor(i)}static mapArray(e,t){return new ce((i,s)=>{const o=e.length,c=new Array(o);let h=0;for(let d=0;d<o;d++){const m=d;t(e[m]).next(y=>{c[m]=y,++h,h===o&&i(c)},y=>s(y))}})}static doWhile(e,t){return new ce((i,s)=>{const o=()=>{e()===!0?t().next(()=>{o()},s):i()};o()})}}function DD(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ec(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.oe(i),this._e=i=>t.writeSequenceNumber(i))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}ym.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy=-1;function vm(n){return n==null}function qf(n){return n===0&&1/n==-1/0}function kD(n){return typeof n=="number"&&Number.isInteger(n)&&!qf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA="";function MD(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=m2(e)),e=ND(n.get(t),e);return m2(e)}function ND(n,e){let t=e;const i=n.length;for(let s=0;s<i;s++){const o=n.charAt(s);switch(o){case"\0":t+="";break;case gA:t+="";break;default:t+=o}}return t}function m2(n){return n+gA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p2(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function $a(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function yA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e,t){this.comparator=e,this.root=t||kn.EMPTY}insert(e,t){return new zt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,kn.BLACK,null,null))}remove(e){return new zt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return t+i.left.size;s<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lf(this.root,e,this.comparator,!1)}getReverseIterator(){return new lf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lf(this.root,e,this.comparator,!0)}}class lf{constructor(e,t,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kn{constructor(e,t,i,s,o){this.key=e,this.value=t,this.color=i??kn.RED,this.left=s??kn.EMPTY,this.right=o??kn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,s,o){return new kn(e??this.key,t??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this;const o=i(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,i),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return kn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return kn.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ze();const e=this.left.check();if(e!==this.right.check())throw ze();return e+(this.isRed()?0:1)}}kn.EMPTY=null,kn.RED=!0,kn.BLACK=!1;kn.EMPTY=new class{constructor(){this.size=0}get key(){throw ze()}get value(){throw ze()}get color(){throw ze()}get left(){throw ze()}get right(){throw ze()}copy(e,t,i,s,o){return this}insert(e,t,i){return new kn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.comparator=e,this.data=new zt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new g2(this.data.getIterator())}getIteratorFrom(e){return new g2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof dn)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new dn(this.comparator);return t.data=e,t}}class g2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e){this.fields=e,e.sort(Pn.comparator)}static empty(){return new bi([])}unionWith(e){let t=new dn(Pn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new bi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return nc(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new vA("Invalid base64 string: "+o):o}}(e);return new Ln(t)}static fromUint8Array(e){const t=function(s){let o="";for(let c=0;c<s.length;++c)o+=String.fromCharCode(s[c]);return o}(e);return new Ln(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ln.EMPTY_BYTE_STRING=new Ln("");const PD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Oa(n){if(Tt(!!n),typeof n=="string"){let e=0;const t=PD.exec(n);if(Tt(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Wt(n.seconds),nanos:Wt(n.nanos)}}function Wt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Da(n){return typeof n=="string"?Ln.fromBase64String(n):Ln.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A="server_timestamp",bA="__type__",wA="__previous_value__",EA="__local_write_time__";function Fy(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[bA])===null||t===void 0?void 0:t.stringValue)===_A}function _m(n){const e=n.mapValue.fields[wA];return Fy(e)?_m(e):e}function fh(n){const e=Oa(n.mapValue.fields[EA].timestampValue);return new hn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e,t,i,s,o,c,h,d,m){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=m}}const Gf="(default)";class mh{constructor(e,t){this.projectId=e,this.database=t||Gf}static empty(){return new mh("","")}get isDefaultDatabase(){return this.database===Gf}isEqual(e){return e instanceof mh&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA="__type__",UD="__max__",cf={mapValue:{}},AA="__vector__",Kf="value";function ka(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Fy(n)?4:$D(n)?9007199254740991:VD(n)?10:11:ze()}function Fr(n,e){if(n===e)return!0;const t=ka(n);if(t!==ka(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return fh(n).isEqual(fh(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const c=Oa(s.timestampValue),h=Oa(o.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,o){return Da(s.bytesValue).isEqual(Da(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,o){return Wt(s.geoPointValue.latitude)===Wt(o.geoPointValue.latitude)&&Wt(s.geoPointValue.longitude)===Wt(o.geoPointValue.longitude)}(n,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return Wt(s.integerValue)===Wt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const c=Wt(s.doubleValue),h=Wt(o.doubleValue);return c===h?qf(c)===qf(h):isNaN(c)&&isNaN(h)}return!1}(n,e);case 9:return nc(n.arrayValue.values||[],e.arrayValue.values||[],Fr);case 10:case 11:return function(s,o){const c=s.mapValue.fields||{},h=o.mapValue.fields||{};if(p2(c)!==p2(h))return!1;for(const d in c)if(c.hasOwnProperty(d)&&(h[d]===void 0||!Fr(c[d],h[d])))return!1;return!0}(n,e);default:return ze()}}function ph(n,e){return(n.values||[]).find(t=>Fr(t,e))!==void 0}function ic(n,e){if(n===e)return 0;const t=ka(n),i=ka(e);if(t!==i)return lt(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return lt(n.booleanValue,e.booleanValue);case 2:return function(o,c){const h=Wt(o.integerValue||o.doubleValue),d=Wt(c.integerValue||c.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1}(n,e);case 3:return y2(n.timestampValue,e.timestampValue);case 4:return y2(fh(n),fh(e));case 5:return lt(n.stringValue,e.stringValue);case 6:return function(o,c){const h=Da(o),d=Da(c);return h.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(o,c){const h=o.split("/"),d=c.split("/");for(let m=0;m<h.length&&m<d.length;m++){const y=lt(h[m],d[m]);if(y!==0)return y}return lt(h.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,c){const h=lt(Wt(o.latitude),Wt(c.latitude));return h!==0?h:lt(Wt(o.longitude),Wt(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return v2(n.arrayValue,e.arrayValue);case 10:return function(o,c){var h,d,m,y;const _=o.fields||{},b=c.fields||{},T=(h=_[Kf])===null||h===void 0?void 0:h.arrayValue,A=(d=b[Kf])===null||d===void 0?void 0:d.arrayValue,U=lt(((m=T==null?void 0:T.values)===null||m===void 0?void 0:m.length)||0,((y=A==null?void 0:A.values)===null||y===void 0?void 0:y.length)||0);return U!==0?U:v2(T,A)}(n.mapValue,e.mapValue);case 11:return function(o,c){if(o===cf.mapValue&&c===cf.mapValue)return 0;if(o===cf.mapValue)return 1;if(c===cf.mapValue)return-1;const h=o.fields||{},d=Object.keys(h),m=c.fields||{},y=Object.keys(m);d.sort(),y.sort();for(let _=0;_<d.length&&_<y.length;++_){const b=lt(d[_],y[_]);if(b!==0)return b;const T=ic(h[d[_]],m[y[_]]);if(T!==0)return T}return lt(d.length,y.length)}(n.mapValue,e.mapValue);default:throw ze()}}function y2(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return lt(n,e);const t=Oa(n),i=Oa(e),s=lt(t.seconds,i.seconds);return s!==0?s:lt(t.nanos,i.nanos)}function v2(n,e){const t=n.values||[],i=e.values||[];for(let s=0;s<t.length&&s<i.length;++s){const o=ic(t[s],i[s]);if(o)return o}return lt(t.length,i.length)}function rc(n){return z0(n)}function z0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=Oa(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Da(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Le.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",s=!0;for(const o of t.values||[])s?s=!1:i+=",",i+=z0(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const c of i)o?o=!1:s+=",",s+=`${c}:${z0(t.fields[c])}`;return s+"}"}(n.mapValue):ze()}function Rf(n){switch(ka(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=_m(n);return e?16+Rf(e):16;case 5:return 2*n.stringValue.length;case 6:return Da(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,o)=>s+Rf(o),0)}(n.arrayValue);case 10:case 11:return function(i){let s=0;return $a(i.fields,(o,c)=>{s+=o.length+Rf(c)}),s}(n.mapValue);default:throw ze()}}function _2(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function F0(n){return!!n&&"integerValue"in n}function By(n){return!!n&&"arrayValue"in n}function b2(n){return!!n&&"nullValue"in n}function w2(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function If(n){return!!n&&"mapValue"in n}function VD(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[TA])===null||t===void 0?void 0:t.stringValue)===AA}function Zu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return $a(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Zu(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Zu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function $D(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===UD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e){this.value=e}static empty(){return new ri({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!If(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zu(t)}setAll(e){let t=Pn.emptyPath(),i={},s=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){const d=this.getFieldsMap(t);this.applyChanges(d,i,s),i={},s=[],t=h.popLast()}c?i[h.lastSegment()]=Zu(c):s.push(h.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,i,s)}delete(e){const t=this.field(e.popLast());If(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Fr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=t.mapValue.fields[e.get(i)];If(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,i){$a(t,(s,o)=>e[s]=o);for(const s of i)delete e[s]}clone(){return new ri(Zu(this.value))}}function SA(n){const e=[];return $a(n.fields,(t,i)=>{const s=new Pn([t]);if(If(i)){const o=SA(i.mapValue).fields;if(o.length===0)e.push(s);else for(const c of o)e.push(s.child(c))}else e.push(s)}),new bi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e,t,i,s,o,c,h){this.key=e,this.documentType=t,this.version=i,this.readTime=s,this.createTime=o,this.data=c,this.documentState=h}static newInvalidDocument(e){return new Bn(e,0,Fe.min(),Fe.min(),Fe.min(),ri.empty(),0)}static newFoundDocument(e,t,i,s){return new Bn(e,1,t,Fe.min(),i,s,0)}static newNoDocument(e,t){return new Bn(e,2,t,Fe.min(),Fe.min(),ri.empty(),0)}static newUnknownDocument(e,t){return new Bn(e,3,t,Fe.min(),Fe.min(),ri.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ri.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ri.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Bn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,t){this.position=e,this.inclusive=t}}function E2(n,e,t){let i=0;for(let s=0;s<n.position.length;s++){const o=e[s],c=n.position[s];if(o.field.isKeyField()?i=Le.comparator(Le.fromName(c.referenceValue),t.key):i=ic(c,t.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function T2(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Fr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e,t="asc"){this.field=e,this.dir=t}}function jD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{}class an extends CA{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new FD(e,t,i):t==="array-contains"?new qD(e,i):t==="in"?new GD(e,i):t==="not-in"?new KD(e,i):t==="array-contains-any"?new YD(e,i):new an(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new BD(e,i):new HD(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ic(t,this.value)):t!==null&&ka(this.value)===ka(t)&&this.matchesComparison(ic(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ze()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ur extends CA{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new ur(e,t)}matches(e){return xA(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function xA(n){return n.op==="and"}function RA(n){return zD(n)&&xA(n)}function zD(n){for(const e of n.filters)if(e instanceof ur)return!1;return!0}function B0(n){if(n instanceof an)return n.field.canonicalString()+n.op.toString()+rc(n.value);if(RA(n))return n.filters.map(e=>B0(e)).join(",");{const e=n.filters.map(t=>B0(t)).join(",");return`${n.op}(${e})`}}function IA(n,e){return n instanceof an?function(i,s){return s instanceof an&&i.op===s.op&&i.field.isEqual(s.field)&&Fr(i.value,s.value)}(n,e):n instanceof ur?function(i,s){return s instanceof ur&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((o,c,h)=>o&&IA(c,s.filters[h]),!0):!1}(n,e):void ze()}function OA(n){return n instanceof an?function(t){return`${t.field.canonicalString()} ${t.op} ${rc(t.value)}`}(n):n instanceof ur?function(t){return t.op.toString()+" {"+t.getFilters().map(OA).join(" ,")+"}"}(n):"Filter"}class FD extends an{constructor(e,t,i){super(e,t,i),this.key=Le.fromName(i.referenceValue)}matches(e){const t=Le.comparator(e.key,this.key);return this.matchesComparison(t)}}class BD extends an{constructor(e,t){super(e,"in",t),this.keys=DA("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class HD extends an{constructor(e,t){super(e,"not-in",t),this.keys=DA("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function DA(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>Le.fromName(i.referenceValue))}class qD extends an{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return By(t)&&ph(t.arrayValue,this.value)}}class GD extends an{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ph(this.value.arrayValue,t)}}class KD extends an{constructor(e,t){super(e,"not-in",t)}matches(e){if(ph(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!ph(this.value.arrayValue,t)}}class YD extends an{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!By(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>ph(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e,t=null,i=[],s=[],o=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=c,this.endAt=h,this.le=null}}function A2(n,e=null,t=[],i=[],s=null,o=null,c=null){return new XD(n,e,t,i,s,o,c)}function Hy(n){const e=Ge(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>B0(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),vm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>rc(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>rc(i)).join(",")),e.le=t}return e.le}function qy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!jD(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!IA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!T2(n.startAt,e.startAt)&&T2(n.endAt,e.endAt)}function H0(n){return Le.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,t=null,i=[],s=[],o=null,c="F",h=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=c,this.startAt=h,this.endAt=d,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function QD(n,e,t,i,s,o,c,h){return new Tc(n,e,t,i,s,o,c,h)}function Gy(n){return new Tc(n)}function S2(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function kA(n){return n.collectionGroup!==null}function Ju(n){const e=Ge(n);if(e.he===null){e.he=[];const t=new Set;for(const o of e.explicitOrderBy)e.he.push(o),t.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new dn(Pn.comparator);return c.filters.forEach(d=>{d.getFlattenedFilters().forEach(m=>{m.isInequality()&&(h=h.add(m.field))})}),h})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.he.push(new gh(o,i))}),t.has(Pn.keyField().canonicalString())||e.he.push(new gh(Pn.keyField(),i))}return e.he}function $r(n){const e=Ge(n);return e.Pe||(e.Pe=WD(e,Ju(n))),e.Pe}function WD(n,e){if(n.limitType==="F")return A2(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new gh(s.field,o)});const t=n.endAt?new Yf(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Yf(n.startAt.position,n.startAt.inclusive):null;return A2(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function q0(n,e){const t=n.filters.concat([e]);return new Tc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function G0(n,e,t){return new Tc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function bm(n,e){return qy($r(n),$r(e))&&n.limitType===e.limitType}function MA(n){return`${Hy($r(n))}|lt:${n.limitType}`}function Fl(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(s=>OA(s)).join(", ")}]`),vm(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(s=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(s)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(s=>rc(s)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(s=>rc(s)).join(",")),`Target(${i})`}($r(n))}; limitType=${n.limitType})`}function wm(n,e){return e.isFoundDocument()&&function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):Le.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(n,e)&&function(i,s){for(const o of Ju(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(n,e)&&function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0}(n,e)&&function(i,s){return!(i.startAt&&!function(c,h,d){const m=E2(c,h,d);return c.inclusive?m<=0:m<0}(i.startAt,Ju(i),s)||i.endAt&&!function(c,h,d){const m=E2(c,h,d);return c.inclusive?m>=0:m>0}(i.endAt,Ju(i),s))}(n,e)}function ZD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function NA(n){return(e,t)=>{let i=!1;for(const s of Ju(n)){const o=JD(s,e,t);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function JD(n,e,t){const i=n.field.isKeyField()?Le.comparator(e.key,t.key):function(o,c,h){const d=c.data.field(o),m=h.data.field(o);return d!==null&&m!==null?ic(d,m):ze()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return ze()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[t]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){$a(this.inner,(t,i)=>{for(const[s,o]of i)e(s,o)})}isEmpty(){return yA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek=new zt(Le.comparator);function xs(){return ek}const PA=new zt(Le.comparator);function qu(...n){let e=PA;for(const t of n)e=e.insert(t.key,t);return e}function LA(n){let e=PA;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Do(){return eh()}function UA(){return eh()}function eh(){return new Ko(n=>n.toString(),(n,e)=>n.isEqual(e))}const tk=new zt(Le.comparator),nk=new dn(Le.comparator);function at(...n){let e=nk;for(const t of n)e=e.add(t);return e}const ik=new dn(lt);function rk(){return ik}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ky(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qf(e)?"-0":e}}function VA(n){return{integerValue:""+n}}function sk(n,e){return kD(e)?VA(e):Ky(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(){this._=void 0}}function ak(n,e,t){return n instanceof Xf?function(s,o){const c={fields:{[bA]:{stringValue:_A},[EA]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Fy(o)&&(o=_m(o)),o&&(c.fields[wA]=o),{mapValue:c}}(t,e):n instanceof yh?jA(n,e):n instanceof vh?zA(n,e):function(s,o){const c=$A(s,o),h=C2(c)+C2(s.Ie);return F0(c)&&F0(s.Ie)?VA(h):Ky(s.serializer,h)}(n,e)}function ok(n,e,t){return n instanceof yh?jA(n,e):n instanceof vh?zA(n,e):t}function $A(n,e){return n instanceof Qf?function(i){return F0(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class Xf extends Em{}class yh extends Em{constructor(e){super(),this.elements=e}}function jA(n,e){const t=FA(e);for(const i of n.elements)t.some(s=>Fr(s,i))||t.push(i);return{arrayValue:{values:t}}}class vh extends Em{constructor(e){super(),this.elements=e}}function zA(n,e){let t=FA(e);for(const i of n.elements)t=t.filter(s=>!Fr(s,i));return{arrayValue:{values:t}}}class Qf extends Em{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function C2(n){return Wt(n.integerValue||n.doubleValue)}function FA(n){return By(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function lk(n,e){return n.field.isEqual(e.field)&&function(i,s){return i instanceof yh&&s instanceof yh||i instanceof vh&&s instanceof vh?nc(i.elements,s.elements,Fr):i instanceof Qf&&s instanceof Qf?Fr(i.Ie,s.Ie):i instanceof Xf&&s instanceof Xf}(n.transform,e.transform)}class ck{constructor(e,t){this.version=e,this.transformResults=t}}class or{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new or}static exists(e){return new or(void 0,e)}static updateTime(e){return new or(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Of(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Tm{}function BA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Yy(n.key,or.none()):new kh(n.key,n.data,or.none());{const t=n.data,i=ri.empty();let s=new dn(Pn.comparator);for(let o of e.fields)if(!s.has(o)){let c=t.field(o);c===null&&o.length>1&&(o=o.popLast(),c=t.field(o)),c===null?i.delete(o):i.set(o,c),s=s.add(o)}return new ja(n.key,i,new bi(s.toArray()),or.none())}}function uk(n,e,t){n instanceof kh?function(s,o,c){const h=s.value.clone(),d=R2(s.fieldTransforms,o,c.transformResults);h.setAll(d),o.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,e,t):n instanceof ja?function(s,o,c){if(!Of(s.precondition,o))return void o.convertToUnknownDocument(c.version);const h=R2(s.fieldTransforms,o,c.transformResults),d=o.data;d.setAll(HA(s)),d.setAll(h),o.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(n,e,t):function(s,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function th(n,e,t,i){return n instanceof kh?function(o,c,h,d){if(!Of(o.precondition,c))return h;const m=o.value.clone(),y=I2(o.fieldTransforms,d,c);return m.setAll(y),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null}(n,e,t,i):n instanceof ja?function(o,c,h,d){if(!Of(o.precondition,c))return h;const m=I2(o.fieldTransforms,d,c),y=c.data;return y.setAll(HA(o)),y.setAll(m),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(_=>_.field))}(n,e,t,i):function(o,c,h){return Of(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h}(n,e,t)}function hk(n,e){let t=null;for(const i of n.fieldTransforms){const s=e.data.field(i.field),o=$A(i.transform,s||null);o!=null&&(t===null&&(t=ri.empty()),t.set(i.field,o))}return t||null}function x2(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&nc(i,s,(o,c)=>lk(o,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class kh extends Tm{constructor(e,t,i,s=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ja extends Tm{constructor(e,t,i,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function HA(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function R2(n,e,t){const i=new Map;Tt(n.length===t.length);for(let s=0;s<t.length;s++){const o=n[s],c=o.transform,h=e.data.field(o.field);i.set(o.field,ok(c,h,t[s]))}return i}function I2(n,e,t){const i=new Map;for(const s of n){const o=s.transform,c=t.data.field(s.field);i.set(s.field,ak(o,c,e))}return i}class Yy extends Tm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dk extends Tm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e,t,i,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&uk(o,e,i[s])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=th(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=th(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=UA();return this.mutations.forEach(s=>{const o=e.get(s.key),c=o.overlayedDocument;let h=this.applyToLocalView(c,o.mutatedFields);h=t.has(s.key)?null:h;const d=BA(c,h);d!==null&&i.set(s.key,d),c.isValidDocument()||c.convertToNoDocument(Fe.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),at())}isEqual(e){return this.batchId===e.batchId&&nc(this.mutations,e.mutations,(t,i)=>x2(t,i))&&nc(this.baseMutations,e.baseMutations,(t,i)=>x2(t,i))}}class Xy{constructor(e,t,i,s){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=s}static from(e,t,i){Tt(e.mutations.length===i.length);let s=function(){return tk}();const o=e.mutations;for(let c=0;c<o.length;c++)s=s.insert(o[c].key,i[c].version);return new Xy(e,t,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rn,ft;function gk(n){switch(n){case le.OK:return ze();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0;default:return ze()}}function qA(n){if(n===void 0)return Cs("GRPC error has no .code"),le.UNKNOWN;switch(n){case rn.OK:return le.OK;case rn.CANCELLED:return le.CANCELLED;case rn.UNKNOWN:return le.UNKNOWN;case rn.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case rn.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case rn.INTERNAL:return le.INTERNAL;case rn.UNAVAILABLE:return le.UNAVAILABLE;case rn.UNAUTHENTICATED:return le.UNAUTHENTICATED;case rn.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case rn.NOT_FOUND:return le.NOT_FOUND;case rn.ALREADY_EXISTS:return le.ALREADY_EXISTS;case rn.PERMISSION_DENIED:return le.PERMISSION_DENIED;case rn.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case rn.ABORTED:return le.ABORTED;case rn.OUT_OF_RANGE:return le.OUT_OF_RANGE;case rn.UNIMPLEMENTED:return le.UNIMPLEMENTED;case rn.DATA_LOSS:return le.DATA_LOSS;default:return ze()}}(ft=rn||(rn={}))[ft.OK=0]="OK",ft[ft.CANCELLED=1]="CANCELLED",ft[ft.UNKNOWN=2]="UNKNOWN",ft[ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ft[ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ft[ft.NOT_FOUND=5]="NOT_FOUND",ft[ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",ft[ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",ft[ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",ft[ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ft[ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ft[ft.ABORTED=10]="ABORTED",ft[ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",ft[ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",ft[ft.INTERNAL=13]="INTERNAL",ft[ft.UNAVAILABLE=14]="UNAVAILABLE",ft[ft.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=new Aa([4294967295,4294967295],0);function O2(n){const e=yk().encode(n),t=new lA;return t.update(e),new Uint8Array(t.digest())}function D2(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Aa([t,i],0),new Aa([s,o],0)]}class Qy{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Gu(`Invalid padding: ${t}`);if(i<0)throw new Gu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Gu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Gu(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=Aa.fromNumber(this.Ee)}Ae(e,t,i){let s=e.add(t.multiply(Aa.fromNumber(i)));return s.compare(vk)===1&&(s=new Aa([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=O2(e),[i,s]=D2(t);for(let o=0;o<this.hashCount;o++){const c=this.Ae(i,s,o);if(!this.Re(c))return!1}return!0}static create(e,t,i){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new Qy(o,s,t);return i.forEach(h=>c.insert(h)),c}insert(e){if(this.Ee===0)return;const t=O2(e),[i,s]=D2(t);for(let o=0;o<this.hashCount;o++){const c=this.Ae(i,s,o);this.Ve(c)}}Ve(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Gu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e,t,i,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const s=new Map;return s.set(e,Mh.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Am(Fe.min(),s,new zt(lt),xs(),at())}}class Mh{constructor(e,t,i,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Mh(i,t,at(),at(),at())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,t,i,s){this.me=e,this.removedTargetIds=t,this.key=i,this.fe=s}}class GA{constructor(e,t){this.targetId=e,this.ge=t}}class KA{constructor(e,t,i=Ln.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=s}}class k2{constructor(){this.pe=0,this.ye=M2(),this.we=Ln.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.we=e)}Fe(){let e=at(),t=at(),i=at();return this.ye.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:i=i.add(s);break;default:ze()}}),new Mh(this.we,this.be,e,t,i)}Me(){this.Se=!1,this.ye=M2()}xe(e,t){this.Se=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.Se=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Tt(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class _k{constructor(e){this.ke=e,this.qe=new Map,this.Qe=xs(),this.$e=uf(),this.Ke=uf(),this.Ue=new zt(lt)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const i=this.He(t);switch(e.state){case 0:this.Je(t)&&i.Ce(e.resumeToken);break;case 1:i.Be(),i.De||i.Me(),i.Ce(e.resumeToken);break;case 2:i.Be(),i.De||this.removeTarget(t);break;case 3:this.Je(t)&&(i.Le(),i.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),i.Ce(e.resumeToken));break;default:ze()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((i,s)=>{this.Je(s)&&t(s)})}Ze(e){const t=e.targetId,i=e.ge.count,s=this.Xe(t);if(s){const o=s.target;if(H0(o))if(i===0){const c=new Le(o.path);this.ze(t,c,Bn.newNoDocument(c,Fe.min()))}else Tt(i===1);else{const c=this.et(t);if(c!==i){const h=this.tt(e),d=h?this.nt(h,e,c):1;if(d!==0){this.Ye(t);const m=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,m)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=t;let c,h;try{c=Da(i).toUint8Array()}catch(d){if(d instanceof vA)return tc("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new Qy(c,s,o)}catch(d){return tc(d instanceof Gu?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.Ee===0?null:h}nt(e,t,i){return t.ge.count===i-this.st(e,t.targetId)?0:2}st(e,t){const i=this.ke.getRemoteKeysForTarget(t);let s=0;return i.forEach(o=>{const c=this.ke.it(),h=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.ze(t,o,null),s++)}),s}ot(e){const t=new Map;this.qe.forEach((o,c)=>{const h=this.Xe(c);if(h){if(o.current&&H0(h.target)){const d=new Le(h.target.path);this._t(d).has(c)||this.ut(c,d)||this.ze(c,d,Bn.newNoDocument(d,e))}o.ve&&(t.set(c,o.Fe()),o.Me())}});let i=at();this.Ke.forEach((o,c)=>{let h=!0;c.forEachWhile(d=>{const m=this.Xe(d);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(o))}),this.Qe.forEach((o,c)=>c.setReadTime(e));const s=new Am(e,t,this.Ue,this.Qe,i);return this.Qe=xs(),this.$e=uf(),this.Ke=uf(),this.Ue=new zt(lt),s}Ge(e,t){if(!this.Je(e))return;const i=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,i),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,i){if(!this.Je(e))return;const s=this.He(e);this.ut(e,t)?s.xe(t,1):s.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),i&&(this.Qe=this.Qe.insert(t,i))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new k2,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new dn(lt),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new dn(lt),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||Ee("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new k2),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function uf(){return new zt(Le.comparator)}function M2(){return new zt(Le.comparator)}const bk={asc:"ASCENDING",desc:"DESCENDING"},wk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ek={and:"AND",or:"OR"};class Tk{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function K0(n,e){return n.useProto3Json||vm(e)?e:{value:e}}function Wf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function YA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Ak(n,e){return Wf(n,e.toTimestamp())}function jr(n){return Tt(!!n),Fe.fromTimestamp(function(t){const i=Oa(t);return new hn(i.seconds,i.nanos)}(n))}function Wy(n,e){return Y0(n,e).canonicalString()}function Y0(n,e){const t=function(s){return new Nt(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function XA(n){const e=Nt.fromString(n);return Tt(eS(e)),e}function X0(n,e){return Wy(n.databaseId,e.path)}function m0(n,e){const t=XA(e);if(t.get(1)!==n.databaseId.projectId)throw new Te(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Te(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Le(WA(t))}function QA(n,e){return Wy(n.databaseId,e)}function Sk(n){const e=XA(n);return e.length===4?Nt.emptyPath():WA(e)}function Q0(n){return new Nt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function WA(n){return Tt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function N2(n,e,t){return{name:X0(n,e),fields:t.value.mapValue.fields}}function Ck(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:ze()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(m,y){return m.useProto3Json?(Tt(y===void 0||typeof y=="string"),Ln.fromBase64String(y||"")):(Tt(y===void 0||y instanceof Buffer||y instanceof Uint8Array),Ln.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(m){const y=m.code===void 0?le.UNKNOWN:qA(m.code);return new Te(y,m.message||"")}(c);t=new KA(i,s,o,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=m0(n,i.document.name),o=jr(i.document.updateTime),c=i.document.createTime?jr(i.document.createTime):Fe.min(),h=new ri({mapValue:{fields:i.document.fields}}),d=Bn.newFoundDocument(s,o,c,h),m=i.targetIds||[],y=i.removedTargetIds||[];t=new Df(m,y,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=m0(n,i.document),o=i.readTime?jr(i.readTime):Fe.min(),c=Bn.newNoDocument(s,o),h=i.removedTargetIds||[];t=new Df([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=m0(n,i.document),o=i.removedTargetIds||[];t=new Df([],o,s,null)}else{if(!("filter"in e))return ze();{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,c=new pk(s,o),h=i.targetId;t=new GA(h,c)}}return t}function xk(n,e){let t;if(e instanceof kh)t={update:N2(n,e.key,e.value)};else if(e instanceof Yy)t={delete:X0(n,e.key)};else if(e instanceof ja)t={update:N2(n,e.key,e.data),updateMask:Lk(e.fieldMask)};else{if(!(e instanceof dk))return ze();t={verify:X0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(o,c){const h=c.transform;if(h instanceof Xf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof yh)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof vh)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Qf)return{fieldPath:c.field.canonicalString(),increment:h.Ie};throw ze()}(0,i))),e.precondition.isNone||(t.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:Ak(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ze()}(n,e.precondition)),t}function Rk(n,e){return n&&n.length>0?(Tt(e!==void 0),n.map(t=>function(s,o){let c=s.updateTime?jr(s.updateTime):jr(o);return c.isEqual(Fe.min())&&(c=jr(o)),new ck(c,s.transformResults||[])}(t,e))):[]}function Ik(n,e){return{documents:[QA(n,e.path)]}}function Ok(n,e){const t={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=QA(n,s);const o=function(m){if(m.length!==0)return JA(ur.create(m,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const c=function(m){if(m.length!==0)return m.map(y=>function(b){return{field:Bl(b.field),direction:Mk(b.dir)}}(y))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=K0(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{ht:t,parent:s}}function Dk(n){let e=Sk(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let s=null;if(i>0){Tt(i===1);const y=t.from[0];y.allDescendants?s=y.collectionId:e=e.child(y.collectionId)}let o=[];t.where&&(o=function(_){const b=ZA(_);return b instanceof ur&&RA(b)?b.getFilters():[b]}(t.where));let c=[];t.orderBy&&(c=function(_){return _.map(b=>function(A){return new gh(Hl(A.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(b))}(t.orderBy));let h=null;t.limit&&(h=function(_){let b;return b=typeof _=="object"?_.value:_,vm(b)?null:b}(t.limit));let d=null;t.startAt&&(d=function(_){const b=!!_.before,T=_.values||[];return new Yf(T,b)}(t.startAt));let m=null;return t.endAt&&(m=function(_){const b=!_.before,T=_.values||[];return new Yf(T,b)}(t.endAt)),QD(e,s,c,o,h,"F",d,m)}function kk(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ze()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function ZA(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Hl(t.unaryFilter.field);return an.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Hl(t.unaryFilter.field);return an.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Hl(t.unaryFilter.field);return an.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Hl(t.unaryFilter.field);return an.create(c,"!=",{nullValue:"NULL_VALUE"});default:return ze()}}(n):n.fieldFilter!==void 0?function(t){return an.create(Hl(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ze()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ur.create(t.compositeFilter.filters.map(i=>ZA(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ze()}}(t.compositeFilter.op))}(n):ze()}function Mk(n){return bk[n]}function Nk(n){return wk[n]}function Pk(n){return Ek[n]}function Bl(n){return{fieldPath:n.canonicalString()}}function Hl(n){return Pn.fromServerFormat(n.fieldPath)}function JA(n){return n instanceof an?function(t){if(t.op==="=="){if(w2(t.value))return{unaryFilter:{field:Bl(t.field),op:"IS_NAN"}};if(b2(t.value))return{unaryFilter:{field:Bl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(w2(t.value))return{unaryFilter:{field:Bl(t.field),op:"IS_NOT_NAN"}};if(b2(t.value))return{unaryFilter:{field:Bl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bl(t.field),op:Nk(t.op),value:t.value}}}(n):n instanceof ur?function(t){const i=t.getFilters().map(s=>JA(s));return i.length===1?i[0]:{compositeFilter:{op:Pk(t.op),filters:i}}}(n):ze()}function Lk(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function eS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,t,i,s,o=Fe.min(),c=Fe.min(),h=Ln.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new _a(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new _a(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _a(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _a(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e){this.Tt=e}}function Vk(n){const e=Dk({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?G0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(){this.Tn=new jk}addToCollectionParentIndex(e,t){return this.Tn.add(t),ce.resolve()}getCollectionParents(e,t){return ce.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return ce.resolve()}deleteFieldIndex(e,t){return ce.resolve()}deleteAllFieldIndexes(e){return ce.resolve()}createTargetIndexes(e,t){return ce.resolve()}getDocumentsMatchingTarget(e,t){return ce.resolve(null)}getIndexType(e,t){return ce.resolve(0)}getFieldIndexes(e,t){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,t){return ce.resolve(Ia.min())}getMinOffsetFromCollectionGroup(e,t){return ce.resolve(Ia.min())}updateCollectionGroup(e,t,i){return ce.resolve()}updateIndexEntries(e,t){return ce.resolve()}}class jk{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t]||new dn(Nt.comparator),o=!s.has(i);return this.index[t]=s.add(i),o}has(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t];return s&&s.has(i)}getEntries(e){return(this.index[e]||new dn(Nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},tS=41943040;class ii{static withCacheSize(e){return new ii(e,ii.DEFAULT_COLLECTION_PERCENTILE,ii.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ii.DEFAULT_COLLECTION_PERCENTILE=10,ii.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ii.DEFAULT=new ii(tS,ii.DEFAULT_COLLECTION_PERCENTILE,ii.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ii.DISABLED=new ii(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new sc(0)}static Un(){return new sc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2="LruGarbageCollector",zk=1048576;function U2([n,e],[t,i]){const s=lt(n,t);return s===0?lt(e,i):s}class Fk{constructor(e){this.Hn=e,this.buffer=new dn(U2),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();U2(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Bk{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){Ee(L2,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ec(t)?Ee(L2,"Ignoring IndexedDB error during garbage collection: ",t):await wc(t)}await this.er(3e5)})}}class Hk{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return ce.resolve(ym.ae);const i=new Fk(t);return this.tr.forEachTarget(e,s=>i.Zn(s.sequenceNumber)).next(()=>this.tr.rr(e,s=>i.Zn(s))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.tr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ee("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(P2)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),P2):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let i,s,o,c,h,d,m;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(_=>(_>this.params.maximumSequenceNumbersToCollect?(Ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),s=this.params.maximumSequenceNumbersToCollect):s=_,c=Date.now(),this.nthSequenceNumber(e,s))).next(_=>(i=_,h=Date.now(),this.removeTargets(e,i,t))).next(_=>(o=_,d=Date.now(),this.removeOrphanedDocuments(e,i))).next(_=>(m=Date.now(),zl()<=rt.DEBUG&&Ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${s} in `+(h-c)+`ms
	Removed ${o} targets in `+(d-h)+`ms
	Removed ${_} documents in `+(m-d)+`ms
Total Duration: ${m-y}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:_})))}}function qk(n,e){return new Hk(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(){this.changes=new Ko(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Bn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ce.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e,t,i,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(i!==null&&th(i.mutation,s,bi.empty(),hn.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,at()).next(()=>i))}getLocalViewOfDocuments(e,t,i=at()){const s=Do();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,i).next(o=>{let c=qu();return o.forEach((h,d)=>{c=c.insert(h,d.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const i=Do();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,at()))}populateOverlays(e,t,i){const s=[];return i.forEach(o=>{t.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((c,h)=>{t.set(c,h)})})}computeViews(e,t,i,s){let o=xs();const c=eh(),h=function(){return eh()}();return t.forEach((d,m)=>{const y=i.get(m.key);s.has(m.key)&&(y===void 0||y.mutation instanceof ja)?o=o.insert(m.key,m):y!==void 0?(c.set(m.key,y.mutation.getFieldMask()),th(y.mutation,m,y.mutation.getFieldMask(),hn.now())):c.set(m.key,bi.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((m,y)=>c.set(m,y)),t.forEach((m,y)=>{var _;return h.set(m,new Kk(y,(_=c.get(m))!==null&&_!==void 0?_:null))}),h))}recalculateAndSaveOverlays(e,t){const i=eh();let s=new zt((c,h)=>c-h),o=at();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const h of c)h.keys().forEach(d=>{const m=t.get(d);if(m===null)return;let y=i.get(d)||bi.empty();y=h.applyToLocalView(m,y),i.set(d,y);const _=(s.get(h.batchId)||at()).add(d);s=s.insert(h.batchId,_)})}).next(()=>{const c=[],h=s.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),m=d.key,y=d.value,_=UA();y.forEach(b=>{if(!o.has(b)){const T=BA(t.get(b),i.get(b));T!==null&&_.set(b,T),o=o.add(b)}}),c.push(this.documentOverlayCache.saveOverlays(e,m,_))}return ce.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,s){return function(c){return Le.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):kA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,s):this.getDocumentsMatchingCollectionQuery(e,t,i,s)}getNextDocuments(e,t,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,s).next(o=>{const c=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,s-o.size):ce.resolve(Do());let h=dh,d=o;return c.next(m=>ce.forEach(m,(y,_)=>(h<_.largestBatchId&&(h=_.largestBatchId),o.get(y)?ce.resolve():this.remoteDocumentCache.getEntry(e,y).next(b=>{d=d.insert(y,b)}))).next(()=>this.populateOverlays(e,m,o)).next(()=>this.computeViews(e,d,m,at())).next(y=>({batchId:h,changes:LA(y)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Le(t)).next(i=>{let s=qu();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,i,s){const o=t.collectionGroup;let c=qu();return this.indexManager.getCollectionParents(e,o).next(h=>ce.forEach(h,d=>{const m=function(_,b){return new Tc(b,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)}(t,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,m,i,s).next(y=>{y.forEach((_,b)=>{c=c.insert(_,b)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,o,s))).next(c=>{o.forEach((d,m)=>{const y=m.getKey();c.get(y)===null&&(c=c.insert(y,Bn.newInvalidDocument(y)))});let h=qu();return c.forEach((d,m)=>{const y=o.get(d);y!==void 0&&th(y.mutation,m,bi.empty(),hn.now()),wm(t,m)&&(h=h.insert(d,m))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return ce.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:jr(s.createTime)}}(t)),ce.resolve()}getNamedQuery(e,t){return ce.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(s){return{name:s.name,query:Vk(s.bundledQuery),readTime:jr(s.readTime)}}(t)),ce.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(){this.overlays=new zt(Le.comparator),this.Rr=new Map}getOverlay(e,t){return ce.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Do();return ce.forEach(t,s=>this.getOverlay(e,s).next(o=>{o!==null&&i.set(s,o)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((s,o)=>{this.Et(e,t,o)}),ce.resolve()}removeOverlaysForBatchId(e,t,i){const s=this.Rr.get(i);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(i)),ce.resolve()}getOverlaysForCollection(e,t,i){const s=Do(),o=t.length+1,c=new Le(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const d=h.getNext().value,m=d.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===o&&d.largestBatchId>i&&s.set(d.getKey(),d)}return ce.resolve(s)}getOverlaysForCollectionGroup(e,t,i,s){let o=new zt((m,y)=>m-y);const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>i){let y=o.get(m.largestBatchId);y===null&&(y=Do(),o=o.insert(m.largestBatchId,y)),y.set(m.getKey(),m)}}const h=Do(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((m,y)=>h.set(m,y)),!(h.size()>=s)););return ce.resolve(h)}Et(e,t,i){const s=this.overlays.get(i.key);if(s!==null){const c=this.Rr.get(s.largestBatchId).delete(i.key);this.Rr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new mk(t,i));let o=this.Rr.get(t);o===void 0&&(o=at(),this.Rr.set(t,o)),this.Rr.set(t,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(){this.sessionToken=Ln.EMPTY_BYTE_STRING}getSessionToken(e){return ce.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ce.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(){this.Vr=new dn(Sn.mr),this.gr=new dn(Sn.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const i=new Sn(e,t);this.Vr=this.Vr.add(i),this.gr=this.gr.add(i)}yr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.wr(new Sn(e,t))}br(e,t){e.forEach(i=>this.removeReference(i,t))}Sr(e){const t=new Le(new Nt([])),i=new Sn(t,e),s=new Sn(t,e+1),o=[];return this.gr.forEachInRange([i,s],c=>{this.wr(c),o.push(c.key)}),o}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new Le(new Nt([])),i=new Sn(t,e),s=new Sn(t,e+1);let o=at();return this.gr.forEachInRange([i,s],c=>{o=o.add(c.key)}),o}containsKey(e){const t=new Sn(e,0),i=this.Vr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Sn{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return Le.comparator(e.key,t.key)||lt(e.Cr,t.Cr)}static pr(e,t){return lt(e.Cr,t.Cr)||Le.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new dn(Sn.mr)}checkEmpty(e){return ce.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,s){const o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new fk(o,t,i,s);this.mutationQueue.push(c);for(const h of s)this.Mr=this.Mr.add(new Sn(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ce.resolve(c)}lookupMutationBatch(e,t){return ce.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=this.Nr(i),o=s<0?0:s;return ce.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(this.mutationQueue.length===0?zy:this.Fr-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Sn(t,0),s=new Sn(t,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([i,s],c=>{const h=this.Or(c.Cr);o.push(h)}),ce.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new dn(lt);return t.forEach(s=>{const o=new Sn(s,0),c=new Sn(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,c],h=>{i=i.add(h.Cr)})}),ce.resolve(this.Br(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1;let o=i;Le.isDocumentKey(o)||(o=o.child(""));const c=new Sn(new Le(o),0);let h=new dn(lt);return this.Mr.forEachWhile(d=>{const m=d.key.path;return!!i.isPrefixOf(m)&&(m.length===s&&(h=h.add(d.Cr)),!0)},c),ce.resolve(this.Br(h))}Br(e){const t=[];return e.forEach(i=>{const s=this.Or(i);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){Tt(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Mr;return ce.forEach(t.mutations,s=>{const o=new Sn(s.key,t.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Mr=i})}qn(e){}containsKey(e,t){const i=new Sn(t,0),s=this.Mr.firstAfterOrEqual(i);return ce.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ce.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(e){this.kr=e,this.docs=function(){return new zt(Le.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,s=this.docs.get(i),o=s?s.size:0,c=this.kr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ce.resolve(i?i.document.mutableCopy():Bn.newInvalidDocument(t))}getEntries(e,t){let i=xs();return t.forEach(s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():Bn.newInvalidDocument(s))}),ce.resolve(i)}getDocumentsMatchingQuery(e,t,i,s){let o=xs();const c=t.path,h=new Le(c.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:m,value:{document:y}}=d.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||RD(xD(y),i)<=0||(s.has(y.key)||wm(t,y))&&(o=o.insert(y.key,y.mutableCopy()))}return ce.resolve(o)}getAllFromCollectionGroup(e,t,i,s){ze()}qr(e,t){return ce.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new eM(this)}getSize(e){return ce.resolve(this.size)}}class eM extends Gk{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?t.push(this.Ir.addEntry(e,s)):this.Ir.removeEntry(i)}),ce.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(e){this.persistence=e,this.Qr=new Ko(t=>Hy(t),qy),this.lastRemoteSnapshotVersion=Fe.min(),this.highestTargetId=0,this.$r=0,this.Kr=new Zy,this.targetCount=0,this.Ur=sc.Kn()}forEachTarget(e,t){return this.Qr.forEach((i,s)=>t(s)),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.$r&&(this.$r=t),ce.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new sc(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,ce.resolve()}updateTargetData(e,t){return this.zn(t),ce.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.Sr(t.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,t,i){let s=0;const o=[];return this.Qr.forEach((c,h)=>{h.sequenceNumber<=t&&i.get(h.targetId)===null&&(this.Qr.delete(c),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)}),ce.waitFor(o).next(()=>s)}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,t){const i=this.Qr.get(t)||null;return ce.resolve(i)}addMatchingKeys(e,t,i){return this.Kr.yr(t,i),ce.resolve()}removeMatchingKeys(e,t,i){this.Kr.br(t,i);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach(c=>{o.push(s.markPotentiallyOrphaned(e,c))}),ce.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Kr.Sr(t),ce.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Kr.vr(t);return ce.resolve(i)}containsKey(e,t){return ce.resolve(this.Kr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new ym(0),this.zr=!1,this.zr=!0,this.jr=new Wk,this.referenceDelegate=e(this),this.Hr=new tM(this),this.indexManager=new $k,this.remoteDocumentCache=function(s){return new Jk(s)}(i=>this.referenceDelegate.Jr(i)),this.serializer=new Uk(t),this.Yr=new Xk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Qk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Wr[e.toKey()];return i||(i=new Zk(t,this.referenceDelegate),this.Wr[e.toKey()]=i),i}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,i){Ee("MemoryPersistence","Starting transaction:",e);const s=new nM(this.Gr.next());return this.referenceDelegate.Zr(),i(s).next(o=>this.referenceDelegate.Xr(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}ei(e,t){return ce.or(Object.values(this.Wr).map(i=>()=>i.containsKey(e,t)))}}class nM extends OD{constructor(e){super(),this.currentSequenceNumber=e}}class Jy{constructor(e){this.persistence=e,this.ti=new Zy,this.ni=null}static ri(e){return new Jy(e)}get ii(){if(this.ni)return this.ni;throw ze()}addReference(e,t,i){return this.ti.addReference(i,t),this.ii.delete(i.toString()),ce.resolve()}removeReference(e,t,i){return this.ti.removeReference(i,t),this.ii.add(i.toString()),ce.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),ce.resolve()}removeTarget(e,t){this.ti.Sr(t.targetId).forEach(s=>this.ii.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(o=>this.ii.add(o.toString()))}).next(()=>i.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.ii,i=>{const s=Le.fromPath(i);return this.si(e,s).next(o=>{o||t.removeEntry(s,Fe.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(i=>{i?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return ce.or([()=>ce.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class Zf{constructor(e,t){this.persistence=e,this.oi=new Ko(i=>MD(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=qk(this,t)}static ri(e,t){return new Zf(e,t)}Zr(){}Xr(e){return ce.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(s=>i+s))}sr(e){let t=0;return this.rr(e,i=>{t++}).next(()=>t)}rr(e,t){return ce.forEach(this.oi,(i,s)=>this.ar(e,i,s).next(o=>o?ce.resolve():t(s)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.qr(e,c=>this.ar(e,c,t).next(h=>{h||(i++,o.removeEntry(c,Fe.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),ce.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.oi.set(i,e.currentSequenceNumber),ce.resolve()}removeReference(e,t,i){return this.oi.set(i,e.currentSequenceNumber),ce.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),ce.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Rf(e.data.value)),t}ar(e,t,i){return ce.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.oi.get(t);return ce.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(e,t,i,s){this.targetId=e,this.fromCache=t,this.Hi=i,this.Ji=s}static Yi(e,t){let i=at(),s=at();for(const o of t.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new ev(e,t.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return U4()?8:DD(Hn())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,i,s){const o={result:null};return this.rs(e,t).next(c=>{o.result=c}).next(()=>{if(!o.result)return this.ss(e,t,s,i).next(c=>{o.result=c})}).next(()=>{if(o.result)return;const c=new iM;return this._s(e,t,c).next(h=>{if(o.result=h,this.Xi)return this.us(e,t,c,h.size)})}).next(()=>o.result)}us(e,t,i,s){return i.documentReadCount<this.es?(zl()<=rt.DEBUG&&Ee("QueryEngine","SDK will not create cache indexes for query:",Fl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ce.resolve()):(zl()<=rt.DEBUG&&Ee("QueryEngine","Query:",Fl(t),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.ts*s?(zl()<=rt.DEBUG&&Ee("QueryEngine","The SDK decides to create cache indexes for query:",Fl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$r(t))):ce.resolve())}rs(e,t){if(S2(t))return ce.resolve(null);let i=$r(t);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=G0(t,null,"F"),i=$r(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const c=at(...o);return this.ns.getDocuments(e,c).next(h=>this.indexManager.getMinOffset(e,i).next(d=>{const m=this.cs(t,h);return this.ls(t,m,c,d.readTime)?this.rs(e,G0(t,null,"F")):this.hs(e,m,t,d)}))})))}ss(e,t,i,s){return S2(t)||s.isEqual(Fe.min())?ce.resolve(null):this.ns.getDocuments(e,i).next(o=>{const c=this.cs(t,o);return this.ls(t,c,i,s)?ce.resolve(null):(zl()<=rt.DEBUG&&Ee("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Fl(t)),this.hs(e,c,t,CD(s,dh)).next(h=>h))})}cs(e,t){let i=new dn(NA(e));return t.forEach((s,o)=>{wm(e,o)&&(i=i.add(o))}),i}ls(e,t,i,s){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}_s(e,t,i){return zl()<=rt.DEBUG&&Ee("QueryEngine","Using full collection scan to execute query:",Fl(t)),this.ns.getDocumentsMatchingQuery(e,t,Ia.min(),i)}hs(e,t,i,s){return this.ns.getDocumentsMatchingQuery(e,i,s).next(o=>(t.forEach(c=>{o=o.insert(c.key,c)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv="LocalStore",sM=3e8;class aM{constructor(e,t,i,s){this.persistence=e,this.Ps=t,this.serializer=s,this.Ts=new zt(lt),this.Is=new Ko(o=>Hy(o),qy),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(i)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Yk(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function oM(n,e,t,i){return new aM(n,e,t,i)}async function iS(n,e){const t=Ge(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let s;return t.mutationQueue.getAllMutationBatches(i).next(o=>(s=o,t.As(e),t.mutationQueue.getAllMutationBatches(i))).next(o=>{const c=[],h=[];let d=at();for(const m of s){c.push(m.batchId);for(const y of m.mutations)d=d.add(y.key)}for(const m of o){h.push(m.batchId);for(const y of m.mutations)d=d.add(y.key)}return t.localDocuments.getDocuments(i,d).next(m=>({Rs:m,removedBatchIds:c,addedBatchIds:h}))})})}function lM(n,e){const t=Ge(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),o=t.ds.newChangeBuffer({trackRemovals:!0});return function(h,d,m,y){const _=m.batch,b=_.keys();let T=ce.resolve();return b.forEach(A=>{T=T.next(()=>y.getEntry(d,A)).next(U=>{const P=m.docVersions.get(A);Tt(P!==null),U.version.compareTo(P)<0&&(_.applyToRemoteDocument(U,m),U.isValidDocument()&&(U.setReadTime(m.commitVersion),y.addEntry(U)))})}),T.next(()=>h.mutationQueue.removeMutationBatch(d,_))}(t,i,e,o).next(()=>o.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let d=at();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(d=d.add(h.batch.mutations[m].key));return d}(e))).next(()=>t.localDocuments.getDocuments(i,s))})}function rS(n){const e=Ge(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function cM(n,e){const t=Ge(n),i=e.snapshotVersion;let s=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const c=t.ds.newChangeBuffer({trackRemovals:!0});s=t.Ts;const h=[];e.targetChanges.forEach((y,_)=>{const b=s.get(_);if(!b)return;h.push(t.Hr.removeMatchingKeys(o,y.removedDocuments,_).next(()=>t.Hr.addMatchingKeys(o,y.addedDocuments,_)));let T=b.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(_)!==null?T=T.withResumeToken(Ln.EMPTY_BYTE_STRING,Fe.min()).withLastLimboFreeSnapshotVersion(Fe.min()):y.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(y.resumeToken,i)),s=s.insert(_,T),function(U,P,B){return U.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=sM?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(b,T,y)&&h.push(t.Hr.updateTargetData(o,T))});let d=xs(),m=at();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(o,y))}),h.push(uM(o,c,e.documentUpdates).next(y=>{d=y.Vs,m=y.fs})),!i.isEqual(Fe.min())){const y=t.Hr.getLastRemoteSnapshotVersion(o).next(_=>t.Hr.setTargetsMetadata(o,o.currentSequenceNumber,i));h.push(y)}return ce.waitFor(h).next(()=>c.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,d,m)).next(()=>d)}).then(o=>(t.Ts=s,o))}function uM(n,e,t){let i=at(),s=at();return t.forEach(o=>i=i.add(o)),e.getEntries(n,i).next(o=>{let c=xs();return t.forEach((h,d)=>{const m=o.get(h);d.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(h)),d.isNoDocument()&&d.version.isEqual(Fe.min())?(e.removeEntry(h,d.readTime),c=c.insert(h,d)):!m.isValidDocument()||d.version.compareTo(m.version)>0||d.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(d),c=c.insert(h,d)):Ee(tv,"Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",d.version)}),{Vs:c,fs:s}})}function hM(n,e){const t=Ge(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=zy),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function dM(n,e){const t=Ge(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return t.Hr.getTargetData(i,e).next(o=>o?(s=o,ce.resolve(s)):t.Hr.allocateTargetId(i).next(c=>(s=new _a(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.Hr.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=t.Ts.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(i.targetId,i),t.Is.set(e,i.targetId)),i})}async function W0(n,e,t){const i=Ge(n),s=i.Ts.get(e),o=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",o,c=>i.persistence.referenceDelegate.removeTarget(c,s))}catch(c){if(!Ec(c))throw c;Ee(tv,`Failed to update sequence numbers for target ${e}: ${c}`)}i.Ts=i.Ts.remove(e),i.Is.delete(s.target)}function V2(n,e,t){const i=Ge(n);let s=Fe.min(),o=at();return i.persistence.runTransaction("Execute query","readwrite",c=>function(d,m,y){const _=Ge(d),b=_.Is.get(y);return b!==void 0?ce.resolve(_.Ts.get(b)):_.Hr.getTargetData(m,y)}(i,c,$r(e)).next(h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,i.Hr.getMatchingKeysForTargetId(c,h.targetId).next(d=>{o=d})}).next(()=>i.Ps.getDocumentsMatchingQuery(c,e,t?s:Fe.min(),t?o:at())).next(h=>(fM(i,ZD(e),h),{documents:h,gs:o})))}function fM(n,e,t){let i=n.Es.get(e)||Fe.min();t.forEach((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.Es.set(e,i)}class $2{constructor(){this.activeTargetIds=rk()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mM{constructor(){this.ho=new $2,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,i){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new $2,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2="ConnectivityMonitor";class z2{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Ee(j2,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){Ee(j2,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hf=null;function Z0(){return hf===null?hf=function(){return 268435456+Math.round(2147483648*Math.random())}():hf++,"0x"+hf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0="RestConnection",gM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yM{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${i}/databases/${s}`,this.wo=this.databaseId.database===Gf?`project_id=${i}`:`project_id=${i}&database_id=${s}`}bo(e,t,i,s,o){const c=Z0(),h=this.So(e,t.toUriEncodedString());Ee(p0,`Sending RPC '${e}' ${c}:`,h,i);const d={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(d,s,o),this.vo(e,h,d,i).then(m=>(Ee(p0,`Received RPC '${e}' ${c}: `,m),m),m=>{throw tc(p0,`RPC '${e}' ${c} failed with error: `,m,"url: ",h,"request:",i),m})}Co(e,t,i,s,o,c){return this.bo(e,t,i,s,o)}Do(e,t,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+bc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,o)=>e[o]=s),i&&i.headers.forEach((s,o)=>e[o]=s)}So(e,t){const i=gM[e];return`${this.po}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zn="WebChannelConnection";class _M extends yM{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,i,s){const o=Z0();return new Promise((c,h)=>{const d=new cA;d.setWithCredentials(!0),d.listenOnce(uA.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case xf.NO_ERROR:const y=d.getResponseJson();Ee(zn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(y)),c(y);break;case xf.TIMEOUT:Ee(zn,`RPC '${e}' ${o} timed out`),h(new Te(le.DEADLINE_EXCEEDED,"Request time out"));break;case xf.HTTP_ERROR:const _=d.getStatus();if(Ee(zn,`RPC '${e}' ${o} failed with status:`,_,"response text:",d.getResponseText()),_>0){let b=d.getResponseJson();Array.isArray(b)&&(b=b[0]);const T=b==null?void 0:b.error;if(T&&T.status&&T.message){const A=function(P){const B=P.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(B)>=0?B:le.UNKNOWN}(T.status);h(new Te(A,T.message))}else h(new Te(le.UNKNOWN,"Server responded with status "+d.getStatus()))}else h(new Te(le.UNAVAILABLE,"Connection failed."));break;default:ze()}}finally{Ee(zn,`RPC '${e}' ${o} completed.`)}});const m=JSON.stringify(s);Ee(zn,`RPC '${e}' ${o} sending request:`,s),d.send(t,"POST",m,i,15)})}Wo(e,t,i){const s=Z0(),o=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=fA(),h=dA(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(d.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Do(d.initMessageHeaders,t,i),d.encodeInitMessageHeaders=!0;const y=o.join("");Ee(zn,`Creating RPC '${e}' stream ${s}: ${y}`,d);const _=c.createWebChannel(y,d);let b=!1,T=!1;const A=new vM({Fo:P=>{T?Ee(zn,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(b||(Ee(zn,`Opening RPC '${e}' stream ${s} transport.`),_.open(),b=!0),Ee(zn,`RPC '${e}' stream ${s} sending:`,P),_.send(P))},Mo:()=>_.close()}),U=(P,B,G)=>{P.listen(B,Q=>{try{G(Q)}catch(ue){setTimeout(()=>{throw ue},0)}})};return U(_,Hu.EventType.OPEN,()=>{T||(Ee(zn,`RPC '${e}' stream ${s} transport opened.`),A.Qo())}),U(_,Hu.EventType.CLOSE,()=>{T||(T=!0,Ee(zn,`RPC '${e}' stream ${s} transport closed`),A.Ko())}),U(_,Hu.EventType.ERROR,P=>{T||(T=!0,tc(zn,`RPC '${e}' stream ${s} transport errored:`,P),A.Ko(new Te(le.UNAVAILABLE,"The operation could not be completed")))}),U(_,Hu.EventType.MESSAGE,P=>{var B;if(!T){const G=P.data[0];Tt(!!G);const Q=G,ue=(Q==null?void 0:Q.error)||((B=Q[0])===null||B===void 0?void 0:B.error);if(ue){Ee(zn,`RPC '${e}' stream ${s} received error:`,ue);const V=ue.status;let te=function(R){const D=rn[R];if(D!==void 0)return qA(D)}(V),k=ue.message;te===void 0&&(te=le.INTERNAL,k="Unknown error status: "+V+" with message "+ue.message),T=!0,A.Ko(new Te(te,k)),_.close()}else Ee(zn,`RPC '${e}' stream ${s} received:`,G),A.Uo(G)}}),U(h,hA.STAT_EVENT,P=>{P.stat===j0.PROXY?Ee(zn,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===j0.NOPROXY&&Ee(zn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{A.$o()},0),A}}function g0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(n){return new Tk(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e,t,i=1e3,s=1.5,o=6e4){this.Ti=e,this.timerId=t,this.Go=i,this.zo=s,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),i=Math.max(0,Date.now()-this.Yo),s=Math.max(0,t-i);s>0&&Ee("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2="PersistentStream";class aS{constructor(e,t,i,s,o,c,h,d){this.Ti=e,this.n_=i,this.r_=s,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new sS(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(Cs(t.toString()),Cs("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.i_===t&&this.V_(i,s)},i=>{e(()=>{const s=new Te(le.UNKNOWN,"Fetching auth token failed: "+i.message);return this.m_(s)})})}V_(e,t){const i=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{i(()=>this.listener.xo())}),this.stream.No(()=>{i(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{i(()=>this.m_(s))}),this.stream.onMessage(s=>{i(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return Ee(F2,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(Ee(F2,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class bM extends aS{constructor(e,t,i,s,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,s,c),this.serializer=o}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=Ck(this.serializer,e),i=function(o){if(!("targetChange"in o))return Fe.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?Fe.min():c.readTime?jr(c.readTime):Fe.min()}(e);return this.listener.p_(t,i)}y_(e){const t={};t.database=Q0(this.serializer),t.addTarget=function(o,c){let h;const d=c.target;if(h=H0(d)?{documents:Ik(o,d)}:{query:Ok(o,d).ht},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=YA(o,c.resumeToken);const m=K0(o,c.expectedCount);m!==null&&(h.expectedCount=m)}else if(c.snapshotVersion.compareTo(Fe.min())>0){h.readTime=Wf(o,c.snapshotVersion.toTimestamp());const m=K0(o,c.expectedCount);m!==null&&(h.expectedCount=m)}return h}(this.serializer,e);const i=kk(this.serializer,e);i&&(t.labels=i),this.I_(t)}w_(e){const t={};t.database=Q0(this.serializer),t.removeTarget=e,this.I_(t)}}class wM extends aS{constructor(e,t,i,s,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,s,c),this.serializer=o}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return Tt(!!e.streamToken),this.lastStreamToken=e.streamToken,Tt(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Tt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=Rk(e.writeResults,e.commitTime),i=jr(e.commitTime);return this.listener.v_(i,t)}C_(){const e={};e.database=Q0(this.serializer),this.I_(e)}S_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>xk(this.serializer,i))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{}class TM extends EM{constructor(e,t,i,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new Te(le.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,t,i,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.bo(e,Y0(t,i),s,o,c)).catch(o=>{throw o.name==="FirebaseError"?(o.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Te(le.UNKNOWN,o.toString())})}Co(e,t,i,s,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.Co(e,Y0(t,i),s,c,h,o)).catch(c=>{throw c.name==="FirebaseError"?(c.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Te(le.UNKNOWN,c.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class AM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Cs(t),this.N_=!1):Ee("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo="RemoteStore";class SM{constructor(e,t,i,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(c=>{i.enqueueAndForget(async()=>{Yo(this)&&(Ee(Fo,"Restarting streams for network reachability change."),await async function(d){const m=Ge(d);m.W_.add(4),await Nh(m),m.j_.set("Unknown"),m.W_.delete(4),await Cm(m)}(this))})}),this.j_=new AM(i,s)}}async function Cm(n){if(Yo(n))for(const e of n.G_)await e(!0)}async function Nh(n){for(const e of n.G_)await e(!1)}function oS(n,e){const t=Ge(n);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),sv(t)?rv(t):Ac(t).c_()&&iv(t,e))}function nv(n,e){const t=Ge(n),i=Ac(t);t.U_.delete(e),i.c_()&&lS(t,e),t.U_.size===0&&(i.c_()?i.P_():Yo(t)&&t.j_.set("Unknown"))}function iv(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Fe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ac(n).y_(e)}function lS(n,e){n.H_.Ne(e),Ac(n).w_(e)}function rv(n){n.H_=new _k({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.U_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),Ac(n).start(),n.j_.B_()}function sv(n){return Yo(n)&&!Ac(n).u_()&&n.U_.size>0}function Yo(n){return Ge(n).W_.size===0}function cS(n){n.H_=void 0}async function CM(n){n.j_.set("Online")}async function xM(n){n.U_.forEach((e,t)=>{iv(n,e)})}async function RM(n,e){cS(n),sv(n)?(n.j_.q_(e),rv(n)):n.j_.set("Unknown")}async function IM(n,e,t){if(n.j_.set("Online"),e instanceof KA&&e.state===2&&e.cause)try{await async function(s,o){const c=o.cause;for(const h of o.targetIds)s.U_.has(h)&&(await s.remoteSyncer.rejectListen(h,c),s.U_.delete(h),s.H_.removeTarget(h))}(n,e)}catch(i){Ee(Fo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Jf(n,i)}else if(e instanceof Df?n.H_.We(e):e instanceof GA?n.H_.Ze(e):n.H_.je(e),!t.isEqual(Fe.min()))try{const i=await rS(n.localStore);t.compareTo(i)>=0&&await function(o,c){const h=o.H_.ot(c);return h.targetChanges.forEach((d,m)=>{if(d.resumeToken.approximateByteSize()>0){const y=o.U_.get(m);y&&o.U_.set(m,y.withResumeToken(d.resumeToken,c))}}),h.targetMismatches.forEach((d,m)=>{const y=o.U_.get(d);if(!y)return;o.U_.set(d,y.withResumeToken(Ln.EMPTY_BYTE_STRING,y.snapshotVersion)),lS(o,d);const _=new _a(y.target,d,m,y.sequenceNumber);iv(o,_)}),o.remoteSyncer.applyRemoteEvent(h)}(n,t)}catch(i){Ee(Fo,"Failed to raise snapshot:",i),await Jf(n,i)}}async function Jf(n,e,t){if(!Ec(e))throw e;n.W_.add(1),await Nh(n),n.j_.set("Offline"),t||(t=()=>rS(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Ee(Fo,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await Cm(n)})}function uS(n,e){return e().catch(t=>Jf(n,t,e))}async function xm(n){const e=Ge(n),t=Ma(e);let i=e.K_.length>0?e.K_[e.K_.length-1].batchId:zy;for(;OM(e);)try{const s=await hM(e.localStore,i);if(s===null){e.K_.length===0&&t.P_();break}i=s.batchId,DM(e,s)}catch(s){await Jf(e,s)}hS(e)&&dS(e)}function OM(n){return Yo(n)&&n.K_.length<10}function DM(n,e){n.K_.push(e);const t=Ma(n);t.c_()&&t.b_&&t.S_(e.mutations)}function hS(n){return Yo(n)&&!Ma(n).u_()&&n.K_.length>0}function dS(n){Ma(n).start()}async function kM(n){Ma(n).C_()}async function MM(n){const e=Ma(n);for(const t of n.K_)e.S_(t.mutations)}async function NM(n,e,t){const i=n.K_.shift(),s=Xy.from(i,e,t);await uS(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await xm(n)}async function PM(n,e){e&&Ma(n).b_&&await async function(i,s){if(function(c){return gk(c)&&c!==le.ABORTED}(s.code)){const o=i.K_.shift();Ma(i).h_(),await uS(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),await xm(i)}}(n,e),hS(n)&&dS(n)}async function B2(n,e){const t=Ge(n);t.asyncQueue.verifyOperationInProgress(),Ee(Fo,"RemoteStore received new credentials");const i=Yo(t);t.W_.add(3),await Nh(t),i&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await Cm(t)}async function LM(n,e){const t=Ge(n);e?(t.W_.delete(2),await Cm(t)):e||(t.W_.add(2),await Nh(t),t.j_.set("Unknown"))}function Ac(n){return n.J_||(n.J_=function(t,i,s){const o=Ge(t);return o.M_(),new bM(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{xo:CM.bind(null,n),No:xM.bind(null,n),Lo:RM.bind(null,n),p_:IM.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),sv(n)?rv(n):n.j_.set("Unknown")):(await n.J_.stop(),cS(n))})),n.J_}function Ma(n){return n.Y_||(n.Y_=function(t,i,s){const o=Ge(t);return o.M_(),new wM(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:kM.bind(null,n),Lo:PM.bind(null,n),D_:MM.bind(null,n),v_:NM.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await xm(n)):(await n.Y_.stop(),n.K_.length>0&&(Ee(Fo,`Stopping write stream with ${n.K_.length} pending writes`),n.K_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e,t,i,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new Ts,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,s,o){const c=Date.now()+i,h=new av(e,t,c,s,o);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Te(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ov(n,e){if(Cs("AsyncQueue",`${e}: ${n}`),Ec(n))return new Te(le.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{static emptySet(e){return new Zl(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Le.comparator(t.key,i.key):(t,i)=>Le.comparator(t.key,i.key),this.keyedMap=qu(),this.sortedSet=new zt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Zl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Zl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(){this.Z_=new zt(Le.comparator)}track(e){const t=e.doc.key,i=this.Z_.get(t);i?e.type!==0&&i.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&i.type!==1?this.Z_=this.Z_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Z_=this.Z_.remove(t):e.type===1&&i.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):ze():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,i)=>{e.push(i)}),e}}class ac{constructor(e,t,i,s,o,c,h,d,m){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=m}static fromInitialDocuments(e,t,i,s,o){const c=[];return t.forEach(h=>{c.push({type:0,doc:h})}),new ac(e,t,Zl.emptySet(t),c,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==i[s].type||!t[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class VM{constructor(){this.queries=q2(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,i){const s=Ge(t),o=s.queries;s.queries=q2(),o.forEach((c,h)=>{for(const d of h.ta)d.onError(i)})})(this,new Te(le.ABORTED,"Firestore shutting down"))}}function q2(){return new Ko(n=>MA(n),bm)}async function fS(n,e){const t=Ge(n);let i=3;const s=e.query;let o=t.queries.get(s);o?!o.na()&&e.ra()&&(i=2):(o=new UM,i=e.ra()?0:1);try{switch(i){case 0:o.ea=await t.onListen(s,!0);break;case 1:o.ea=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(c){const h=ov(c,`Initialization of query '${Fl(e.query)}' failed`);return void e.onError(h)}t.queries.set(s,o),o.ta.push(e),e.sa(t.onlineState),o.ea&&e.oa(o.ea)&&lv(t)}async function mS(n,e){const t=Ge(n),i=e.query;let s=3;const o=t.queries.get(i);if(o){const c=o.ta.indexOf(e);c>=0&&(o.ta.splice(c,1),o.ta.length===0?s=e.ra()?0:1:!o.na()&&e.ra()&&(s=2))}switch(s){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function $M(n,e){const t=Ge(n);let i=!1;for(const s of e){const o=s.query,c=t.queries.get(o);if(c){for(const h of c.ta)h.oa(s)&&(i=!0);c.ea=s}}i&&lv(t)}function jM(n,e,t){const i=Ge(n),s=i.queries.get(e);if(s)for(const o of s.ta)o.onError(t);i.queries.delete(e)}function lv(n){n.ia.forEach(e=>{e.next()})}var J0,G2;(G2=J0||(J0={}))._a="default",G2.Cache="cache";class pS{constructor(e,t,i){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=i||{}}oa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new ac(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const i=t!=="Offline";return(!this.options.Ta||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=ac.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==J0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e){this.key=e}}class yS{constructor(e){this.key=e}}class zM{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=at(),this.mutatedKeys=at(),this.ya=NA(e),this.wa=new Zl(this.ya)}get ba(){return this.fa}Sa(e,t){const i=t?t.Da:new H2,s=t?t.wa:this.wa;let o=t?t.mutatedKeys:this.mutatedKeys,c=s,h=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((y,_)=>{const b=s.get(y),T=wm(this.query,_)?_:null,A=!!b&&this.mutatedKeys.has(b.key),U=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let P=!1;b&&T?b.data.isEqual(T.data)?A!==U&&(i.track({type:3,doc:T}),P=!0):this.va(b,T)||(i.track({type:2,doc:T}),P=!0,(d&&this.ya(T,d)>0||m&&this.ya(T,m)<0)&&(h=!0)):!b&&T?(i.track({type:0,doc:T}),P=!0):b&&!T&&(i.track({type:1,doc:b}),P=!0,(d||m)&&(h=!0)),P&&(T?(c=c.add(T),o=U?o.add(y):o.delete(y)):(c=c.delete(y),o=o.delete(y)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),o=o.delete(y.key),i.track({type:1,doc:y})}return{wa:c,Da:i,ls:h,mutatedKeys:o}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,s){const o=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const c=e.Da.X_();c.sort((y,_)=>function(T,A){const U=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ze()}};return U(T)-U(A)}(y.type,_.type)||this.ya(y.doc,_.doc)),this.Ca(i),s=s!=null&&s;const h=t&&!s?this.Fa():[],d=this.pa.size===0&&this.current&&!s?1:0,m=d!==this.ga;return this.ga=d,c.length!==0||m?{snapshot:new ac(this.query,e.wa,o,c,e.mutatedKeys,d===0,m,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ma:h}:{Ma:h}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new H2,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=at(),this.wa.forEach(i=>{this.xa(i.key)&&(this.pa=this.pa.add(i.key))});const t=[];return e.forEach(i=>{this.pa.has(i)||t.push(new yS(i))}),this.pa.forEach(i=>{e.has(i)||t.push(new gS(i))}),t}Oa(e){this.fa=e.gs,this.pa=at();const t=this.Sa(e.documents);return this.applyChanges(t,!0)}Na(){return ac.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const cv="SyncEngine";class FM{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class BM{constructor(e){this.key=e,this.Ba=!1}}class HM{constructor(e,t,i,s,o,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.La={},this.ka=new Ko(h=>MA(h),bm),this.qa=new Map,this.Qa=new Set,this.$a=new zt(Le.comparator),this.Ka=new Map,this.Ua=new Zy,this.Wa={},this.Ga=new Map,this.za=sc.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function qM(n,e,t=!0){const i=TS(n);let s;const o=i.ka.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.Na()):s=await vS(i,e,t,!0),s}async function GM(n,e){const t=TS(n);await vS(t,e,!0,!1)}async function vS(n,e,t,i){const s=await dM(n.localStore,$r(e)),o=s.targetId,c=n.sharedClientState.addLocalQueryTarget(o,t);let h;return i&&(h=await KM(n,e,o,c==="current",s.resumeToken)),n.isPrimaryClient&&t&&oS(n.remoteStore,s),h}async function KM(n,e,t,i,s){n.Ha=(_,b,T)=>async function(U,P,B,G){let Q=P.view.Sa(B);Q.ls&&(Q=await V2(U.localStore,P.query,!1).then(({documents:k})=>P.view.Sa(k,Q)));const ue=G&&G.targetChanges.get(P.targetId),V=G&&G.targetMismatches.get(P.targetId)!=null,te=P.view.applyChanges(Q,U.isPrimaryClient,ue,V);return Y2(U,P.targetId,te.Ma),te.snapshot}(n,_,b,T);const o=await V2(n.localStore,e,!0),c=new zM(e,o.gs),h=c.Sa(o.documents),d=Mh.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",s),m=c.applyChanges(h,n.isPrimaryClient,d);Y2(n,t,m.Ma);const y=new FM(e,t,c);return n.ka.set(e,y),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),m.snapshot}async function YM(n,e,t){const i=Ge(n),s=i.ka.get(e),o=i.qa.get(s.targetId);if(o.length>1)return i.qa.set(s.targetId,o.filter(c=>!bm(c,e))),void i.ka.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await W0(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),t&&nv(i.remoteStore,s.targetId),ey(i,s.targetId)}).catch(wc)):(ey(i,s.targetId),await W0(i.localStore,s.targetId,!0))}async function XM(n,e){const t=Ge(n),i=t.ka.get(e),s=t.qa.get(i.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),nv(t.remoteStore,i.targetId))}async function QM(n,e,t){const i=iN(n);try{const s=await function(c,h){const d=Ge(c),m=hn.now(),y=h.reduce((T,A)=>T.add(A.key),at());let _,b;return d.persistence.runTransaction("Locally write mutations","readwrite",T=>{let A=xs(),U=at();return d.ds.getEntries(T,y).next(P=>{A=P,A.forEach((B,G)=>{G.isValidDocument()||(U=U.add(B))})}).next(()=>d.localDocuments.getOverlayedDocuments(T,A)).next(P=>{_=P;const B=[];for(const G of h){const Q=hk(G,_.get(G.key).overlayedDocument);Q!=null&&B.push(new ja(G.key,Q,SA(Q.value.mapValue),or.exists(!0)))}return d.mutationQueue.addMutationBatch(T,m,B,h)}).next(P=>{b=P;const B=P.applyToLocalDocumentSet(_,U);return d.documentOverlayCache.saveOverlays(T,P.batchId,B)})}).then(()=>({batchId:b.batchId,changes:LA(_)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(c,h,d){let m=c.Wa[c.currentUser.toKey()];m||(m=new zt(lt)),m=m.insert(h,d),c.Wa[c.currentUser.toKey()]=m}(i,s.batchId,t),await Ph(i,s.changes),await xm(i.remoteStore)}catch(s){const o=ov(s,"Failed to persist write");t.reject(o)}}async function _S(n,e){const t=Ge(n);try{const i=await cM(t.localStore,e);e.targetChanges.forEach((s,o)=>{const c=t.Ka.get(o);c&&(Tt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?c.Ba=!0:s.modifiedDocuments.size>0?Tt(c.Ba):s.removedDocuments.size>0&&(Tt(c.Ba),c.Ba=!1))}),await Ph(t,i,e)}catch(i){await wc(i)}}function K2(n,e,t){const i=Ge(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const s=[];i.ka.forEach((o,c)=>{const h=c.view.sa(e);h.snapshot&&s.push(h.snapshot)}),function(c,h){const d=Ge(c);d.onlineState=h;let m=!1;d.queries.forEach((y,_)=>{for(const b of _.ta)b.sa(h)&&(m=!0)}),m&&lv(d)}(i.eventManager,e),s.length&&i.La.p_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function WM(n,e,t){const i=Ge(n);i.sharedClientState.updateQueryState(e,"rejected",t);const s=i.Ka.get(e),o=s&&s.key;if(o){let c=new zt(Le.comparator);c=c.insert(o,Bn.newNoDocument(o,Fe.min()));const h=at().add(o),d=new Am(Fe.min(),new Map,new zt(lt),c,h);await _S(i,d),i.$a=i.$a.remove(o),i.Ka.delete(e),uv(i)}else await W0(i.localStore,e,!1).then(()=>ey(i,e,t)).catch(wc)}async function ZM(n,e){const t=Ge(n),i=e.batch.batchId;try{const s=await lM(t.localStore,e);wS(t,i,null),bS(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Ph(t,s)}catch(s){await wc(s)}}async function JM(n,e,t){const i=Ge(n);try{const s=await function(c,h){const d=Ge(c);return d.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let y;return d.mutationQueue.lookupMutationBatch(m,h).next(_=>(Tt(_!==null),y=_.keys(),d.mutationQueue.removeMutationBatch(m,_))).next(()=>d.mutationQueue.performConsistencyCheck(m)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(m,y,h)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,y)).next(()=>d.localDocuments.getDocuments(m,y))})}(i.localStore,e);wS(i,e,t),bS(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Ph(i,s)}catch(s){await wc(s)}}function bS(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function wS(n,e,t){const i=Ge(n);let s=i.Wa[i.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),i.Wa[i.currentUser.toKey()]=s}}function ey(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.qa.get(e))n.ka.delete(i),t&&n.La.Ja(i,t);n.qa.delete(e),n.isPrimaryClient&&n.Ua.Sr(e).forEach(i=>{n.Ua.containsKey(i)||ES(n,i)})}function ES(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(nv(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ka.delete(t),uv(n))}function Y2(n,e,t){for(const i of t)i instanceof gS?(n.Ua.addReference(i.key,e),eN(n,i)):i instanceof yS?(Ee(cv,"Document no longer in limbo: "+i.key),n.Ua.removeReference(i.key,e),n.Ua.containsKey(i.key)||ES(n,i.key)):ze()}function eN(n,e){const t=e.key,i=t.path.canonicalString();n.$a.get(t)||n.Qa.has(i)||(Ee(cv,"New document in limbo: "+t),n.Qa.add(i),uv(n))}function uv(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new Le(Nt.fromString(e)),i=n.za.next();n.Ka.set(i,new BM(t)),n.$a=n.$a.insert(t,i),oS(n.remoteStore,new _a($r(Gy(t.path)),i,"TargetPurposeLimboResolution",ym.ae))}}async function Ph(n,e,t){const i=Ge(n),s=[],o=[],c=[];i.ka.isEmpty()||(i.ka.forEach((h,d)=>{c.push(i.Ha(d,e,t).then(m=>{var y;if((m||t)&&i.isPrimaryClient){const _=m?!m.fromCache:(y=t==null?void 0:t.targetChanges.get(d.targetId))===null||y===void 0?void 0:y.current;i.sharedClientState.updateQueryState(d.targetId,_?"current":"not-current")}if(m){s.push(m);const _=ev.Yi(d.targetId,m);o.push(_)}}))}),await Promise.all(c),i.La.p_(s),await async function(d,m){const y=Ge(d);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>ce.forEach(m,b=>ce.forEach(b.Hi,T=>y.persistence.referenceDelegate.addReference(_,b.targetId,T)).next(()=>ce.forEach(b.Ji,T=>y.persistence.referenceDelegate.removeReference(_,b.targetId,T)))))}catch(_){if(!Ec(_))throw _;Ee(tv,"Failed to update sequence numbers: "+_)}for(const _ of m){const b=_.targetId;if(!_.fromCache){const T=y.Ts.get(b),A=T.snapshotVersion,U=T.withLastLimboFreeSnapshotVersion(A);y.Ts=y.Ts.insert(b,U)}}}(i.localStore,o))}async function tN(n,e){const t=Ge(n);if(!t.currentUser.isEqual(e)){Ee(cv,"User change. New user:",e.toKey());const i=await iS(t.localStore,e);t.currentUser=e,function(o,c){o.Ga.forEach(h=>{h.forEach(d=>{d.reject(new Te(le.CANCELLED,c))})}),o.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ph(t,i.Rs)}}function nN(n,e){const t=Ge(n),i=t.Ka.get(e);if(i&&i.Ba)return at().add(i.key);{let s=at();const o=t.qa.get(e);if(!o)return s;for(const c of o){const h=t.ka.get(c);s=s.unionWith(h.view.ba)}return s}}function TS(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=_S.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WM.bind(null,e),e.La.p_=$M.bind(null,e.eventManager),e.La.Ja=jM.bind(null,e.eventManager),e}function iN(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ZM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=JM.bind(null,e),e}class em{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Sm(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return oM(this.persistence,new rM,e.initialUser,this.serializer)}Xa(e){return new nS(Jy.ri,this.serializer)}Za(e){return new mM}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}em.provider={build:()=>new em};class rN extends em{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){Tt(this.persistence.referenceDelegate instanceof Zf);const i=this.persistence.referenceDelegate.garbageCollector;return new Bk(i,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?ii.withCacheSize(this.cacheSizeBytes):ii.DEFAULT;return new nS(i=>Zf.ri(i,t),this.serializer)}}class ty{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>K2(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=tN.bind(null,this.syncEngine),await LM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new VM}()}createDatastore(e){const t=Sm(e.databaseInfo.databaseId),i=function(o){return new _M(o)}(e.databaseInfo);return function(o,c,h,d){return new TM(o,c,h,d)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,s,o,c,h){return new SM(i,s,o,c,h)}(this.localStore,this.datastore,e.asyncQueue,t=>K2(this.syncEngine,t,0),function(){return z2.D()?new z2:new pM}())}createSyncEngine(e,t){return function(s,o,c,h,d,m,y){const _=new HM(s,o,c,h,d,m);return y&&(_.ja=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const o=Ge(s);Ee(Fo,"RemoteStore shutting down."),o.W_.add(5),await Nh(o),o.z_.shutdown(),o.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}ty.provider={build:()=>new ty};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Cs("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na="FirestoreClient";class sN{constructor(e,t,i,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=s,this.user=Fn.UNAUTHENTICATED,this.clientId=pA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async c=>{Ee(Na,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(Ee(Na,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ts;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=ov(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function y0(n,e){n.asyncQueue.verifyOperationInProgress(),Ee(Na,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async s=>{i.isEqual(s)||(await iS(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function X2(n,e){n.asyncQueue.verifyOperationInProgress();const t=await aN(n);Ee(Na,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>B2(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>B2(e.remoteStore,s)),n._onlineComponents=e}async function aN(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ee(Na,"Using user provided OfflineComponentProvider");try{await y0(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===le.FAILED_PRECONDITION||s.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;tc("Error using user provided cache. Falling back to memory cache: "+t),await y0(n,new em)}}else Ee(Na,"Using default OfflineComponentProvider"),await y0(n,new rN(void 0));return n._offlineComponents}async function SS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ee(Na,"Using user provided OnlineComponentProvider"),await X2(n,n._uninitializedComponentsProvider._online)):(Ee(Na,"Using default OnlineComponentProvider"),await X2(n,new ty))),n._onlineComponents}function oN(n){return SS(n).then(e=>e.syncEngine)}async function CS(n){const e=await SS(n),t=e.eventManager;return t.onListen=qM.bind(null,e.syncEngine),t.onUnlisten=YM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=GM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=XM.bind(null,e.syncEngine),t}function lN(n,e,t={}){const i=new Ts;return n.asyncQueue.enqueueAndForget(async()=>function(o,c,h,d,m){const y=new AS({next:b=>{y.su(),c.enqueueAndForget(()=>mS(o,_));const T=b.docs.has(h);!T&&b.fromCache?m.reject(new Te(le.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&b.fromCache&&d&&d.source==="server"?m.reject(new Te(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(b)},error:b=>m.reject(b)}),_=new pS(Gy(h.path),y,{includeMetadataChanges:!0,Ta:!0});return fS(o,_)}(await CS(n),n.asyncQueue,e,t,i)),i.promise}function cN(n,e,t={}){const i=new Ts;return n.asyncQueue.enqueueAndForget(async()=>function(o,c,h,d,m){const y=new AS({next:b=>{y.su(),c.enqueueAndForget(()=>mS(o,_)),b.fromCache&&d.source==="server"?m.reject(new Te(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(b)},error:b=>m.reject(b)}),_=new pS(h,y,{includeMetadataChanges:!0,Ta:!0});return fS(o,_)}(await CS(n),n.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RS(n,e,t){if(!t)throw new Te(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function uN(n,e,t,i){if(e===!0&&i===!0)throw new Te(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function W2(n){if(!Le.isDocumentKey(n))throw new Te(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Z2(n){if(Le.isDocumentKey(n))throw new Te(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Rm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ze()}function Rs(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Te(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Rm(n);throw new Te(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS="firestore.googleapis.com",J2=!0;class eE{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Te(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=IS,this.ssl=J2}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:J2;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=tS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<zk)throw new Te(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}uN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xS((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Te(le.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Te(le.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Te(le.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Im{constructor(e,t,i,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Te(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Te(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new vD;switch(i.type){case"firstParty":return new ED(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Te(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=Q2.get(t);i&&(Ee("ComponentProvider","Removing Datastore"),Q2.delete(t),i.terminate())}(this),Promise.resolve()}}function hN(n,e,t,i={}){var s;const o=(n=Rs(n,Im))._getSettings(),c=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),h=`${e}:${t}`;o.host!==IS&&o.host!==h&&tc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},o),{host:h,ssl:!1,emulatorOptions:i});if(!Uo(d,c)&&(n._setSettings(d),i.mockUserToken)){let m,y;if(typeof i.mockUserToken=="string")m=i.mockUserToken,y=Fn.MOCK_USER;else{m=O4(i.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const _=i.mockUserToken.sub||i.mockUserToken.user_id;if(!_)throw new Te(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Fn(_)}n._authCredentials=new _D(new mA(m,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Xo(this.firestore,e,this._query)}}class ai{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ai(this.firestore,e,this._key)}}class Sa extends Xo{constructor(e,t,i){super(e,t,Gy(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ai(this.firestore,null,new Le(e))}withConverter(e){return new Sa(this.firestore,e,this._path)}}function Ms(n,e,...t){if(n=fn(n),RS("collection","path",e),n instanceof Im){const i=Nt.fromString(e,...t);return Z2(i),new Sa(n,null,i)}{if(!(n instanceof ai||n instanceof Sa))throw new Te(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Nt.fromString(e,...t));return Z2(i),new Sa(n.firestore,null,i)}}function Bo(n,e,...t){if(n=fn(n),arguments.length===1&&(e=pA.newId()),RS("doc","path",e),n instanceof Im){const i=Nt.fromString(e,...t);return W2(i),new ai(n,null,new Le(i))}{if(!(n instanceof ai||n instanceof Sa))throw new Te(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Nt.fromString(e,...t));return W2(i),new ai(n.firestore,n instanceof Sa?n.converter:null,new Le(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE="AsyncQueue";class nE{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new sS(this,"async_queue_retry"),this.bu=()=>{const i=g0();i&&Ee(tE,"Visibility state changed to "+i.visibilityState),this.a_.t_()},this.Su=e;const t=g0();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=g0();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new Ts;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Ec(e))throw e;Ee(tE,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.Su.then(()=>(this.pu=!0,e().catch(i=>{this.gu=i,this.pu=!1;const s=function(c){let h=c.message||"";return c.stack&&(h=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),h}(i);throw Cs("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.pu=!1,i))));return this.Su=t,t}enqueueAfterDelay(e,t,i){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const s=av.createAndSchedule(this,e,t,i,o=>this.Fu(o));return this.fu.push(s),s}Du(){this.gu&&ze()}verifyOperationInProgress(){}async Mu(){let e;do e=this.Su,await e;while(e!==this.Su)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}class Sc extends Im{constructor(e,t,i,s){super(e,t,i,s),this.type="firestore",this._queue=new nE,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new nE(e),this._firestoreClient=void 0,await e}}}function dN(n,e){const t=typeof n=="object"?n:TT(),i=typeof n=="string"?n:Gf,s=Ry(t,"firestore").getImmediate({identifier:i});if(!s._initialized){const o=R4("firestore");o&&hN(s,...o)}return s}function hv(n){if(n._terminated)throw new Te(le.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||fN(n),n._firestoreClient}function fN(n){var e,t,i;const s=n._freezeSettings(),o=function(h,d,m,y){return new LD(h,d,m,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,xS(y.experimentalLongPollingOptions),y.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new sN(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(h){const d=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(d),_online:d}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new oc(Ln.fromBase64String(e))}catch(t){throw new Te(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new oc(Ln.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Te(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Te(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Te(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return lt(this._lat,e._lat)||lt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN=/^__.*__$/;class pN{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new ja(e,this.data,this.fieldMask,t,this.fieldTransforms):new kh(e,this.data,t,this.fieldTransforms)}}class OS{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new ja(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function DS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ze()}}class pv{constructor(e,t,i,s,o,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new pv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ku({path:i,Qu:!1});return s.$u(e),s}Ku(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ku({path:i,Qu:!1});return s.Bu(),s}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return tm(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(DS(this.Lu)&&mN.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class gN{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Sm(e)}ju(e,t,i,s=!1){return new pv({Lu:e,methodName:t,zu:i,path:Pn.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function gv(n){const e=n._freezeSettings(),t=Sm(n._databaseId);return new gN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function yN(n,e,t,i,s,o={}){const c=n.ju(o.merge||o.mergeFields?2:0,e,t,s);yv("Data must be an object, but it was:",c,i);const h=kS(i,c);let d,m;if(o.merge)d=new bi(c.fieldMask),m=c.fieldTransforms;else if(o.mergeFields){const y=[];for(const _ of o.mergeFields){const b=ny(e,_,t);if(!c.contains(b))throw new Te(le.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);NS(y,b)||y.push(b)}d=new bi(y),m=c.fieldTransforms.filter(_=>d.covers(_.field))}else d=null,m=c.fieldTransforms;return new pN(new ri(h),d,m)}class Dm extends dv{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Dm}}function vN(n,e,t,i){const s=n.ju(1,e,t);yv("Data must be an object, but it was:",s,i);const o=[],c=ri.empty();$a(i,(d,m)=>{const y=vv(e,d,t);m=fn(m);const _=s.Ku(y);if(m instanceof Dm)o.push(y);else{const b=Lh(m,_);b!=null&&(o.push(y),c.set(y,b))}});const h=new bi(o);return new OS(c,h,s.fieldTransforms)}function _N(n,e,t,i,s,o){const c=n.ju(1,e,t),h=[ny(e,i,t)],d=[s];if(o.length%2!=0)throw new Te(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<o.length;b+=2)h.push(ny(e,o[b])),d.push(o[b+1]);const m=[],y=ri.empty();for(let b=h.length-1;b>=0;--b)if(!NS(m,h[b])){const T=h[b];let A=d[b];A=fn(A);const U=c.Ku(T);if(A instanceof Dm)m.push(T);else{const P=Lh(A,U);P!=null&&(m.push(T),y.set(T,P))}}const _=new bi(m);return new OS(y,_,c.fieldTransforms)}function bN(n,e,t,i=!1){return Lh(t,n.ju(i?4:3,e))}function Lh(n,e){if(MS(n=fn(n)))return yv("Unsupported field value:",e,n),kS(n,e);if(n instanceof dv)return function(i,s){if(!DS(s.Lu))throw s.Wu(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(i,s){const o=[];let c=0;for(const h of i){let d=Lh(h,s.Uu(c));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),c++}return{arrayValue:{values:o}}}(n,e)}return function(i,s){if((i=fn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return sk(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=hn.fromDate(i);return{timestampValue:Wf(s.serializer,o)}}if(i instanceof hn){const o=new hn(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Wf(s.serializer,o)}}if(i instanceof fv)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof oc)return{bytesValue:YA(s.serializer,i._byteString)};if(i instanceof ai){const o=s.databaseId,c=i.firestore._databaseId;if(!c.isEqual(o))throw s.Wu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Wy(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof mv)return function(c,h){return{mapValue:{fields:{[TA]:{stringValue:AA},[Kf]:{arrayValue:{values:c.toArray().map(m=>{if(typeof m!="number")throw h.Wu("VectorValues must only contain numeric values.");return Ky(h.serializer,m)})}}}}}}(i,s);throw s.Wu(`Unsupported field value: ${Rm(i)}`)}(n,e)}function kS(n,e){const t={};return yA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$a(n,(i,s)=>{const o=Lh(s,e.qu(i));o!=null&&(t[i]=o)}),{mapValue:{fields:t}}}function MS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof hn||n instanceof fv||n instanceof oc||n instanceof ai||n instanceof dv||n instanceof mv)}function yv(n,e,t){if(!MS(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){const i=Rm(t);throw i==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+i)}}function ny(n,e,t){if((e=fn(e))instanceof Om)return e._internalPath;if(typeof e=="string")return vv(n,e);throw tm("Field path arguments must be of type string or ",n,!1,void 0,t)}const wN=new RegExp("[~\\*/\\[\\]]");function vv(n,e,t){if(e.search(wN)>=0)throw tm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Om(...e.split("."))._internalPath}catch{throw tm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function tm(n,e,t,i,s){const o=i&&!i.isEmpty(),c=s!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(o||c)&&(d+=" (found",o&&(d+=` in field ${i}`),c&&(d+=` in document ${s}`),d+=")"),new Te(le.INVALID_ARGUMENT,h+n+d)}function NS(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e,t,i,s,o){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ai(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new EN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(km("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class EN extends PS{data(){return super.data()}}function km(n,e){return typeof e=="string"?vv(n,e):e instanceof Om?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TN(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Te(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _v{}class LS extends _v{}function Cc(n,e,...t){let i=[];e instanceof _v&&i.push(e),i=i.concat(t),function(o){const c=o.filter(d=>d instanceof bv).length,h=o.filter(d=>d instanceof Mm).length;if(c>1||c>0&&h>0)throw new Te(le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)n=s._apply(n);return n}class Mm extends LS{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Mm(e,t,i)}_apply(e){const t=this._parse(e);return VS(e._query,t),new Xo(e.firestore,e.converter,q0(e._query,t))}_parse(e){const t=gv(e.firestore);return function(o,c,h,d,m,y,_){let b;if(m.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new Te(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){rE(_,y);const A=[];for(const U of _)A.push(iE(d,o,U));b={arrayValue:{values:A}}}else b=iE(d,o,_)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||rE(_,y),b=bN(h,c,_,y==="in"||y==="not-in");return an.create(m,y,b)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Nm(n,e,t){const i=e,s=km("where",n);return Mm._create(s,i,t)}class bv extends _v{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new bv(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:ur.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,o){let c=s;const h=o.getFlattenedFilters();for(const d of h)VS(c,d),c=q0(c,d)}(e._query,t),new Xo(e.firestore,e.converter,q0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class wv extends LS{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new wv(e,t)}_apply(e){const t=function(s,o,c){if(s.startAt!==null)throw new Te(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Te(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new gh(o,c)}(e._query,this._field,this._direction);return new Xo(e.firestore,e.converter,function(s,o){const c=s.explicitOrderBy.concat([o]);return new Tc(s.path,s.collectionGroup,c,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function US(n,e="asc"){const t=e,i=km("orderBy",n);return wv._create(i,t)}function iE(n,e,t){if(typeof(t=fn(t))=="string"){if(t==="")throw new Te(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kA(e)&&t.indexOf("/")!==-1)throw new Te(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Nt.fromString(t));if(!Le.isDocumentKey(i))throw new Te(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return _2(n,new Le(i))}if(t instanceof ai)return _2(n,t._key);throw new Te(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rm(t)}.`)}function rE(n,e){if(!Array.isArray(n)||n.length===0)throw new Te(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function VS(n,e){const t=function(s,o){for(const c of s)for(const h of c.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Te(le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Te(le.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class AN{convertValue(e,t="none"){switch(ka(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Da(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ze()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return $a(e,(s,o)=>{i[s]=this.convertValue(o,t)}),i}convertVectorValue(e){var t,i,s;const o=(s=(i=(t=e.fields)===null||t===void 0?void 0:t[Kf].arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map(c=>Wt(c.doubleValue));return new mv(o)}convertGeoPoint(e){return new fv(Wt(e.latitude),Wt(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=_m(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(fh(e));default:return null}}convertTimestamp(e){const t=Oa(e);return new hn(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Nt.fromString(e);Tt(eS(i));const s=new mh(i.get(1),i.get(3)),o=new Le(i.popFirst(5));return s.isEqual(t)||Cs(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(n,e,t){let i;return i=n?n.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $S extends PS{constructor(e,t,i,s,o,c){super(e,t,i,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new kf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(km("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class kf extends $S{data(e={}){return super.data(e)}}class CN{constructor(e,t,i,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Ku(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new kf(this._firestore,this._userDataWriter,i.key,i,new Ku(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Te(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map(h=>{const d=new kf(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Ku(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:c++}})}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const d=new kf(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Ku(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,y=-1;return h.type!==0&&(m=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),y=c.indexOf(h.doc.key)),{type:xN(h.type),doc:d,oldIndex:m,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function xN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ze()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(n){n=Rs(n,ai);const e=Rs(n.firestore,Sc);return lN(hv(e),n._key).then(t=>IN(e,n,t))}class jS extends AN{constructor(e){super(),this.firestore=e}convertBytes(e){return new oc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ai(this.firestore,null,t)}}function xc(n){n=Rs(n,Xo);const e=Rs(n.firestore,Sc),t=hv(e),i=new jS(e);return TN(n._query),cN(t,n._query).then(s=>new CN(e,i,n,s))}function Pm(n,e,t,...i){n=Rs(n,ai);const s=Rs(n.firestore,Sc),o=gv(s);let c;return c=typeof(e=fn(e))=="string"||e instanceof Om?_N(o,"updateDoc",n._key,e,t,i):vN(o,"updateDoc",n._key,e),Tv(s,[c.toMutation(n._key,or.exists(!0))])}function sE(n){return Tv(Rs(n.firestore,Sc),[new Yy(n._key,or.none())])}function Ev(n,e){const t=Rs(n.firestore,Sc),i=Bo(n),s=SN(n.converter,e);return Tv(t,[yN(gv(n.firestore),"addDoc",i._key,s,n.converter!==null,{}).toMutation(i._key,or.exists(!1))]).then(()=>i)}function Tv(n,e){return function(i,s){const o=new Ts;return i.asyncQueue.enqueueAndForget(async()=>QM(await oN(i),s,o)),o.promise}(hv(n),e)}function IN(n,e,t){const i=t.docs.get(e._key),s=new jS(n);return new $S(n,s,e._key,i,new Ku(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(s){bc=s})(vc),Jl(new Vo("firestore",(i,{instanceIdentifier:s,options:o})=>{const c=i.getProvider("app").getImmediate(),h=new Sc(new bD(i.getProvider("auth-internal")),new TD(c,i.getProvider("app-check-internal")),function(m,y){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Te(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mh(m.options.projectId,y)}(c,s),c);return o=Object.assign({useFetchStreams:t},o),h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),Ta(l2,c2,e),Ta(l2,c2,"esm2017")})();const ON={apiKey:"AIzaSyBSLWKdInZXJZUADrL9O8NPylf2d4ez9fs",authDomain:"photogram-6b13a.firebaseapp.com",projectId:"photogram-6b13a",storageBucket:"photogram-6b13a.firebasestorage.app",messagingSenderId:"3903997894",appId:"1:3903997894:web:f56f9dbc4b376ba8eb14c7"},zS=ET(ON),Uh=oA(zS),Wn=dN(zS),FS=(n,e)=>JO(Uh,n,e),BS=(n,e)=>ZO(Uh,n,e),HS=()=>{r7(Uh)},qS=()=>{const n=new vs;return A7(Uh,n)},GS=n=>t7(n.user,{displayName:n.displayName,photoURL:n.photoURL}),KS=j.createContext({user:null,logIn:FS,signUp:BS,logOut:HS,googleSignIn:qS,updateProfileInfo:GS}),DN=({children:n})=>{const[e,t]=j.useState(null);j.useEffect(()=>XT(Uh,o=>{o&&t(o)}),[]);const i={user:e,logIn:FS,signUp:BS,logOut:HS,googleSignIn:qS,updateProfileInfo:GS};return C.jsx(KS.Provider,{value:i,children:n})},pr=()=>j.useContext(KS),Lm="users",kN=n=>{try{return Ev(Ms(Wn,Lm),n)}catch(e){console.log("Error while creating user: ",e)}},MN=async n=>{try{const e=Cc(Ms(Wn,Lm),Nm("userId","==",n)),t=await xc(e);let i=null;return t.size>0&&t.forEach(s=>{const o=s.data();i={id:s.id,...o}}),i}catch(e){console.log("Error while getting user: ",e)}return null},NN=async(n,e)=>{try{const t=Bo(Wn,Lm,n);return Pm(t,{...e})}catch(t){console.log("Error while updating user: ",t)}},PN=async()=>{try{const n=Cc(Ms(Wn,Lm)),e=await xc(n),t=[];if(e.size>0)return e.forEach(i=>{const s=i.data(),o={id:i.id,...s};t.push(o)}),t}catch(n){console.log("Error occured while getting all the users: ",n)}},YS=j.createContext(null),LN=({children:n})=>{const{user:e}=pr(),[t,i]=Hi.useState([]),[s,o]=Hi.useState(!1);return j.useEffect(()=>{(async()=>{console.log("Fetch all user called...");try{o(!0);const h=await PN();h&&i(h)}catch(h){console.log("Error occured while fetching users data: ",h)}finally{o(!1)}})()},[e==null?void 0:e.photoURL,e==null?void 0:e.displayName]),C.jsx(YS.Provider,{value:{users:t,loading:s},children:n})},Av=()=>{const n=j.useContext(YS);if(!n)throw new Error("useUsers must be used within a UsersProvider");return n};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function UN(n,e,t,i){function s(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(y){try{m(i.next(y))}catch(_){c(_)}}function d(y){try{m(i.throw(y))}catch(_){c(_)}}function m(y){y.done?o(y.value):s(y.value).then(h,d)}m((i=i.apply(n,[])).next())})}function VN(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,s,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(m){return function(y){return d([m,y])}}function d(m){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,s&&(o=m[0]&2?s.return:m[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,m[1])).done)return o;switch(s=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return t.label++,{value:m[1],done:!1};case 5:t.label++,s=m[1],m=[0];continue;case 7:m=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){t=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){t.label=m[1];break}if(m[0]===6&&t.label<o[1]){t.label=o[1],o=m;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(m);break}o[2]&&t.ops.pop(),t.trys.pop();continue}m=e.call(n,t)}catch(y){m=[6,y],s=0}finally{i=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Gl=function(){return Gl=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++){t=arguments[i];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Gl.apply(this,arguments)},XS=function(n){return{loading:n==null,value:n}},$N=function(){return function(n,e){switch(e.type){case"error":return Gl(Gl({},n),{error:e.error,loading:!1,value:void 0});case"reset":return XS(e.defaultValue);case"value":return Gl(Gl({},n),{error:void 0,loading:!1,value:e.value});default:return n}}},jN=function(n){var e=n?n():void 0,t=j.useReducer($N(),XS(e)),i=t[0],s=t[1],o=j.useCallback(function(){var d=n?n():void 0;s({type:"reset",defaultValue:d})},[n]),c=j.useCallback(function(d){s({type:"error",error:d})},[]),h=j.useCallback(function(d){s({type:"value",value:d})},[]);return j.useMemo(function(){return{error:i.error,loading:i.loading,reset:o,setError:c,setValue:h,value:i.value}},[i.error,i.loading,o,c,h,i.value])},zN=function(n,e){var t=jN(function(){return n.currentUser}),i=t.error,s=t.loading,o=t.setError,c=t.setValue,h=t.value;return j.useEffect(function(){var d=XT(n,function(m){return UN(void 0,void 0,void 0,function(){var y;return VN(this,function(_){switch(_.label){case 0:return[3,4];case 1:return _.trys.push([1,3,,4]),[4,e.onUserChanged(m)];case 2:return _.sent(),[3,4];case 3:return y=_.sent(),o(y),[3,4];case 4:return c(m),[2]}})})},o);return function(){d()}},[n]),[h,s,i]};const FN=()=>{const n=oA(),[e,t]=zN(n),i=mr();return t?C.jsx("div",{children:"Loading..."}):e?C.jsx(LI,{}):C.jsx(PI,{to:"/login",state:{from:i}})},Eo=()=>C.jsx("div",{children:"Error"}),lc="/assets/image1-CoqYZn9M.jpg",ko="comments",QS=n=>Ev(Ms(Wn,ko),n),BN=async n=>{try{const e=Cc(Ms(Wn,ko),Nm("postId","==",n),US("updatedAt","desc")),t=await xc(e),i=[];if(t.size>0)return t.forEach(s=>{const o=s.data(),c={id:s.id,...o};i.push(c)}),i}catch(e){console.log("Error while fetching comments!",e)}},HN=(n,e,t)=>{const i=Bo(Wn,ko,n);return Pm(i,{likes:t,usersLiked:e})},qN=(n,e)=>{const t=Bo(Wn,ko,n);return Pm(t,{text:e,updatedAt:new Date})},GN=async n=>{const e=Bo(Wn,ko,n),t=await RN(e);if(!t.exists())return;if(!(t.data().parentCommentId||null)){const o=Cc(Ms(Wn,ko),Nm("parentCommentId","==",n)),h=(await xc(o)).docs.map(d=>sE(Bo(Wn,ko,d.id)));await Promise.all(h)}await sE(e)};/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KN=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),WS=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var YN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XN=j.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:s="",children:o,iconNode:c,...h},d)=>j.createElement("svg",{ref:d,...YN,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:WS("lucide",s),...h},[...c.map(([m,y])=>j.createElement(m,y)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za=(n,e)=>{const t=j.forwardRef(({className:i,...s},o)=>j.createElement(XN,{ref:o,iconNode:e,className:WS(`lucide-${KN(n)}`,i),...s}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QN=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],Um=za("Heart",QN);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WN=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],iy=za("MessageCircle",WN);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZN=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],JN=za("Pen",ZN);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eP=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],tP=za("Pencil",eP);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nP=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],iP=za("Plus",nP);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rP=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],sP=za("Search",rP);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aP=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],oP=za("Send",aP);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lP=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],cP=za("Trash2",lP),hr=({color:n=""})=>C.jsx("div",{className:`animate-spin inline-block size-6 border-3 border-current border-t-transparent rounded-full !${n.length?n:"text-white"}`,role:"status","aria-label":"loading",children:C.jsx("span",{className:"sr-only",children:"Loading..."})});function aE(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function uP(...n){return e=>{let t=!1;const i=n.map(s=>{const o=aE(s,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let s=0;s<i.length;s++){const o=i[s];typeof o=="function"?o():aE(n[s],null)}}}}var Sv=j.forwardRef((n,e)=>{const{children:t,...i}=n,s=j.Children.toArray(t),o=s.find(dP);if(o){const c=o.props.children,h=s.map(d=>d===o?j.Children.count(c)>1?j.Children.only(null):j.isValidElement(c)?c.props.children:null:d);return C.jsx(ry,{...i,ref:e,children:j.isValidElement(c)?j.cloneElement(c,void 0,h):null})}return C.jsx(ry,{...i,ref:e,children:t})});Sv.displayName="Slot";var ry=j.forwardRef((n,e)=>{const{children:t,...i}=n;if(j.isValidElement(t)){const s=mP(t),o=fP(i,t.props);return t.type!==j.Fragment&&(o.ref=e?uP(e,s):s),j.cloneElement(t,o)}return j.Children.count(t)>1?j.Children.only(null):null});ry.displayName="SlotClone";var hP=({children:n})=>C.jsx(C.Fragment,{children:n});function dP(n){return j.isValidElement(n)&&n.type===hP}function fP(n,e){const t={...e};for(const i in e){const s=n[i],o=e[i];/^on[A-Z]/.test(i)?s&&o?t[i]=(...h)=>{o(...h),s(...h)}:s&&(t[i]=s):i==="style"?t[i]={...s,...o}:i==="className"&&(t[i]=[s,o].filter(Boolean).join(" "))}return{...n,...t}}function mP(n){var i,s;let e=(i=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function ZS(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=ZS(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function JS(){for(var n,e,t=0,i="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=ZS(n))&&(i&&(i+=" "),i+=e);return i}const oE=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,lE=JS,pP=(n,e)=>t=>{var i;if((e==null?void 0:e.variants)==null)return lE(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:s,defaultVariants:o}=e,c=Object.keys(s).map(m=>{const y=t==null?void 0:t[m],_=o==null?void 0:o[m];if(y===null)return null;const b=oE(y)||oE(_);return s[m][b]}),h=t&&Object.entries(t).reduce((m,y)=>{let[_,b]=y;return b===void 0||(m[_]=b),m},{}),d=e==null||(i=e.compoundVariants)===null||i===void 0?void 0:i.reduce((m,y)=>{let{class:_,className:b,...T}=y;return Object.entries(T).every(A=>{let[U,P]=A;return Array.isArray(P)?P.includes({...o,...h}[U]):{...o,...h}[U]===P})?[...m,_,b]:m},[]);return lE(n,c,d,t==null?void 0:t.class,t==null?void 0:t.className)},Cv="-",gP=n=>{const e=vP(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:i}=n;return{getClassGroupId:c=>{const h=c.split(Cv);return h[0]===""&&h.length!==1&&h.shift(),eC(h,e)||yP(c)},getConflictingClassGroupIds:(c,h)=>{const d=t[c]||[];return h&&i[c]?[...d,...i[c]]:d}}},eC=(n,e)=>{var c;if(n.length===0)return e.classGroupId;const t=n[0],i=e.nextPart.get(t),s=i?eC(n.slice(1),i):void 0;if(s)return s;if(e.validators.length===0)return;const o=n.join(Cv);return(c=e.validators.find(({validator:h})=>h(o)))==null?void 0:c.classGroupId},cE=/^\[(.+)\]$/,yP=n=>{if(cE.test(n)){const e=cE.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},vP=n=>{const{theme:e,classGroups:t}=n,i={nextPart:new Map,validators:[]};for(const s in t)sy(t[s],i,s,e);return i},sy=(n,e,t,i)=>{n.forEach(s=>{if(typeof s=="string"){const o=s===""?e:uE(e,s);o.classGroupId=t;return}if(typeof s=="function"){if(_P(s)){sy(s(i),e,t,i);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([o,c])=>{sy(c,uE(e,o),t,i)})})},uE=(n,e)=>{let t=n;return e.split(Cv).forEach(i=>{t.nextPart.has(i)||t.nextPart.set(i,{nextPart:new Map,validators:[]}),t=t.nextPart.get(i)}),t},_P=n=>n.isThemeGetter,bP=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,i=new Map;const s=(o,c)=>{t.set(o,c),e++,e>n&&(e=0,i=t,t=new Map)};return{get(o){let c=t.get(o);if(c!==void 0)return c;if((c=i.get(o))!==void 0)return s(o,c),c},set(o,c){t.has(o)?t.set(o,c):s(o,c)}}},ay="!",oy=":",wP=oy.length,EP=n=>{const{prefix:e,experimentalParseClassName:t}=n;let i=s=>{const o=[];let c=0,h=0,d=0,m;for(let A=0;A<s.length;A++){let U=s[A];if(c===0&&h===0){if(U===oy){o.push(s.slice(d,A)),d=A+wP;continue}if(U==="/"){m=A;continue}}U==="["?c++:U==="]"?c--:U==="("?h++:U===")"&&h--}const y=o.length===0?s:s.substring(d),_=TP(y),b=_!==y,T=m&&m>d?m-d:void 0;return{modifiers:o,hasImportantModifier:b,baseClassName:_,maybePostfixModifierPosition:T}};if(e){const s=e+oy,o=i;i=c=>c.startsWith(s)?o(c.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:c,maybePostfixModifierPosition:void 0}}if(t){const s=i;i=o=>t({className:o,parseClassName:s})}return i},TP=n=>n.endsWith(ay)?n.substring(0,n.length-1):n.startsWith(ay)?n.substring(1):n,AP=n=>{const e=Object.fromEntries(n.orderSensitiveModifiers.map(i=>[i,!0]));return i=>{if(i.length<=1)return i;const s=[];let o=[];return i.forEach(c=>{c[0]==="["||e[c]?(s.push(...o.sort(),c),o=[]):o.push(c)}),s.push(...o.sort()),s}},SP=n=>({cache:bP(n.cacheSize),parseClassName:EP(n),sortModifiers:AP(n),...gP(n)}),CP=/\s+/,xP=(n,e)=>{const{parseClassName:t,getClassGroupId:i,getConflictingClassGroupIds:s,sortModifiers:o}=e,c=[],h=n.trim().split(CP);let d="";for(let m=h.length-1;m>=0;m-=1){const y=h[m],{isExternal:_,modifiers:b,hasImportantModifier:T,baseClassName:A,maybePostfixModifierPosition:U}=t(y);if(_){d=y+(d.length>0?" "+d:d);continue}let P=!!U,B=i(P?A.substring(0,U):A);if(!B){if(!P){d=y+(d.length>0?" "+d:d);continue}if(B=i(A),!B){d=y+(d.length>0?" "+d:d);continue}P=!1}const G=o(b).join(":"),Q=T?G+ay:G,ue=Q+B;if(c.includes(ue))continue;c.push(ue);const V=s(B,P);for(let te=0;te<V.length;++te){const k=V[te];c.push(Q+k)}d=y+(d.length>0?" "+d:d)}return d};function RP(){let n=0,e,t,i="";for(;n<arguments.length;)(e=arguments[n++])&&(t=tC(e))&&(i&&(i+=" "),i+=t);return i}const tC=n=>{if(typeof n=="string")return n;let e,t="";for(let i=0;i<n.length;i++)n[i]&&(e=tC(n[i]))&&(t&&(t+=" "),t+=e);return t};function IP(n,...e){let t,i,s,o=c;function c(d){const m=e.reduce((y,_)=>_(y),n());return t=SP(m),i=t.cache.get,s=t.cache.set,o=h,h(d)}function h(d){const m=i(d);if(m)return m;const y=xP(d,t);return s(d,y),y}return function(){return o(RP.apply(null,arguments))}}const An=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},nC=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,iC=/^\((?:(\w[\w-]*):)?(.+)\)$/i,OP=/^\d+\/\d+$/,DP=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,kP=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,MP=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,NP=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,PP=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Vl=n=>OP.test(n),it=n=>!!n&&!Number.isNaN(Number(n)),To=n=>!!n&&Number.isInteger(Number(n)),hE=n=>n.endsWith("%")&&it(n.slice(0,-1)),da=n=>DP.test(n),LP=()=>!0,UP=n=>kP.test(n)&&!MP.test(n),xv=()=>!1,VP=n=>NP.test(n),$P=n=>PP.test(n),jP=n=>!xe(n)&&!Re(n),zP=n=>Rc(n,aC,xv),xe=n=>nC.test(n),Ao=n=>Rc(n,oC,UP),v0=n=>Rc(n,ZP,it),FP=n=>Rc(n,rC,xv),BP=n=>Rc(n,sC,$P),HP=n=>Rc(n,xv,VP),Re=n=>iC.test(n),df=n=>Ic(n,oC),qP=n=>Ic(n,JP),GP=n=>Ic(n,rC),KP=n=>Ic(n,aC),YP=n=>Ic(n,sC),XP=n=>Ic(n,e6,!0),Rc=(n,e,t)=>{const i=nC.exec(n);return i?i[1]?e(i[1]):t(i[2]):!1},Ic=(n,e,t=!1)=>{const i=iC.exec(n);return i?i[1]?e(i[1]):t:!1},rC=n=>n==="position",QP=new Set(["image","url"]),sC=n=>QP.has(n),WP=new Set(["length","size","percentage"]),aC=n=>WP.has(n),oC=n=>n==="length",ZP=n=>n==="number",JP=n=>n==="family-name",e6=n=>n==="shadow",t6=()=>{const n=An("color"),e=An("font"),t=An("text"),i=An("font-weight"),s=An("tracking"),o=An("leading"),c=An("breakpoint"),h=An("container"),d=An("spacing"),m=An("radius"),y=An("shadow"),_=An("inset-shadow"),b=An("drop-shadow"),T=An("blur"),A=An("perspective"),U=An("aspect"),P=An("ease"),B=An("animate"),G=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Q=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ue=()=>["auto","hidden","clip","visible","scroll"],V=()=>["auto","contain","none"],te=()=>[Re,xe,d],k=()=>[Vl,"full","auto",...te()],I=()=>[To,"none","subgrid",Re,xe],R=()=>["auto",{span:["full",To,Re,xe]},Re,xe],D=()=>[To,"auto",Re,xe],L=()=>["auto","min","max","fr",Re,xe],H=()=>["start","end","center","between","around","evenly","stretch","baseline"],N=()=>["start","end","center","stretch"],Be=()=>["auto",...te()],Ue=()=>[Vl,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...te()],ae=()=>[n,Re,xe],we=()=>[hE,Ao],me=()=>["","none","full",m,Re,xe],de=()=>["",it,df,Ao],O=()=>["solid","dashed","dotted","double"],W=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],fe=()=>["","none",T,Re,xe],pe=()=>["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Re,xe],ge=()=>["none",it,Re,xe],ve=()=>["none",it,Re,xe],ke=()=>[it,Re,xe],Ke=()=>[Vl,"full",...te()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[da],breakpoint:[da],color:[LP],container:[da],"drop-shadow":[da],ease:["in","out","in-out"],font:[jP],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[da],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[da],shadow:[da],spacing:["px",it],text:[da],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Vl,xe,Re,U]}],container:["container"],columns:[{columns:[it,xe,Re,h]}],"break-after":[{"break-after":G()}],"break-before":[{"break-before":G()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Q(),xe,Re]}],overflow:[{overflow:ue()}],"overflow-x":[{"overflow-x":ue()}],"overflow-y":[{"overflow-y":ue()}],overscroll:[{overscroll:V()}],"overscroll-x":[{"overscroll-x":V()}],"overscroll-y":[{"overscroll-y":V()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:k()}],"inset-x":[{"inset-x":k()}],"inset-y":[{"inset-y":k()}],start:[{start:k()}],end:[{end:k()}],top:[{top:k()}],right:[{right:k()}],bottom:[{bottom:k()}],left:[{left:k()}],visibility:["visible","invisible","collapse"],z:[{z:[To,"auto",Re,xe]}],basis:[{basis:[Vl,"full","auto",h,...te()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[it,Vl,"auto","initial","none",xe]}],grow:[{grow:["",it,Re,xe]}],shrink:[{shrink:["",it,Re,xe]}],order:[{order:[To,"first","last","none",Re,xe]}],"grid-cols":[{"grid-cols":I()}],"col-start-end":[{col:R()}],"col-start":[{"col-start":D()}],"col-end":[{"col-end":D()}],"grid-rows":[{"grid-rows":I()}],"row-start-end":[{row:R()}],"row-start":[{"row-start":D()}],"row-end":[{"row-end":D()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":L()}],"auto-rows":[{"auto-rows":L()}],gap:[{gap:te()}],"gap-x":[{"gap-x":te()}],"gap-y":[{"gap-y":te()}],"justify-content":[{justify:[...H(),"normal"]}],"justify-items":[{"justify-items":[...N(),"normal"]}],"justify-self":[{"justify-self":["auto",...N()]}],"align-content":[{content:["normal",...H()]}],"align-items":[{items:[...N(),"baseline"]}],"align-self":[{self:["auto",...N(),"baseline"]}],"place-content":[{"place-content":H()}],"place-items":[{"place-items":[...N(),"baseline"]}],"place-self":[{"place-self":["auto",...N()]}],p:[{p:te()}],px:[{px:te()}],py:[{py:te()}],ps:[{ps:te()}],pe:[{pe:te()}],pt:[{pt:te()}],pr:[{pr:te()}],pb:[{pb:te()}],pl:[{pl:te()}],m:[{m:Be()}],mx:[{mx:Be()}],my:[{my:Be()}],ms:[{ms:Be()}],me:[{me:Be()}],mt:[{mt:Be()}],mr:[{mr:Be()}],mb:[{mb:Be()}],ml:[{ml:Be()}],"space-x":[{"space-x":te()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":te()}],"space-y-reverse":["space-y-reverse"],size:[{size:Ue()}],w:[{w:[h,"screen",...Ue()]}],"min-w":[{"min-w":[h,"screen","none",...Ue()]}],"max-w":[{"max-w":[h,"screen","none","prose",{screen:[c]},...Ue()]}],h:[{h:["screen",...Ue()]}],"min-h":[{"min-h":["screen","none",...Ue()]}],"max-h":[{"max-h":["screen",...Ue()]}],"font-size":[{text:["base",t,df,Ao]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,Re,v0]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",hE,xe]}],"font-family":[{font:[qP,xe,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,Re,xe]}],"line-clamp":[{"line-clamp":[it,"none",Re,v0]}],leading:[{leading:[o,...te()]}],"list-image":[{"list-image":["none",Re,xe]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Re,xe]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:ae()}],"text-color":[{text:ae()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...O(),"wavy"]}],"text-decoration-thickness":[{decoration:[it,"from-font","auto",Re,Ao]}],"text-decoration-color":[{decoration:ae()}],"underline-offset":[{"underline-offset":[it,"auto",Re,xe]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:te()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Re,xe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Re,xe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Q(),GP,FP]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:["auto","cover","contain",KP,zP]}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},To,Re,xe],radial:["",Re,xe],conic:[To,Re,xe]},YP,BP]}],"bg-color":[{bg:ae()}],"gradient-from-pos":[{from:we()}],"gradient-via-pos":[{via:we()}],"gradient-to-pos":[{to:we()}],"gradient-from":[{from:ae()}],"gradient-via":[{via:ae()}],"gradient-to":[{to:ae()}],rounded:[{rounded:me()}],"rounded-s":[{"rounded-s":me()}],"rounded-e":[{"rounded-e":me()}],"rounded-t":[{"rounded-t":me()}],"rounded-r":[{"rounded-r":me()}],"rounded-b":[{"rounded-b":me()}],"rounded-l":[{"rounded-l":me()}],"rounded-ss":[{"rounded-ss":me()}],"rounded-se":[{"rounded-se":me()}],"rounded-ee":[{"rounded-ee":me()}],"rounded-es":[{"rounded-es":me()}],"rounded-tl":[{"rounded-tl":me()}],"rounded-tr":[{"rounded-tr":me()}],"rounded-br":[{"rounded-br":me()}],"rounded-bl":[{"rounded-bl":me()}],"border-w":[{border:de()}],"border-w-x":[{"border-x":de()}],"border-w-y":[{"border-y":de()}],"border-w-s":[{"border-s":de()}],"border-w-e":[{"border-e":de()}],"border-w-t":[{"border-t":de()}],"border-w-r":[{"border-r":de()}],"border-w-b":[{"border-b":de()}],"border-w-l":[{"border-l":de()}],"divide-x":[{"divide-x":de()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":de()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...O(),"hidden","none"]}],"divide-style":[{divide:[...O(),"hidden","none"]}],"border-color":[{border:ae()}],"border-color-x":[{"border-x":ae()}],"border-color-y":[{"border-y":ae()}],"border-color-s":[{"border-s":ae()}],"border-color-e":[{"border-e":ae()}],"border-color-t":[{"border-t":ae()}],"border-color-r":[{"border-r":ae()}],"border-color-b":[{"border-b":ae()}],"border-color-l":[{"border-l":ae()}],"divide-color":[{divide:ae()}],"outline-style":[{outline:[...O(),"none","hidden"]}],"outline-offset":[{"outline-offset":[it,Re,xe]}],"outline-w":[{outline:["",it,df,Ao]}],"outline-color":[{outline:[n]}],shadow:[{shadow:["","none",y,XP,HP]}],"shadow-color":[{shadow:ae()}],"inset-shadow":[{"inset-shadow":["none",Re,xe,_]}],"inset-shadow-color":[{"inset-shadow":ae()}],"ring-w":[{ring:de()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:ae()}],"ring-offset-w":[{"ring-offset":[it,Ao]}],"ring-offset-color":[{"ring-offset":ae()}],"inset-ring-w":[{"inset-ring":de()}],"inset-ring-color":[{"inset-ring":ae()}],opacity:[{opacity:[it,Re,xe]}],"mix-blend":[{"mix-blend":[...W(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":W()}],filter:[{filter:["","none",Re,xe]}],blur:[{blur:fe()}],brightness:[{brightness:[it,Re,xe]}],contrast:[{contrast:[it,Re,xe]}],"drop-shadow":[{"drop-shadow":["","none",b,Re,xe]}],grayscale:[{grayscale:["",it,Re,xe]}],"hue-rotate":[{"hue-rotate":[it,Re,xe]}],invert:[{invert:["",it,Re,xe]}],saturate:[{saturate:[it,Re,xe]}],sepia:[{sepia:["",it,Re,xe]}],"backdrop-filter":[{"backdrop-filter":["","none",Re,xe]}],"backdrop-blur":[{"backdrop-blur":fe()}],"backdrop-brightness":[{"backdrop-brightness":[it,Re,xe]}],"backdrop-contrast":[{"backdrop-contrast":[it,Re,xe]}],"backdrop-grayscale":[{"backdrop-grayscale":["",it,Re,xe]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[it,Re,xe]}],"backdrop-invert":[{"backdrop-invert":["",it,Re,xe]}],"backdrop-opacity":[{"backdrop-opacity":[it,Re,xe]}],"backdrop-saturate":[{"backdrop-saturate":[it,Re,xe]}],"backdrop-sepia":[{"backdrop-sepia":["",it,Re,xe]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":te()}],"border-spacing-x":[{"border-spacing-x":te()}],"border-spacing-y":[{"border-spacing-y":te()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Re,xe]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[it,"initial",Re,xe]}],ease:[{ease:["linear","initial",P,Re,xe]}],delay:[{delay:[it,Re,xe]}],animate:[{animate:["none",B,Re,xe]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[A,Re,xe]}],"perspective-origin":[{"perspective-origin":pe()}],rotate:[{rotate:ge()}],"rotate-x":[{"rotate-x":ge()}],"rotate-y":[{"rotate-y":ge()}],"rotate-z":[{"rotate-z":ge()}],scale:[{scale:ve()}],"scale-x":[{"scale-x":ve()}],"scale-y":[{"scale-y":ve()}],"scale-z":[{"scale-z":ve()}],"scale-3d":["scale-3d"],skew:[{skew:ke()}],"skew-x":[{"skew-x":ke()}],"skew-y":[{"skew-y":ke()}],transform:[{transform:[Re,xe,"","none","gpu","cpu"]}],"transform-origin":[{origin:pe()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ke()}],"translate-x":[{"translate-x":Ke()}],"translate-y":[{"translate-y":Ke()}],"translate-z":[{"translate-z":Ke()}],"translate-none":["translate-none"],accent:[{accent:ae()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:ae()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Re,xe]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":te()}],"scroll-mx":[{"scroll-mx":te()}],"scroll-my":[{"scroll-my":te()}],"scroll-ms":[{"scroll-ms":te()}],"scroll-me":[{"scroll-me":te()}],"scroll-mt":[{"scroll-mt":te()}],"scroll-mr":[{"scroll-mr":te()}],"scroll-mb":[{"scroll-mb":te()}],"scroll-ml":[{"scroll-ml":te()}],"scroll-p":[{"scroll-p":te()}],"scroll-px":[{"scroll-px":te()}],"scroll-py":[{"scroll-py":te()}],"scroll-ps":[{"scroll-ps":te()}],"scroll-pe":[{"scroll-pe":te()}],"scroll-pt":[{"scroll-pt":te()}],"scroll-pr":[{"scroll-pr":te()}],"scroll-pb":[{"scroll-pb":te()}],"scroll-pl":[{"scroll-pl":te()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Re,xe]}],fill:[{fill:["none",...ae()]}],"stroke-w":[{stroke:[it,df,Ao,v0]}],stroke:[{stroke:["none",...ae()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["before","after","placeholder","file","marker","selection","first-line","first-letter","backdrop","*","**"]}},n6=IP(t6);function Yi(...n){return n6(JS(n))}const ly=pP("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-[color,box-shadow] disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40",outline:"border border-input bg-background shadow-xs hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function Mn({className:n,variant:e,size:t,asChild:i=!1,...s}){const o=i?Sv:"button";return C.jsx(o,{"data-slot":"button",className:Yi(ly({variant:e,size:t,className:n})),...s})}function Rv({className:n,...e}){return C.jsx("div",{"data-slot":"card",className:Yi("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",n),...e})}function Iv({className:n,...e}){return C.jsx("div",{"data-slot":"card-header",className:Yi("flex flex-col gap-1.5 px-6",n),...e})}function cc({className:n,...e}){return C.jsx("div",{"data-slot":"card-title",className:Yi("leading-none font-semibold",n),...e})}function lC({className:n,...e}){return C.jsx("div",{"data-slot":"card-description",className:Yi("text-muted-foreground text-sm",n),...e})}function Ov({className:n,...e}){return C.jsx("div",{"data-slot":"card-content",className:Yi("px-6",n),...e})}function Dv({className:n,...e}){return C.jsx("div",{"data-slot":"card-footer",className:Yi("flex items-center px-6",n),...e})}function Vm({className:n,...e}){return C.jsx("textarea",{"data-slot":"textarea",className:Yi("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),...e})}const dE=({id:n="",parentCommentId:e="",text:t="",likes:i=0,usersLiked:s=[],userId:o="",handleDelete:c=()=>{},handleLike:h=()=>{},handleEditComment:d=()=>{},handleCommentReply:m=()=>{},handleReplyEditCancel:y=()=>{},handleRepiesToggle:_,loading:b=!1,isLiked:T=!1,editCommentIds:A=[],replyCommentIds:U=[],currentPostId:P="",isAReply:B=!1,setComments:G,setEditCommentIds:Q,setReplyCommentIds:ue,openReplyIds:V})=>{const{users:te}=Av(),[k,I]=j.useState(""),[R,D]=j.useState(!1),L=A.includes(n),H=U.includes(n),Be=te==null?void 0:te.find(we=>we.userId===o);j.useEffect(()=>{L&&I(t),H&&I("")},[L,H,t]);const Ue=(we,me)=>{we.ctrlKey&&we.key==="Enter"&&ae(we,me)},ae=async(we,me)=>{if(we.preventDefault(),!(!e||!me))try{const de=k.trim();if(de==="")throw Error("You cannot add emty comment!");if(D(!0),A.includes(me)&&(G(O=>O.map(W=>W.id===me?{...W,text:de}:W)),await qN(me,de),Q(O=>{const W=[...O];return W.splice(O.indexOf(me),1),W})),U.includes(me)){const O={parentCommentId:e,postId:P,text:de,usersLiked:[],likes:0,createdAt:new Date,updatedAt:new Date};await QS(O),G(W=>[...W,{id:"",...O}]),ue(W=>{const fe=[...W];return fe.splice(W.indexOf(me),1),fe}),V.includes(me)||_(me)}}catch(de){console.log("Error while replying: ",de)}finally{D(!1)}};return C.jsxs("div",{className:"flex flex-col gap-1",children:[C.jsx("div",{className:"flex flex-col pl-3",children:C.jsxs(cc,{className:"text-sm text-center flex justify-start items-center",children:[C.jsx("span",{className:"mr-2",children:C.jsx("img",{src:(Be==null?void 0:Be.photoURL)||lc,alt:"User profile pic",className:"w-10 h-10 rounded-full border-2 border-slate-800 object-cover"})}),C.jsx("span",{children:(Be==null?void 0:Be.displayName)||"Guest User"})]})}),C.jsxs("div",{className:"flex gap-3 px-4 py-1 border-b border-gray-200 items-center relative",children:[b&&C.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:C.jsx(hr,{})}),C.jsxs("div",{className:"flex-1  ml-12",children:[C.jsx("p",{className:"text-gray-700 text-sm",children:t}),C.jsx("div",{className:"flex justify-between mt-2 text-gray-500 text-xs",children:C.jsxs("div",{className:"flex gap-3",children:[C.jsxs(Mn,{onClick:d,className:`bg-transparent! text-black hover:text-gray-500 flex items-center gap-1 p-0! cursor-pointer ${L?"text-gray-500":"text-black"}`,children:[C.jsx(tP,{size:14}),"Save"]}),C.jsxs(Mn,{onClick:c,className:"bg-transparent! text-black hover:text-red-500 flex items-center gap-1 p-0! cursor-pointer",children:[C.jsx(cP,{size:14}),"Delete"]}),C.jsxs(Mn,{onClick:m,className:`bg-transparent! hover:text-blue-500 flex items-center gap-1 p-0! cursor-pointer ${H?"text-blue-500":"text-black"}`,children:[C.jsx(iy,{size:14}),"Reply"]}),!B&&C.jsxs(Mn,{onClick:()=>_(n),className:`bg-transparent! hover:text-blue-500 flex items-center gap-1 p-0! cursor-pointer ${V.includes(n)?"text-blue-500":"text-black"}`,children:[C.jsx(iy,{size:14}),"Replies"]})]})})]}),C.jsxs(Mn,{onClick:h,className:`ml-auto bg-transparent! p-0! cursor-pointer w-fit h-fit text-gray-500 group hover:text-red-500${s.includes(o)||T?" text-red-500":""}`,children:[C.jsx(Um,{size:20,className:`group-hover:fill-red-500 ${s.includes(o)||T?"fill-red-500":""}`}),C.jsxs("span",{className:"text-black!",children:[i," Likes"]})]})]}),(H||L)&&C.jsxs("div",{className:`relative mt-4 flex flex-col justify-center items-end gap-4${B?"":" ml-16"}`,children:[R&&C.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:C.jsx(hr,{color:""})}),C.jsx(Vm,{value:k,onChange:we=>I(we.target.value),onKeyDown:we=>Ue(we,n),className:"text-lg! text-gray-500 rounded-none! border-0 border-b-2 border-gray-950 resize-none field-sizing-content h-fit min-h-fit box-shadow-none px-2! py-0!"}),C.jsxs("div",{className:"flex justify-start items-center gap-4",children:[C.jsx(Mn,{onClick:y,className:"cursor-pointer",children:"Cancel"}),C.jsx(Mn,{onClick:we=>ae(we,n),className:`cursor-pointer ${L?"bg-gray-500 hover:bg-gray-600":"bg-blue-500 hover:bg-blue-600"}`,children:L?"Edit":"Reply"})]})]})]})},i6=({children:n,onClose:e=()=>{},isOpen:t=!1,modalTitle:i="Modal Title",keepFooter:s=!1})=>{const o=j.useRef(null),c=h=>{h.stopPropagation(),(o==null?void 0:o.current)===h.target&&e()};return C.jsx("div",{id:"custom-tailwind-modal","data-modal-backdrop":"static",tabIndex:-1,className:t?"overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full":"hidden ",ref:o,onClick:c,children:C.jsx("div",{className:"p-4 w-full max-w-2xl max-h-full absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:C.jsxs("div",{className:"relative bg-white rounded-lg shadow-sm dark:bg-gray-700",children:[C.jsxs("div",{className:"bg-slate-600 flex items-center justify-between p-2 md:p-3 border-b rounded-t-md dark:border-gray-600 border-gray-200",children:[C.jsx("h3",{className:"text-xl font-semibold text-white dark:text-black",children:i}),C.jsxs("button",{type:"button",className:"cursor-pointer text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white","data-modal-hide":"static-modal",onClick:e,children:[C.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:C.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),C.jsx("span",{className:"sr-only",children:"Close modal"})]})]}),C.jsx("div",{className:"p-4 md:p-5 space-y-4",children:n}),s&&C.jsxs("div",{className:"flex items-center p-4 md:p-5 border-t border-gray-200 rounded-b dark:border-gray-600",children:[C.jsx("button",{"data-modal-hide":"static-modal",type:"button",className:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:"I accept"}),C.jsx("button",{"data-modal-hide":"static-modal",type:"button",className:"py-2.5 px-5 ms-3 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-100 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700",children:"Decline"})]})]})})})},r6="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20fill='currentColor'%20class='w-6%20h-6'%3e%3cpath%20fill-rule='evenodd'%20d='M12%202.25c-5.385%200-9.75%204.365-9.75%209.75s4.365%209.75%209.75%209.75%209.75-4.365%209.75-9.75S17.385%202.25%2012%202.25ZM12.75%209a.75.75%200%200%200-1.5%200v2.25H9a.75.75%200%200%200%200%201.5h2.25V15a.75.75%200%200%200%201.5%200v-2.25H15a.75.75%200%200%200%200-1.5h-2.25V9Z'%20clip-rule='evenodd'%20/%3e%3c/svg%3e",s6="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20fill='currentColor'%20class='w-6%20h-6'%3e%3cpath%20d='M3.478%202.404a.75.75%200%200%200-.926.941l2.432%207.905H13.5a.75.75%200%200%201%200%201.5H4.984l-2.432%207.905a.75.75%200%200%200%20.926.94%2060.519%2060.519%200%200%200%2018.445-8.986.75.75%200%200%200%200-1.218A60.517%2060.517%200%200%200%203.478%202.404Z'%20/%3e%3c/svg%3e",a6="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20fill='currentColor'%20class='w-6%20h-6'%3e%3cpath%20d='M11.47%203.841a.75.75%200%200%201%201.06%200l8.69%208.69a.75.75%200%201%200%201.06-1.061l-8.689-8.69a2.25%202.25%200%200%200-3.182%200l-8.69%208.69a.75.75%200%201%200%201.061%201.06l8.69-8.689Z'%20/%3e%3cpath%20d='m12%205.432%208.159%208.159c.03.03.06.058.091.086v6.198c0%201.035-.84%201.875-1.875%201.875H15a.75.75%200%200%201-.75-.75v-4.5a.75.75%200%200%200-.75-.75h-3a.75.75%200%200%200-.75.75V21a.75.75%200%200%201-.75.75H5.625a1.875%201.875%200%200%201-1.875-1.875v-6.198a2.29%202.29%200%200%200%20.091-.086L12%205.432Z'%20/%3e%3c/svg%3e",o6="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20fill='currentColor'%20class='w-6%20h-6'%3e%3cpath%20fill-rule='evenodd'%20d='M16.5%203.75a1.5%201.5%200%200%201%201.5%201.5v13.5a1.5%201.5%200%200%201-1.5%201.5h-6a1.5%201.5%200%200%201-1.5-1.5V15a.75.75%200%200%200-1.5%200v3.75a3%203%200%200%200%203%203h6a3%203%200%200%200%203-3V5.25a3%203%200%200%200-3-3h-6a3%203%200%200%200-3%203V9A.75.75%200%201%200%209%209V5.25a1.5%201.5%200%200%201%201.5-1.5h6ZM5.78%208.47a.75.75%200%200%200-1.06%200l-3%203a.75.75%200%200%200%200%201.06l3%203a.75.75%200%200%200%201.06-1.06l-1.72-1.72H15a.75.75%200%200%200%200-1.5H4.06l1.72-1.72a.75.75%200%200%200%200-1.06Z'%20clip-rule='evenodd'%20/%3e%3c/svg%3e",l6="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20fill='currentColor'%20class='w-6%20h-6'%3e%3cpath%20d='M12%209a3.75%203.75%200%201%200%200%207.5A3.75%203.75%200%200%200%2012%209Z'%20/%3e%3cpath%20fill-rule='evenodd'%20d='M9.344%203.071a49.52%2049.52%200%200%201%205.312%200c.967.052%201.83.585%202.332%201.39l.821%201.317c.24.383.645.643%201.11.71.386.054.77.113%201.152.177%201.432.239%202.429%201.493%202.429%202.909V18a3%203%200%200%201-3%203h-15a3%203%200%200%201-3-3V9.574c0-1.416.997-2.67%202.429-2.909.382-.064.766-.123%201.151-.178a1.56%201.56%200%200%200%201.11-.71l.822-1.315a2.942%202.942%200%200%201%202.332-1.39ZM6.75%2012.75a5.25%205.25%200%201%201%2010.5%200%205.25%205.25%200%200%201-10.5%200Zm12-1.5a.75.75%200%201%200%200-1.5.75.75%200%200%200%200%201.5Z'%20clip-rule='evenodd'%20/%3e%3c/svg%3e",c6="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20fill='currentColor'%20class='w-6%20h-6'%3e%3cpath%20d='M5.85%203.5a.75.75%200%200%200-1.117-1%209.719%209.719%200%200%200-2.348%204.876.75.75%200%200%200%201.479.248A8.219%208.219%200%200%201%205.85%203.5ZM19.267%202.5a.75.75%200%201%200-1.118%201%208.22%208.22%200%200%201%201.987%204.124.75.75%200%200%200%201.48-.248A9.72%209.72%200%200%200%2019.266%202.5Z'%20/%3e%3cpath%20fill-rule='evenodd'%20d='M12%202.25A6.75%206.75%200%200%200%205.25%209v.75a8.217%208.217%200%200%201-2.119%205.52.75.75%200%200%200%20.298%201.206c1.544.57%203.16.99%204.831%201.243a3.75%203.75%200%201%200%207.48%200%2024.583%2024.583%200%200%200%204.83-1.244.75.75%200%200%200%20.298-1.205%208.217%208.217%200%200%201-2.118-5.52V9A6.75%206.75%200%200%200%2012%202.25ZM9.75%2018c0-.034%200-.067.002-.1a25.05%2025.05%200%200%200%204.496%200l.002.1a2.25%202.25%200%201%201-4.5%200Z'%20clip-rule='evenodd'%20/%3e%3c/svg%3e",u6="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20fill='currentColor'%20class='w-6%20h-6'%3e%3cpath%20fill-rule='evenodd'%20d='M18.685%2019.097A9.723%209.723%200%200%200%2021.75%2012c0-5.385-4.365-9.75-9.75-9.75S2.25%206.615%202.25%2012a9.723%209.723%200%200%200%203.065%207.097A9.716%209.716%200%200%200%2012%2021.75a9.716%209.716%200%200%200%206.685-2.653Zm-12.54-1.285A7.486%207.486%200%200%201%2012%2015a7.486%207.486%200%200%201%205.855%202.812A8.224%208.224%200%200%201%2012%2020.25a8.224%208.224%200%200%201-5.855-2.438ZM15.75%209a3.75%203.75%200%201%201-7.5%200%203.75%203.75%200%200%201%207.5%200Z'%20clip-rule='evenodd'%20/%3e%3c/svg%3e",h6="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20fill='currentColor'%20class='w-6%20h-6'%3e%3cpath%20fill-rule='evenodd'%20d='M11.078%202.25c-.917%200-1.699.663-1.85%201.567L9.05%204.889c-.02.12-.115.26-.297.348a7.493%207.493%200%200%200-.986.57c-.166.115-.334.126-.45.083L6.3%205.508a1.875%201.875%200%200%200-2.282.819l-.922%201.597a1.875%201.875%200%200%200%20.432%202.385l.84.692c.095.078.17.229.154.43a7.598%207.598%200%200%200%200%201.139c.015.2-.059.352-.153.43l-.841.692a1.875%201.875%200%200%200-.432%202.385l.922%201.597a1.875%201.875%200%200%200%202.282.818l1.019-.382c.115-.043.283-.031.45.082.312.214.641.405.985.57.182.088.277.228.297.35l.178%201.071c.151.904.933%201.567%201.85%201.567h1.844c.916%200%201.699-.663%201.85-1.567l.178-1.072c.02-.12.114-.26.297-.349.344-.165.673-.356.985-.57.167-.114.335-.125.45-.082l1.02.382a1.875%201.875%200%200%200%202.28-.819l.923-1.597a1.875%201.875%200%200%200-.432-2.385l-.84-.692c-.095-.078-.17-.229-.154-.43a7.614%207.614%200%200%200%200-1.139c-.016-.2.059-.352.153-.43l.84-.692c.708-.582.891-1.59.433-2.385l-.922-1.597a1.875%201.875%200%200%200-2.282-.818l-1.02.382c-.114.043-.282.031-.449-.083a7.49%207.49%200%200%200-.985-.57c-.183-.087-.277-.227-.297-.348l-.179-1.072a1.875%201.875%200%200%200-1.85-1.567h-1.843ZM12%2015.75a3.75%203.75%200%201%200%200-7.5%203.75%203.75%200%200%200%200%207.5Z'%20clip-rule='evenodd'%20/%3e%3c/svg%3e",d6=[{name:"Home",link:"/",icon:a6},{name:"Add Photos",link:"/post",icon:r6},{name:"My Photos",link:"/myphotos",icon:l6},{name:"Profile",link:"/profile",icon:u6},{name:"Notifications",link:"#",icon:c6},{name:"Direct",link:"#",icon:s6},{name:"Settings",link:"#",icon:h6}],f6=()=>{const{pathname:n}=mr(),{logOut:e}=pr();return C.jsxs("nav",{className:"flex flex-col space-x-2 relative h-screen max-w-sm w-full",children:[C.jsx("div",{className:"flex justify-center m-5",children:C.jsx("div",{className:"text-white text-lg",children:"PhotoGram"})}),d6.map(({name:t,link:i,icon:s})=>C.jsx("div",{className:Yi(ly({variant:"default"}),n===i?"bg-white text-white-800 hover:bg-white rounded-none":"hover:bg-slate-950 hover:text-white bg-transparent rounded-none","justify-start"),children:C.jsxs(Lo,{to:i,className:"flex",children:[C.jsx("span",{children:C.jsx("img",{src:s,className:"w-5 h-5 mr-2",alt:t,style:{filter:n===i?"invert(0)":"invert(1)"}})}),C.jsx("span",{children:t})]})},t)),C.jsx("div",{className:Yi(ly({variant:"default"}),n==="/login"?"bg-white text-white-800 hover:bg-white rounded-none":"hover:bg-slate-950 hover:text-white bg-transparent rounded-none","justify-start"),children:C.jsxs(Lo,{to:"#",className:"flex",onClick:e,children:[C.jsx("span",{children:C.jsx("img",{src:o6,className:"w-5 h-5 mr-2",alt:"logout icon",style:{filter:n==="/login"?"invert(0)":"invert(1)"}})}),C.jsx("span",{children:"Logout"})]})})]})},m6=()=>{const{user:n}=pr(),{users:e,loading:t}=Av(),i=()=>(e==null?void 0:e.length)>0?e.map(s=>(s==null?void 0:s.userId)===(n==null?void 0:n.uid)?null:C.jsxs("div",{className:"flex flex-row justify-between items-center gap-4 mb-2",children:[C.jsxs("div",{className:"flex flex-row items-center gap-2 border-gray-400 justify-start",children:[C.jsx("span",{className:"mr-2",children:C.jsx("img",{src:(s==null?void 0:s.photoURL)||lc,alt:"User profile image",className:"w-12 h-12 border-2 border-slate-800 rounded-full object-cover"})}),C.jsx("span",{className:"text-l max-w-[60%] truncate",children:(s==null?void 0:s.displayName)||"Guest user"})]}),C.jsxs(Mn,{className:"text-xs p-3 py-2 h-6 w-25 bg-blue-500 rounded-sm cursor-pointer",children:["Follow ",C.jsx(iP,{})]})]},s==null?void 0:s.userId)):C.jsx("p",{className:"text-center",children:"No users available!"});return C.jsxs("div",{className:"text-white py-2 px-3",children:[C.jsx(Lo,{to:"/profile",children:C.jsxs("div",{className:"flex flex-row items-center border-b border-gray-400 p-4 mb-4 cursor-pointer",children:[C.jsx("span",{className:"mr-2",children:C.jsx("img",{src:(n==null?void 0:n.photoURL)||lc,alt:"User profile image",className:"w-16 h-16 border-2 border-slate-800 rounded-full object-cover"})}),C.jsx("span",{className:"text-l",children:(n==null?void 0:n.displayName)||"Guest user"})]})}),C.jsx("h3",{className:"text-sm text-slate-300",children:"Suggested users"}),C.jsxs("div",{className:"my-4 relative",children:[t&&C.jsx("div",{className:"flex justify-center items-center bg-transparent",children:C.jsx(hr,{color:"text-slate-800"})}),i()]})]})},Vh=({children:n})=>C.jsxs("div",{className:"flex flex-row justify-between bg-white",children:[C.jsx("aside",{className:"flex gap-x-4 bg-gray-800 w-60 h-screen",children:C.jsx(f6,{})}),C.jsx("div",{className:"mx-auto w-160 max-h-screen overflow-auto border-2 p-8 flex-1",children:n}),C.jsx("aside",{className:"hidden lg:block bg-gray-800 w-max h-screen",children:C.jsx(m6,{})})]}),$m="post",p6=n=>Ev(Ms(Wn,$m),n),g6=async()=>{try{const n=Cc(Ms(Wn,$m),US("date","desc")),e=await xc(n),t=[];if(e.size>0)return e.forEach(i=>{const s=i.data(),o={id:i.id,...s};t.push(o)}),t}catch(n){console.log("Error while fetching posts!",n)}return null},y6=n=>{const e=Cc(Ms(Wn,$m),Nm("userId","==",n));return xc(e)},v6=(n,e,t)=>{const i=Bo(Wn,$m,n);return Pm(i,{likes:t,userLikes:e})},_6=({data:n,setCommentOpen:e,setCurrentPostId:t,setComments:i})=>{var T,A;const{user:s}=pr(),o=s==null?void 0:s.uid,{users:c}=Av(),[h,d]=j.useState({likes:n.likes,isLiked:o?n.userLikes.includes(o):!1}),m=async U=>{if(!o)return;const P=h.likes+(U?1:-1),B=[...n.userLikes];U?B.push(o):B.splice(B.indexOf(o),1),d({likes:P,isLiked:U}),await v6(n.id,B,P)},y=U=>{i([]),e(P=>!P),t(U)},b=c==null?void 0:c.find(U=>U.userId===n.userId);return C.jsxs(Rv,{className:"mb-6",children:[C.jsx(Iv,{className:"flex flex-col p-3",children:C.jsxs(cc,{className:"text-sm text-center flex justify-start items-center",children:[C.jsx("span",{className:"mr-2",children:C.jsx("img",{src:(b==null?void 0:b.photoURL)||lc,alt:"User profile pic",className:"w-10 h-10 rounded-full border-2 border-slate-800 object-cover"})}),C.jsx("span",{children:(b==null?void 0:b.displayName)||"Guest User"})]})}),C.jsx(Ov,{className:"p-0",children:C.jsx("img",{src:(T=n==null?void 0:n.photos)!=null&&T.length?(A=n==null?void 0:n.photos)==null?void 0:A[0].cdnUrl:"#",alt:""})}),C.jsxs(Dv,{className:"flex flex-col p-3",children:[C.jsxs("div",{className:"flex justify-between w-full mb-3",children:[C.jsx(Um,{className:Yi("mr-3","cursor-pointer hover:fill-red-600",h.isLiked?"fill-red-600":"fill-none"),onClick:()=>m(!h.isLiked)}),C.jsx(iy,{className:"mr-3 cursor-pointer",onClick:()=>y(n==null?void 0:n.id)})]}),C.jsxs("div",{className:"w-full text-sm",children:[h.likes," Likes"]}),C.jsx("div",{className:"w-full text-sm",children:C.jsxs("span",{children:["Guest User: ",n.caption]})})]})]})},jm="/assets/image2-n_CPjltO.jpg",cC="/assets/image3-DgA0XuPA.jpg",uC="/assets/image4-C82QDRdx.jpg",b6="/assets/image5-DZOQ_6Ay.jpg",w6="/assets/image6-D7ViGmDS.jpg",E6="/assets/image7-Bo2YHah9.jpg",T6=()=>C.jsxs("div",{className:"flex justify-between",children:[C.jsx("img",{src:lc,alt:"story image",className:"w-20 h-20 rounded-full border-4 border-slate-800 object-cover"}),C.jsx("img",{src:jm,alt:"story image",className:"w-20 h-20 rounded-full border-4 border-slate-800 object-cover"}),C.jsx("img",{src:cC,alt:"story image",className:"w-20 h-20 rounded-full border-4 border-slate-800 object-cover"}),C.jsx("img",{src:uC,alt:"story image",className:"w-20 h-20 rounded-full border-4 border-slate-800 object-cover"}),C.jsx("img",{src:b6,alt:"story image",className:"w-20 h-20 rounded-full border-4 border-slate-800 object-cover"}),C.jsx("img",{src:w6,alt:"story image",className:"w-20 h-20 rounded-full border-4 border-slate-800 object-cover"}),C.jsx("img",{src:E6,alt:"story image",className:"w-20 h-20 rounded-full border-4 border-slate-800 object-cover"})]});function Mo({className:n,type:e,...t}){return C.jsx("input",{type:e,"data-slot":"input",className:Yi("border-input file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",n),...t})}const A6=()=>{const{user:n}=pr()??{},[e,t]=j.useState([]),[i,s]=j.useState(!1),[o,c]=j.useState(!1),[h,d]=j.useState(""),[m,y]=j.useState(""),[_,b]=j.useState([]),[T,A]=j.useState(!1),[U,P]=j.useState(""),[B,G]=j.useState([]),[Q,ue]=j.useState([]),[V,te]=j.useState([]),k=j.useRef(null);j.useEffect(()=>{n!==null&&I()},[n]),j.useEffect(()=>{(async()=>{if(h)try{A(!0);const O=await BN(h);O!=null&&O.length?b(O):b([])}catch(O){console.log("Error while fetching comments: ",O)}finally{A(!1)}})()},[h,_==null?void 0:_.length]);const I=async()=>{try{s(!0);const de=await g6()||[];t(de)}catch(de){console.log("Error while fetching posts: ",de)}finally{s(!1)}},R=()=>e==null?void 0:e.map(de=>C.jsx(_6,{data:de,setCommentOpen:c,setCurrentPostId:d,setComments:b},de.id)),D=()=>{var de;return(de=_.filter(O=>!O.parentCommentId))==null?void 0:de.map(({id:O,text:W,likes:fe,usersLiked:pe})=>{const ge=_.filter(ve=>ve.parentCommentId===O);return C.jsxs("div",{children:[C.jsx(dE,{id:O,parentCommentId:O,text:W,likes:fe,usersLiked:pe,userId:n==null?void 0:n.uid,handleDelete:()=>H(O),handleLike:()=>N(O,!(n!=null&&n.uid&&pe&&pe!=null&&pe.includes((n==null?void 0:n.uid)||""))),handleEditComment:ve=>{ve.preventDefault(),Be(O)},handleCommentReply:ve=>{ve.preventDefault(),Ue(O)},handleReplyEditCancel:ve=>{ve.preventDefault(),B.includes(O)&&G(ke=>{const Ke=[...ke];return Ke.splice(ke.indexOf(O),1),Ke}),Q.includes(O)&&ue(ke=>{const Ke=[...ke];return Ke.splice(ke.indexOf(O),1),Ke})},handleRepiesToggle:me,loading:U===O,isLiked:n!=null&&n.uid&&pe?pe==null?void 0:pe.includes((n==null?void 0:n.uid)||""):!1,editCommentIds:B,replyCommentIds:Q,currentPostId:h,setComments:b,setEditCommentIds:G,setReplyCommentIds:ue,openReplyIds:V,isAReply:!1}),(ge==null?void 0:ge.length)>0&&V.includes(O)&&C.jsx("div",{className:"ml-16",children:ge==null?void 0:ge.map(ve=>{var ke;return C.jsx(dE,{id:ve.id,parentCommentId:O,text:ve.text,likes:ve.likes,usersLiked:ve.usersLiked,userId:n==null?void 0:n.uid,handleDelete:()=>H(ve.id),handleLike:()=>{var Ke;return N(ve.id,!(n!=null&&n.uid&&ve.usersLiked&&(Ke=ve.usersLiked)!=null&&Ke.includes((n==null?void 0:n.uid)||"")))},handleEditComment:Ke=>{Ke.preventDefault(),Be(ve.id)},handleCommentReply:Ke=>{Ke.preventDefault(),Ue(ve.id)},handleReplyEditCancel:Ke=>{Ke.preventDefault(),B.includes(ve.id)&&G(Xe=>{const He=[...Xe];return He.splice(Xe.indexOf(ve.id),1),He}),Q.includes(ve.id)&&ue(Xe=>{const He=[...Xe];return He.splice(Xe.indexOf(ve.id),1),He})},loading:U===ve.id,isLiked:n!=null&&n.uid?(ke=ve.usersLiked)==null?void 0:ke.includes(n==null?void 0:n.uid):!1,editCommentIds:B,replyCommentIds:Q,currentPostId:h,setComments:b,setEditCommentIds:G,setReplyCommentIds:ue,isAReply:!0,openReplyIds:V,handleRepiesToggle:me},ve.id)})})]},O)})},L=de=>{de.ctrlKey&&de.key==="Enter"&&ae(de)},H=async de=>{if(confirm("This action is not reversible. Do you want to continue?"))try{P(de),A(!0),await GN(de),b(O=>O.filter(W=>W.id!==de))}catch(O){console.log("Error happened while deleting comment!: ",O)}finally{P(""),A(!1)}},N=async(de,O=!1)=>{if(n!=null&&n.uid)try{P(de);const W=_.find(ge=>ge.id===de);if(!W)return;const fe=(W==null?void 0:W.usersLiked)instanceof Array?[...W.usersLiked]:[];O?fe.push(n==null?void 0:n.uid):fe.splice(fe==null?void 0:fe.indexOf(n==null?void 0:n.uid),1);const pe=(W==null?void 0:W.likes)+(O?1:-1);W&&(b(ge=>ge.map((ve,ke)=>(_==null?void 0:_.indexOf(W))===ke?{...ve,usersLiked:fe,likes:pe}:ve)),await HN(de,fe,pe))}catch(W){console.log("Error while updating comment likes: ",W)}finally{P("")}},Be=async de=>{if(Q.includes(de))return;const O=_.find(W=>W.id===de);if(O)try{B.includes(de)?G(W=>{const fe=[...W];return fe.splice(W.indexOf(O.id),1),fe}):G(W=>[...W,de])}catch(W){console.log("Error while editing comment: ",W)}},Ue=async de=>{if(B.includes(de))return;const O=_.find(W=>W.id===de);if(O)try{Q.includes(de)?ue(W=>{const fe=[...W];return fe.splice(W.indexOf(O.id),1),fe}):ue(W=>[...W,de])}catch(W){console.log("Error while replying comment: ",W)}},ae=async de=>{de.preventDefault();try{const O=m.trim();if(O==="")throw Error("You cannot add emty comment!");A(!0);const W={parentCommentId:null,postId:h,text:O,usersLiked:[],likes:0,createdAt:new Date,updatedAt:new Date};await QS(W),b(fe=>[...fe,{id:"",...W}]),y("")}catch(O){console.log("Error while creating comment: ",O)}finally{A(!1)}},we=async()=>{c(!1),ue([]),G([])},me=de=>{te(O=>{const W=[...O],fe=W.indexOf(de);return fe>-1?W.splice(fe,1):W.push(de),W})};return C.jsxs(Vh,{children:[C.jsxs("div",{className:"flex flex-col",children:[C.jsxs("div",{className:"relative mb-6 w-full text-gray-600",children:[C.jsx(Mo,{className:"border-2 border-gray-300 bg-white h-10 px-5 pr-16 rounded-sm text-base focus:outline-none",placeholder:"search",type:"search",name:"search"}),C.jsx("button",{title:"search",type:"submit",className:"absolute right-2 5 top-2 5",children:C.jsx(sP,{className:"w-5 h-5 text-gray-400"})})]}),C.jsxs("div",{className:"mb-5 overflow-y-auto",children:[C.jsx("h2",{className:"mb-5",children:"Stories"}),C.jsx(T6,{})]}),C.jsxs("div",{className:"mb-5",children:[C.jsx("h2",{className:"mb-5",children:"Feed"}),C.jsx("div",{className:"w-full flex justify-center",children:C.jsx("div",{className:"flex flex-col max-w-sm-rounded-sm overflow-hidden",children:i?C.jsx(hr,{color:""}):e!=null&&e.length?R():C.jsx("p",{children:"Post added by users will be shown here..."})})})]})]}),C.jsxs(i6,{onClose:we,isOpen:o,modalTitle:"Comments",children:[C.jsx("div",{className:`min-h-64 mt-0 mb-4${_!=null&&_.length?" max-h-64 overflow-auto":" text-center"}`,children:_!=null&&_.length?D():C.jsxs(C.Fragment,{children:[C.jsx("p",{className:"text-lg",children:"No comments yet."}),C.jsx("h3",{className:"text-slate-500 text-2xl",children:"Start the Conversation..."})]})}),C.jsx("form",{onSubmit:ae,onKeyDown:L,className:"mb-4",children:C.jsxs("div",{className:"flex justify-between items-end gap-4 w-full border-b-2 border-gray-950 mx-auto relative px-2",children:[T&&C.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:C.jsx(hr,{color:""})}),C.jsx(Vm,{ref:k,value:m,onChange:de=>y(de.target.value),placeholder:"Write your view here...",className:"text-lg! text-gray-500 rounded-none! border-0 border-gray-950 resize-none field-sizing-content h-fit min-h-fit box-shadow-none px-2! py-0!"}),C.jsx(Mn,{type:"submit",className:"bg-transparent! border-0 p-1! w-fit h-fit box-shadow-none cursor-pointer group hover:bg-slate-600!",disabled:(m==null?void 0:m.trim())===""||T,children:C.jsx(oP,{className:"text-slate-600 group-hover:text-white w-[23px] h-[23px]"})})]})})]})]})},hC=({children:n})=>C.jsx("div",{className:"bg-slate-800 w-full h-screen",children:C.jsx("div",{className:"container mx-auto p-6 h-full flex",children:C.jsxs("div",{className:"flex justify-center items-center w-full",children:[C.jsx("div",{className:"p-6 w-2/3 hidden lg:block",children:C.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[C.jsx("img",{alt:"People image",className:" w-2/3 h-auto aspect-video rounded-3xl place-self-end",src:jm}),C.jsx("img",{alt:"People image",className:" w-2/4 h-auto aspect-auto rounded-3xl",src:lc}),C.jsx("img",{alt:"People image",className:" w-2/4 h-auto aspect-auto rounded-3xl place-self-end",src:uC}),C.jsx("img",{alt:"People image",className:" w-2/3 h-auto aspect-video rounded-3xl",src:cC})]})}),C.jsx("div",{className:"max-w-sm rounded-xl border bg-card text-card-foreground shadow-sm",children:n})]})})}),dC={google:n=>C.jsx("svg",{role:"img",viewBox:"0 0 24 24",...n,children:C.jsx("path",{fill:"currentColor",d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"})})};var S6=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],C6=S6.reduce((n,e)=>{const t=j.forwardRef((i,s)=>{const{asChild:o,...c}=i,h=o?Sv:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),C.jsx(h,{...c,ref:s})});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{}),x6="Label",lr=j.forwardRef((n,e)=>C.jsx(C6.label,{...n,ref:e,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||((s=n.onMouseDown)==null||s.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));lr.displayName=x6;const R6={email:"",password:""},I6=()=>{const n=Go(),{googleSignIn:e,logIn:t}=pr(),[i,s]=j.useState(R6),[o,c]=j.useState(!1),h=y=>{var _,b;s({...i,[y.target.name]:((b=(_=y.target)==null?void 0:_.value)==null?void 0:b.trim())||""})},d=async y=>{y.preventDefault();try{c(!0);const{email:_,password:b}=i;if(!_||!b)throw new Error("Please enter valid credentials!");await t(_,b),n("/")}catch(_){console.log("Error while loggin in: ",_)}finally{c(!1)}},m=async y=>{y.preventDefault();try{c(!0),await e(),n("/")}catch(_){console.log("Error while signing in with google: ",_)}finally{c(!1)}};return C.jsx(hC,{children:C.jsxs(Rv,{children:[C.jsx(Iv,{className:"space-y-6",children:C.jsx(cc,{className:"text-2xl m-auto",children:"Photogram"})}),C.jsxs("form",{onSubmit:d,children:[C.jsxs(Ov,{className:"grid gap-4",children:[C.jsxs("div",{className:"grid gap-2",children:[C.jsx(lC,{children:"Sign In using Google"}),C.jsxs(Mn,{type:"button",className:"cursor-pointer",variant:"outline",onClick:m,children:[C.jsx(dC.google,{}),"Google"]})]}),C.jsxs("div",{className:"relative",children:[C.jsx("div",{className:"absolute inset-0 flex items-center",children:C.jsx("span",{className:"w-full border-t"})}),C.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:C.jsx("span",{className:"bg-card px-2 text-muted-foreground",children:"Or"})})]}),C.jsxs("div",{className:"grid gap-2",children:[C.jsx(lr,{htmlFor:"email",children:"Email"}),C.jsx(Mo,{name:"email",type:"email",placeholder:"m@example.com",value:i.email,onChange:h})]}),C.jsxs("div",{className:"grid gap-2",children:[C.jsx(lr,{htmlFor:"password",children:"Password"}),C.jsx(Mo,{name:"password",type:"password",value:i.password,onChange:h})]})]}),C.jsxs(Dv,{className:"flex flex-col gap-4 mt-4",children:[C.jsxs(Mn,{className:"w-full cursor-pointer",type:"submit",children:[o?C.jsx(hr,{color:"#ffffff"}):"",o?"Logging you in...":"Login"]}),C.jsxs(cc,{children:["Don't have an account? ",C.jsx(Lo,{to:"/register",children:"Sign Up"})]})]})]})]})})},fC=()=>{const{user:n}=pr(),[e,t]=j.useState([]),[i,s]=j.useState(!0);j.useEffect(()=>{n!==null&&o(n.uid)},[]);const o=async c=>{try{const h=await y6(c),d=[];h.size>0&&h.forEach(m=>{const y=m.data(),_={id:m.id,...y};d.push(_),t(d)})}catch(h){console.log("Error while fetching your posts: ",h)}finally{s(!1)}};return{loading:i,data:e}},O6=()=>{const{loading:n,data:e}=fC(),t=()=>e==null?void 0:e.map(i=>{var s,o;return C.jsxs("div",{className:"relative",children:[C.jsx("div",{className:"group absolute transition-all duration-200 bg-transparent hover:bg-slate-950 hover:opacity-75 top-0 left-0 bottom-0 right-0 w-full h-full",children:C.jsxs("div",{className:"flex justify-center items-center gap-2 w-full h-full",children:[C.jsx("div",{className:"hidden group-hover:block text-white text-2xl",children:i.likes}),C.jsx(Um,{className:"hidden group-hover:block fill-white w-7 h-7"})]})}),C.jsx("img",{src:`${(s=i==null?void 0:i.photos[0])==null?void 0:s.cdnUrl}/-/progressive/yes/-/scale_crop/300x300/center/`,alt:"posted photo"})]},(o=i==null?void 0:i.photos[0])==null?void 0:o.uuid)});return C.jsx(Vh,{children:C.jsx("div",{className:"flex justify-center",children:C.jsxs("div",{className:"border max-w-3xl w-full",children:[C.jsx("h3",{className:"bg-slate-800 text-white text-center text-lg p-2",children:"My Photos"}),C.jsx("div",{className:"p-8 relative",children:n?C.jsx("div",{className:"flex justify-center items-center bg-transparent",children:C.jsx(hr,{color:"text-slate-800"})}):e!=null&&e.length?C.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 relative",children:t()}):C.jsx("p",{className:"text-slate-800 text-center absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:"Your posted photos will show here..."})})]})})})};var D6=Object.defineProperty,k6=(n,e,t)=>e in n?D6(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,kv=(n,e,t)=>(k6(n,typeof e!="symbol"?e+"":e,t),t);function M6(n){let e=t=>{var i;for(let s in t)((i=t[s])==null?void 0:i.constructor)===Object&&(t[s]=e(t[s]));return{...t}};return e(n)}var St=class{constructor(n){n.constructor===Object?this.store=M6(n):(this._storeIsProxy=!0,this.store=n),this.callbackMap=Object.create(null)}static warn(n,e){console.warn(`Symbiote Data: cannot ${n}. Prop name: `+e)}read(n){return!this._storeIsProxy&&!this.store.hasOwnProperty(n)?(St.warn("read",n),null):this.store[n]}has(n){return this._storeIsProxy?this.store[n]!==void 0:this.store.hasOwnProperty(n)}add(n,e,t=!1){!t&&Object.keys(this.store).includes(n)||(this.store[n]=e,this.notify(n))}pub(n,e){if(!this._storeIsProxy&&!this.store.hasOwnProperty(n)){St.warn("publish",n);return}this.store[n]=e,this.notify(n)}multiPub(n){for(let e in n)this.pub(e,n[e])}notify(n){this.callbackMap[n]&&this.callbackMap[n].forEach(e=>{e(this.store[n])})}sub(n,e,t=!0){return!this._storeIsProxy&&!this.store.hasOwnProperty(n)?(St.warn("subscribe",n),null):(this.callbackMap[n]||(this.callbackMap[n]=new Set),this.callbackMap[n].add(e),t&&e(this.store[n]),{remove:()=>{this.callbackMap[n].delete(e),this.callbackMap[n].size||delete this.callbackMap[n]},callback:e})}static registerCtx(n,e=Symbol()){let t=St.globalStore.get(e);return t?console.warn('State: context UID "'+e+'" already in use'):(t=new St(n),St.globalStore.set(e,t)),t}static deleteCtx(n){St.globalStore.delete(n)}static getCtx(n,e=!0){return St.globalStore.get(n)||(e&&console.warn('State: wrong context UID - "'+n+'"'),null)}};St.globalStore=new Map;var Ze=Object.freeze({BIND_ATTR:"set",ATTR_BIND_PRFX:"@",EXT_DATA_CTX_PRFX:"*",NAMED_DATA_CTX_SPLTR:"/",CTX_NAME_ATTR:"ctx-name",CTX_OWNER_ATTR:"ctx-owner",CSS_CTX_PROP:"--ctx-name",EL_REF_ATTR:"ref",AUTO_TAG_PRFX:"sym",REPEAT_ATTR:"repeat",REPEAT_ITEM_TAG_ATTR:"repeat-item-tag",SET_LATER_KEY:"__toSetLater__",USE_TPL:"use-template",ROOT_STYLE_ATTR_NAME:"sym-component"}),mC="1234567890QWERTYUIOPASDFGHJKLZXCVBNMqwertyuiopasdfghjklzxcvbnm",N6=mC.length-1,$h=class{static generate(n="XXXXXXXXX-XXX"){let e="";for(let t=0;t<n.length;t++)e+=n[t]==="-"?n[t]:mC.charAt(Math.random()*N6);return e}};function pC(n,e,t){let i=!0,s,o=e.split(".");return o.forEach((c,h)=>{h<o.length-1?n=n[c]:s=c}),n?n[s]=t:i=!1,i}function P6(n){return n.split("-").map((e,t)=>e&&t?e[0].toUpperCase()+e.slice(1):e).join("").split("_").map((e,t)=>e&&t?e.toUpperCase():e).join("")}function L6(n,e){[...n.querySelectorAll(`[${Ze.REPEAT_ATTR}]`)].forEach(t=>{let i=t.getAttribute(Ze.REPEAT_ITEM_TAG_ATTR),s;if(i&&(s=window.customElements.get(i)),!s){s=class extends e.BaseComponent{constructor(){super(),i||(this.style.display="contents")}};let c=t.innerHTML;s.template=c,s.reg(i)}for(;t.firstChild;)t.firstChild.remove();let o=t.getAttribute(Ze.REPEAT_ATTR);e.sub(o,c=>{if(!c){for(;t.firstChild;)t.firstChild.remove();return}let h=[...t.children],d,m=y=>{y.forEach((b,T)=>{if(h[T])if(h[T].set$)setTimeout(()=>{h[T].set$(b)});else for(let A in b)h[T][A]=b[A];else{d||(d=new DocumentFragment);let A=new s;Object.assign(A.init$,b),d.appendChild(A)}}),d&&t.appendChild(d);let _=h.slice(y.length,h.length);for(let b of _)b.remove()};if(c.constructor===Array)m(c);else if(c.constructor===Object){let y=[];for(let _ in c){let b=c[_];Object.defineProperty(b,"_KEY_",{value:_,enumerable:!0}),y.push(b)}m(y)}else console.warn("Symbiote repeat data type error:"),console.log(c)}),t.removeAttribute(Ze.REPEAT_ATTR),t.removeAttribute(Ze.REPEAT_ITEM_TAG_ATTR)})}var fE="__default__";function U6(n,e){if(e.shadowRoot)return;let t=[...n.querySelectorAll("slot")];if(!t.length)return;let i={};t.forEach(s=>{let o=s.getAttribute("name")||fE;i[o]={slot:s,fr:document.createDocumentFragment()}}),e.initChildren.forEach(s=>{var o;let c=fE;s instanceof Element&&s.hasAttribute("slot")&&(c=s.getAttribute("slot"),s.removeAttribute("slot")),(o=i[c])==null||o.fr.appendChild(s)}),Object.values(i).forEach(s=>{if(s.fr.childNodes.length)s.slot.parentNode.replaceChild(s.fr,s.slot);else if(s.slot.childNodes.length){let o=document.createDocumentFragment();o.append(...s.slot.childNodes),s.slot.parentNode.replaceChild(o,s.slot)}else s.slot.remove()})}function V6(n,e){[...n.querySelectorAll(`[${Ze.EL_REF_ATTR}]`)].forEach(t=>{let i=t.getAttribute(Ze.EL_REF_ATTR);e.ref[i]=t,t.removeAttribute(Ze.EL_REF_ATTR)})}function $6(n,e){[...n.querySelectorAll(`[${Ze.BIND_ATTR}]`)].forEach(t=>{let s=t.getAttribute(Ze.BIND_ATTR).split(";");[...t.attributes].forEach(o=>{if(o.name.startsWith("-")&&o.value){let c=P6(o.name.replace("-",""));s.push(c+":"+o.value),t.removeAttribute(o.name)}}),s.forEach(o=>{if(!o)return;let c=o.split(":").map(y=>y.trim()),h=c[0],d;h.indexOf(Ze.ATTR_BIND_PRFX)===0&&(d=!0,h=h.replace(Ze.ATTR_BIND_PRFX,""));let m=c[1].split(",").map(y=>y.trim());for(let y of m){let _;y.startsWith("!!")?(_="double",y=y.replace("!!","")):y.startsWith("!")&&(_="single",y=y.replace("!","")),e.sub(y,b=>{_==="double"?b=!!b:_==="single"&&(b=!b),d?(b==null?void 0:b.constructor)===Boolean?b?t.setAttribute(h,""):t.removeAttribute(h):t.setAttribute(h,b):pC(t,h,b)||(t[Ze.SET_LATER_KEY]||(t[Ze.SET_LATER_KEY]=Object.create(null)),t[Ze.SET_LATER_KEY][h]=b)})}}),t.removeAttribute(Ze.BIND_ATTR)})}var Mf="{{",Yu="}}",j6="skip-text";function z6(n){let e,t=[],i=document.createTreeWalker(n,NodeFilter.SHOW_TEXT,{acceptNode:s=>{var o;return!((o=s.parentElement)!=null&&o.hasAttribute(j6))&&s.textContent.includes(Mf)&&s.textContent.includes(Yu)&&1}});for(;e=i.nextNode();)t.push(e);return t}var F6=function(n,e){z6(n).forEach(i=>{let s=[],o;for(;i.textContent.includes(Yu);)i.textContent.startsWith(Mf)?(o=i.textContent.indexOf(Yu)+Yu.length,i.splitText(o),s.push(i)):(o=i.textContent.indexOf(Mf),i.splitText(o)),i=i.nextSibling;s.forEach(c=>{let h=c.textContent.replace(Mf,"").replace(Yu,"");c.textContent="",e.sub(h,d=>{c.textContent=d})})})},B6=[L6,U6,V6,$6,F6],nm="'",uc='"',H6=/\\([0-9a-fA-F]{1,6} ?)/g;function q6(n){return(n[0]===uc||n[0]===nm)&&(n[n.length-1]===uc||n[n.length-1]===nm)}function G6(n){return(n[0]===uc||n[0]===nm)&&(n=n.slice(1)),(n[n.length-1]===uc||n[n.length-1]===nm)&&(n=n.slice(0,-1)),n}function K6(n){let e="",t="";for(var i=0;i<n.length;i++){const s=n[i+1];n[i]==="\\"&&s==='"'?(e+='\\"',i++):n[i]==='"'&&t!=="\\"?e+='\\"':e+=n[i],t=n[i]}return e}function Y6(n){let e=n;q6(n)&&(e=G6(e),e=e.replace(H6,(t,i)=>String.fromCodePoint(parseInt(i.trim(),16))),e=e.replaceAll(`\\
`,"\\n"),e=K6(e),e=uc+e+uc);try{return JSON.parse(e)}catch{throw new Error(`Failed to parse CSS property value: ${e}. Original input: ${n}`)}}var mE=0,$l=null,ps=null,ma=class extends HTMLElement{constructor(){super(),kv(this,"updateCssData",()=>{var n;this.dropCssDataCache(),(n=this.__boundCssProps)==null||n.forEach(e=>{let t=this.getCssData(this.__extractCssName(e),!0);t!==null&&this.$[e]!==t&&(this.$[e]=t)})}),this.init$=Object.create(null),this.cssInit$=Object.create(null),this.tplProcessors=new Set,this.ref=Object.create(null),this.allSubs=new Set,this.pauseRender=!1,this.renderShadow=!1,this.readyToDestroy=!0,this.processInnerHtml=!1,this.allowCustomTemplate=!1,this.ctxOwner=!1}get BaseComponent(){return ma}initCallback(){}__initCallback(){var n;this.__initialized||(this.__initialized=!0,(n=this.initCallback)==null||n.call(this))}render(n,e=this.renderShadow){let t;if((e||this.constructor.__shadowStylesUrl)&&!this.shadowRoot&&this.attachShadow({mode:"open"}),this.allowCustomTemplate){let s=this.getAttribute(Ze.USE_TPL);if(s){let o=this.getRootNode(),c=(o==null?void 0:o.querySelector(s))||document.querySelector(s);c?n=c.content.cloneNode(!0):console.warn(`Symbiote template "${s}" is not found...`)}}if(this.processInnerHtml)for(let s of this.tplProcessors)s(this,this);if(n||this.constructor.template){if(this.constructor.template&&!this.constructor.__tpl&&(this.constructor.__tpl=document.createElement("template"),this.constructor.__tpl.innerHTML=this.constructor.template),(n==null?void 0:n.constructor)===DocumentFragment)t=n;else if((n==null?void 0:n.constructor)===String){let s=document.createElement("template");s.innerHTML=n,t=s.content.cloneNode(!0)}else this.constructor.__tpl&&(t=this.constructor.__tpl.content.cloneNode(!0));for(let s of this.tplProcessors)s(t,this)}let i=()=>{t&&(e&&this.shadowRoot.appendChild(t)||this.appendChild(t)),this.__initCallback()};if(this.constructor.__shadowStylesUrl){e=!0;let s=document.createElement("link");s.rel="stylesheet",s.href=this.constructor.__shadowStylesUrl,s.onload=i,this.shadowRoot.prepend(s)}else i()}addTemplateProcessor(n){this.tplProcessors.add(n)}get autoCtxName(){return this.__autoCtxName||(this.__autoCtxName=$h.generate(),this.style.setProperty(Ze.CSS_CTX_PROP,`'${this.__autoCtxName}'`)),this.__autoCtxName}get cssCtxName(){return this.getCssData(Ze.CSS_CTX_PROP,!0)}get ctxName(){var n;let e=((n=this.getAttribute(Ze.CTX_NAME_ATTR))==null?void 0:n.trim())||this.cssCtxName||this.__cachedCtxName||this.autoCtxName;return this.__cachedCtxName=e,e}get localCtx(){return this.__localCtx||(this.__localCtx=St.registerCtx({},this)),this.__localCtx}get nodeCtx(){return St.getCtx(this.ctxName,!1)||St.registerCtx({},this.ctxName)}static __parseProp(n,e){let t,i;if(n.startsWith(Ze.EXT_DATA_CTX_PRFX))t=e.nodeCtx,i=n.replace(Ze.EXT_DATA_CTX_PRFX,"");else if(n.includes(Ze.NAMED_DATA_CTX_SPLTR)){let s=n.split(Ze.NAMED_DATA_CTX_SPLTR);t=St.getCtx(s[0]),i=s[1]}else t=e.localCtx,i=n;return{ctx:t,name:i}}sub(n,e,t=!0){let i=o=>{this.isConnected&&e(o)},s=ma.__parseProp(n,this);s.ctx.has(s.name)?this.allSubs.add(s.ctx.sub(s.name,i,t)):window.setTimeout(()=>{this.allSubs.add(s.ctx.sub(s.name,i,t))})}notify(n){let e=ma.__parseProp(n,this);e.ctx.notify(e.name)}has(n){let e=ma.__parseProp(n,this);return e.ctx.has(e.name)}add(n,e,t=!1){let i=ma.__parseProp(n,this);i.ctx.add(i.name,e,t)}add$(n,e=!1){for(let t in n)this.add(t,n[t],e)}get $(){if(!this.__stateProxy){let n=Object.create(null);this.__stateProxy=new Proxy(n,{set:(e,t,i)=>{let s=ma.__parseProp(t,this);return s.ctx.pub(s.name,i),!0},get:(e,t)=>{let i=ma.__parseProp(t,this);return i.ctx.read(i.name)}})}return this.__stateProxy}set$(n,e=!1){for(let t in n){let i=n[t];e||![String,Number,Boolean].includes(i==null?void 0:i.constructor)?this.$[t]=i:this.$[t]!==i&&(this.$[t]=i)}}get __ctxOwner(){return this.ctxOwner||this.hasAttribute(Ze.CTX_OWNER_ATTR)&&this.getAttribute(Ze.CTX_OWNER_ATTR)!=="false"}__initDataCtx(){let n=this.constructor.__attrDesc;if(n)for(let e of Object.values(n))Object.keys(this.init$).includes(e)||(this.init$[e]="");for(let e in this.init$)if(e.startsWith(Ze.EXT_DATA_CTX_PRFX))this.nodeCtx.add(e.replace(Ze.EXT_DATA_CTX_PRFX,""),this.init$[e],this.__ctxOwner);else if(e.includes(Ze.NAMED_DATA_CTX_SPLTR)){let t=e.split(Ze.NAMED_DATA_CTX_SPLTR),i=t[0].trim(),s=t[1].trim();if(i&&s){let o=St.getCtx(i,!1);o||(o=St.registerCtx({},i)),o.add(s,this.init$[e])}}else this.localCtx.add(e,this.init$[e]);for(let e in this.cssInit$)this.bindCssData(e,this.cssInit$[e]);this.__dataCtxInitialized=!0}connectedCallback(){var n;if(this.isConnected){if(this.__disconnectTimeout&&window.clearTimeout(this.__disconnectTimeout),!this.connectedOnce){let e=(n=this.getAttribute(Ze.CTX_NAME_ATTR))==null?void 0:n.trim();if(e&&this.style.setProperty(Ze.CSS_CTX_PROP,`'${e}'`),this.__initDataCtx(),this[Ze.SET_LATER_KEY]){for(let t in this[Ze.SET_LATER_KEY])pC(this,t,this[Ze.SET_LATER_KEY][t]);delete this[Ze.SET_LATER_KEY]}this.initChildren=[...this.childNodes];for(let t of B6)this.addTemplateProcessor(t);if(this.pauseRender)this.__initCallback();else if(this.constructor.__rootStylesLink){let t=this.getRootNode();if(!t)return;if(t==null?void 0:t.querySelector(`link[${Ze.ROOT_STYLE_ATTR_NAME}="${this.constructor.is}"]`)){this.render();return}let s=this.constructor.__rootStylesLink.cloneNode(!0);s.setAttribute(Ze.ROOT_STYLE_ATTR_NAME,this.constructor.is),s.onload=()=>{this.render()},t.nodeType===Node.DOCUMENT_NODE?t.head.appendChild(s):t.prepend(s)}else this.render()}this.connectedOnce=!0}}destroyCallback(){}disconnectedCallback(){this.connectedOnce&&(this.dropCssDataCache(),this.readyToDestroy&&(this.__disconnectTimeout&&window.clearTimeout(this.__disconnectTimeout),this.__disconnectTimeout=window.setTimeout(()=>{this.destroyCallback();for(let n of this.allSubs)n.remove(),this.allSubs.delete(n);for(let n of this.tplProcessors)this.tplProcessors.delete(n);ps==null||ps.delete(this.updateCssData),ps!=null&&ps.size||($l==null||$l.disconnect(),$l=null,ps=null)},100)))}static reg(n,e=!1){n||(mE++,n=`${Ze.AUTO_TAG_PRFX}-${mE}`),this.__tag=n;let t=window.customElements.get(n);if(t){!e&&t!==this&&console.warn([`Element with tag name "${n}" already registered.`,`You're trying to override it with another class "${this.name}".`,"This is most likely a mistake.","New element will not be registered."].join(`
`));return}window.customElements.define(n,e?class extends this{}:this)}static get is(){return this.__tag||this.reg(),this.__tag}static bindAttributes(n){this.observedAttributes=Object.keys(n),this.__attrDesc=n}attributeChangedCallback(n,e,t){var i;if(e===t)return;let s=(i=this.constructor.__attrDesc)==null?void 0:i[n];s?this.__dataCtxInitialized?this.$[s]=t:this.init$[s]=t:this[n]=t}getCssData(n,e=!1){if(this.__cssDataCache||(this.__cssDataCache=Object.create(null)),!Object.keys(this.__cssDataCache).includes(n)){this.__computedStyle||(this.__computedStyle=window.getComputedStyle(this));let t=this.__computedStyle.getPropertyValue(n).trim();try{this.__cssDataCache[n]=Y6(t)}catch{!e&&console.warn(`CSS Data error: ${n}`),this.__cssDataCache[n]=null}}return this.__cssDataCache[n]}__extractCssName(n){return n.split("--").map((e,t)=>t===0?"":e).join("--")}__initStyleAttrObserver(){ps||(ps=new Set),ps.add(this.updateCssData),$l||($l=new MutationObserver(n=>{n[0].type==="attributes"&&ps.forEach(e=>{e()})}),$l.observe(document,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style"]}))}bindCssData(n,e=""){this.__boundCssProps||(this.__boundCssProps=new Set),this.__boundCssProps.add(n);let t=this.getCssData(this.__extractCssName(n),!0);t===null&&(t=e),this.add(n,t),this.__initStyleAttrObserver()}dropCssDataCache(){this.__cssDataCache=null,this.__computedStyle=null}defineAccessor(n,e,t){let i="__"+n;this[i]=this[n],Object.defineProperty(this,n,{set:s=>{this[i]=s,t?window.setTimeout(()=>{e==null||e(s)}):e==null||e(s)},get:()=>this[i]}),this[n]=this[i]}static set shadowStyles(n){let e=new Blob([n],{type:"text/css"});this.__shadowStylesUrl=URL.createObjectURL(e)}static set rootStyles(n){if(!this.__rootStylesLink){let e=new Blob([n],{type:"text/css"}),t=URL.createObjectURL(e),i=document.createElement("link");i.href=t,i.rel="stylesheet",this.__rootStylesLink=i}}},jh=ma;kv(jh,"template");function Mv(n,e){for(let t in e)t.includes("-")?n.style.setProperty(t,e[t]):n.style[t]=e[t]}function X6(n,e){for(let t in e)e[t].constructor===Boolean?e[t]?n.setAttribute(t,""):n.removeAttribute(t):n.setAttribute(t,e[t])}function gC(n={tag:"div"}){let e=document.createElement(n.tag);if(n.attributes&&X6(e,n.attributes),n.styles&&Mv(e,n.styles),n.properties)for(let t in n.properties)e[t]=n.properties[t];return n.processors&&n.processors.forEach(t=>{t(e)}),n.children&&n.children.forEach(t=>{let i=gC(t);e.appendChild(i)}),e}var yC="idb-store-ready",Q6="symbiote-db",W6="symbiote-idb-update_",Z6=class{_notifyWhenReady(n=null){window.dispatchEvent(new CustomEvent(yC,{detail:{dbName:this.name,storeName:this.storeName,event:n}}))}get _updEventName(){return W6+this.name}_getUpdateEvent(n){return new CustomEvent(this._updEventName,{detail:{key:this.name,newValue:n}})}_notifySubscribers(n){window.localStorage.removeItem(this.name),window.localStorage.setItem(this.name,n),window.dispatchEvent(this._getUpdateEvent(n))}constructor(n,e){this.name=n,this.storeName=e,this.version=1,this.request=window.indexedDB.open(this.name,this.version),this.request.onupgradeneeded=t=>{this.db=t.target.result,this.objStore=this.db.createObjectStore(e,{keyPath:"_key"}),this.objStore.transaction.oncomplete=i=>{this._notifyWhenReady(i)}},this.request.onsuccess=t=>{this.db=t.target.result,this._notifyWhenReady(t)},this.request.onerror=t=>{console.error(t)},this._subscriptionsMap={},this._updateHandler=t=>{t.key===this.name&&this._subscriptionsMap[t.newValue]&&this._subscriptionsMap[t.newValue].forEach(async s=>{s(await this.read(t.newValue))})},this._localUpdateHandler=t=>{this._updateHandler(t.detail)},window.addEventListener("storage",this._updateHandler),window.addEventListener(this._updEventName,this._localUpdateHandler)}read(n){let t=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).get(n);return new Promise((i,s)=>{t.onsuccess=o=>{var c;(c=o.target.result)!=null&&c._value?i(o.target.result._value):(i(null),console.warn(`IDB: cannot read "${n}"`))},t.onerror=o=>{s(o)}})}write(n,e,t=!1){let i={_key:n,_value:e},o=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).put(i);return new Promise((c,h)=>{o.onsuccess=d=>{t||this._notifySubscribers(n),c(d.target.result)},o.onerror=d=>{h(d)}})}delete(n,e=!1){let i=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).delete(n);return new Promise((s,o)=>{i.onsuccess=c=>{e||this._notifySubscribers(n),s(c)},i.onerror=c=>{o(c)}})}getAll(){let e=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).getAll();return new Promise((t,i)=>{e.onsuccess=s=>{let o=s.target.result;t(o.map(c=>c._value))},e.onerror=s=>{i(s)}})}subscribe(n,e){this._subscriptionsMap[n]||(this._subscriptionsMap[n]=new Set);let t=this._subscriptionsMap[n];return t.add(e),{remove:()=>{t.delete(e),t.size||delete this._subscriptionsMap[n]}}}stop(){window.removeEventListener("storage",this._updateHandler),this._subscriptionsMap=null,vC.clear(this.name)}},vC=class{static get readyEventName(){return yC}static open(n=Q6,e="store"){let t=n+"/"+e;return this._reg[t]||(this._reg[t]=new Z6(n,e)),this._reg[t]}static clear(n){window.indexedDB.deleteDatabase(n);for(let e in this._reg)e.split("/")[0]===n&&delete this._reg[e]}};kv(vC,"_reg",Object.create(null));const _C=n=>{if(typeof n!="string"||!n)return"";let e=n.trim();return e.startsWith("-/")?e=e.slice(2):e.startsWith("/")&&(e=e.slice(1)),e.endsWith("/")&&(e=e.slice(0,e.length-1)),e},Nv=(...n)=>n.filter(e=>typeof e=="string"&&e).map(e=>_C(e)).join("/-/"),Pa=(...n)=>{let e=Nv(...n);return e?`-/${e}/`:""};function Pv(n){let e=new URL(n),t=e.pathname+e.search+e.hash,i=t.lastIndexOf("http"),s=t.lastIndexOf("/"),o="";return i>=0?o=t.slice(i):s>=0&&(o=t.slice(s+1)),o}function bC(n){let e=new URL(n),{pathname:t}=e;const i=t.indexOf("/"),s=t.indexOf("/",i+1);return t.substring(i+1,s)}function wC(n){let e=EC(n),t=new URL(e),i=t.pathname.indexOf("/-/");return i===-1?"":t.pathname.substring(i).slice(1)}function J6(n){return wC(n).split("/-/").filter(Boolean).map(t=>_C(t))}function EC(n){let e=new URL(n),t=Pv(n),i=TC(t)?AC(t).pathname:t;return e.pathname=e.pathname.replace(i,""),e.search="",e.hash="",e.toString()}function TC(n){return n.startsWith("http")}function AC(n){let e=new URL(n);return{pathname:e.origin+e.pathname||"",search:e.search||"",hash:e.hash||""}}const qi=(n,e,t)=>{let i=new URL(EC(n));if(t=t||Pv(n),i.pathname.startsWith("//")&&(i.pathname=i.pathname.replace("//","/")),TC(t)){let s=AC(t);i.pathname=i.pathname+(e||"")+(s.pathname||""),i.search=s.search,i.hash=s.hash}else i.pathname=i.pathname+(e||"")+(t||"");return i.toString()},_h=(n,e)=>{let t=new URL(n);return t.pathname=e+"/",t.toString()},Is=(n,e=",")=>n.trim().split(e).map(t=>t.trim()).filter(t=>t.length>0),Fi=Object.freeze({brightness:0,exposure:0,gamma:100,contrast:0,saturation:0,vibrance:0,warmth:0,enhance:0,filter:0,rotate:0,mirror:!1,flip:!1,crop:void 0}),SC=["enhance","brightness","exposure","gamma","contrast","saturation","vibrance","warmth","filter","mirror","flip","rotate","crop"];function eL(n,e){if(typeof e=="number"){const t=e;return Fi[n]!==t?`${n}/${t}`:""}if(typeof e=="boolean"){const t=e;return Fi[n]!==t?`${n}`:""}if(n==="filter"&&e){const{name:t,amount:i}=e;return Fi.filter===i?"":`${n}/${t}/${i}`}if(n==="crop"&&e){let{dimensions:t,coords:i}=e;return`${n}/${t.join("x")}/${i.join(",")}`}return""}function zm(n){return Nv(...SC.filter(e=>typeof n[e]<"u"&&n[e]!==null).map(e=>{let t=n[e];return eL(e,t)}).filter(e=>!!e))}const CC=Nv("format/auto","progressive/yes"),gs=([n])=>typeof n<"u"?Number(n):void 0,pE=()=>!0,tL=([n,e])=>({name:n,amount:typeof e<"u"?Number(e):100}),nL=([n,e])=>{if(!/\d+x\d+/.test(n)||!/\d+,\d+/.test(e))throw new Error("Crop by aspect ratio, percentage or alignment shortcuts is not supported.");return{dimensions:Is(n,"x").map(Number),coords:Is(e).map(Number)}},iL=Object.freeze({enhance:gs,brightness:gs,exposure:gs,gamma:gs,contrast:gs,saturation:gs,vibrance:gs,warmth:gs,filter:tL,mirror:pE,flip:pE,rotate:gs,crop:nL});function rL(n){const e={};for(const t of n){const[i,...s]=t.split("/");if(!SC.includes(i))continue;const o=i,c=iL[o];try{const h=c(s);e[o]=h}catch(h){console.warn([`Failed to parse URL operation "${t}". It will be ignored.`,h instanceof Error?`Error message: "${h.message}"`:h,"If you need this functionality, please feel free to open an issue at https://github.com/uploadcare/blocks/issues/new"].join(`
`))}}return e}const Xt=Object.freeze({CROP:"crop",TUNING:"tuning",FILTERS:"filters"}),zr=[Xt.CROP,Xt.TUNING,Xt.FILTERS],sL=["brightness","exposure","gamma","contrast","saturation","vibrance","warmth","enhance"],aL=["adaris","briaril","calarel","carris","cynarel","cyren","elmet","elonni","enzana","erydark","fenralan","ferand","galen","gavin","gethriel","iorill","iothari","iselva","jadis","lavra","misiara","namala","nerion","nethari","pamaya","sarnar","sedis","sewen","sorahel","sorlen","tarian","thellassan","varriel","varven","vevera","virkas","yedis","yllara","zatvel","zevcen"],oL=["rotate","mirror","flip"],hc=Object.freeze({brightness:{zero:Fi.brightness,range:[-100,100],keypointsNumber:2},exposure:{zero:Fi.exposure,range:[-500,500],keypointsNumber:2},gamma:{zero:Fi.gamma,range:[0,1e3],keypointsNumber:2},contrast:{zero:Fi.contrast,range:[-100,500],keypointsNumber:2},saturation:{zero:Fi.saturation,range:[-100,500],keypointsNumber:1},vibrance:{zero:Fi.vibrance,range:[-100,500],keypointsNumber:1},warmth:{zero:Fi.warmth,range:[-100,100],keypointsNumber:1},enhance:{zero:Fi.enhance,range:[0,100],keypointsNumber:1},filter:{zero:Fi.filter,range:[0,100],keypointsNumber:1}}),dc=n=>n?n.split(",").map(e=>e.trim()).filter(Boolean):[],bh=n=>n?n.join(","):"",lL="https://ucarecdn.com",cL="https://upload.uploadcare.com",uL="https://social.uploadcare.com",Ca={pubkey:"",multiple:!0,multipleMin:0,multipleMax:Number.MAX_SAFE_INTEGER,confirmUpload:!1,imgOnly:!1,accept:"",externalSourcesPreferredTypes:"",externalSourcesEmbedCss:"",store:"auto",cameraMirror:!1,cameraCapture:"",sourceList:"local, url, camera, dropbox, gdrive",cloudImageEditorTabs:bh(zr),maxLocalFileSizeBytes:0,thumbSize:76,showEmptyList:!1,useLocalImageEditor:!1,useCloudImageEditor:!0,removeCopyright:!1,cropPreset:"",imageShrink:"",modalScrollLock:!0,modalBackdropStrokes:!1,sourceListWrap:!0,remoteTabSessionKey:"",cdnCname:lL,baseUrl:cL,socialBaseUrl:uL,secureSignature:"",secureExpire:"",secureDeliveryProxy:"",retryThrottledRequestMaxTimes:1,multipartMinFileSize:26214400,multipartChunkSize:5242880,maxConcurrentRequests:10,multipartMaxConcurrentRequests:4,multipartMaxAttempts:3,checkForUrlDuplicates:!1,saveUrlForRecurrentUploads:!1,groupOutput:!1,userAgentIntegration:"",debug:!1,metadata:null,localeName:"en",localeDefinitionOverride:null,secureUploadsExpireThreshold:10*60*1e3,secureUploadsSignatureResolver:null,secureDeliveryProxyUrlResolver:null,iconHrefResolver:null,fileValidators:[],collectionValidators:[],cameraModes:"photo, video",defaultCameraMode:null,enableAudioRecording:!0,enableVideoRecording:null,maxVideoRecordingDuration:null,mediaRecorderOptions:null},hL=20,Qt=Object.freeze({FILE_ADDED:"file-added",FILE_REMOVED:"file-removed",FILE_UPLOAD_START:"file-upload-start",FILE_UPLOAD_PROGRESS:"file-upload-progress",FILE_UPLOAD_SUCCESS:"file-upload-success",FILE_UPLOAD_FAILED:"file-upload-failed",FILE_URL_CHANGED:"file-url-changed",MODAL_OPEN:"modal-open",MODAL_CLOSE:"modal-close",DONE_CLICK:"done-click",UPLOAD_CLICK:"upload-click",ACTIVITY_CHANGE:"activity-change",COMMON_UPLOAD_START:"common-upload-start",COMMON_UPLOAD_PROGRESS:"common-upload-progress",COMMON_UPLOAD_SUCCESS:"common-upload-success",COMMON_UPLOAD_FAILED:"common-upload-failed",CHANGE:"change",GROUP_CREATED:"group-created"});class dL{constructor(e){z(this,"_timeoutStore",new Map);z(this,"_targets",new Set);z(this,"_debugPrint",null);this._debugPrint=e}bindTarget(e){this._targets.add(e)}unbindTarget(e){this._targets.delete(e)}_dispatch(e,t){var i;for(const s of this._targets)s.dispatchEvent(new CustomEvent(e,{detail:t}));(i=this._debugPrint)==null||i.call(this,()=>{const s=t&&typeof t=="object"?{...t}:t;return[`event "${e}"`,s]})}emit(e,t,{debounce:i}={}){if(typeof i!="number"&&!i){this._dispatch(e,typeof t=="function"?t():t);return}this._timeoutStore.has(e)&&window.clearTimeout(this._timeoutStore.get(e));const s=typeof i=="number"?i:hL,o=window.setTimeout(()=>{this._dispatch(e,typeof t=="function"?t():t),this._timeoutStore.delete(e)},s);this._timeoutStore.set(e,o)}}function wi(n,e){let t;const i=(...s)=>{clearTimeout(t),t=setTimeout(()=>n(...s),e)};return i.cancel=()=>{clearTimeout(t)},i}const gE="--uploadcare-blocks-window-height";class im{static registerClient(e){this.clientsRegistry.size===0&&this.attachTracker(),this.clientsRegistry.add(e)}static unregisterClient(e){this.clientsRegistry.delete(e),this.clientsRegistry.size===0&&this.detachTracker()}static attachTracker(){window.addEventListener("resize",this.flush,{passive:!0,capture:!0}),this.flush()}static detachTracker(){window.removeEventListener("resize",this.flush,{capture:!0}),document.documentElement.style.removeProperty(gE)}}z(im,"clientsRegistry",new Set),z(im,"flush",wi(()=>{document.documentElement.style.setProperty(gE,`${window.innerHeight}px`)},100));const fL=n=>{var i;const e=new Intl.Locale(n);let t="ltr";return typeof e.getTextInfo=="function"&&e.getTextInfo().direction?t=e.getTextInfo().direction:"textInfo"in e&&((i=e.textInfo)!=null&&i.direction)&&(t=e.textInfo.direction),t},xC=(n,e)=>new Intl.PluralRules(n).select(e),mL=n=>n,cy="{{",RC="}}",yE="plural:";function uy(n,e,t={}){var c;let{openToken:i=cy,closeToken:s=RC,transform:o=mL}=t;for(let h in e){let d=(c=e[h])==null?void 0:c.toString();n=n.replaceAll(i+h+s,typeof d=="string"?o(d):d)}return n}function pL(n){const e=[];let t=n.indexOf(cy);for(;t!==-1;){const i=n.indexOf(RC,t),s=n.substring(t+2,i);if(s.startsWith(yE)){const o=n.substring(t+2,i).replace(yE,""),c=o.substring(0,o.indexOf("(")),h=o.substring(o.indexOf("(")+1,o.indexOf(")"));e.push({variable:s,pluralKey:c,countVariable:h})}t=n.indexOf(cy,i)}return e}const gL=({element:n,attribute:e,onSuccess:t,onTimeout:i,timeout:s=300})=>{const o=n.getAttribute(e);if(o!==null){t(o);return}const c=new MutationObserver(m=>{const y=m[m.length-1];d(y)});c.observe(n,{attributes:!0,attributeFilter:[e]});const h=setTimeout(()=>{c.disconnect(),i()},s),d=m=>{const y=n.getAttribute(e);m.type==="attributes"&&m.attributeName===e&&y!==null&&(clearTimeout(h),c.disconnect(),t(y))}};function vE(n){return Object.prototype.toString.call(n)==="[object Object]"}const yL=/\W|_/g;function vL(n){return n.split(yL).map((e,t)=>e.charAt(0)[t>0?"toUpperCase":"toLowerCase"]()+e.slice(1)).join("")}function _E(n,{ignoreKeys:e}={ignoreKeys:[]}){return Array.isArray(n)?n.map(t=>Ns(t,{ignoreKeys:e})):n}function Ns(n,{ignoreKeys:e}={ignoreKeys:[]}){if(Array.isArray(n))return _E(n,{ignoreKeys:e});if(!vE(n))return n;const t={};for(const i of Object.keys(n)){let s=n[i];if(e.includes(i)){t[i]=s;continue}vE(s)?s=Ns(s,{ignoreKeys:e}):Array.isArray(s)&&(s=_E(s,{ignoreKeys:e})),t[vL(i)]=s}return t}const _L=n=>new Promise(e=>setTimeout(e,n));function IC({libraryName:n,libraryVersion:e,userAgent:t,publicKey:i="",integration:s=""}){const o="JavaScript";if(typeof t=="string")return t;if(typeof t=="function")return t({publicKey:i,libraryName:n,libraryVersion:e,languageName:o,integration:s});const c=[n,e,i].filter(Boolean).join("/"),h=[o,s].filter(Boolean).join("; ");return`${c} (${h})`}const bL={factor:2,time:100};function wL(n,e=bL){let t=0;function i(s){const o=Math.round(e.time*e.factor**t);return s({attempt:t,retry:h=>_L(h??o).then(()=>(t+=1,i(s)))})}return i(n)}class Lv extends Error{}class zh extends Lv{constructor(t){super();z(this,"originalProgressEvent");this.name="NetworkError",this.message="Network error",Object.setPrototypeOf(this,zh.prototype),this.originalProgressEvent=t}}const Fm=(n,e)=>{n&&(n.aborted?Promise.resolve().then(e):n.addEventListener("abort",()=>e(),{once:!0}))};class Ho extends Lv{constructor(t="Request canceled"){super(t);z(this,"isCancel",!0);this.name="CancelError",Object.setPrototypeOf(this,Ho.prototype)}}const EL=500,OC=({check:n,interval:e=EL,timeout:t,signal:i})=>new Promise((s,o)=>{let c,h;Fm(i,()=>{c&&clearTimeout(c),o(new Ho("Poll cancelled"))}),t&&(h=setTimeout(()=>{c&&clearTimeout(c),o(new Ho("Timed out"))},t));const d=()=>{try{Promise.resolve(n(i)).then(m=>{m?(h&&clearTimeout(h),s(m)):c=setTimeout(d,e)}).catch(m=>{h&&clearTimeout(h),o(m)})}catch(m){h&&clearTimeout(h),o(m)}};c=setTimeout(d,0)}),mt={baseCDN:"https://ucarecdn.com",baseURL:"https://upload.uploadcare.com",retryThrottledRequestMaxTimes:1,retryNetworkErrorMaxTimes:3,multipartMinFileSize:25*1024*1024,multipartChunkSize:5*1024*1024,maxConcurrentRequests:4,pusherKey:"79ae88bd931ea68464d9"},Bm="application/octet-stream",DC="original",Fa=({method:n,url:e,data:t,headers:i={},signal:s,onProgress:o})=>new Promise((c,h)=>{const d=new XMLHttpRequest,m=(n==null?void 0:n.toUpperCase())||"GET";let y=!1;d.open(m,e,!0),i&&Object.entries(i).forEach(_=>{const[b,T]=_;typeof T<"u"&&!Array.isArray(T)&&d.setRequestHeader(b,T)}),d.responseType="text",Fm(s,()=>{y=!0,d.abort(),h(new Ho)}),d.onload=()=>{if(d.status!=200)h(new Error(`Error ${d.status}: ${d.statusText}`));else{const _={method:m,url:e,data:t,headers:i||void 0,signal:s,onProgress:o},b=d.getAllResponseHeaders().trim().split(/[\r\n]+/),T={};b.forEach(function(P){const B=P.split(": "),G=B.shift(),Q=B.join(": ");G&&typeof G<"u"&&(T[G]=Q)});const A=d.response,U=d.status;c({request:_,data:A,headers:T,status:U})}},d.onerror=_=>{y||h(new zh(_))},o&&typeof o=="function"&&(d.upload.onprogress=_=>{_.lengthComputable?o({isComputable:!0,value:_.loaded/_.total}):o({isComputable:!1})}),t?d.send(t):d.send()});function TL(n,...e){return n}const AL=({name:n})=>n?[n]:[],SL=TL;var CL=()=>new FormData;const kC=n=>!1,Hm=n=>typeof Blob<"u"&&n instanceof Blob,qm=n=>typeof File<"u"&&n instanceof File,Gm=n=>!!n&&typeof n=="object"&&!Array.isArray(n)&&"uri"in n&&typeof n.uri=="string",Oc=n=>Hm(n)||qm(n)||kC()||Gm(n),xL=n=>typeof n=="string"||typeof n=="number"||typeof n>"u",RL=n=>!!n&&typeof n=="object"&&!Array.isArray(n),IL=n=>!!n&&typeof n=="object"&&"data"in n&&Oc(n.data);function MC(n,e,t){if(Array.isArray(t))for(const i of t)MC(n,`${e}[]`,i);else if(IL(t)){const{name:i,contentType:s}=t,o=SL(t.data,i,s??Bm),c=AL({name:i});n.push([e,o,...c])}else if(RL(t))for(const[i,s]of Object.entries(t))typeof s<"u"&&n.push([`${e}[${i}]`,String(s)]);else xL(t)&&t&&n.push([e,t.toString()])}function OL(n){const e=[];for(const[t,i]of Object.entries(n))MC(e,t,i);return e}function Km(n){const e=CL(),t=OL(n);for(const i of t){const[s,o,...c]=i;e.append(s,o,...c)}return e}class oi extends Lv{constructor(t,i,s,o,c){super();z(this,"code");z(this,"request");z(this,"response");z(this,"headers");this.name="UploadError",this.message=t,this.code=i,this.request=s,this.response=o,this.headers=c,Object.setPrototypeOf(this,oi.prototype)}}const DL=n=>{const e=new URLSearchParams;for(const[t,i]of Object.entries(n))i&&typeof i=="object"&&!Array.isArray(i)?Object.entries(i).filter(s=>s[1]??!1).forEach(s=>e.set(`${t}[${s[0]}]`,String(s[1]))):Array.isArray(i)?i.forEach(s=>{e.append(`${t}[]`,s)}):typeof i=="string"&&i?e.set(t,i):typeof i=="number"&&e.set(t,i.toString());return e.toString()},Os=(n,e,t)=>{const i=new URL(n);return i.pathname=(i.pathname+e).replace("//","/"),t&&(i.search=DL(t)),i.toString()};var kL="6.14.3";const ML="UploadcareUploadClient",NL=kL;function Qo(n){return IC({libraryName:ML,libraryVersion:NL,...n})}const PL="RequestThrottledError",bE=15e3,LL=1e3;function UL(n){const{headers:e}=n||{};if(!e||typeof e["retry-after"]!="string")return bE;const t=parseInt(e["retry-after"],10);return Number.isFinite(t)?t*1e3:bE}function Ba(n,e){const{retryThrottledRequestMaxTimes:t,retryNetworkErrorMaxTimes:i}=e;return wL(({attempt:s,retry:o})=>n().catch(c=>{if("response"in c&&(c==null?void 0:c.code)===PL&&s<t)return o(UL(c));if(c instanceof zh&&s<i)return o((s+1)*LL);throw c}))}const NC=n=>{let e="";return(Hm(n)||qm(n)||Gm(n))&&(e=n.type),e||Bm},PC=n=>{let e="";return qm(n)&&n.name?e=n.name:Hm(n)||kC()?e="":Gm(n)&&n.name&&(e=n.name),e||DC};function Uv(n){return typeof n>"u"||n==="auto"?"auto":n?"1":"0"}function VL(n,{publicKey:e,fileName:t,contentType:i,baseURL:s=mt.baseURL,secureSignature:o,secureExpire:c,store:h,signal:d,onProgress:m,source:y="local",integration:_,userAgent:b,retryThrottledRequestMaxTimes:T=mt.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:A=mt.retryNetworkErrorMaxTimes,metadata:U}){return Ba(()=>Fa({method:"POST",url:Os(s,"/base/",{jsonerrors:1}),headers:{"X-UC-User-Agent":Qo({publicKey:e,integration:_,userAgent:b})},data:Km({file:{data:n,name:t||PC(n),contentType:i||NC(n)},UPLOADCARE_PUB_KEY:e,UPLOADCARE_STORE:Uv(h),signature:o,expire:c,source:y,metadata:U}),signal:d,onProgress:m}).then(({data:P,headers:B,request:G})=>{const Q=Ns(JSON.parse(P));if("error"in Q)throw new oi(Q.error.content,Q.error.errorCode,G,Q,B);return Q}),{retryNetworkErrorMaxTimes:A,retryThrottledRequestMaxTimes:T})}var hy;(function(n){n.Token="token",n.FileInfo="file_info"})(hy||(hy={}));function $L(n,{publicKey:e,baseURL:t=mt.baseURL,store:i,fileName:s,checkForUrlDuplicates:o,saveUrlForRecurrentUploads:c,secureSignature:h,secureExpire:d,source:m="url",signal:y,integration:_,userAgent:b,retryThrottledRequestMaxTimes:T=mt.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:A=mt.retryNetworkErrorMaxTimes,metadata:U}){return Ba(()=>Fa({method:"POST",headers:{"X-UC-User-Agent":Qo({publicKey:e,integration:_,userAgent:b})},url:Os(t,"/from_url/",{jsonerrors:1,pub_key:e,source_url:n,store:Uv(i),filename:s,check_URL_duplicates:o?1:void 0,save_URL_duplicates:c?1:void 0,signature:h,expire:d,source:m,metadata:U}),signal:y}).then(({data:P,headers:B,request:G})=>{const Q=Ns(JSON.parse(P));if("error"in Q)throw new oi(Q.error.content,Q.error.errorCode,G,Q,B);return Q}),{retryNetworkErrorMaxTimes:A,retryThrottledRequestMaxTimes:T})}var si;(function(n){n.Unknown="unknown",n.Waiting="waiting",n.Progress="progress",n.Error="error",n.Success="success"})(si||(si={}));const jL=n=>"status"in n&&n.status===si.Error;function zL(n,{publicKey:e,baseURL:t=mt.baseURL,signal:i,integration:s,userAgent:o,retryThrottledRequestMaxTimes:c=mt.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:h=mt.retryNetworkErrorMaxTimes}={}){return Ba(()=>Fa({method:"GET",headers:e?{"X-UC-User-Agent":Qo({publicKey:e,integration:s,userAgent:o})}:void 0,url:Os(t,"/from_url/status/",{jsonerrors:1,token:n}),signal:i}).then(({data:d,headers:m,request:y})=>{const _=Ns(JSON.parse(d));if("error"in _&&!jL(_))throw new oi(_.error.content,_.error.errorCode,y,_,m);return _}),{retryNetworkErrorMaxTimes:h,retryThrottledRequestMaxTimes:c})}function FL(n,{publicKey:e,baseURL:t=mt.baseURL,jsonpCallback:i,secureSignature:s,secureExpire:o,signal:c,source:h,integration:d,userAgent:m,retryThrottledRequestMaxTimes:y=mt.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:_=mt.retryNetworkErrorMaxTimes}){return Ba(()=>Fa({method:"POST",headers:{"X-UC-User-Agent":Qo({publicKey:e,integration:d,userAgent:m})},url:Os(t,"/group/",{jsonerrors:1}),data:Km({files:n,callback:i,pub_key:e,signature:s,expire:o,source:h}),signal:c}).then(({data:b,headers:T,request:A})=>{const U=Ns(JSON.parse(b));if("error"in U)throw new oi(U.error.content,U.error.errorCode,A,U,T);return U}),{retryNetworkErrorMaxTimes:_,retryThrottledRequestMaxTimes:y})}function LC(n,{publicKey:e,baseURL:t=mt.baseURL,signal:i,source:s,integration:o,userAgent:c,retryThrottledRequestMaxTimes:h=mt.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:d=mt.retryNetworkErrorMaxTimes}){return Ba(()=>Fa({method:"GET",headers:{"X-UC-User-Agent":Qo({publicKey:e,integration:o,userAgent:c})},url:Os(t,"/info/",{jsonerrors:1,pub_key:e,file_id:n,source:s}),signal:i}).then(({data:m,headers:y,request:_})=>{const b=Ns(JSON.parse(m));if("error"in b)throw new oi(b.error.content,b.error.errorCode,_,b,y);return b}),{retryThrottledRequestMaxTimes:h,retryNetworkErrorMaxTimes:d})}function BL(n,{publicKey:e,contentType:t,fileName:i,multipartChunkSize:s=mt.multipartChunkSize,baseURL:o="",secureSignature:c,secureExpire:h,store:d,signal:m,source:y="local",integration:_,userAgent:b,retryThrottledRequestMaxTimes:T=mt.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:A=mt.retryNetworkErrorMaxTimes,metadata:U}){return Ba(()=>Fa({method:"POST",url:Os(o,"/multipart/start/",{jsonerrors:1}),headers:{"X-UC-User-Agent":Qo({publicKey:e,integration:_,userAgent:b})},data:Km({filename:i||DC,size:n,content_type:t||Bm,part_size:s,UPLOADCARE_STORE:Uv(d),UPLOADCARE_PUB_KEY:e,signature:c,expire:h,source:y,metadata:U}),signal:m}).then(({data:P,headers:B,request:G})=>{const Q=Ns(JSON.parse(P));if("error"in Q)throw new oi(Q.error.content,Q.error.errorCode,G,Q,B);return Q.parts=Object.keys(Q.parts).map(ue=>Q.parts[Number(ue)]),Q}),{retryThrottledRequestMaxTimes:T,retryNetworkErrorMaxTimes:A})}function HL(n,e,{contentType:t,signal:i,onProgress:s,retryThrottledRequestMaxTimes:o=mt.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:c=mt.retryNetworkErrorMaxTimes}){return Ba(()=>Fa({method:"PUT",url:e,data:n,onProgress:s,signal:i,headers:{"Content-Type":t||Bm}}).then(h=>(s&&s({isComputable:!0,value:1}),h)).then(({status:h})=>({code:h})),{retryThrottledRequestMaxTimes:o,retryNetworkErrorMaxTimes:c})}function qL(n,{publicKey:e,baseURL:t=mt.baseURL,source:i="local",signal:s,integration:o,userAgent:c,retryThrottledRequestMaxTimes:h=mt.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:d=mt.retryNetworkErrorMaxTimes}){return Ba(()=>Fa({method:"POST",url:Os(t,"/multipart/complete/",{jsonerrors:1}),headers:{"X-UC-User-Agent":Qo({publicKey:e,integration:o,userAgent:c})},data:Km({uuid:n,UPLOADCARE_PUB_KEY:e,source:i}),signal:s}).then(({data:m,headers:y,request:_})=>{const b=Ns(JSON.parse(m));if("error"in b)throw new oi(b.error.content,b.error.errorCode,_,b,y);return b}),{retryThrottledRequestMaxTimes:h,retryNetworkErrorMaxTimes:d})}function Vv(n,{publicKey:e,baseURL:t,source:i,integration:s,userAgent:o,retryThrottledRequestMaxTimes:c,retryNetworkErrorMaxTimes:h,signal:d,onProgress:m}){return OC({check:y=>LC(n,{publicKey:e,baseURL:t,signal:y,source:i,integration:s,userAgent:o,retryThrottledRequestMaxTimes:c,retryNetworkErrorMaxTimes:h}).then(_=>_.isReady?_:(m&&m({isComputable:!0,value:1}),!1)),signal:d})}function GL(n){return"defaultEffects"in n}class Dc{constructor(e,{baseCDN:t=mt.baseCDN,fileName:i}={}){z(this,"uuid");z(this,"name");z(this,"size");z(this,"isStored");z(this,"isImage");z(this,"mimeType");z(this,"cdnUrl");z(this,"s3Url");z(this,"originalFilename");z(this,"imageInfo");z(this,"videoInfo");z(this,"contentInfo");z(this,"metadata");z(this,"s3Bucket");z(this,"defaultEffects",null);const{uuid:s,s3Bucket:o}=e,c=Os(t,`${s}/`),h=o?Os(`https://${o}.s3.amazonaws.com/`,`${s}/${e.filename}`):null;this.uuid=s,this.name=i||e.filename,this.size=e.size,this.isStored=e.isStored,this.isImage=e.isImage,this.mimeType=e.mimeType,this.cdnUrl=c,this.originalFilename=e.originalFilename,this.imageInfo=e.imageInfo,this.videoInfo=e.videoInfo,this.contentInfo=e.contentInfo,this.metadata=e.metadata||null,this.s3Bucket=o||null,this.s3Url=h,GL(e)&&(this.defaultEffects=e.defaultEffects)}}const KL=(n,{publicKey:e,fileName:t,baseURL:i,secureSignature:s,secureExpire:o,store:c,contentType:h,signal:d,onProgress:m,source:y,integration:_,userAgent:b,retryThrottledRequestMaxTimes:T,retryNetworkErrorMaxTimes:A,baseCDN:U,metadata:P})=>VL(n,{publicKey:e,fileName:t,contentType:h,baseURL:i,secureSignature:s,secureExpire:o,store:c,signal:d,onProgress:m,source:y,integration:_,userAgent:b,retryThrottledRequestMaxTimes:T,retryNetworkErrorMaxTimes:A,metadata:P}).then(({file:B})=>Vv(B,{publicKey:e,baseURL:i,source:y,integration:_,userAgent:b,retryThrottledRequestMaxTimes:T,retryNetworkErrorMaxTimes:A,onProgress:m,signal:d})).then(B=>new Dc(B,{baseCDN:U})),YL=(n,{publicKey:e,fileName:t,baseURL:i,signal:s,onProgress:o,source:c,integration:h,userAgent:d,retryThrottledRequestMaxTimes:m,retryNetworkErrorMaxTimes:y,baseCDN:_})=>LC(n,{publicKey:e,baseURL:i,signal:s,source:c,integration:h,userAgent:d,retryThrottledRequestMaxTimes:m,retryNetworkErrorMaxTimes:y}).then(b=>new Dc(b,{baseCDN:_,fileName:t})).then(b=>(o&&o({isComputable:!0,value:1}),b)),XL=(n,{signal:e}={})=>{let t=null,i=null;const s=n.map(()=>new AbortController),o=c=>()=>{i=c,s.forEach((h,d)=>d!==c&&h.abort())};return Fm(e,()=>{s.forEach(c=>c.abort())}),Promise.all(n.map((c,h)=>{const d=o(h);return Promise.resolve().then(()=>c({stopRace:d,signal:s[h].signal})).then(m=>(d(),m)).catch(m=>(t=m,null))})).then(c=>{if(i===null)throw t;return c[i]})};var QL=window.WebSocket;class WL{constructor(){z(this,"events",Object.create({}))}emit(e,t){var i;(i=this.events[e])==null||i.forEach(s=>s(t))}on(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)}off(e,t){t?this.events[e]=this.events[e].filter(i=>i!==t):this.events[e]=[]}}const ZL=(n,e)=>n==="success"?{status:si.Success,...e}:n==="progress"?{status:si.Progress,...e}:{status:si.Error,...e};class JL{constructor(e,t=3e4){z(this,"key");z(this,"disconnectTime");z(this,"ws");z(this,"queue",[]);z(this,"isConnected",!1);z(this,"subscribers",0);z(this,"emmitter",new WL);z(this,"disconnectTimeoutId",null);this.key=e,this.disconnectTime=t}connect(){if(this.disconnectTimeoutId&&clearTimeout(this.disconnectTimeoutId),!this.isConnected&&!this.ws){const e=`wss://ws.pusherapp.com/app/${this.key}?protocol=5&client=js&version=1.12.2`;this.ws=new QL(e),this.ws.addEventListener("error",t=>{this.emmitter.emit("error",new Error(t.message))}),this.emmitter.on("connected",()=>{this.isConnected=!0,this.queue.forEach(t=>this.send(t.event,t.data)),this.queue=[]}),this.ws.addEventListener("message",t=>{const i=JSON.parse(t.data.toString());switch(i.event){case"pusher:connection_established":{this.emmitter.emit("connected",void 0);break}case"pusher:ping":{this.send("pusher:pong",{});break}case"progress":case"success":case"fail":this.emmitter.emit(i.channel,ZL(i.event,JSON.parse(i.data)))}})}}disconnect(){const e=()=>{var t;(t=this.ws)==null||t.close(),this.ws=void 0,this.isConnected=!1};this.disconnectTime?this.disconnectTimeoutId=setTimeout(()=>{e()},this.disconnectTime):e()}send(e,t){var s;const i=JSON.stringify({event:e,data:t});(s=this.ws)==null||s.send(i)}subscribe(e,t){this.subscribers+=1,this.connect();const i=`task-status-${e}`,s={event:"pusher:subscribe",data:{channel:i}};this.emmitter.on(i,t),this.isConnected?this.send(s.event,s.data):this.queue.push(s)}unsubscribe(e){this.subscribers-=1;const t=`task-status-${e}`,i={event:"pusher:unsubscribe",data:{channel:t}};this.emmitter.off(t),this.isConnected?this.send(i.event,i.data):this.queue=this.queue.filter(s=>s.data.channel!==t),this.subscribers===0&&this.disconnect()}onError(e){return this.emmitter.on("error",e),()=>this.emmitter.off("error",e)}}let _0=null;const $v=n=>{if(!_0){const e=typeof window>"u"?0:3e4;_0=new JL(n,e)}return _0},e9=n=>{$v(n).connect()};function t9({token:n,publicKey:e,baseURL:t,integration:i,userAgent:s,retryThrottledRequestMaxTimes:o,retryNetworkErrorMaxTimes:c,onProgress:h,signal:d}){return OC({check:m=>zL(n,{publicKey:e,baseURL:t,integration:i,userAgent:s,retryThrottledRequestMaxTimes:o,retryNetworkErrorMaxTimes:c,signal:m}).then(y=>{switch(y.status){case si.Error:return new oi(y.error,y.errorCode);case si.Waiting:return!1;case si.Unknown:return new oi(`Token "${n}" was not found.`);case si.Progress:return h&&(y.total==="unknown"?h({isComputable:!1}):h({isComputable:!0,value:y.done/y.total})),!1;case si.Success:return h&&h({isComputable:!0,value:y.done/y.total}),y;default:throw new Error("Unknown status")}}),signal:d})}const n9=({token:n,pusherKey:e,signal:t,onProgress:i})=>new Promise((s,o)=>{const c=$v(e),h=c.onError(o),d=()=>{h(),c.unsubscribe(n)};Fm(t,()=>{d(),o(new Ho("pusher cancelled"))}),c.subscribe(n,m=>{switch(m.status){case si.Progress:{i&&(m.total==="unknown"?i({isComputable:!1}):i({isComputable:!0,value:m.done/m.total}));break}case si.Success:{d(),i&&i({isComputable:!0,value:m.done/m.total}),s(m);break}case si.Error:d(),o(new oi(m.msg,m.error_code))}})}),i9=(n,{publicKey:e,fileName:t,baseURL:i,baseCDN:s,checkForUrlDuplicates:o,saveUrlForRecurrentUploads:c,secureSignature:h,secureExpire:d,store:m,signal:y,onProgress:_,source:b,integration:T,userAgent:A,retryThrottledRequestMaxTimes:U,pusherKey:P=mt.pusherKey,metadata:B})=>Promise.resolve(e9(P)).then(()=>$L(n,{publicKey:e,fileName:t,baseURL:i,checkForUrlDuplicates:o,saveUrlForRecurrentUploads:c,secureSignature:h,secureExpire:d,store:m,signal:y,source:b,integration:T,userAgent:A,retryThrottledRequestMaxTimes:U,metadata:B})).catch(G=>{const Q=$v(P);return Q==null||Q.disconnect(),Promise.reject(G)}).then(G=>G.type===hy.FileInfo?G:XL([({signal:Q})=>t9({token:G.token,publicKey:e,baseURL:i,integration:T,userAgent:A,retryThrottledRequestMaxTimes:U,onProgress:_,signal:Q}),({signal:Q})=>n9({token:G.token,pusherKey:P,signal:Q,onProgress:_})],{signal:y})).then(G=>{if(G instanceof oi)throw G;return G}).then(G=>Vv(G.uuid,{publicKey:e,baseURL:i,integration:T,userAgent:A,retryThrottledRequestMaxTimes:U,onProgress:_,signal:y})).then(G=>new Dc(G,{baseCDN:s})),b0=new WeakMap,r9=async n=>{if(b0.has(n))return b0.get(n);const e=await fetch(n.uri).then(t=>t.blob());return b0.set(n,e),e},UC=async n=>{if(qm(n)||Hm(n))return n.size;if(Gm(n))return(await r9(n)).size;throw new Error("Unknown file type. Cannot determine file size.")},s9=(n,e=mt.multipartMinFileSize)=>n>=e,VC=n=>{const e="[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}",t=new RegExp(e);return!Oc(n)&&t.test(n)},jv=n=>{const e="^(?:\\w+:)?\\/\\/([^\\s\\.]+\\.\\S{2}|localhost[\\:?\\d]*)\\S*$",t=new RegExp(e);return!Oc(n)&&t.test(n)},a9=(n,e)=>new Promise((t,i)=>{const s=[];let o=!1,c=e.length;const h=[...e],d=()=>{const m=e.length-h.length,y=h.shift();y&&y().then(_=>{o||(s[m]=_,c-=1,c?d():t(s))}).catch(_=>{o=!0,i(_)})};for(let m=0;m<n;m++)d()}),o9=(n,e,t,i)=>{const s=i*e,o=Math.min(s+i,t);return n.slice(s,o)},l9=async(n,e,t)=>i=>o9(n,i,e,t),c9=(n,e,{publicKey:t,contentType:i,onProgress:s,signal:o,integration:c,retryThrottledRequestMaxTimes:h,retryNetworkErrorMaxTimes:d})=>HL(n,e,{contentType:i,onProgress:s,signal:o,retryThrottledRequestMaxTimes:h,retryNetworkErrorMaxTimes:d}),u9=async(n,{publicKey:e,fileName:t,fileSize:i,baseURL:s,secureSignature:o,secureExpire:c,store:h,signal:d,onProgress:m,source:y,integration:_,userAgent:b,retryThrottledRequestMaxTimes:T,retryNetworkErrorMaxTimes:A,contentType:U,multipartChunkSize:P=mt.multipartChunkSize,maxConcurrentRequests:B=mt.maxConcurrentRequests,baseCDN:G,metadata:Q})=>{const ue=i??await UC(n);let V;const te=(k,I)=>{if(!m)return;V||(V=Array(k).fill(0));const R=D=>D.reduce((L,H)=>L+H,0);return D=>{D.isComputable&&(V[I]=D.value,m({isComputable:!0,value:R(V)/k}))}};return U||(U=NC(n)),BL(ue,{publicKey:e,contentType:U,fileName:t||PC(n),baseURL:s,secureSignature:o,secureExpire:c,store:h,signal:d,source:y,integration:_,userAgent:b,retryThrottledRequestMaxTimes:T,retryNetworkErrorMaxTimes:A,metadata:Q,multipartChunkSize:P}).then(async({uuid:k,parts:I})=>{const R=await l9(n,ue,P);return Promise.all([k,a9(B,I.map((D,L)=>()=>c9(R(L),D,{publicKey:e,contentType:U,onProgress:te(I.length,L),signal:d,integration:_,retryThrottledRequestMaxTimes:T,retryNetworkErrorMaxTimes:A})))])}).then(([k])=>qL(k,{publicKey:e,baseURL:s,source:y,integration:_,userAgent:b,retryThrottledRequestMaxTimes:T,retryNetworkErrorMaxTimes:A})).then(k=>k.isReady?k:Vv(k.uuid,{publicKey:e,baseURL:s,source:y,integration:_,userAgent:b,retryThrottledRequestMaxTimes:T,retryNetworkErrorMaxTimes:A,onProgress:m,signal:d})).then(k=>new Dc(k,{baseCDN:G}))};async function $C(n,{publicKey:e,fileName:t,baseURL:i=mt.baseURL,secureSignature:s,secureExpire:o,store:c,signal:h,onProgress:d,source:m,integration:y,userAgent:_,retryThrottledRequestMaxTimes:b,retryNetworkErrorMaxTimes:T,contentType:A,multipartMinFileSize:U,multipartChunkSize:P,maxConcurrentRequests:B,baseCDN:G=mt.baseCDN,checkForUrlDuplicates:Q,saveUrlForRecurrentUploads:ue,pusherKey:V,metadata:te}){if(Oc(n)){const k=await UC(n);return s9(k,U)?u9(n,{publicKey:e,contentType:A,multipartChunkSize:P,fileSize:k,fileName:t,baseURL:i,secureSignature:s,secureExpire:o,store:c,signal:h,onProgress:d,source:m,integration:y,userAgent:_,maxConcurrentRequests:B,retryThrottledRequestMaxTimes:b,retryNetworkErrorMaxTimes:T,baseCDN:G,metadata:te}):KL(n,{publicKey:e,fileName:t,contentType:A,baseURL:i,secureSignature:s,secureExpire:o,store:c,signal:h,onProgress:d,source:m,integration:y,userAgent:_,retryThrottledRequestMaxTimes:b,retryNetworkErrorMaxTimes:T,baseCDN:G,metadata:te})}if(jv(n))return i9(n,{publicKey:e,fileName:t,baseURL:i,baseCDN:G,checkForUrlDuplicates:Q,saveUrlForRecurrentUploads:ue,secureSignature:s,secureExpire:o,store:c,signal:h,onProgress:d,source:m,integration:y,userAgent:_,retryThrottledRequestMaxTimes:b,pusherKey:V,metadata:te});if(VC(n))return YL(n,{publicKey:e,fileName:t,baseURL:i,signal:h,onProgress:d,source:m,integration:y,userAgent:_,retryThrottledRequestMaxTimes:b,retryNetworkErrorMaxTimes:T,baseCDN:G});throw new TypeError(`File uploading from "${n}" is not supported`)}class h9{constructor(e,{baseCDN:t=mt.baseCDN}={}){z(this,"uuid");z(this,"filesCount");z(this,"totalSize");z(this,"isStored");z(this,"isImage");z(this,"cdnUrl");z(this,"files");z(this,"createdAt");z(this,"storedAt",null);this.uuid=e.id,this.filesCount=e.filesCount;const i=e.files.filter(Boolean);this.totalSize=Object.values(i).reduce((s,o)=>s+o.size,0),this.isStored=!!e.datetimeStored,this.isImage=!!Object.values(i).filter(s=>s.isImage).length,this.cdnUrl=e.cdnUrl,this.files=i.map(s=>new Dc(s,{baseCDN:t})),this.createdAt=e.datetimeCreated,this.storedAt=e.datetimeStored}}const d9=n=>{for(const e of n)if(!Oc(e))return!1;return!0},f9=n=>{for(const e of n)if(!VC(e))return!1;return!0},m9=n=>{for(const e of n)if(!jv(e))return!1;return!0};function p9(n,{publicKey:e,fileName:t,baseURL:i=mt.baseURL,secureSignature:s,secureExpire:o,store:c,signal:h,onProgress:d,source:m,integration:y,userAgent:_,retryThrottledRequestMaxTimes:b,retryNetworkErrorMaxTimes:T,contentType:A,multipartChunkSize:U=mt.multipartChunkSize,baseCDN:P=mt.baseCDN,checkForUrlDuplicates:B,saveUrlForRecurrentUploads:G,jsonpCallback:Q}){if(!d9(n)&&!m9(n)&&!f9(n))throw new TypeError(`Group uploading from "${n}" is not supported`);let ue,V=!0;const te=n.length,k=(I,R)=>{if(!d)return;ue||(ue=Array(I).fill(0));const D=L=>L.reduce((H,N)=>H+N)/I;return L=>{if(!L.isComputable||!V){V=!1,d({isComputable:!1});return}ue[R]=L.value,d({isComputable:!0,value:D(ue)})}};return Promise.all(n.map((I,R)=>Oc(I)||jv(I)?$C(I,{publicKey:e,fileName:t,baseURL:i,secureSignature:s,secureExpire:o,store:c,signal:h,onProgress:k(te,R),source:m,integration:y,userAgent:_,retryThrottledRequestMaxTimes:b,retryNetworkErrorMaxTimes:T,contentType:A,multipartChunkSize:U,baseCDN:P,checkForUrlDuplicates:B,saveUrlForRecurrentUploads:G}).then(D=>D.uuid):I)).then(I=>FL(I,{publicKey:e,baseURL:i,jsonpCallback:Q,secureSignature:s,secureExpire:o,signal:h,source:m,integration:y,userAgent:_,retryThrottledRequestMaxTimes:b,retryNetworkErrorMaxTimes:T}).then(R=>new h9(R,{baseCDN:P})).then(R=>(d&&d({isComputable:!0,value:1}),R)))}class g9{constructor(e){z(this,"_concurrency",1);z(this,"_pending",[]);z(this,"_running",0);z(this,"_resolvers",new Map);z(this,"_rejectors",new Map);this._concurrency=e}_run(){const e=this._concurrency-this._running;for(let t=0;t<e;t++){const i=this._pending.shift();if(!i)return;const s=this._resolvers.get(i),o=this._rejectors.get(i);if(!s||!o)throw new Error("Unexpected behavior: resolver or rejector is undefined");this._running+=1,i().finally(()=>{this._resolvers.delete(i),this._rejectors.delete(i),this._running-=1,this._run()}).then(c=>s(c)).catch(c=>o(c))}}add(e){return new Promise((t,i)=>{this._resolvers.set(e,t),this._rejectors.set(e,i),this._pending.push(e),this._run()})}get pending(){return this._pending.length}get running(){return this._running}set concurrency(e){this._concurrency=e,this._run()}get concurrency(){return this._concurrency}}const jC=()=>({}),zC=n=>({...jC(),"*currentActivity":null,"*currentActivityParams":{},"*history":[],"*historyBack":null,"*closeModal":()=>{n.set$({"*currentActivity":null,"*modalActive":!1})}}),FC=n=>({...zC(n),"*commonProgress":0,"*uploadList":[],"*uploadQueue":new g9(1),"*collectionErrors":[],"*collectionState":null,"*groupInfo":null,"*uploadTrigger":new Set,"*secureUploadsManager":null}),zv={"locale-id":"en","social-source-lang":"en","upload-file":"Upload file","upload-files":"Upload files","choose-file":"Choose file","choose-files":"Choose files","drop-files-here":"Drop files here","select-file-source":"Select file source",selected:"Selected",upload:"Upload","add-more":"Add more",cancel:"Cancel","start-from-cancel":"Cancel",clear:"Clear","camera-shot":"Shot","upload-url":"Import","upload-url-placeholder":"Paste link here","edit-image":"Edit image","edit-detail":"Details",back:"Back",done:"Done",ok:"Ok","remove-from-list":"Remove",no:"No",yes:"Yes","confirm-your-action":"Confirm your action","are-you-sure":"Are you sure?","selected-count":"{{count}} of {{total}} selected","select-all":"Select all","deselect-all":"Deselect all","upload-error":"Upload error","validation-error":"Validation error","no-files":"No files selected",browse:"Browse","not-uploaded-yet":"Not uploaded yet...",file__one:"file",file__other:"files",error__one:"error",error__other:"errors","header-uploading":"Uploading {{count}} {{plural:file(count)}}","header-failed":"{{count}} {{plural:error(count)}}","header-succeed":"{{count}} {{plural:file(count)}} uploaded","header-total":"{{count}} {{plural:file(count)}} selected","src-type-local":"From device","src-type-from-url":"From link","src-type-camera":"Camera","src-type-draw":"Draw","src-type-facebook":"Facebook","src-type-dropbox":"Dropbox","src-type-gdrive":"Google Drive","src-type-gphotos":"Google Photos","src-type-flickr":"Flickr","src-type-vk":"VK","src-type-evernote":"Evernote","src-type-box":"Box","src-type-onedrive":"Onedrive","src-type-huddle":"Huddle","src-type-other":"Other","caption-from-url":"Import from link","caption-camera":"Camera","caption-draw":"Draw","caption-edit-file":"Edit file","file-no-name":"No name...","toggle-fullscreen":"Toggle fullscreen","toggle-guides":"Toggle guides",rotate:"Rotate","flip-vertical":"Flip vertical","flip-horizontal":"Flip horizontal",apply:"Apply",brightness:"Brightness",contrast:"Contrast",saturation:"Saturation",exposure:"Exposure",gamma:"Gamma",vibrance:"Vibrance",warmth:"Warmth",enhance:"Enhance",original:"Original",resize:"Resize image",crop:"Crop","select-color":"Select color",text:"Text",draw:"Draw","cancel-edit":"Cancel edit","tab-view":"Preview","tab-details":"Details","file-name":"Name","file-size":"Size","cdn-url":"CDN URL","file-size-unknown":"Unknown","camera-permissions-denied":"Camera access denied","camera-permissions-prompt":"Please allow access to the camera","camera-permissions-request":"Request access","files-count-limit-error-title":"Files count limit overflow","files-count-limit-error-too-few":"Youve chosen {{total}} {{plural:file(total)}}. At least {{min}} {{plural:file(min)}} required.","files-count-limit-error-too-many":"Youve chosen too many files. {{max}} {{plural:file(max)}} is maximum.","files-max-size-limit-error":"File is too big. Max file size is {{maxFileSize}}.","has-validation-errors":"File validation error occurred. Please, check your files before upload.","images-only-accepted":"Only image files are accepted.","file-type-not-allowed":"Uploading of these file types is not allowed.","some-files-were-not-uploaded":"Some files were not uploaded.","file-item-edit-button":"Edit","file-item-remove-button":"Remove","a11y-editor-tab-filters":"Filters","a11y-editor-tab-tuning":"Tuning","a11y-editor-tab-crop":"Crop","a11y-activity-header-button-close":"Close",flip:"Flip",mirror:"Mirror","a11y-cloud-editor-apply-filter":"Apply {{name}} filter","a11y-cloud-editor-apply-crop":"Apply {{name}} operation","a11y-cloud-editor-apply-tuning":"Apply {{name}} tuning",finished:"Finished",failed:"Failed",uploading:"Uploading",idle:"Idle","a11y-file-item-status":"File {{fileName}} in status {{status}}","waiting-for":"Waiting for {{source}}"},rm=new Map,dy=new Map,BC=(n,e)=>{rm.has(n)&&console.log(`Locale ${n} is already defined. Overwriting...`),rm.set(n,{...zv,...e})},y9=(n,e)=>{dy.set(n,e)},HC=(n,e)=>{typeof e=="function"?y9(n,e):BC(n,e)},v9=async n=>{if(!rm.has(n)){if(!dy.has(n))throw new Error(`Locale ${n} is not defined`);const t=await dy.get(n)();BC(n,t)}return rm.get(n)};HC("en",zv);const No=n=>`*l10n/${n}`,_9="en";class b9{constructor(e){z(this,"_blockInstance",null);z(this,"_localeName","");z(this,"_callbacks",new Set);z(this,"_boundBlocks",new Map);this._blockInstance=e;for(let[t,i]of Object.entries(zv))this._blockInstance.add(No(t),i,!1);setTimeout(()=>{e.subConfigValue("localeName",async t=>{var o;if(!this._blockInstance||!t)return;this._localeName=t;const i=await v9(t);if(t!==_9&&this._localeName!==t)return;const s=(o=this._blockInstance.cfg.localeDefinitionOverride)==null?void 0:o[t];for(const[c,h]of Object.entries(i)){const d=s==null?void 0:s[c];this._blockInstance.add(No(c),d??h,!0);for(const m of this._callbacks)m()}}),e.subConfigValue("localeDefinitionOverride",t=>{var s;if(!t)return;const i=t[this._localeName];if(i)for(const[o,c]of Object.entries(i)){(s=this._blockInstance)==null||s.add(No(o),c,!0);for(const h of this._callbacks)h()}})})}onLocaleChange(e){const t=wi(e,0);return this._callbacks.add(t),()=>{this._callbacks.delete(t)}}bindL10n(e,t,i){var o,c,h;e.$[t]=i(),this._boundBlocks.has(e)||this._boundBlocks.set(e,new Map),(c=(o=this._boundBlocks.get(e))==null?void 0:o.get(t))==null||c();const s=this.onLocaleChange(()=>{e.$[t]=i()});(h=this._boundBlocks.get(e))==null||h.set(t,s)}destroyL10nBindings(e){const t=this._boundBlocks.get(e);if(t){for(const i of t.values())i();this._boundBlocks.delete(e)}}destroy(){this._callbacks.clear()}}function w9(n,e){[...n.querySelectorAll("[l10n]")].forEach(t=>{let i=t.getAttribute("l10n");if(!i)return;const s=i.split(";");for(const o of s)o&&E9(t,o,e)})}const E9=(n,e,t)=>{let i="textContent",s=!1;if(e.includes(":")){const h=e.split(":");i=h[0],e=h[1],i.startsWith("@")&&(i=i.slice(1),s=!0)}const o=e;t.has(o)&&t.sub(o,h=>{if(!h)return;t.l10nProcessorSubs.has(o)||t.l10nProcessorSubs.set(o,new Set);const d=t.l10nProcessorSubs.get(o);d==null||d.forEach(_=>{_.remove(),d.delete(_),t.allSubs.delete(_)});const m=No(h).replace("*","");t.nodeCtx.has(m)||t.nodeCtx.add(m,h);const y=t.nodeCtx.sub(m,()=>{n[i]=t.l10n(h)});d==null||d.add(y),t.allSubs.add(y),n.removeAttribute("l10n")});const c=No(e);t.has(c)||t.add(c,""),t.sub(c,()=>{e=e,s?n.setAttribute(i,t.l10n(e)):n[i]=t.l10n(e)}),n.removeAttribute("l10n")},vi=n=>`*cfg/${n}`,T9={button:["toolbar"],checkbox:["toolbar"],menuitem:["menu","menubar"],option:["listbox"],tab:["tablist"]};function Pu(n,e){e.tabIndex=0,e.focus(),n.tabIndex=-1}function w0(n){let e=n.role||n.type||n.tagName;if(!e)return null;let t=T9[e.toLowerCase()];if(!t)return null;for(let i of t){let s=n.closest(`[role=${i}]`);if(s)return s}}function E0(n,e){return e.role==="toolbar"?A9(e):e.querySelectorAll(`[role=${n.role}]`)}function A9(n){return[...n.querySelectorAll("*")].filter(t=>t.role==="button"||t.type==="button"||t.role==="checkbox"||t.type==="checkbox")}function S9(n){let e=n.getAttribute("aria-orientation");if(e==="vertical")return!1;if(e==="horizontal")return!0;let t=n.role;return t==="menubar"||t==="tablist"||t==="toolbar"}function C9(n){return e=>{let t=!1,i=300,s=0,o="";function c(_){let b=w0(_.target);if(!b){h();return}let T=E0(_.target,b),A=Array.from(T).indexOf(_.target),U="ArrowDown",P="ArrowUp";if(S9(b)&&(e.document.dir==="rtl"?(U="ArrowLeft",P="ArrowRight"):(U="ArrowRight",P="ArrowLeft")),_.key===U)_.preventDefault(),Pu(_.target,T[A+1]||T[0]);else if(_.key===P)_.preventDefault(),Pu(_.target,T[A-1]||T[T.length-1]);else if(_.key==="Home")_.preventDefault(),Pu(_.target,T[0]);else if(_.key==="End")_.preventDefault(),Pu(_.target,T[T.length-1]);else if(_.key.length===1&&b.role!=="tablist"){let B=Date.now();B-s<=i?o+=_.key.toLowerCase():o=_.key.toLowerCase(),s=B;let G=Array.from(T).find(Q=>{var ue,V,te;return(te=(V=(ue=Q.textContent)==null?void 0:ue.trim())==null?void 0:V.toLowerCase())==null?void 0:te.startsWith(o)});G&&(_.preventDefault(),Pu(_.target,G))}}function h(){t=!1,e.removeEventListener("keydown",c)}function d(_){let b=w0(_.target);if(b){t||(t=!0,e.addEventListener("keydown",c));let T=E0(_.target,b);for(let A of T)A!==_.target&&A.setAttribute("tabindex",-1)}else t&&h()}function m(_){(!_.relatedTarget||_.relatedTarget===e.document)&&h()}function y(_){let b=w0(_.target);if(b){let T=E0(_.target,b);for(let A of T)A!==_.target&&A.setAttribute("tabindex",-1);_.target.setAttribute("tabindex",0)}}return e.addEventListener("click",y),e.addEventListener("focusin",d),e.addEventListener("focusout",m),()=>{h(),e.removeEventListener("click",y),e.removeEventListener("focusin",d),e.removeEventListener("focusout",m)}}}function x9(){return n=>{let e,t;function i(o){if(o.target.getAttribute("aria-hidden")==="true"){e=o.target,e.setAttribute("aria-hidden","false"),t=e.hidden,t&&(e.hidden=!1);let c=o.target.querySelector('a, button, select, textarea, input:not([type=radio]), [type=radio]:checked, [tabindex]:not([tabindex="-1"])');c&&(c.tabIndex=0)}}function s(o){e&&e.contains(o.target)&&(!o.relatedTarget||!e.contains(o.relatedTarget))&&(o.target.tabIndex=-1,e.setAttribute("aria-hidden","true"),t&&(e.hidden=!0),e=null)}return n.addEventListener("keyuxJump",i),n.addEventListener("focusout",s),()=>{n.removeEventListener("keyuxJump",i),n.removeEventListener("focusout",s)}}}function R9(){return n=>{let e=[];function t(d){let m=n.document.activeElement;m&&m!==n.document.body&&e.push(new WeakRef(m)),d.focus({focusVisible:!0})}function i(){let d=e.pop();if(!d){n.document.activeElement.blur();return}let m=d.deref();m&&m.isConnected?m.focus():i()}let s=0,o;function c(d){clearInterval(o);let m=d.getAttribute("aria-controls");o=setInterval(()=>{if(s++>50){clearInterval(o);return}let y=n.document.getElementById(m);if(y){let _=y.querySelector('a, button, select, textarea, input:not([type=radio]), [type=radio]:checked, [tabindex]:not([tabindex="-1"])');_&&(clearInterval(o),y.dispatchEvent(new n.CustomEvent("keyuxJump",{bubbles:!0})),t(_))}},50)}function h(d){d.target.getAttribute("aria-controls")&&d.key==="Enter"&&c(d.target),d.key==="Escape"&&i()}return n.addEventListener("keydown",h),()=>{n.removeEventListener("keydown",h)}}}function I9(n){let e,t=n.split(" "),i;function s(h){h.key==="Enter"&&(h.target.tagName==="BUTTON"||h.target.tagName==="A")&&(o(),h.target.classList.add(...t),e=h.target,i=h.target)}function o(){e&&e.classList.remove(...t),i=null}function c(h){h.clientX===0&&h.clientY===0&&i!==h.target&&(o(),h.target.classList.add(...t),e=h.target)}return h=>(h.addEventListener("click",c),h.addEventListener("keydown",s),h.addEventListener("keyup",o),()=>{h.removeEventListener("click",c),h.removeEventListener("keydown",s),h.removeEventListener("keyup",o)})}function O9(n,e){let t=e.map(i=>i(n));return()=>{t.forEach(i=>i())}}class D9{constructor(){z(this,"_listeners",new Map);z(this,"_scope",[])}addEventListener(e,t){const i=s=>{const o=s.target;o&&this._scope.some(c=>c===s.target||c.contains(o))&&t(s)};this._listeners.set(t,i),window.addEventListener(e,i)}removeEventListener(e,t){const i=this._listeners.get(t);i&&window.removeEventListener(e,i),this._listeners.delete(t)}get CustomEvent(){return window.CustomEvent}get document(){return window.document}get navigator(){return window.navigator}registerScope(e){this._scope.push(e)}destroy(){this._scope=[],this._listeners.forEach((e,t)=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",e),this._listeners.delete(t)})}}class k9{constructor(){z(this,"_destroyKeyUX");z(this,"_scopedWindow");this._scopedWindow=new D9,this._destroyKeyUX=O9(this._scopedWindow,[C9(),I9("is-pressed"),R9(),x9()])}registerBlock(e){this._scopedWindow.registerScope(e)}destroy(){var e;(e=this._destroyKeyUX)==null||e.call(this),this._scopedWindow.destroy()}}const M9="uc-";class Ut extends jh{constructor(){super();z(this,"requireCtxName",!1);z(this,"activityType",null);z(this,"init$",jC());this.l10nProcessorSubs=new Map,this.addTemplateProcessor(w9)}l10n(t,i={}){if(!t)return"";let s=this.$[No(t)]||t,o=pL(s);for(let h of o)i[h.variable]=this.pluralize(h.pluralKey,Number(i[h.countVariable]));return uy(s,i)}pluralize(t,i){const s=this.l10n("locale-id")||"en",o=xC(s,i);return this.l10n(`${t}__${o}`)}bindL10n(t,i){var s;(s=this.localeManager)==null||s.bindL10n(this,t,i)}emit(t,i,s){const o=this.has("*eventEmitter")&&this.$["*eventEmitter"];o&&o.emit(t,i,s)}hasBlockInCtx(t){for(let i of this.blocksRegistry)if(t(i))return!0;return!1}setOrAddState(t,i){this.add$({[t]:i},!0)}connectedCallback(){this.constructor.styleAttrs.forEach(i=>{this.setAttribute(i,"")}),this.hasAttribute("retpl")&&(this.constructor.template=null,this.processInnerHtml=!0),this.requireCtxName?gL({element:this,attribute:"ctx-name",onSuccess:()=>{super.connectedCallback()},onTimeout:()=>{console.error("Attribute `ctx-name` is required and it is not set.")}}):super.connectedCallback(),im.registerClient(this)}disconnectedCallback(){super.disconnectedCallback(),im.unregisterClient(this)}initCallback(){this.has("*blocksRegistry")||this.add("*blocksRegistry",new Set),this.$["*blocksRegistry"].add(this),this.has("*eventEmitter")||this.add("*eventEmitter",new dL(this.debugPrint.bind(this))),this.has("*localeManager")||this.add("*localeManager",new b9(this)),this.has("*a11y")||this.add("*a11y",new k9),this.sub(No("locale-id"),i=>{const s=fL(i);this.style.direction=s==="ltr"?"":s})}get localeManager(){return this.has("*localeManager")?this.$["*localeManager"]:null}get a11y(){return this.has("*a11y")?this.$["*a11y"]:null}get blocksRegistry(){return this.$["*blocksRegistry"]}destroyCallback(){var i;super.destroyCallback();let t=this.blocksRegistry;t==null||t.delete(this),(i=this.localeManager)==null||i.destroyL10nBindings(this),this.l10nProcessorSubs=new Map,St.deleteCtx(this),(t==null?void 0:t.size)===0&&setTimeout(()=>{this.destroyCtxCallback()},0)}destroyCtxCallback(){var t;St.deleteCtx(this.ctxName),(t=this.localeManager)==null||t.destroy()}async proxyUrl(t){if(this.cfg.secureDeliveryProxy&&this.cfg.secureDeliveryProxyUrlResolver&&console.warn("Both secureDeliveryProxy and secureDeliveryProxyUrlResolver are set. The secureDeliveryProxyUrlResolver will be used."),this.cfg.secureDeliveryProxyUrlResolver)try{return await this.cfg.secureDeliveryProxyUrlResolver(t,{uuid:bC(t),cdnUrlModifiers:wC(t),fileName:Pv(t)})}catch(i){return console.error("Failed to resolve secure delivery proxy URL. Falling back to the default URL.",i),t}return this.cfg.secureDeliveryProxy?uy(this.cfg.secureDeliveryProxy,{previewUrl:t},{transform:i=>window.encodeURIComponent(i)}):t}get cfg(){if(!this.__cfgProxy){let t=Object.create(null);this.__cfgProxy=new Proxy(t,{set:(i,s,o)=>{if(typeof s!="string")return!1;const c=vi(s);return this.has(c)||this.add(c,Ca[s]),this.$[c]=o,!0},get:(i,s)=>{const o=vi(s);return this.has(o)||this.add(o,Ca[s]),this.$[vi(s)]}})}return this.__cfgProxy}subConfigValue(t,i){const s=vi(t);this.has(s)||this.add(s,Ca[t]),this.sub(s,i)}debugPrint(...t){if(!this.cfg.debug)return;let i=t;if(typeof(t==null?void 0:t[0])=="function"){const s=t[0];i=s()}console.log(`[${this.ctxName}]`,...i)}static reg(t){if(!t){super.reg();return}t.startsWith(M9)&&super.reg(t)}}z(Ut,"StateConsumerScope",null),z(Ut,"styleAttrs",[]);const N9="<svg width='0' height='0' style='position:absolute'><symbol viewBox='0 0 24 24' id='uc-icon-about' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M11.152 14.12v.1h1.523v-.1c.007-.409.053-.752.138-1.028.086-.277.22-.517.405-.72.188-.202.434-.397.735-.586.32-.191.593-.412.82-.66.232-.249.41-.531.533-.847.125-.32.187-.678.187-1.076 0-.579-.137-1.085-.41-1.518a2.717 2.717 0 0 0-1.14-1.018c-.49-.245-1.062-.367-1.715-.367-.597 0-1.142.114-1.636.34-.49.228-.884.564-1.182 1.008-.299.44-.46.98-.485 1.619h1.62c.024-.377.118-.684.282-.922a1.48 1.48 0 0 1 .617-.532c.25-.114.51-.17.784-.17.301 0 .575.063.82.191.248.124.447.302.597.533.149.23.223.504.223.82 0 .263-.05.502-.149.72a1.91 1.91 0 0 1-.405.574 3.48 3.48 0 0 1-.575.453 4.22 4.22 0 0 0-.847.66c-.234.242-.415.558-.543.949-.125.39-.19.916-.197 1.577Zm.053 3.03c.21.206.46.31.75.31.196 0 .374-.049.534-.144a1.1 1.1 0 0 0 .383-.384c.1-.163.15-.343.15-.538a1 1 0 0 0-.32-.746 1.019 1.019 0 0 0-.746-.314c-.291 0-.542.105-.751.314-.21.206-.314.455-.314.746 0 .295.104.547.314.756ZM24 12c0 6.627-5.373 12-12 12S0 18.627 0 12 5.373 0 12 0s12 5.373 12 12Zm-1.5 0c0 5.799-4.701 10.5-10.5 10.5S1.5 17.799 1.5 12 6.201 1.5 12 1.5 22.5 6.201 22.5 12Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-add' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M12.75 21a.75.75 0 0 1-1.5 0v-8.25H3a.75.75 0 0 1 0-1.5h8.25V3a.75.75 0 0 1 1.5 0v8.25H21a.75.75 0 0 1 0 1.5h-8.25V21Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-arrow-down' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M11.5 23.03a.75.75 0 0 0 .999 0l9.29-8.276a.75.75 0 0 0-.998-1.12l-8.042 7.164V1.53a.75.75 0 0 0-1.5 0v19.267l-8.04-7.163a.75.75 0 0 0-.998 1.12z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-back' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M20.251 12a.75.75 0 0 1-.75.75H6.067l5.72 5.85a.75.75 0 1 1-1.072 1.05L4.136 12.92a1.292 1.292 0 0 1 0-1.842l6.579-6.728a.75.75 0 1 1 1.072 1.048l-5.72 5.851H19.5a.75.75 0 0 1 .75.75Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-badge-error' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M13.6 18.4a1.6 1.6 0 1 1-3.2 0 1.6 1.6 0 0 1 3.2 0zM12 4.5A1.5 1.5 0 0 1 13.5 6v7a1.5 1.5 0 0 1-3 0V6A1.5 1.5 0 0 1 12 4.5z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-badge-success' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='m10.5 18.204 7.6-8.183a1.5 1.5 0 0 0-2.2-2.042l-5.4 5.817-2.4-2.586a1.5 1.5 0 1 0-2.2 2.041l4.6 4.953Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-box' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M1.01 4.148a.75.75 0 0 1 .75.75v4.348a4.437 4.437 0 0 1 2.988-1.153c1.734 0 3.23.992 3.978 2.438a4.478 4.478 0 0 1 3.978-2.438c2.49 0 4.488 2.044 4.488 4.543 0 2.5-1.999 4.544-4.488 4.544a4.478 4.478 0 0 1-3.978-2.438 4.478 4.478 0 0 1-3.978 2.438C2.26 17.18.26 15.135.26 12.636V4.898a.75.75 0 0 1 .75-.75Zm.75 8.488c0 1.692 1.348 3.044 2.988 3.044s2.989-1.352 2.989-3.044c0-1.691-1.349-3.043-2.989-3.043S1.76 10.945 1.76 12.636Zm10.944-3.043c-1.64 0-2.988 1.352-2.988 3.043 0 1.692 1.348 3.044 2.988 3.044s2.988-1.352 2.988-3.044c0-1.69-1.348-3.043-2.988-3.043Zm4.328-1.23a.75.75 0 0 1 1.052.128l2.333 2.983 2.333-2.983a.75.75 0 0 1 1.181.924l-2.562 3.277 2.562 3.276a.75.75 0 1 1-1.181.924l-2.333-2.983-2.333 2.983a.75.75 0 1 1-1.181-.924l2.562-3.276-2.562-3.277a.75.75 0 0 1 .129-1.052Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-camera' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M7.65 2.55a.75.75 0 0 1 .6-.3h7.5a.75.75 0 0 1 .6.3l2.025 2.7H21a3 3 0 0 1 3 3v10.5a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V8.25a3 3 0 0 1 3-3h2.625zm.975 1.2L6.6 6.45a.75.75 0 0 1-.6.3H3a1.5 1.5 0 0 0-1.5 1.5v10.5a1.5 1.5 0 0 0 1.5 1.5h18a1.5 1.5 0 0 0 1.5-1.5V8.25a1.5 1.5 0 0 0-1.5-1.5h-3a.75.75 0 0 1-.6-.3l-2.025-2.7zm3.375 6a3.375 3.375 0 1 0 0 6.75 3.375 3.375 0 0 0 0-6.75zm-4.875 3.375a4.875 4.875 0 1 1 9.75 0 4.875 4.875 0 0 1-9.75 0z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-camera-full' xmlns='http://www.w3.org/2000/svg'><path fill-rule='evenodd' clip-rule='evenodd' d='M2 4.667a2 2 0 0 0-2 2V16a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6.667a2 2 0 0 0-2-2h-2.667l-2-2.667H6.667l-2 2.667H2Zm8 10a3.667 3.667 0 1 0 0-7.334 3.667 3.667 0 0 0 0 7.334Z' fill='currentColor'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-close' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M4.604 4.604a.75.75 0 0 1 1.06 0L12 10.939l6.335-6.335a.75.75 0 1 1 1.061 1.06L13.061 12l6.335 6.335a.75.75 0 1 1-1.06 1.061L12 13.061l-6.335 6.335a.75.75 0 0 1-1.061-1.06L10.939 12 4.604 5.665a.75.75 0 0 1 0-1.061z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-collapse' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M3.116 12a.75.75 0 0 1 .75-.75h16.268a.75.75 0 0 1 0 1.5H3.866a.75.75 0 0 1-.75-.75Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-default' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M11.501.392a.75.75 0 0 1 .998 0l6.704 5.972a.75.75 0 0 1-.998 1.12l-5.455-4.86v13.439a.75.75 0 0 1-1.5 0V2.625l-5.454 4.86a.75.75 0 1 1-.998-1.12zM.857 16.73a.75.75 0 0 1 .75.75v4.914h20.786v-4.914a.75.75 0 0 1 1.5 0v5.664a.75.75 0 0 1-.75.75H.857a.75.75 0 0 1-.75-.75v-5.664a.75.75 0 0 1 .75-.75z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-dropbox' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M6.019 1.92a.75.75 0 0 1 .806 0L12 5.219l5.176-3.297a.75.75 0 0 1 .806 0l5.577 3.553a.75.75 0 0 1 0 1.265l-4.574 2.914 4.574 2.914a.75.75 0 0 1 0 1.265l-5.577 3.554a.75.75 0 0 1-.806 0L12 14.089l-5.175 3.297a.75.75 0 0 1-.806 0L.44 13.833a.75.75 0 0 1 0-1.266l4.575-2.914L.44 6.74a.75.75 0 0 1 0-1.265zm.403 8.616L2.24 13.2l4.182 2.664 4.181-2.664zm6.975 2.664 4.182 2.664L21.76 13.2l-4.181-2.664zm2.776-3.547L12 12.311 7.828 9.653 12 6.995zm1.406-.882 4.181-2.664-4.181-2.664-4.182 2.664zm-6.976-2.664L6.422 3.443 2.24 6.107 6.422 8.77zM5.791 18.544a.75.75 0 0 1 1.035-.23l5.175 3.297 5.175-3.297a.75.75 0 1 1 .806 1.265l-5.578 3.554a.75.75 0 0 1-.806 0L6.02 19.579a.75.75 0 0 1-.23-1.035z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-edit-file' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M18.558 2.804a.78.78 0 0 0-.557.235l-.008.007-2.472 2.46 3.847 3.848 2.46-2.473.004-.003a.78.78 0 0 0 0-1.108l-.004-.003-2.712-2.728a.78.78 0 0 0-.558-.235Zm-.248 7.613-3.852-3.852-8.93 8.887-1.516 5.41 5.41-1.515 8.888-8.93Zm-.636-8.934a2.28 2.28 0 0 1 2.512.505l2.702 2.717.002.002a2.278 2.278 0 0 1 0 3.234l-.002.002-12.541 12.602a.75.75 0 0 1-.33.193l-6.884 1.928a.75.75 0 0 1-.925-.924l1.928-6.885a.75.75 0 0 1 .193-.33l12.603-12.54a2.28 2.28 0 0 1 .742-.504Z' clip-rule='evenodd'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-error' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M13 13h-2V7h2m0 10h-2v-2h2M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-evernote' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M9.804 2.27v-.048c.055-.263.313-.562.85-.562h.44c.142 0 .325.014.526.033.066.009.124.023.267.06l.13.032h.002c.319.079.515.275.644.482a1.461 1.461 0 0 1 .16.356l.004.012a.75.75 0 0 0 .603.577l1.191.207a1988.512 1988.512 0 0 0 2.332.402c.512.083 1.1.178 1.665.442.64.3 1.19.795 1.376 1.77.548 2.931.657 5.829.621 8a39.233 39.233 0 0 1-.125 2.602 17.518 17.518 0 0 1-.092.849.735.735 0 0 0-.024.112c-.378 2.705-1.269 3.796-2.04 4.27-.746.457-1.53.451-2.217.447h-.192c-.46 0-1.073-.23-1.581-.635-.518-.412-.763-.87-.763-1.217 0-.45.188-.688.355-.786.161-.095.436-.137.796.087a.75.75 0 1 0 .792-1.274c-.766-.476-1.64-.52-2.345-.108-.7.409-1.098 1.188-1.098 2.08 0 .996.634 1.84 1.329 2.392.704.56 1.638.96 2.515.96l.185.002c.667.009 1.874.025 3.007-.67 1.283-.786 2.314-2.358 2.733-5.276a4.213 4.213 0 0 0 .056-.335c.023-.184.051-.445.079-.772.055-.655.111-1.585.13-2.704.037-2.234-.074-5.239-.647-8.301v-.002c-.294-1.544-1.233-2.391-2.215-2.85-.777-.363-1.623-.496-2.129-.576a8.872 8.872 0 0 1-.25-.041l-.006-.001-1.99-.345-.761-.132a2.93 2.93 0 0 0-.182-.338A2.532 2.532 0 0 0 12.379.329l-.091-.023a3.967 3.967 0 0 0-.493-.103L11.769.2a7.846 7.846 0 0 0-.675-.04h-.44c-.733 0-1.368.284-1.795.742L2.416 7.431c-.468.428-.751 1.071-.751 1.81 0 .02 0 .041.003.062l.003.034c.017.21.038.468.096.796.107.715.275 1.47.391 1.994.029.13.055.245.075.342l.002.008c.258 1.141.641 1.94.978 2.466.168.263.323.456.444.589a2.808 2.808 0 0 0 .192.194c1.536 1.562 3.713 2.196 5.731 2.08.13-.005.35-.032.537-.073a2.627 2.627 0 0 0 .652-.24c.425-.26.75-.661.992-1.046.184-.294.342-.61.473-.915a3.8 3.8 0 0 0 .627.493 5.022 5.022 0 0 0 1.97.709l.023.002.018.003.11.016c.088.014.205.035.325.058l.056.014c.088.022.164.04.235.061a1.736 1.736 0 0 1 .145.048l.03.014c.765.34 1.302 1.09 1.302 1.871a.75.75 0 0 0 1.5 0c0-1.456-.964-2.69-2.18-3.235a3.595 3.595 0 0 0-.679-.217l-.063-.015a10.616 10.616 0 0 0-.606-.105l-.02-.003-.03-.003h-.002a3.542 3.542 0 0 1-1.331-.485c-.471-.298-.788-.692-.828-1.234a.75.75 0 0 0-1.48-.106l-.001.003-.004.017a8.23 8.23 0 0 1-.092.352 9.963 9.963 0 0 1-.298.892c-.132.34-.29.68-.47.966-.174.276-.339.454-.478.549a1.178 1.178 0 0 1-.221.072 1.949 1.949 0 0 1-.241.036h-.013l-.032.002c-1.684.1-3.423-.437-4.604-1.65a.746.746 0 0 0-.053-.05L4.84 14.6a1.348 1.348 0 0 1-.07-.073 2.99 2.99 0 0 1-.293-.392c-.242-.379-.558-1.014-.778-1.985a54.1 54.1 0 0 0-.083-.376 27.494 27.494 0 0 1-.367-1.872l-.003-.02a6.791 6.791 0 0 1-.08-.67c.004-.277.086-.475.2-.609l.067-.067a.63.63 0 0 1 .292-.145h.05c.18 0 1.095.055 2.013.115l1.207.08.534.037a.747.747 0 0 0 .052.002c.782 0 1.349-.206 1.759-.585l.005-.005c.553-.52.622-1.225.622-1.76V6.24l-.026-.565A774.97 774.97 0 0 1 9.885 4.4c-.042-.961-.081-1.939-.081-2.13ZM4.995 6.953a251.126 251.126 0 0 1 2.102.137l.508.035c.48-.004.646-.122.715-.185.07-.068.146-.209.147-.649l-.024-.548a791.69 791.69 0 0 1-.095-2.187L4.995 6.953Zm16.122 9.996Zm-5.479-5.323a.75.75 0 0 0 1.014.31 2.04 2.04 0 0 1 .304-.089 1.84 1.84 0 0 1 .544-.039c.215.023.321.06.37.085.033.016.039.026.047.04a.75.75 0 0 0 1.289-.767c-.337-.567-.906-.783-1.552-.85a3.334 3.334 0 0 0-1.002.062c-.27.056-.531.14-.705.234a.75.75 0 0 0-.31 1.014Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-expand' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='m12 8.337-8.47 8.47a.75.75 0 0 1-1.06-1.06l8.605-8.606a1.29 1.29 0 0 1 1.85 0l8.605 8.605a.75.75 0 1 1-1.06 1.06L12 8.338Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-external-source-placeholder' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M6.341 3.27a10.5 10.5 0 0 1 5.834-1.77.75.75 0 0 0 0-1.5 12 12 0 1 0 12 12 .75.75 0 0 0-1.5 0A10.5 10.5 0 1 1 6.34 3.27Zm14.145 1.48a.75.75 0 1 0-1.06-1.062L9.925 13.19V7.95a.75.75 0 1 0-1.5 0V15c0 .414.336.75.75.75h7.05a.75.75 0 0 0 0-1.5h-5.24l9.501-9.5Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-facebook' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M12 1.5C6.201 1.5 1.5 6.201 1.5 12c0 4.943 3.416 9.089 8.016 10.204v-6.108H7.383a.75.75 0 0 1-.75-.75v-3.281a.75.75 0 0 1 .75-.75h2.133V9.393c0-.958.225-2.511 1.38-3.65 1.194-1.177 3.174-1.718 6.254-1.056a.75.75 0 0 1 .592.733v2.754a.75.75 0 0 1-.75.75c-.692 0-1.203.026-1.584.082-.387.057-.578.137-.675.202-.109.073-.237.205-.237 1.029v1.078h2.39a.75.75 0 0 1 .742.866l-.516 3.281a.75.75 0 0 1-.74.634h-1.876v6.106C19.09 21.082 22.5 16.939 22.5 12c0-5.799-4.701-10.5-10.5-10.5zM0 12C0 5.373 5.373 0 12 0s12 5.373 12 12c0 5.995-4.395 10.961-10.138 11.856a.75.75 0 0 1-.866-.74v-7.77a.75.75 0 0 1 .75-.75h1.984l.28-1.781h-2.264a.75.75 0 0 1-.75-.75v-1.828c0-.829.089-1.729.9-2.274.363-.244.807-.37 1.293-.441a9.623 9.623 0 0 1 1.053-.086V6.04c-2.41-.405-3.645.132-4.293.771-.737.728-.933 1.793-.933 2.582v2.672a.75.75 0 0 1-.75.75H8.133v1.78h2.133a.75.75 0 0 1 .75.75v7.772a.75.75 0 0 1-.865.741C4.4 22.968 0 18 0 12z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-file' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M2.895 1.201c0-.473.383-.857.857-.857h8.4c.227 0 .445.09.606.251l8.4 8.4c.16.16.25.379.25.606v13.2a.857.857 0 0 1-.856.857h-16.8a.857.857 0 0 1-.857-.857zm1.714.857v19.886h15.085V10.458h-7.542a.857.857 0 0 1-.858-.857V2.058zm8.4 1.213 5.473 5.473H13.01z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-flickr' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M5.959 7.926c-2.298 0-4.14 1.834-4.14 4.073 0 2.241 1.842 4.075 4.14 4.075 2.302 0 4.145-1.834 4.145-4.075 0-2.238-1.843-4.073-4.145-4.073Zm-5.64 4.073c0-3.086 2.533-5.573 5.64-5.573 3.11 0 5.645 2.486 5.645 5.573 0 3.089-2.535 5.575-5.645 5.575-3.107 0-5.64-2.487-5.64-5.575Zm18.07-4.073c-2.301 0-4.144 1.835-4.144 4.073 0 2.24 1.843 4.075 4.145 4.075 2.299 0 4.141-1.834 4.141-4.075 0-2.239-1.842-4.073-4.141-4.073Zm-5.644 4.073c0-3.087 2.535-5.573 5.645-5.573 3.108 0 5.641 2.487 5.641 5.573 0 3.088-2.533 5.575-5.641 5.575-3.11 0-5.645-2.486-5.645-5.575Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-gdrive' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M7.736 1.818a.75.75 0 0 1 .647-.37h7.587a.75.75 0 0 1 .655.383l7.233 12.946a.75.75 0 0 1-.003.737l-3.794 6.66a.75.75 0 0 1-.651.378H4.59a.75.75 0 0 1-.651-.378l-3.794-6.66a.75.75 0 0 1 .005-.75zm.64 1.876L1.663 15.148l2.93 5.145 6.655-11.581zm3.736 6.526-2.398 4.173H14.5zm4.116 4.173h5.697L15.53 2.947H9.677zm5.685 1.5H8.852l-2.966 5.16h13.088z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-gphotos' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M12.51 0c-.702 0-1.272.57-1.272 1.273V7.35A6.381 6.381 0 0 0 0 11.489c0 .703.57 1.273 1.273 1.273H7.35A6.381 6.381 0 0 0 11.488 24c.704 0 1.274-.57 1.274-1.273V16.65A6.381 6.381 0 0 0 24 12.51c0-.703-.57-1.273-1.273-1.273H16.65A6.381 6.381 0 0 0 12.511 0Zm.252 11.232V1.53a4.857 4.857 0 0 1 0 9.702Zm-1.53.006H1.53a4.857 4.857 0 0 1 9.702 0Zm1.536 1.524a4.857 4.857 0 0 0 9.702 0h-9.702Zm-6.136 4.857c0-2.598 2.04-4.72 4.606-4.85v9.7a4.857 4.857 0 0 1-4.606-4.85Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-huddle' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M6.204 2.002c-.252.23-.357.486-.357.67V21.07c0 .15.084.505.313.812.208.28.499.477.929.477.519 0 .796-.174.956-.365.178-.212.286-.535.286-.924v-.013l.117-6.58c.004-1.725 1.419-3.883 3.867-3.883 1.33 0 2.332.581 2.987 1.364.637.762.95 1.717.95 2.526v6.47c0 .392.11.751.305.995.175.22.468.41 1.008.41.52 0 .816-.198 1.002-.437.207-.266.31-.633.31-.969V14.04c0-2.81-1.943-5.108-4.136-5.422a5.971 5.971 0 0 0-3.183.41c-.912.393-1.538.96-1.81 1.489a.75.75 0 0 1-1.417-.344v-7.5c0-.587-.47-1.031-1.242-1.031-.315 0-.638.136-.885.36ZM5.194.892A2.844 2.844 0 0 1 7.09.142c1.328 0 2.742.867 2.742 2.53v5.607a6.358 6.358 0 0 1 1.133-.629 7.47 7.47 0 0 1 3.989-.516c3.056.436 5.425 3.482 5.425 6.906v6.914c0 .602-.177 1.313-.627 1.89-.47.605-1.204 1.016-2.186 1.016-.96 0-1.698-.37-2.179-.973-.46-.575-.633-1.294-.633-1.933v-6.469c0-.456-.19-1.071-.602-1.563-.394-.471-.986-.827-1.836-.827-1.447 0-2.367 1.304-2.367 2.39v.014l-.117 6.58c-.001.64-.177 1.333-.637 1.881-.48.57-1.2.9-2.105.9-.995 0-1.7-.5-2.132-1.081-.41-.552-.61-1.217-.61-1.708V2.672c0-.707.366-1.341.847-1.78Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-info' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M11 9h2V7h-2m1 13c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0-18A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2m-1 15h2v-6h-2v6Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-local' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M3 3.75a1.5 1.5 0 0 0-1.5 1.5v13.5a1.5 1.5 0 0 0 1.5 1.5h18a1.5 1.5 0 0 0 1.5-1.5V9A1.5 1.5 0 0 0 21 7.5h-9a.75.75 0 0 1-.643-.364L9.325 3.75zm-3 1.5a3 3 0 0 1 3-3h6.75a.75.75 0 0 1 .643.364L12.425 6H21a3 3 0 0 1 3 3v9.75a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-microphone' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' clip-rule='evenodd' d='M7.5 4.781a4.5 4.5 0 0 1 9 0v6.469a4.5 4.5 0 1 1-9 0V4.781Zm4.5-3a3 3 0 0 0-3 3v6.469a3 3 0 1 0 6 0V4.781a3 3 0 0 0-3-3Zm-8.156 8.11a.75.75 0 0 1 .75.75 7.406 7.406 0 1 0 14.812 0 .75.75 0 0 1 1.5 0 8.907 8.907 0 0 1-8.156 8.875v2.703h3.258a.75.75 0 1 1 0 1.5H7.992a.75.75 0 0 1 0-1.5h3.258v-2.703a8.907 8.907 0 0 1-8.156-8.875.75.75 0 0 1 .75-.75Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-microphone-mute' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' clip-rule='evenodd' d='M7.5 4.781a4.5 4.5 0 0 1 9 0V6l3.524-3.524a.75.75 0 1 1 1.061 1.06L5.036 19.585a.75.75 0 0 1-1.06-1.06l1.656-1.657a8.88 8.88 0 0 1-2.538-6.227.75.75 0 0 1 1.5 0c0 2.009.8 3.83 2.1 5.166l1.771-1.772A4.483 4.483 0 0 1 7.5 11.25V4.781Zm2.037 8.182L15 7.5V4.781a3 3 0 1 0-6 0v6.469c0 .637.198 1.227.537 1.713Zm10.62-3.072a.75.75 0 0 1 .75.75 8.907 8.907 0 0 1-8.157 8.875v2.703h3.258a.75.75 0 1 1 0 1.5H7.992a.75.75 0 0 1 0-1.5h3.258v-2.703a8.855 8.855 0 0 1-3.035-.811.75.75 0 1 1 .638-1.358 7.406 7.406 0 0 0 10.553-6.707.75.75 0 0 1 .75-.75ZM15 10.81a.75.75 0 0 1 1.5 0v.439a4.5 4.5 0 0 1-5 4.473.75.75 0 1 1 .166-1.491A3 3 0 0 0 15 11.25v-.44Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-onedrive' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M13.616 4.147a7.689 7.689 0 0 0-7.642 3.285A6.299 6.299 0 0 0 1.455 17.3c.684.894 2.473 2.658 5.17 2.658h12.141c.95 0 1.882-.256 2.697-.743.815-.486 1.514-1.247 1.964-2.083a5.26 5.26 0 0 0-3.713-7.612 7.69 7.69 0 0 0-6.098-5.373ZM3.34 17.15c.674.63 1.761 1.308 3.284 1.308h12.142a3.76 3.76 0 0 0 2.915-1.383l-7.494-4.489L3.34 17.15Zm10.875-6.25 2.47-1.038a5.239 5.239 0 0 1 1.427-.389 6.19 6.19 0 0 0-10.3-1.952 6.338 6.338 0 0 1 2.118.813l4.285 2.567Zm4.55.033c-.512 0-1.019.104-1.489.307l-.006.003-1.414.594 6.521 3.906a3.76 3.76 0 0 0-3.357-4.8l-.254-.01ZM4.097 9.617A4.799 4.799 0 0 1 6.558 8.9c.9 0 1.84.25 2.587.713l3.4 2.037-10.17 4.28a4.799 4.799 0 0 1 1.721-6.312Z'/></symbol><symbol fill='none' viewBox='0 0 10 10' id='uc-icon-pause' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' d='M1 0h2.5v10H1zM6.5 0H9v10H6.5z'/></symbol><symbol fill='none' viewBox='0 0 10 10' id='uc-icon-play' xmlns='http://www.w3.org/2000/svg'><path d='m1 0 9 5-9 5V0Z' fill='currentColor'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-remove-file' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M11.955 3.3A2.969 2.969 0 0 0 8.998 6h5.914a2.97 2.97 0 0 0-2.957-2.7zM16.416 6a4.47 4.47 0 0 0-8.922 0h-2.32a.755.755 0 0 0-.111.008H3.075a.75.75 0 1 0 0 1.5h1.35V19.35a2.85 2.85 0 0 0 2.85 2.85h9.45a2.85 2.85 0 0 0 2.85-2.85V7.508h1.35a.75.75 0 0 0 0-1.5h-1.989A.754.754 0 0 0 18.825 6zM5.925 7.508V19.35a1.35 1.35 0 0 0 1.35 1.35h9.45a1.35 1.35 0 0 0 1.35-1.35V7.508z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-select' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='m7 10 5 5 5-5H7Z'/></symbol><symbol fill='none' viewBox='0 0 20 20' id='uc-icon-square' xmlns='http://www.w3.org/2000/svg'><rect width='20' height='20' rx='4' fill='#fff'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-upload' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M11.501.392a.75.75 0 0 1 .998 0l6.704 5.972a.75.75 0 0 1-.998 1.12l-5.455-4.86v13.439a.75.75 0 0 1-1.5 0V2.625l-5.454 4.86a.75.75 0 1 1-.998-1.12zM.857 16.73a.75.75 0 0 1 .75.75v4.914h20.786v-4.914a.75.75 0 0 1 1.5 0v5.664a.75.75 0 0 1-.75.75H.857a.75.75 0 0 1-.75-.75v-5.664a.75.75 0 0 1 .75-.75z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-upload-error' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M13 13h-2V7h2m0 10h-2v-2h2M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-url' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M19.11 3.67c-1.71-1.709-4.578-1.682-6.408.148l-2.22 2.22a.75.75 0 0 1-1.062-1.06l2.222-2.221C14.018.381 17.836.276 20.17 2.61l1.22 1.22c2.335 2.334 2.23 6.153-.147 8.529l-2.22 2.22a.75.75 0 0 1-1.062-1.06l2.222-2.221c1.83-1.83 1.856-4.698.147-6.408zm-3.36 4.58a.75.75 0 0 1 0 1.06l-6.439 6.44a.75.75 0 0 1-1.06-1.06l6.439-6.44a.75.75 0 0 1 1.06 0zM6.04 9.42a.75.75 0 0 1 0 1.061l-2.222 2.222c-1.83 1.83-1.856 4.698-.147 6.407l1.22 1.22c1.71 1.71 4.578 1.683 6.408-.147l2.221-2.221a.75.75 0 1 1 1.06 1.06l-2.22 2.222c-2.377 2.376-6.195 2.481-8.53.147l-1.22-1.22c-2.334-2.334-2.228-6.153.148-8.53l2.221-2.22a.75.75 0 0 1 1.06 0z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-video-camera' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' clip-rule='evenodd' d='M0 6.75a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v1.078L22.873 5A.75.75 0 0 1 24 5.648v12.704a.75.75 0 0 1-1.123.65L18 16.207v1.043a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V6.75Zm18 7.728 4.5 2.58V6.95L18 9.562v4.916ZM16.5 6.75a1.5 1.5 0 0 0-1.5-1.5H3a1.5 1.5 0 0 0-1.5 1.5v10.5a1.5 1.5 0 0 0 1.5 1.5h12a1.5 1.5 0 0 0 1.5-1.5V6.75Z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-video-camera-full' xmlns='http://www.w3.org/2000/svg'><path d='M2 3.333a2 2 0 0 0-2 2v9.334a2 2 0 0 0 2 2h10.938a2 2 0 0 0 2-2v-2.013L20 15.646V4.354l-5.063 3.03v-2.05a2 2 0 0 0-2-2H2Z' fill='currentColor'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-vk' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M6.341 3.27a10.5 10.5 0 0 1 5.834-1.77.75.75 0 0 0 0-1.5 12 12 0 1 0 12 12 .75.75 0 0 0-1.5 0A10.5 10.5 0 1 1 6.34 3.27Zm14.145 1.48a.75.75 0 1 0-1.06-1.062L9.925 13.19V7.95a.75.75 0 1 0-1.5 0V15c0 .414.336.75.75.75h7.05a.75.75 0 0 0 0-1.5h-5.24l9.501-9.5Z'/></symbol></svg>";class Fh extends Ut{constructor(){super(...arguments);z(this,"requireCtxName",!0);z(this,"init$",FC(this));z(this,"_template",null)}initCallback(){var t;super.initCallback(),(t=this.a11y)==null||t.registerBlock(this)}static set template(t){this._template=N9+t+"<slot></slot>"}static get template(){return this._template}}z(Fh,"styleAttrs",["uc-wgt-common"]);const wE="active",Lu="___ACTIVITY_IS_ACTIVE___",ys=class ys extends Ut{constructor(){super(...arguments);z(this,"historyTracked",!1);z(this,"init$",zC(this));z(this,"_debouncedHistoryFlush",wi(this._historyFlush.bind(this),10))}_deactivate(){var i;let t=ys._activityCallbacks.get(this);this[Lu]=!1,this.removeAttribute(wE),(i=t==null?void 0:t.deactivateCallback)==null||i.call(t)}_activate(){var i;let t=ys._activityCallbacks.get(this);this.$["*historyBack"]=this.historyBack.bind(this),this[Lu]=!0,this.setAttribute(wE,""),(i=t==null?void 0:t.activateCallback)==null||i.call(t),this._debouncedHistoryFlush(),this.emit(Qt.ACTIVITY_CHANGE,{activity:this.activityType})}initCallback(){super.initCallback(),this.hasAttribute("current-activity")&&this.sub("*currentActivity",t=>{this.setAttribute("current-activity",t)}),this.activityType&&(this.hasAttribute("activity")||this.setAttribute("activity",this.activityType),this.sub("*currentActivity",t=>{try{this.activityType!==t&&this[Lu]?this._deactivate():this.activityType===t&&!this[Lu]&&this._activate()}catch(i){console.error(`Error in activity "${this.activityType}". `,i),this.$["*currentActivity"]=this.$["*history"][this.$["*history"].length-1]??null}t||(this.$["*history"]=[])}),this.has("*modalActive")&&this.sub("*modalActive",t=>{!t&&this.activityType===this.$["*currentActivity"]&&(this.$["*currentActivity"]=null)}))}_historyFlush(){let t=this.$["*history"];t&&(t.length>10&&(t=t.slice(t.length-11,t.length-1)),this.historyTracked&&t[t.length-1]!==this.activityType&&t.push(this.activityType),this.$["*history"]=t)}_isActivityRegistered(){return this.activityType&&ys._activityCallbacks.has(this)}get isActivityActive(){return this[Lu]}get couldOpenActivity(){return!0}registerActivity(t,i={}){const{onActivate:s,onDeactivate:o}=i;ys._activityCallbacks.set(this,{activateCallback:s,deactivateCallback:o})}unregisterActivity(){this.isActivityActive&&this._deactivate(),ys._activityCallbacks.delete(this)}destroyCallback(){super.destroyCallback(),this._isActivityRegistered()&&this.unregisterActivity();const t=this.$["*currentActivity"];!![...this.blocksRegistry].find(s=>s instanceof ys&&s.activityType===t)||(this.$["*currentActivity"]=null,this.setOrAddState("*modalActive",!1))}get activityKey(){return this.ctxName+this.activityType}get activityParams(){return this.$["*currentActivityParams"]}get initActivity(){return this.getCssData("--cfg-init-activity")}get doneActivity(){return this.getCssData("--cfg-done-activity")}historyBack(){let t=this.$["*history"];if(t){let i=t.pop();for(;i===this.activityType;)i=t.pop();let s=!!i;if(i){const o=[...this.blocksRegistry].find(c=>c.activityType===i);s=(o==null?void 0:o.couldOpenActivity)??!1}i=s?i:void 0,this.$["*currentActivity"]=i,this.$["*history"]=t,i||this.setOrAddState("*modalActive",!1)}}};z(ys,"_activityCallbacks",new Map);let ct=ys;ct.activities=Object.freeze({START_FROM:"start-from",CAMERA:"camera",DRAW:"draw",UPLOAD_LIST:"upload-list",URL:"url",CLOUD_IMG_EDIT:"cloud-image-edit",EXTERNAL:"external"});const P9=20,fy=24,Xu=34,qC=3,Lr=qC/2,So=1,ff=100/3,et=1,EE=24,L9=6;function ql(n,e){for(let t in e)n.setAttributeNS(null,t,e[t].toString())}function ir(n,e={}){let t=document.createElementNS("http://www.w3.org/2000/svg",n);return ql(t,e),t}function U9(n,e,t){let{x:i,y:s,width:o,height:c}=n,h=e.includes("w")?0:1,d=e.includes("n")?0:1,m=[-1,1][h],y=[-1,1][d],_=[i+h*o+Lr*m,s+d*c+Lr*y-fy*t*y],b=[i+h*o+Lr*m,s+d*c+Lr*y],T=[i+h*o-fy*t*m+Lr*m,s+d*c+Lr*y];return{d:`M ${_[0]} ${_[1]} L ${b[0]} ${b[1]} L ${T[0]} ${T[1]}`,center:b}}function V9(n,e,t){let{x:i,y:s,width:o,height:c}=n,h=["n","s"].includes(e)?.5:{w:0,e:1}[e],d=["w","e"].includes(e)?.5:{n:0,s:1}[e],m=[-1,1][h],y=[-1,1][d],_,b;["n","s"].includes(e)?(_=[i+h*o-Xu*t/2,s+d*c+Lr*y],b=[i+h*o+Xu*t/2,s+d*c+Lr*y]):(_=[i+h*o+Lr*m,s+d*c-Xu*t/2],b=[i+h*o+Lr*m,s+d*c+Xu*t/2]);let T=`M ${_[0]} ${_[1]} L ${b[0]} ${b[1]}`,A=[b[0]-(b[0]-_[0])/2,b[1]-(b[1]-_[1])/2];return{d:T,center:A}}function $9(n){return n===""?"move":["e","w"].includes(n)?"ew-resize":["n","s"].includes(n)?"ns-resize":["nw","se"].includes(n)?"nwse-resize":"nesw-resize"}function j9({rect:n,delta:[e,t],imageBox:i}){return sm({...n,x:n.x+e,y:n.y+t},i)}function sm(n,e){let{x:t}=n,{y:i}=n;return n.x<e.x?t=e.x:n.x+n.width>e.x+e.width&&(t=e.x+e.width-n.width),n.y<e.y?i=e.y:n.y+n.height>e.y+e.height&&(i=e.y+e.height-n.height),{...n,x:t,y:i}}function z9({rect:n,delta:e,aspectRatio:t,imageBox:i}){const[,s]=e;let{y:o,width:c,height:h}=n;o+=s,h-=s,t&&(c=h*t);let d=n.x+n.width/2-c/2;return o<=i.y&&(o=i.y,h=n.y+n.height-o,t&&(c=h*t,d=n.x+n.width/2-c/2)),d<=i.x&&(d=i.x,o=n.y+n.height-h),d+c>=i.x+i.width&&(d=Math.max(i.x,i.x+i.width-c),c=i.x+i.width-d,t&&(h=c/t),o=n.y+n.height-h),h<et&&(h=et,t&&(c=h*t,d=n.x+n.width/2-c/2),o=n.y+n.height-h),c<et&&(c=et,t&&(h=c/t,d=n.x+n.width/2-c/2),o=n.y+n.height-h),{x:d,y:o,width:c,height:h}}function F9({rect:n,delta:e,aspectRatio:t,imageBox:i}){const[s]=e;let{x:o,width:c,height:h}=n;o+=s,c-=s,t&&(h=c/t);let d=n.y+n.height/2-h/2;return o<=i.x&&(o=i.x,c=n.x+n.width-o,t&&(h=c/t,d=n.y+n.height/2-h/2)),d<=i.y&&(d=i.y,o=n.x+n.width-c),d+h>=i.y+i.height&&(d=Math.max(i.y,i.y+i.height-h),h=i.y+i.height-d,t&&(c=h*t),o=n.x+n.width-c),h<et&&(h=et,t&&(c=h*t),d=n.y+n.height/2-h/2,o=n.x+n.width-c),c<et&&(c=et,t&&(h=c/t),d=n.y+n.height/2-h/2,o=n.x+n.width-c),{x:o,y:d,width:c,height:h}}function B9({rect:n,delta:e,aspectRatio:t,imageBox:i}){const[,s]=e;let{y:o,width:c,height:h}=n;h+=s,t&&(c=h*t);let d=n.x+n.width/2-c/2;return o+h>=i.y+i.height&&(h=i.y+i.height-o,t&&(c=h*t),d=n.x+n.width/2-c/2),d<=i.x&&(d=i.x,o=n.y),d+c>=i.x+i.width&&(d=Math.max(i.x,i.x+i.width-c),c=i.x+i.width-d,t&&(h=c/t),o=n.y),h<et&&(h=et,t&&(c=h*t),d=n.x+n.width/2-c/2),c<et&&(c=et,t&&(h=c/t),d=n.x+n.width/2-c/2),{x:d,y:o,width:c,height:h}}function H9({rect:n,delta:e,aspectRatio:t,imageBox:i}){const[s]=e;let{x:o,width:c,height:h}=n;c+=s,t&&(h=c/t);let d=n.y+n.height/2-h/2;return o+c>=i.x+i.width&&(c=i.x+i.width-o,t&&(h=c/t),d=n.y+n.height/2-h/2),d<=i.y&&(d=i.y,o=n.x),d+h>=i.y+i.height&&(d=Math.max(i.y,i.y+i.height-h),h=i.y+i.height-d,t&&(c=h*t),o=n.x),h<et&&(h=et,t&&(c=h*t),d=n.y+n.height/2-h/2),c<et&&(c=et,t&&(h=c/t),d=n.y+n.height/2-h/2),{x:o,y:d,width:c,height:h}}function q9({rect:n,delta:e,aspectRatio:t,imageBox:i}){let[s,o]=e,{x:c,y:h,width:d,height:m}=n;return c+s<i.x&&(s=i.x-c),h+o<i.y&&(o=i.y-h),c+=s,d-=s,h+=o,m-=o,t&&Math.abs(d/m)>t?(o=d/t-m,m+=o,h-=o,h<=i.y&&(m=m-(i.y-h),d=m*t,c=n.x+n.width-d,h=i.y)):t&&(s=m*t-d,d=d+s,c-=s,c<=i.x&&(d=d-(i.x-c),m=d/t,c=i.x,h=n.y+n.height-m)),m<et&&(m=et,t&&(d=m*t),c=n.x+n.width-d,h=n.y+n.height-m),d<et&&(d=et,t&&(m=d/t),c=n.x+n.width-d,h=n.y+n.height-m),{x:c,y:h,width:d,height:m}}function G9({rect:n,delta:e,aspectRatio:t,imageBox:i}){let[s,o]=e,{x:c,y:h,width:d,height:m}=n;return c+d+s>i.x+i.width&&(s=i.x+i.width-c-d),h+o<i.y&&(o=i.y-h),d+=s,h+=o,m-=o,t&&Math.abs(d/m)>t?(o=d/t-m,m+=o,h-=o,h<=i.y&&(m=m-(i.y-h),d=m*t,c=n.x,h=i.y)):t&&(s=m*t-d,d+=s,c+d>=i.x+i.width&&(d=i.x+i.width-c,m=d/t,c=i.x+i.width-d,h=n.y+n.height-m)),m<et&&(m=et,t&&(d=m*t),h=n.y+n.height-m),d<et&&(d=et,t&&(m=d/t),h=n.y+n.height-m),{x:c,y:h,width:d,height:m}}function K9({rect:n,delta:e,aspectRatio:t,imageBox:i}){let[s,o]=e,{x:c,y:h,width:d,height:m}=n;return c+s<i.x&&(s=i.x-c),h+m+o>i.y+i.height&&(o=i.y+i.height-h-m),c+=s,d-=s,m+=o,t&&Math.abs(d/m)>t?(o=d/t-m,m+=o,h+m>=i.y+i.height&&(m=i.y+i.height-h,d=m*t,c=n.x+n.width-d,h=i.y+i.height-m)):t&&(s=m*t-d,d+=s,c-=s,c<=i.x&&(d=d-(i.x-c),m=d/t,c=i.x,h=n.y)),m<et&&(m=et,t&&(d=m*t),c=n.x+n.width-d),d<et&&(d=et,t&&(m=d/t),c=n.x+n.width-d),{x:c,y:h,width:d,height:m}}function Y9({rect:n,delta:e,aspectRatio:t,imageBox:i}){let[s,o]=e,{x:c,y:h,width:d,height:m}=n;return c+d+s>i.x+i.width&&(s=i.x+i.width-c-d),h+m+o>i.y+i.height&&(o=i.y+i.height-h-m),d+=s,m+=o,t&&Math.abs(d/m)>t?(o=d/t-m,m+=o,h+m>=i.y+i.height&&(m=i.y+i.height-h,d=m*t,c=n.x,h=i.y+i.height-m)):t&&(s=m*t-d,d+=s,c+d>=i.x+i.width&&(d=i.x+i.width-c,m=d/t,c=i.x+i.width-d,h=n.y)),m<et&&(m=et,t&&(d=m*t)),d<et&&(d=et,t&&(m=d/t)),{x:c,y:h,width:d,height:m}}function X9({direction:n,...e}){switch(n){case"n":return z9(e);case"w":return F9(e);case"s":return B9(e);case"e":return H9(e);case"nw":return q9(e);case"ne":return G9(e);case"sw":return K9(e);case"se":return Y9(e);default:return e.rect}}function Q9(n,[e,t]){return n.x<=e&&e<=n.x+n.width&&n.y<=t&&t<=n.y+n.height}function W9(n,e){return n.x>=e.x&&n.y>=e.y&&n.x+n.width<=e.x+e.width&&n.y+n.height<=e.y+e.height}function Z9(n,e){return Math.abs(n.width/n.height-e)<.1}function Uu({width:n,height:e},t){let i=t/90%2!==0;return{width:i?e:n,height:i?n:e}}function J9(n,e,t){const i=n/e;let s,o;i>t?(s=Math.round(e*t),o=e):(s=n,o=Math.round(n/t));const c=Math.round((n-s)/2),h=Math.round((e-o)/2);return c+s>n&&(s=n-c),h+o>e&&(o=e-h),{x:c,y:h,width:s,height:o}}function Nf(n){return{x:Math.round(n.x),y:Math.round(n.y),width:Math.round(n.width),height:Math.round(n.height)}}function Kl(n,e,t){return Math.min(Math.max(n,e),t)}const GC=n=>{if(!n)return[];const[e,t]=n.split(":").map(Number);if(!Number.isFinite(e)||!Number.isFinite(t)){console.error(`Invalid crop preset: ${n}`);return}return[{type:"aspect-ratio",width:e,height:t}]},Ym="blocks",Xm="1.13.2";function eU(n){return IC({...n,libraryName:Ym,libraryVersion:Xm})}const TE=n=>Math.floor(n/1e3),tU=(n,{threshold:e})=>{const{secureExpire:t}=n,i=TE(Date.now()),s=Number(t),o=TE(e);return i+o>=s};class nU{constructor(e){z(this,"_block");z(this,"_secureToken",null);this._block=e}_debugPrint(...e){this._block.debugPrint("[secure-uploads]",...e)}async getSecureToken(){const{secureSignature:e,secureExpire:t,secureUploadsSignatureResolver:i}=this._block.cfg;if((e||t)&&i&&console.warn("Both secureSignature/secureExpire and secureUploadsSignatureResolver are set. secureUploadsSignatureResolver will be used."),i){if(!this._secureToken||tU(this._secureToken,{threshold:this._block.cfg.secureUploadsExpireThreshold})){this._secureToken?this._debugPrint("Secure signature is expired. Resolving a new one..."):this._debugPrint("Secure signature is not set yet.");try{const s=await i();s?!s.secureSignature||!s.secureExpire?console.error("Secure signature resolver returned an invalid result:",s):(this._debugPrint("Secure signature resolved:",s),this._debugPrint("Secure signature will expire in",new Date(Number(s.secureExpire)*1e3).toISOString()),this._secureToken=s):(this._debugPrint("Secure signature resolver returned nothing."),this._secureToken=null)}catch(s){console.error("Secure signature resolving failed. Falling back to the previous one.",s)}}return this._secureToken}return e&&t?(this._debugPrint("Secure signature and expire are set. Using them...",{secureSignature:e,secureExpire:t}),{secureSignature:e,secureExpire:t}):null}}const AE="[Typed State] Wrong property name: ",iU="[Typed State] Wrong property type: ";class rU{constructor(e,t){this.__typedSchema=e,this.__ctxId=t||$h.generate(),this.__schema=Object.keys(e).reduce((i,s)=>(i[s]=e[s].value,i),{}),this.__data=St.registerCtx(this.__schema,this.__ctxId)}get uid(){return this.__ctxId}setValue(e,t){if(!this.__typedSchema.hasOwnProperty(e)){console.warn(AE+e);return}let i=this.__typedSchema[e];if((t==null?void 0:t.constructor)===i.type||t instanceof i.type||i.nullable&&t===null){this.__data.pub(e,t);return}console.warn(iU+e)}setMultipleValues(e){for(let t in e)this.setValue(t,e[t])}getValue(e){if(!this.__typedSchema.hasOwnProperty(e)){console.warn(AE+e);return}return this.__data.read(e)}subscribe(e,t){return this.__data.sub(e,t)}remove(){St.deleteCtx(this.__ctxId)}}class sU{constructor(e){this.__typedSchema=e.typedSchema,this.__ctxId=e.ctxName||$h.generate(),this.__data=St.registerCtx({},this.__ctxId),this.__watchList=e.watchList||[],this.__subsMap=Object.create(null),this.__propertyObservers=new Set,this.__collectionObservers=new Set,this.__items=new Set,this.__removed=new Set,this.__added=new Set;let t=Object.create(null);this.__notifyObservers=(i,s)=>{this.__observeTimeout&&window.clearTimeout(this.__observeTimeout),t[i]||(t[i]=new Set),t[i].add(s),this.__observeTimeout=window.setTimeout(()=>{Object.keys(t).length!==0&&(this.__propertyObservers.forEach(o=>{o({...t})}),t=Object.create(null))})}}notify(){this.__notifyTimeout&&window.clearTimeout(this.__notifyTimeout),this.__notifyTimeout=window.setTimeout(()=>{let e=new Set(this.__added),t=new Set(this.__removed);this.__added.clear(),this.__removed.clear();for(const i of this.__collectionObservers)i==null||i([...this.__items],e,t)})}observeCollection(e){return this.__collectionObservers.add(e),this.__items.size>0&&this.notify(),()=>{this.unobserveCollection(e)}}unobserveCollection(e){var t;(t=this.__collectionObservers)==null||t.delete(e)}add(e){let t=new rU(this.__typedSchema);for(let i in e)t.setValue(i,e[i]);return this.__items.add(t.uid),this.notify(),this.__data.add(t.uid,t),this.__added.add(t),this.__watchList.forEach(i=>{this.__subsMap[t.uid]||(this.__subsMap[t.uid]=[]),this.__subsMap[t.uid].push(t.subscribe(i,()=>{this.__notifyObservers(i,t.uid)}))}),t.uid}read(e){return this.__data.read(e)}readProp(e,t){return this.read(e).getValue(t)}publishProp(e,t,i){this.read(e).setValue(t,i)}remove(e){this.__removed.add(this.__data.read(e)),this.__items.delete(e),this.notify(),this.__data.pub(e,null),delete this.__subsMap[e]}clearAll(){this.__items.forEach(e=>{this.remove(e)})}observeProperties(e){return this.__propertyObservers.add(e),()=>{this.unobserveProperties(e)}}unobserveProperties(e){var t;(t=this.__propertyObservers)==null||t.delete(e)}findItems(e){let t=[];return this.__items.forEach(i=>{let s=this.read(i);e(s)&&t.push(i)}),t}items(){return[...this.__items]}get size(){return this.__items.size}destroy(){St.deleteCtx(this.__ctxId),this.__propertyObservers=null,this.__collectionObservers=null;for(let e in this.__subsMap)this.__subsMap[e].forEach(t=>{t.remove()}),delete this.__subsMap[e]}}const Qm=Object.freeze({FACEBOOK:"facebook",DROPBOX:"dropbox",GDRIVE:"gdrive",GPHOTOS:"gphotos",FLICKR:"flickr",VK:"vk",EVERNOTE:"evernote",BOX:"box",ONEDRIVE:"onedrive",HUDDLE:"huddle"}),Nn=Object.freeze({LOCAL:"local",DROP_AREA:"drop-area",CAMERA:"camera",EXTERNAL:"external",API:"js-api",URL:"url",DRAW:"draw",...Qm}),Fv=["image/*","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/avif","image/avif-sequence",".heif",".heifs",".heic",".heics",".avif",".avifs"],KC=n=>n?n.filter(e=>typeof e=="string").map(e=>Is(e)).flat():[],YC=(n,e)=>e.some(t=>t.endsWith("*")?(t=t.replace("*",""),n.startsWith(t)):n===t),aU=(n,e)=>e.some(t=>t.startsWith(".")?n.toLowerCase().endsWith(t.toLowerCase()):!1),oU=n=>{let e=n==null?void 0:n.type;return e?YC(e,Fv):!1},lU=/[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}/i,cU=new RegExp(`^/?(${lU.source})(?:/(-/(?:[^/]+/)+)?([^/]*))?$`,"i"),uU=({url:n,cdnBase:e})=>{const t=new URL(e),i=new URL(n);if(t.host!==i.host)return null;const[,s,o,c]=cU.exec(i.pathname);return{uuid:s,cdnUrlModifiers:o||"",filename:c||null}},hU=n=>{const e=new Map;return(...t)=>{const i=JSON.stringify(t);if(e.has(i))return e.get(i);const s=n(...t);return e.set(i,s),s}},SE=new Set;function XC(n){SE.has(n)||(SE.add(n),console.warn(n))}function dU(n){let e=!1;return setTimeout(()=>{e=!0},0),i=>(...s)=>(e&&XC(n),i(...s))}function fU(n){const e={progress:()=>n.$["*commonProgress"],errors:()=>n.$["*collectionErrors"],group:()=>n.$["*groupInfo"],totalCount:()=>n.uploadCollection.size,failedCount:()=>t.failedEntries.length,successCount:()=>t.successEntries.length,uploadingCount:()=>t.uploadingEntries.length,status:()=>t.isFailed?"failed":t.isUploading?"uploading":t.isSuccess?"success":"idle",isSuccess:()=>t.allEntries.length>0&&t.errors.length===0&&t.successEntries.length===t.allEntries.length,isUploading:()=>t.allEntries.some(s=>s.status==="uploading"),isFailed:()=>t.errors.length>0||t.failedEntries.length>0,allEntries:()=>n.getOutputData(),successEntries:()=>t.allEntries.filter(s=>s.status==="success"),failedEntries:()=>t.allEntries.filter(s=>s.status==="failed"),uploadingEntries:()=>t.allEntries.filter(s=>s.status==="uploading"),idleEntries:()=>t.allEntries.filter(s=>s.status==="idle")},t={},i=dU("You're trying to access the OutputCollectionState asynchronously. In this case, the data you retrieve will be newer than it was when the OutputCollectionState was created or when the event was dispatched. If you want to retain the state at a specific moment in time, you should use the spread operator like this: `{...outputCollectionState}` or `{...e.detail}`");for(const[s,o]of Object.entries(e)){const c=s,d=hU(i(o));Object.defineProperty(t,c,{get:d,enumerable:!0})}return t}const jt=Object.freeze({PHOTO:"photo",VIDEO:"video"}),rr=Object.freeze({IDLE:"idle",SHOT:"shot",PLAY:"play",PAUSE:"pause",RESUME:"resume",STOP:"stop",RETAKE:"retake",ACCEPT:"accept"});class mU{constructor(e){z(this,"_ctx");z(this,"addFileFromUrl",(e,{silent:t,fileName:i,source:s}={})=>{const o=this._uploadCollection.add({externalUrl:e,fileName:i??null,silent:t??!1,source:s??Nn.API});return this.getOutputItem(o)});z(this,"addFileFromUuid",(e,{silent:t,fileName:i,source:s}={})=>{const o=this._uploadCollection.add({uuid:e,fileName:i??null,silent:t??!1,source:s??Nn.API});return this.getOutputItem(o)});z(this,"addFileFromCdnUrl",(e,{silent:t,fileName:i,source:s}={})=>{const o=uU({url:e,cdnBase:this.cfg.cdnCname});if(!o)throw new Error("Invalid CDN URL");const c=this._uploadCollection.add({uuid:o.uuid,cdnUrl:e,cdnUrlModifiers:o.cdnUrlModifiers,fileName:i??o.filename??null,silent:t??!1,source:s??Nn.API});return this.getOutputItem(c)});z(this,"addFileFromObject",(e,{silent:t,fileName:i,source:s,fullPath:o}={})=>{const c=this._uploadCollection.add({file:e,isImage:oU(e),mimeType:e.type,fileName:i??e.name,fileSize:e.size,silent:t??!1,source:s??Nn.API,fullPath:o??null});return this.getOutputItem(c)});z(this,"removeFileByInternalId",e=>{if(!this._uploadCollection.read(e))throw new Error(`File with internalId ${e} not found`);this._uploadCollection.remove(e)});z(this,"uploadAll",()=>{const e=this._uploadCollection.items().filter(t=>{const i=this._uploadCollection.read(t);return!i.getValue("isRemoved")&&!i.getValue("isUploading")&&!i.getValue("fileInfo")});e.length!==0&&(this._ctx.$["*uploadTrigger"]=new Set(e),this._ctx.emit(Qt.COMMON_UPLOAD_START,this.getOutputCollectionState()))});z(this,"openSystemDialog",(e={})=>{const t=bh(KC([this.cfg.accept??"",...this.cfg.imgOnly?Fv:[]])),i="uploadcare-file-input",s=document.createElement("input");if(s.setAttribute(i,""),Mv(s,{opacity:0,height:0,width:0,visibility:"hidden"}),s.type="file",s.multiple=this.cfg.multiple,e.captureCamera){s.capture=this.cfg.cameraCapture;const o=dc(this.cfg.cameraModes).includes(jt.VIDEO);s.accept=["image/*",o&&"video/*"].filter(Boolean).join(",")}else s.accept=t;s.addEventListener("change",()=>{s.files&&([...s.files].forEach(o=>this.addFileFromObject(o,{source:e.captureCamera?Nn.CAMERA:Nn.LOCAL})),this._ctx.$["*currentActivity"]=ct.activities.UPLOAD_LIST,this._ctx.setOrAddState("*modalActive",!0),s.remove())},{once:!0}),document.querySelectorAll(`[${i}]`).forEach(o=>o.remove()),document.body.appendChild(s),s.dispatchEvent(new MouseEvent("click"))});z(this,"getOutputItem",e=>{const t=St.getCtx(e).store,i=t.fileInfo;let s=t.isRemoved?"removed":t.errors.length>0?"failed":t.fileInfo?"success":t.isUploading?"uploading":"idle";return{uuid:(i==null?void 0:i.uuid)??t.uuid??null,internalId:e,name:(i==null?void 0:i.originalFilename)??t.fileName,size:(i==null?void 0:i.size)??t.fileSize,isImage:(i==null?void 0:i.isImage)??t.isImage,mimeType:(i==null?void 0:i.mimeType)??t.mimeType,file:t.file,externalUrl:t.externalUrl,cdnUrlModifiers:t.cdnUrlModifiers,cdnUrl:t.cdnUrl??(i==null?void 0:i.cdnUrl)??null,fullPath:t.fullPath,uploadProgress:t.uploadProgress,fileInfo:i??null,metadata:t.metadata??(i==null?void 0:i.metadata)??null,isSuccess:s==="success",isUploading:s==="uploading",isFailed:s==="failed",isRemoved:s==="removed",errors:t.errors,status:s,source:t==null?void 0:t.source}});z(this,"getOutputCollectionState",()=>fU(this._ctx));z(this,"initFlow",(e=!1)=>{var t;if(this._uploadCollection.size>0&&!e)this._ctx.set$({"*currentActivity":ct.activities.UPLOAD_LIST}),this._ctx.setOrAddState("*modalActive",!0);else if(((t=this._sourceList)==null?void 0:t.length)===1){const i=this._sourceList[0];if(i==="local"){this._ctx.$["*currentActivity"]=ct.activities.UPLOAD_LIST,this.openSystemDialog();return}const s=this._ctx.$["*blocksRegistry"],o=h=>"type"in h&&h.type===i,c=[...s].find(o);c==null||c.activate(),this._ctx.$["*currentActivity"]&&this._ctx.setOrAddState("*modalActive",!0)}else this._ctx.set$({"*currentActivity":ct.activities.START_FROM}),this._ctx.setOrAddState("*modalActive",!0)});z(this,"doneFlow",()=>{this._ctx.set$({"*currentActivity":this._ctx.doneActivity,"*history":this._ctx.doneActivity?[this._ctx.doneActivity]:[]}),this._ctx.$["*currentActivity"]||this._ctx.setOrAddState("*modalActive",!1)});z(this,"setCurrentActivity",(e,t=void 0)=>{if(this._ctx.hasBlockInCtx(i=>i.activityType===e)){this._ctx.set$({"*currentActivityParams":t??{},"*currentActivity":e});return}console.warn(`Activity type "${e}" not found in the context`)});z(this,"getCurrentActivity",()=>this._ctx.$["*currentActivity"]);z(this,"setModalState",e=>{if(e&&!this._ctx.$["*currentActivity"]){console.warn(`Can't open modal without current activity. Please use "setCurrentActivity" method first.`);return}this._ctx.setOrAddState("*modalActive",e)});this._ctx=e}get _uploadCollection(){return this._ctx.uploadCollection}get cfg(){return this._ctx.cfg}get l10n(){return this._ctx.l10n.bind(this._ctx)}removeAllFiles(){this._uploadCollection.clearAll()}get _sourceList(){let e=[];return this.cfg.sourceList&&(e=Is(this.cfg.sourceList)),e}}const pU=(n,e)=>{const t=e.cfg.imgOnly,i=n.isImage;if(!(!t||i)&&!(!n.fileInfo&&n.externalUrl)&&!(!n.fileInfo&&!n.mimeType))return{type:"NOT_AN_IMAGE",message:e.l10n("images-only-accepted"),payload:{entry:n}}},gU=(n,e)=>{const t=e.cfg.imgOnly,i=e.cfg.accept,s=KC([...t?Fv:[],i]);if(!s.length)return;const o=n.mimeType,c=n.name;if(!o||!c)return;const h=YC(o,s),d=aU(c,s);if(!h&&!d)return{type:"FORBIDDEN_FILE_TYPE",message:e.l10n("file-type-not-allowed"),payload:{entry:n}}},Nr=1e3,Co=Object.freeze({AUTO:"auto",BYTE:"byte",KB:"kb",MB:"mb",GB:"gb",TB:"tb",PB:"pb"}),Vu=n=>Math.ceil(n*100)/100,yU=(n,e=Co.AUTO)=>{const t=e===Co.AUTO;if(e===Co.BYTE||t&&n<Nr**1){const i=xC("en-US",n),s={one:"byte",other:"bytes"}[i];return`${n} ${s}`}return e===Co.KB||t&&n<Nr**2?`${Vu(n/Nr**1)} KB`:e===Co.MB||t&&n<Nr**3?`${Vu(n/Nr**2)} MB`:e===Co.GB||t&&n<Nr**4?`${Vu(n/Nr**3)} GB`:e===Co.TB||t&&n<Nr**5?`${Vu(n/Nr**4)} TB`:`${Vu(n/Nr**5)} PB`},vU=(n,e)=>{const t=e.cfg.maxLocalFileSizeBytes,i=n.size;if(t&&i&&i>t)return{type:"FILE_SIZE_EXCEEDED",message:e.l10n("files-max-size-limit-error",{maxFileSize:yU(t)}),payload:{entry:n}}},_U=(n,e)=>{const{internalId:t}=n,i=e._uploadCollection.read(t),s=i==null?void 0:i.getValue("uploadError");if(!s)return;if(s instanceof oi)return{type:"UPLOAD_ERROR",message:s.message,payload:{entry:n,error:s}};if(s instanceof zh)return{type:"NETWORK_ERROR",message:s.message,payload:{entry:n,error:s}};const o=s instanceof Error?s:new Error("Unknown error",{cause:s});return{type:"UNKNOWN_ERROR",message:o.message,payload:{entry:n,error:o}}},bU=(n,e)=>{if(n.failedCount>0)return{type:"SOME_FILES_HAS_ERRORS",message:e.l10n("some-files-were-not-uploaded")}},wU=(n,e)=>{const t=n.totalCount,i=e.cfg.multiple?e.cfg.multipleMin:0,s=e.cfg.multiple?e.cfg.multipleMax:1;if(i&&t<i)return{type:"TOO_FEW_FILES",message:e.l10n("files-count-limit-error-too-few",{min:i,max:s,total:t}),payload:{total:t,min:i,max:s}};if(s&&t>s)return{type:"TOO_MANY_FILES",message:e.l10n("files-count-limit-error-too-many",{min:i,max:s,total:t}),payload:{total:t,min:i,max:s}}},mf={file:"File validator execution has failed",collection:"Collection validator execution has failed",message:"Missing message. We recommend adding message: value."};class EU{constructor(e){z(this,"_blockInstance");z(this,"_fileValidators",[pU,gU,vU,_U]);z(this,"_collectionValidators",[wU,bU]);this._blockInstance=e,this._uploadCollection=this._blockInstance.uploadCollection;const t=()=>{this.runFileValidators(),this.runCollectionValidators()};this._blockInstance.subConfigValue("maxLocalFileSizeBytes",t),this._blockInstance.subConfigValue("multipleMin",t),this._blockInstance.subConfigValue("multipleMax",t),this._blockInstance.subConfigValue("multiple",t),this._blockInstance.subConfigValue("imgOnly",t),this._blockInstance.subConfigValue("accept",t)}runFileValidators(e){const t=e??this._uploadCollection.items();for(const i of t){const s=this._uploadCollection.read(i);s&&this._runFileValidatorsForEntry(s)}}runCollectionValidators(){const e=this._blockInstance.api.getOutputCollectionState(),t=[];for(const i of[...this._collectionValidators,...this._addCustomTypeToValidators(this._blockInstance.cfg.collectionValidators)])try{const s=i(e,this._blockInstance.api);if(!s)continue;s&&(t.push(s),s.message||console.warn(mf.message))}catch(s){console.warn(mf.collection,s)}this._blockInstance.$["*collectionErrors"]=t,t.length>0&&this._blockInstance.emit(Qt.COMMON_UPLOAD_FAILED,()=>this._blockInstance.api.getOutputCollectionState(),{debounce:!0})}_runFileValidatorsForEntry(e){const t=this._blockInstance.api.getOutputItem(e.uid),i=[];for(const s of[...this._fileValidators,...this._addCustomTypeToValidators(this._blockInstance.cfg.fileValidators)])try{const o=s(t,this._blockInstance.api);if(!o)continue;o&&(i.push(o),o.message||console.warn(mf.message))}catch(o){console.warn(mf.file,o)}e.setValue("errors",i)}_addCustomTypeToValidators(e){return e.map(t=>(...i)=>{const s=t(...i);return s?{...s,type:"CUSTOM_ERROR"}:void 0})}}const TU=Object.freeze({file:{type:File,value:null},externalUrl:{type:String,value:null},fileName:{type:String,value:null,nullable:!0},fileSize:{type:Number,value:null,nullable:!0},lastModified:{type:Number,value:Date.now()},uploadProgress:{type:Number,value:0},uuid:{type:String,value:null},isImage:{type:Boolean,value:!1},mimeType:{type:String,value:null,nullable:!0},ctxName:{type:String,value:null},cdnUrl:{type:String,value:null},cdnUrlModifiers:{type:String,value:null},fileInfo:{type:Dc,value:null},isUploading:{type:Boolean,value:!1},abortController:{type:AbortController,value:null,nullable:!0},thumbUrl:{type:String,value:null,nullable:!0},silent:{type:Boolean,value:!1},source:{type:String,value:!1,nullable:!0},fullPath:{type:String,value:null,nullable:!0},metadata:{type:Object,value:null,nullable:!0},errors:{type:Array,value:[]},uploadError:{type:Error,value:null,nullable:!0},isRemoved:{type:Boolean,value:!1}});class Un extends ct{constructor(){super(...arguments);z(this,"couldBeCtxOwner",!1);z(this,"isCtxOwner",!1);z(this,"init$",FC(this));z(this,"_flushOutputItems",wi(async()=>{if(this.getOutputData().length!==this.uploadCollection.size)return;const i=this.api.getOutputCollectionState();this.$["*collectionState"]=i,this.emit(Qt.CHANGE,()=>this.api.getOutputCollectionState(),{debounce:!0}),this.cfg.groupOutput&&i.totalCount>0&&i.status==="success"&&this._createGroup(i)},300));z(this,"_handleCollectionUpdate",(t,i,s)=>{var o;(i.size||s.size)&&(this.$["*groupInfo"]=null),this.validationManager.runFileValidators(),this.validationManager.runCollectionValidators();for(const c of i)c.getValue("silent")||this.emit(Qt.FILE_ADDED,this.api.getOutputItem(c.uid));for(const c of s)this.$["*uploadTrigger"].delete(c.uid),(o=c.getValue("abortController"))==null||o.abort(),c.setMultipleValues({isRemoved:!0,abortController:null,isUploading:!1,uploadProgress:0}),URL.revokeObjectURL(c==null?void 0:c.getValue("thumbUrl")),this.emit(Qt.FILE_REMOVED,this.api.getOutputItem(c.uid));this.$["*uploadList"]=t.map(c=>({uid:c})),this._flushCommonUploadProgress(),this._flushOutputItems()});z(this,"_handleCollectionPropertiesUpdate",t=>{this._flushOutputItems();const i=this.uploadCollection,s=[...new Set(Object.entries(t).filter(([o])=>["uploadError","fileInfo"].includes(o)).map(([,o])=>[...o]).flat())];if(s.length>0&&setTimeout(()=>{this.validationManager.runFileValidators(s)}),t.uploadProgress){for(const o of t.uploadProgress){const{isUploading:c,silent:h}=St.getCtx(o).store;c&&!h&&this.emit(Qt.FILE_UPLOAD_PROGRESS,this.api.getOutputItem(o))}this._flushCommonUploadProgress()}if(t.isUploading)for(const o of t.isUploading){const{isUploading:c,silent:h}=St.getCtx(o).store;c&&!h&&this.emit(Qt.FILE_UPLOAD_START,this.api.getOutputItem(o))}if(t.fileInfo){for(const o of t.fileInfo){const{fileInfo:c,silent:h}=St.getCtx(o).store;c&&!h&&this.emit(Qt.FILE_UPLOAD_SUCCESS,this.api.getOutputItem(o))}this.cfg.cropPreset&&this.setInitialCrop()}if(t.errors){for(const h of t.errors){const{errors:d}=St.getCtx(h).store;d.length>0&&(this.emit(Qt.FILE_UPLOAD_FAILED,this.api.getOutputItem(h)),this.emit(Qt.COMMON_UPLOAD_FAILED,()=>this.api.getOutputCollectionState(),{debounce:!0}))}const o=i.findItems(h=>!!h.getValue("fileInfo")),c=i.findItems(h=>h.getValue("errors").length>0);i.size>0&&c.length===0&&i.size===o.length&&this.$["*collectionErrors"].length===0&&this.emit(Qt.COMMON_UPLOAD_SUCCESS,this.api.getOutputCollectionState())}t.cdnUrl&&([...t.cdnUrl].filter(c=>{var h;return!!((h=this.uploadCollection.read(c))!=null&&h.getValue("cdnUrl"))}).forEach(c=>{this.emit(Qt.FILE_URL_CHANGED,this.api.getOutputItem(c))}),this.$["*groupInfo"]=null)});z(this,"_flushCommonUploadProgress",()=>{let t=0;const s=[...this.$["*uploadTrigger"]].filter(c=>!!this.uploadCollection.read(c));s.forEach(c=>{const h=this.uploadCollection.readProp(c,"uploadProgress");t+=h});const o=s.length?Math.round(t/s.length):0;this.$["*commonProgress"]!==o&&(this.$["*commonProgress"]=o,this.emit(Qt.COMMON_UPLOAD_PROGRESS,this.api.getOutputCollectionState()))})}get hasCtxOwner(){return this.hasBlockInCtx(t=>t instanceof Un?t.isCtxOwner&&t.isConnected&&t!==this:!1)}initCallback(){if(super.initCallback(),!this.has("*uploadCollection")){let t=new sU({typedSchema:TU,watchList:["uploadProgress","uploadError","fileInfo","errors","cdnUrl","isUploading"]});this.add("*uploadCollection",t)}this.has("*publicApi")||this.add("*publicApi",new mU(this)),this.has("*validationManager")||this.add("*validationManager",new EU(this)),!this.hasCtxOwner&&this.couldBeCtxOwner&&this.initCtxOwner()}get validationManager(){if(!this.has("*validationManager"))throw new Error("Unexpected error: ValidationManager is not initialized");return this.$["*validationManager"]}get api(){if(!this.has("*publicApi"))throw new Error("Unexpected error: UploaderPublicApi is not initialized");return this.$["*publicApi"]}getAPI(){return this.api}get uploadCollection(){if(!this.has("*uploadCollection"))throw new Error("Unexpected error: TypedCollection is not initialized");return this.$["*uploadCollection"]}destroyCtxCallback(){var t,i;(t=this._unobserveCollectionProperties)==null||t.call(this),(i=this._unobserveCollection)==null||i.call(this),this.uploadCollection.destroy(),this.$["*uploadCollection"]=null,super.destroyCtxCallback()}initCtxOwner(){this.isCtxOwner=!0,this._unobserveCollection=this.uploadCollection.observeCollection(this._handleCollectionUpdate),this._unobserveCollectionProperties=this.uploadCollection.observeProperties(this._handleCollectionPropertiesUpdate),this.subConfigValue("maxConcurrentRequests",t=>{this.$["*uploadQueue"].concurrency=Number(t)||1}),this.$["*secureUploadsManager"]||(this.$["*secureUploadsManager"]=new nU(this)),this.has("*modalActive")&&this.sub("*modalActive",t=>{t&&!this.$["*currentActivity"]&&(this.$["*modalActive"]=!1)})}async _createGroup(t){const i=await this.getUploadClientOptions(),s=t.allEntries.map(d=>d.uuid+(d.cdnUrlModifiers?`/${d.cdnUrlModifiers}`:"")),o=new AbortController,c=await p9(s,{...i,signal:o.signal});if(this.$["*collectionState"]!==t){o.abort();return}this.$["*groupInfo"]=c;const h=this.api.getOutputCollectionState();this.emit(Qt.GROUP_CREATED,h),this.emit(Qt.CHANGE,()=>this.api.getOutputCollectionState(),{debounce:!0}),this.$["*collectionState"]=h}setInitialCrop(){const t=GC(this.cfg.cropPreset);if(t){const[i]=t,s=this.uploadCollection.findItems(o=>{var c;return o.getValue("fileInfo")&&o.getValue("isImage")&&!((c=o.getValue("cdnUrlModifiers"))!=null&&c.includes("/crop/"))}).map(o=>this.uploadCollection.read(o));for(const o of s){const c=o.getValue("fileInfo"),{width:h,height:d}=c.imageInfo,m=i.width/i.height,y=J9(h,d,m),_=Pa(`crop/${y.width}x${y.height}/${y.x},${y.y}`,"preview");o.setMultipleValues({cdnUrlModifiers:_,cdnUrl:qi(o.getValue("cdnUrl"),_)}),this.uploadCollection.size===1&&this.cfg.useCloudImageEditor&&this.hasBlockInCtx(b=>b.activityType===ct.activities.CLOUD_IMG_EDIT)&&(this.$["*currentActivityParams"]={internalId:o.uid},this.$["*currentActivity"]=ct.activities.CLOUD_IMG_EDIT)}}}async getMetadataFor(t){const i=this.cfg.metadata||void 0;if(typeof i=="function"){const s=this.api.getOutputItem(t);return await i(s)}return i}async getUploadClientOptions(){const i=await this.$["*secureUploadsManager"].getSecureToken().catch(()=>null);return{store:this.cfg.store,publicKey:this.cfg.pubkey,baseCDN:this.cfg.cdnCname,baseURL:this.cfg.baseUrl,userAgent:eU,integration:this.cfg.userAgentIntegration,secureSignature:i==null?void 0:i.secureSignature,secureExpire:i==null?void 0:i.secureExpire,retryThrottledRequestMaxTimes:this.cfg.retryThrottledRequestMaxTimes,multipartMinFileSize:this.cfg.multipartMinFileSize,multipartChunkSize:this.cfg.multipartChunkSize,maxConcurrentRequests:this.cfg.multipartMaxConcurrentRequests,multipartMaxAttempts:this.cfg.multipartMaxAttempts,checkForUrlDuplicates:!!this.cfg.checkForUrlDuplicates,saveUrlForRecurrentUploads:!!this.cfg.saveUrlForRecurrentUploads}}getOutputData(){return this.uploadCollection.items().map(s=>this.api.getOutputItem(s))}}Un.extSrcList=Object.freeze({...Qm});Un.sourceTypes=Object.freeze({...Nn});const Wm=n=>{var e;return(e=n.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g))==null?void 0:e.map(t=>t.toLowerCase()).join("-")},sn=n=>String(n),zi=n=>{const e=Number(n);if(Number.isNaN(e))throw new Error(`Invalid number: "${n}"`);return e},Lt=n=>{if(typeof n>"u"||n===null)return!1;if(typeof n=="boolean")return n;if(n==="true"||n==="")return!0;if(n==="false")return!1;throw new Error(`Invalid boolean: "${n}"`)},AU=n=>n==="auto"?n:Lt(n),SU=n=>{const e=sn(n);if(e!=="user"&&e!=="environment"&&e!=="")throw new Error(`Invalid value: "${e}"`);return e},CU=n=>{const e=sn(n);if(!Object.values(jt).includes(e))throw new Error(`Invalid value: "${e}"`);return e},xU=n=>{const e=sn(n),t=dc(e);if(t.some(i=>!Object.values(jt).includes(i)))throw new Error(`Invalid value: "${JSON.stringify(t)}"`);return e},RU=n=>{if(typeof n=="object"&&!Array.isArray(n)||typeof n=="function")return n;throw new Error("Invalid metadata value. Must be an object or function.")},CE=n=>{if(typeof n=="object")return n;throw new Error("Invalid value. Must be an object.")},T0=n=>{if(typeof n=="function")return n;throw new Error("Invalid value. Must be a function.")},xE=n=>{if(Array.isArray(n))return n;throw new Error("Must be an array.")},IU={pubkey:sn,multiple:Lt,multipleMin:zi,multipleMax:zi,confirmUpload:Lt,imgOnly:Lt,accept:sn,externalSourcesPreferredTypes:sn,externalSourcesEmbedCss:sn,store:AU,cameraMirror:Lt,cameraCapture:SU,sourceList:sn,maxLocalFileSizeBytes:zi,thumbSize:zi,showEmptyList:Lt,useLocalImageEditor:Lt,useCloudImageEditor:Lt,cloudImageEditorTabs:sn,removeCopyright:Lt,cropPreset:sn,imageShrink:sn,modalScrollLock:Lt,modalBackdropStrokes:Lt,sourceListWrap:Lt,remoteTabSessionKey:sn,cdnCname:sn,baseUrl:sn,socialBaseUrl:sn,secureSignature:sn,secureExpire:sn,secureDeliveryProxy:sn,retryThrottledRequestMaxTimes:zi,multipartMinFileSize:zi,multipartChunkSize:zi,maxConcurrentRequests:zi,multipartMaxConcurrentRequests:zi,multipartMaxAttempts:zi,checkForUrlDuplicates:Lt,saveUrlForRecurrentUploads:Lt,groupOutput:Lt,userAgentIntegration:sn,debug:Lt,localeName:sn,metadata:RU,secureUploadsExpireThreshold:zi,localeDefinitionOverride:CE,secureUploadsSignatureResolver:T0,secureDeliveryProxyUrlResolver:T0,iconHrefResolver:T0,fileValidators:xE,collectionValidators:xE,cameraModes:xU,defaultCameraMode:CU,enableAudioRecording:Lt,enableVideoRecording:Lt,mediaRecorderOptions:CE,maxVideoRecordingDuration:zi},OU=(n,e)=>{if(!(typeof e>"u"||e===null))try{return IU[n](e)}catch(t){return console.error(`Invalid value for config key "${n}".`,t),Ca[n]}},DU=[{test:n=>n.accept&&!!n.imgOnly,message:"There could be a mistake.\nBoth `accept` and `imgOnly` parameters are set.\nThe value of `accept` will be concatenated with the internal image mime types list."},{test:n=>n.enableVideoRecording!==null,message:"The `enableVideoRecording` parameter is deprecated and will be removed in the next major release.\nPlease use the `cameraModes` parameter instead."},{test:n=>n.defaultCameraMode!==null,message:"The `defaultCameraMode` parameter is deprecated and will be removed in the next major release.\nPlease use the `cameraModes` parameter instead."}],kU=wi(n=>{for(const{test:e,message:t}of DU)e(n)&&XC(t)},0),MU=({key:n,value:e,setValue:t,getValue:i})=>{if(n==="enableVideoRecording"&&e!==null){let s=dc(i("cameraModes"));e&&!s.includes("video")?s=s.concat("video"):e||(s=s.filter(o=>o!=="video")),t("cameraModes",bh(s))}if(n==="defaultCameraMode"&&e!==null){let s=dc(i("cameraModes"));s=s.sort((o,c)=>o===e?-1:c===e?1:0),t("cameraModes",bh(s))}},Bv=[...new Set(["debug",...Object.keys(Ca)])],NU=["metadata","localeDefinitionOverride","secureUploadsSignatureResolver","secureDeliveryProxyUrlResolver","iconHrefResolver","fileValidators","collectionValidators","mediaRecorderOptions"],PU=n=>NU.includes(n),fc=Bv.filter(n=>!PU(n)),LU={...Object.fromEntries(fc.map(n=>[Wm(n),n])),...Object.fromEntries(fc.map(n=>[n.toLowerCase(),n]))},UU={...Object.fromEntries(fc.map(n=>[Wm(n),vi(n)])),...Object.fromEntries(fc.map(n=>[n.toLowerCase(),vi(n)]))},RE=n=>"__"+n;class Hv extends Ut{constructor(){super();z(this,"requireCtxName",!0);this.init$={...this.init$,...Object.fromEntries(Object.entries(Ca).map(([t,i])=>[vi(t),i]))}}_flushValueToAttribute(t,i){if(fc.includes(t)){const s=[...new Set([Wm(t),t.toLowerCase()])];for(const o of s)typeof i>"u"||i===null?this.removeAttribute(o):this.getAttribute(o)!==i.toString()&&this.setAttribute(o,i.toString())}}_flushValueToState(t,i){this.$[vi(t)]!==i&&(typeof i>"u"||i===null?this.$[vi(t)]=Ca[t]:this.$[vi(t)]=i)}_setValue(t,i){const s=this,o=OU(t,i),c=RE(t);s[c]!==o&&(this._assertSameValueDifferentReference(t,s[c],o),s[c]=o,this._flushValueToAttribute(t,o),this._flushValueToState(t,o),this.debugPrint(`[uc-config] "${t}"`,o),kU(this.cfg),MU({key:t,value:o??null,setValue:this._setValue.bind(this),getValue:this._getValue.bind(this)}))}_getValue(t){const i=this,s=RE(t);return i[s]??this.$[vi(t)]}_assertSameValueDifferentReference(t,i,s){this.cfg.debug&&s!==i&&typeof s=="object"&&typeof i=="object"&&JSON.stringify(s)===JSON.stringify(i)&&(console.warn(`[uc-config] Option "${t}" value is the same as the previous one but the reference is different`),console.warn("[uc-config] You should avoid changing the reference of the object to prevent unnecessary calculations"),console.warn(`[uc-config] "${t}" previous value:`,i),console.warn(`[uc-config] "${t}" new value:`,s))}initCallback(){super.initCallback();const t=this;for(const i of fc)this.sub(vi(i),s=>{this._setValue(i,s)},!1);for(const i of Bv){const s=t[i]??this.$[vi(i)];s!==Ca[i]&&this._setValue(i,s),Object.defineProperty(this,i,{set:o=>{this._setValue(i,o)},get:()=>this._getValue(i)})}}attributeChangedCallback(t,i,s){if(i===s)return;const o=this,c=LU[t];o[c]=s}}Hv.bindAttributes(UU);for(const n of Bv)Hv.prototype[n]=void 0;const QC=Hv;class qv extends Ut{constructor(){super(),this.init$={...this.init$,name:"",href:""}}initCallback(){super.initCallback(),this.sub("name",e=>{if(!e)return;let t=`#uc-icon-${e}`;this.subConfigValue("iconHrefResolver",i=>{i&&(t=i(e)??t),this.$.href=t})}),this.setAttribute("aria-hidden","true")}}qv.template=`
  <svg ref="svg" xmlns="http://www.w3.org/2000/svg">
    <use set="@href: href;"></use>
  </svg>
`;qv.bindAttributes({name:"name"});const VU=n=>[...new Set(n)],$U=n=>Object.entries(n).filter(([e,t])=>t!==void 0&&t!=="").map(([e,t])=>e==="cdn-operations"||e==="analytics"?t:`${e}/${t}`),jU="https://ucarecdn.com",am=Object.freeze({"dev-mode":{},pubkey:{},uuid:{},src:{},lazy:{default:1},intersection:{},breakpoints:{},"cdn-cname":{default:jU},"proxy-cname":{},"secure-delivery-proxy":{},"hi-res-support":{default:1},"ultra-res-support":{},format:{},"cdn-operations":{},progressive:{},quality:{},"is-background-for":{},"is-preview-blur":{default:1}}),Qu="--uc-img-",IE="unresolved",pf=2,gf=3,OE=!window.location.host.trim()||window.location.host.includes(":")||window.location.hostname.includes("localhost"),DE=3e3,kE=5e3,ME=Object.freeze({PREVIEW:"PREVIEW",MAIN:"MAIN"}),WC=Object.create(null);var GE;for(let n in am)WC[Qu+n]=((GE=am[n])==null?void 0:GE.default)||"";class zU extends jh{constructor(){super(...arguments);z(this,"cssInit$",WC)}$$(t){return this.$[Qu+t]}set$$(t){for(let i in t)this.$[Qu+i]=t[i]}sub$$(t,i){this.sub(Qu+t,s=>{s===null||s===""||i(s)})}analyticsParams(){return`-/@clib/${Ym}/${Xm}/uc-img/`}initAttributes(t){[...this.attributes].forEach(i=>{am[i.name]||t.setAttribute(i.name,i.value)})}initIntersection(t,i){let s={root:null,rootMargin:"0px"};this._isnObserver=new IntersectionObserver(o=>{o.forEach(c=>{c.isIntersecting&&(i(),this._isnObserver.unobserve(t))})},s),this._isnObserver.observe(t),this._observed||(this._observed=new Set),this._observed.add(t)}destroyCallback(){super.destroyCallback(),this._isnObserver&&(this._observed.forEach(t=>{this._isnObserver.unobserve(t)}),this._isnObserver=null),St.deleteCtx(this)}static get observedAttributes(){return Object.keys(am)}attributeChangedCallback(t,i,s){window.setTimeout(()=>{this.$[Qu+t]=s})}}class FU extends zU{constructor(){super(...arguments);z(this,"_img",new Image);z(this,"_imgPreview",new Image)}_fmtAbs(t){return!t.includes("//")&&!OE&&(t=new URL(t,document.baseURI).href),t}_validateSize(t){if((t==null?void 0:t.trim())!==""){let i=t.match(/\d+/)[0],s=t.match(/[a-zA-Z]+/)[0];const o=parseInt(i,10);if(Number(o)>kE&&this.hasFormatJPG)return kE+s;if(Number(o)>DE&&!this.hasFormatJPG)return DE+s}return t}_getCdnModifiers(t,i){const s={format:this.$$("format"),quality:this.$$("quality"),resize:this._validateSize(t),blur:i,"cdn-operations":this.$$("cdn-operations"),analytics:this.analyticsParams()};return Pa(...$U(s))}_getUrlBase(t="",i=""){if(this.$$("src").startsWith("data:")||this.$$("src").startsWith("blob:"))return this.$$("src");if(OE&&this.$$("src")&&!this.$$("src").includes("//"))return this._proxyUrl(this.$$("src"));let s=this._getCdnModifiers(t,i);if(this.$$("src").startsWith(this.$$("cdn-cname")))return qi(this.$$("src"),s);if(this.$$("cdn-cname")&&this.$$("uuid"))return this._proxyUrl(qi(_h(this.$$("cdn-cname"),this.$$("uuid")),s));if(this.$$("uuid"))return this._proxyUrl(qi(_h(this.$$("cdn-cname"),this.$$("uuid")),s));if(this.$$("proxy-cname"))return this._proxyUrl(qi(this.$$("proxy-cname"),s,this._fmtAbs(this.$$("src"))));if(this.$$("pubkey"))return this._proxyUrl(qi(`https://${this.$$("pubkey")}.ucr.io/`,s,this._fmtAbs(this.$$("src"))))}_proxyUrl(t){return this.$$("secure-delivery-proxy")?uy(this.$$("secure-delivery-proxy"),{previewUrl:t},{transform:s=>window.encodeURIComponent(s)}):t}_getElSize(t,i=1,s=!0){let o=t.getBoundingClientRect(),c=i*Math.round(o.width),h=s?"":i*Math.round(o.height);return c||h?`${c||""}x${h||""}`:null}_setupEventProxy(t){let i=o=>{o.stopPropagation();let c=new Event(o.type,o);this.dispatchEvent(c)},s=["load","error"];for(let o of s)t.addEventListener(o,i)}get img(){return this.hasPreviewImage||(this._setupConfigForImage({elNode:this._img}),this.appendChild(this._img)),this._img}get currentImg(){return this.hasPreviewImage?{type:ME.PREVIEW,img:this._imgPreview}:{type:ME.MAIN,img:this.img}}get hasPreviewImage(){return this.$$("is-preview-blur")}get bgSelector(){return this.$$("is-background-for")}get breakpoints(){if(this.$$("breakpoints")){const t=Is(this.$$("breakpoints"));return VU(t.map(i=>parseInt(i,10)))}else return null}get hasFormatJPG(){return this.$$("format").toLowerCase()==="jpeg"}renderBg(t){let i=new Set;i.add(`url("${this._getUrlBase(this._getElSize(t))}") 1x`),this.$$("hi-res-support")&&i.add(`url("${this._getUrlBase(this._getElSize(t,pf))}") ${pf}x`),this.$$("ultra-res-support")&&i.add(`url("${this._getUrlBase(this._getElSize(t,gf))}") ${gf}x`);let s=`image-set(${[...i].join(", ")})`;t.style.setProperty("background-image",s),t.style.setProperty("background-image","-webkit-"+s)}getSrcset(){let t=new Set;return this.breakpoints?this.breakpoints.forEach(i=>{t.add(this._getUrlBase(i+"x")+` ${this._validateSize(i+"w")}`),this.$$("hi-res-support")&&t.add(this._getUrlBase(i*pf+"x")+` ${this._validateSize(i*pf+"w")}`),this.$$("ultra-res-support")&&t.add(this._getUrlBase(i*gf+"x")+` ${this._validateSize(i*gf+"w")}`)}):(t.add(this._getUrlBase(this._getElSize(this.currentImg.img))+" 1x"),this.$$("hi-res-support")&&t.add(this._getUrlBase(this._getElSize(this.currentImg.img,2))+" 2x"),this.$$("ultra-res-support")&&t.add(this._getUrlBase(this._getElSize(this.currentImg.img,3))+" 3x")),[...t].join()}getSrc(){return this._getUrlBase()}get srcUrlPreview(){return this._getUrlBase("100x","100")}renderBackground(){[...document.querySelectorAll(this.bgSelector)].forEach(t=>{this.$$("intersection")?this.initIntersection(t,()=>{this.renderBg(t)}):this.renderBg(t)})}_appendURL({elNode:t,src:i,srcset:s}){i&&(t.src=i),s&&(t.srcset=s)}_setupConfigForImage({elNode:t}){this._setupEventProxy(t),this.initAttributes(t)}loaderImage({src:t,srcset:i,elNode:s}){return new Promise((o,c)=>{this._setupConfigForImage({elNode:s}),s.setAttribute(IE,""),s.addEventListener("load",()=>{s.removeAttribute(IE),o(s)}),s.addEventListener("error",()=>{c(!1)}),this._appendURL({elNode:s,src:t,srcset:i})})}async renderImage(){var t,i;if(this.$$("intersection")){this.hasPreviewImage&&(this._setupConfigForImage({elNode:this._imgPreview}),this.appendChild(this._imgPreview)),this.initIntersection(this.currentImg.img,async()=>{var s;this.hasPreviewImage&&(this._imgPreview.src=this.srcUrlPreview);try{await this.loaderImage({src:this.getSrc(),srcset:this.getSrcset(),elNode:this._img}),this.hasPreviewImage&&await this._imgPreview.remove(),this.appendChild(this._img)}catch{this.hasPreviewImage&&await((s=this._imgPreview)==null?void 0:s.remove()),this.appendChild(this._img)}});return}try{this.hasPreviewImage&&(await this.loaderImage({src:this.srcUrlPreview,elNode:this._imgPreview}),this.appendChild(this._imgPreview)),await this.loaderImage({src:this.getSrc(),srcset:this.getSrcset(),elNode:this._img}),this.hasPreviewImage&&await((t=this._imgPreview)==null?void 0:t.remove()),this.appendChild(this._img)}catch{this.hasPreviewImage&&await((i=this._imgPreview)==null?void 0:i.remove()),this.appendChild(this._img)}}init(){this.bgSelector?this.renderBackground():this.renderImage()}}class BU extends FU{initCallback(){super.initCallback(),this.sub$$("src",()=>{this.init()}),this.sub$$("uuid",()=>{this.init()}),this.sub$$("lazy",e=>{!this.$$("is-background-for")&&!this.$$("is-preview-blur")&&(this.img.loading=e?"lazy":"eager")})}}const nh=class nh extends Un{constructor(){super();z(this,"couldBeCtxOwner",!0);this.init$={...this.init$,withDropZone:!0,onClick:()=>{this.api.initFlow()},"button-text":""}}initCallback(){super.initCallback(),this.defineAccessor("dropzone",t=>{typeof t>"u"||(this.$.withDropZone=Lt(t))}),this.subConfigValue("multiple",t=>{this.$["button-text"]=t?"upload-files":"upload-file"})}};z(nh,"styleAttrs",[...ua(nh,nh,"styleAttrs"),"uc-simple-btn"]);let wh=nh;wh.template=`
  <uc-drop-area set="@disabled: !withDropZone">
    <button type="button" set="onclick: onClick">
      <uc-icon name="upload"></uc-icon>
      <span l10n="button-text"></span>
      <slot></slot>
      <div class="uc-visual-drop-area" l10n="drop-files-here"></div>
    </button>
  </uc-drop-area>
`;wh.bindAttributes({dropzone:null});class ZC extends ct{constructor(){super(...arguments);z(this,"historyTracked",!0);z(this,"activityType","start-from")}initCallback(){super.initCallback(),this.registerActivity(this.activityType)}}ZC.template=' <div class="uc-content"><slot></slot></div> ';function HU(n){return new Promise(e=>{typeof window.FileReader!="function"&&e(!1);try{let t=new FileReader;t.onerror=()=>{e(!0)};let i=s=>{s.type!=="loadend"&&t.abort(),e(!1)};t.onloadend=i,t.onprogress=i,t.readAsDataURL(n)}catch{e(!1)}})}function qU(n,e){return new Promise(t=>{let i=0;const s=[],o=h=>{h||(console.warn("Unexpectedly received empty content entry",{scope:"drag-and-drop"}),t(null)),h.isFile?(i++,h.file(d=>{i--;const m=new File([d],d.name,{type:d.type||e});s.push({type:"file",file:m,fullPath:h.fullPath}),i===0&&t(s)})):h.isDirectory&&c(h.createReader())};let c=h=>{i++,h.readEntries(d=>{i--;for(let m of d)o(m);i===0&&t(s)})};o(n)})}function GU(n){const e=[],t=[];for(let i=0;i<n.items.length;i++){let s=n.items[i];if(s)if(s.kind==="file"){const o=s.type;if(typeof s.webkitGetAsEntry=="function"||typeof s.getAsEntry=="function"){let h=typeof s.webkitGetAsEntry=="function"?s.webkitGetAsEntry():s.getAsEntry();t.push(qU(h,o).then(d=>{d&&e.push(...d)}));continue}const c=s.getAsFile();c&&t.push(HU(c).then(h=>{h||e.push({type:"file",file:c})}))}else s.kind==="string"&&s.type.match("^text/uri-list")&&t.push(new Promise(o=>{s.getAsString(c=>{e.push({type:"url",url:c}),o(void 0)})}))}return Promise.all(t).then(()=>e)}const ni={ACTIVE:0,INACTIVE:1,NEAR:2,OVER:3};let NE=["focus"],KU=100,A0=new Map;function YU(n,e){let t=Math.max(Math.min(n[0],e.x+e.width),e.x),i=Math.max(Math.min(n[1],e.y+e.height),e.y);return Math.sqrt((n[0]-t)*(n[0]-t)+(n[1]-i)*(n[1]-i))}function PE(n){let e=0,t=document.body,i=new Set,s=A=>i.add(A),o=ni.INACTIVE,c=A=>{n.shouldIgnore()&&A!==ni.INACTIVE||(o!==A&&i.forEach(U=>U(A)),o=A)},h=()=>e>0;s(A=>n.onChange(A));let d=()=>{e=0,c(ni.INACTIVE)},m=()=>{e+=1,o===ni.INACTIVE&&c(ni.ACTIVE)},y=()=>{e-=1,h()||c(ni.INACTIVE)},_=A=>{A.preventDefault(),e=0,c(ni.INACTIVE)},b=A=>{if(n.shouldIgnore())return;h()||(e+=1);let U=[A.x,A.y],P=n.element.getBoundingClientRect(),B=Math.floor(YU(U,P)),G=B<KU,Q=A.composedPath().includes(n.element);A0.set(n.element,B);let ue=Math.min(...A0.values())===B;Q&&ue?(A.preventDefault(),c(ni.OVER)):c(G&&ue?ni.NEAR:ni.ACTIVE)},T=async A=>{if(n.shouldIgnore())return;A.preventDefault();let U=await GU(A.dataTransfer);n.onItems(U),c(ni.INACTIVE)};return t.addEventListener("drop",_),t.addEventListener("dragleave",y),t.addEventListener("dragenter",m),t.addEventListener("dragover",b),n.element.addEventListener("drop",T),NE.forEach(A=>{window.addEventListener(A,d)}),()=>{A0.delete(n.element),t.removeEventListener("drop",_),t.removeEventListener("dragleave",y),t.removeEventListener("dragenter",m),t.removeEventListener("dragover",b),n.element.removeEventListener("drop",T),NE.forEach(A=>{window.removeEventListener(A,d)})}}const JC="uc-drop-area",jl=`${JC}/registry`,ih=class ih extends Un{constructor(){super(),this.init$={...this.init$,state:ni.INACTIVE,withIcon:!1,isClickable:!1,isFullscreen:!1,isEnabled:!0,isVisible:!0,text:"",[jl]:null}}isActive(){if(!this.$.isEnabled)return!1;const e=this.getBoundingClientRect(),t=e.width>0&&e.height>0,i=e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth),s=window.getComputedStyle(this),o=s.visibility!=="hidden"&&s.display!=="none";return t&&o&&i}initCallback(){super.initCallback(),this.bindL10n("text",()=>this.l10n("drop-files-here")),this.$[jl]||(this.$[jl]=new Set),this.$[jl].add(this),this.defineAccessor("disabled",t=>{this.set$({isEnabled:!Lt(t)})}),this.defineAccessor("clickable",t=>{this.set$({isClickable:Lt(t)})}),this.defineAccessor("with-icon",t=>{this.set$({withIcon:Lt(t)})}),this.defineAccessor("fullscreen",t=>{this.set$({isFullscreen:Lt(t)})}),this.defineAccessor("text",t=>{typeof t=="string"?this.bindL10n("text",()=>this.l10n(t)||t):this.bindL10n("text",()=>this.l10n("drop-files-here"))}),this._destroyDropzone=PE({element:this,shouldIgnore:()=>this._shouldIgnore(),onChange:t=>{this.$.state=t},onItems:t=>{t.length&&(t.forEach(i=>{i.type==="url"?this.api.addFileFromUrl(i.url,{source:Nn.DROP_AREA}):i.type==="file"&&this.api.addFileFromObject(i.file,{source:Nn.DROP_AREA,fullPath:i.fullPath})}),this.uploadCollection.size&&(this.set$({"*currentActivity":ct.activities.UPLOAD_LIST}),this.setOrAddState("*modalActive",!0)))}});let e=this.ref["content-wrapper"];e&&(this._destroyContentWrapperDropzone=PE({element:e,onChange:t=>{var s;const i=(s=Object.entries(ni).find(([,o])=>o===t))==null?void 0:s[0].toLowerCase();i&&e.setAttribute("drag-state",i)},onItems:()=>{},shouldIgnore:()=>this._shouldIgnore()})),this.sub("state",t=>{var s;const i=(s=Object.entries(ni).find(([,o])=>o===t))==null?void 0:s[0].toLowerCase();i&&this.setAttribute("drag-state",i)}),this.subConfigValue("sourceList",t=>{const i=Is(t);this.$.isEnabled=i.includes(Nn.LOCAL),this.$.isVisible=this.$.isEnabled||!this.querySelector("[data-default-slot]")}),this.sub("isVisible",t=>{this.toggleAttribute("hidden",!t)}),this.sub("isClickable",t=>{this.toggleAttribute("clickable",t)}),this.$.isClickable&&(this._onAreaClicked=t=>{t.type==="keydown"?(t.code==="Space"||t.code==="Enter")&&this.api.openSystemDialog():t.type==="click"&&this.api.openSystemDialog()},this.addEventListener("keydown",this._onAreaClicked),this.addEventListener("click",this._onAreaClicked))}_shouldIgnore(){return!this.$.isEnabled||!this._couldHandleFiles()?!0:this.$.isFullscreen?[...this.$[jl]].filter(i=>i!==this).filter(i=>i.isActive()).length>0:!1}_couldHandleFiles(){let e=this.cfg.multiple,t=this.cfg.multipleMax,i=this.uploadCollection.size;return!(e&&t&&i>=t||!e&&i>0)}destroyCallback(){var t,i;super.destroyCallback();const e=this.$[jl];e&&(e.delete(this),e.size===0&&St.deleteCtx(JC)),(t=this._destroyDropzone)==null||t.call(this),(i=this._destroyContentWrapperDropzone)==null||i.call(this),this._onAreaClicked&&(this.removeEventListener("keydown",this._onAreaClicked),this.removeEventListener("click",this._onAreaClicked))}};z(ih,"styleAttrs",[...ua(ih,ih,"styleAttrs"),"uc-drop-area"]);let Eh=ih;Eh.template=`
  <slot>
    <div data-default-slot hidden></div>
    <div ref="content-wrapper" class="uc-content-wrapper" set="@hidden: !isVisible">
      <div class="uc-icon-container" set="@hidden: !withIcon">
        <uc-icon name="default"></uc-icon>
        <uc-icon name="arrow-down"></uc-icon>
      </div>
      <span class="uc-text">{{text}}</span>
    </div>
  </slot>
`;Eh.bindAttributes({"with-icon":null,clickable:null,text:null,fullscreen:null,disabled:null});const XU="src-type-";class Gv extends Un{constructor(){super();z(this,"couldBeCtxOwner",!0);z(this,"type");z(this,"_registeredTypes",{});this.init$={...this.init$,iconName:"default","src-type":""}}initTypes(){this.registerType({type:Nn.LOCAL,activate:()=>(this.api.openSystemDialog(),!1)}),this.registerType({type:Nn.URL,activity:ct.activities.URL,textKey:"from-url"}),this.registerType({type:Nn.CAMERA,activity:ct.activities.CAMERA,activate:()=>{const t="capture"in document.createElement("input");return t&&this.api.openSystemDialog({captureCamera:!0}),!t}}),this.registerType({type:"draw",activity:ct.activities.DRAW,icon:"edit-draw"});for(let t of Object.values(Qm))this.registerType({type:t,activity:ct.activities.EXTERNAL,activityParams:{externalSourceType:t}})}initCallback(){super.initCallback(),this.initTypes(),this.defineAccessor("type",t=>{t&&this.applyType(t)})}registerType(t){this._registeredTypes[t.type]=t}getType(t){return this._registeredTypes[t]}activate(){if(!this.type)return;const t=this._registeredTypes[this.type],{activity:i,activate:s,activityParams:o={}}=t;(s?s():!!i)&&this.set$({"*currentActivityParams":o,"*currentActivity":i})}applyType(t){const i=this._registeredTypes[t];if(!i){console.warn("Unsupported source type: "+t);return}const{textKey:s=t,icon:o=t}=i;this.$["src-type"]=`${XU}${s}`,this.$.iconName=o,this.onclick=()=>{this.activate()}}}Gv.template=`
  <button type="button">
    <uc-icon set="@name: iconName"></uc-icon>
    <div class="uc-txt" l10n="src-type"></div>
  </button>
`;Gv.bindAttributes({type:null});class QU extends Ut{initCallback(){super.initCallback(),this.subConfigValue("sourceList",e=>{let t=Is(e),i="";t.forEach(s=>{if(s==="instagram"){console.error("Instagram source was removed because the Instagram Basic Display API hasn't been available since December 4, 2024. Official statement, see here:https://developers.facebook.com/blog/post/2024/09/04/update-on-instagram-basic-display-api/?locale=en_US");return}i+=`<uc-source-btn role="listitem" type="${s}"></uc-source-btn>`}),this.cfg.sourceListWrap?this.innerHTML=i:this.outerHTML=i})}}const Zm=()=>{const n=[];return{stack:n,promiseReadJpegChunks:t=>new Promise((i,s)=>{let o=2;const c=(m,y)=>{const _=new FileReader;_.addEventListener("load",()=>{y(new DataView(_.result))}),_.addEventListener("error",b=>{s(`Reader error: ${b}`)}),_.readAsArrayBuffer(m)},h=()=>c(t.slice(o,o+128),m=>{let y,_,b;for(y=_=0,b=m.byteLength;b>=0?_<b:_>b;y=b>=0?++_:--_)if(m.getUint8(y)===255){o+=y;break}d()}),d=()=>{const m=o;return c(t.slice(o,o+=4),y=>{if(y.byteLength!==4||y.getUint8(0)!==255){s("Corrupted");return}const _=y.getUint8(1);if(_===218){i(!0);return}const b=y.getUint16(2)-2;return c(t.slice(o,o+=b),T=>{if(T.byteLength!==b){s("Corrupted");return}n.push({startPos:m,length:b,marker:_,view:T}),h()})})};FileReader&&DataView||s("Not Support"),c(t.slice(0,2),m=>{m.getUint16(0)!==65496&&s("Not jpeg"),h()})})}},WU=async n=>{const e=[],{promiseReadJpegChunks:t,stack:i}=Zm();return await t(n),i.forEach(({marker:s,view:o})=>{s===226&&o.getUint32(0)===1229144927&&o.getUint32(4)===1347571526&&o.getUint32(8)===1229735168&&e.push(o)}),e},ex=async(n,e,t)=>{{const i=[],s=[],{promiseReadJpegChunks:o,stack:c}=Zm();await o(n),c.forEach(m=>{if(m.marker===e)return i.push(m.startPos),s.push(m.length)});const h=[n.slice(0,2)];for(const m of t){const y=new DataView(new ArrayBuffer(4));y.setUint16(0,65280+e),y.setUint16(2,m.byteLength+2),h.push(y.buffer),h.push(m)}let d=2;for(let m=0;m<i.length;m++)i[m]>d&&h.push(n.slice(d,i[m])),d=i[m]+s[m]+4;return h.push(n.slice(d,n.size)),new Blob(h,{type:n.type})}},ZU=226,tx=(n,e)=>ex(n,ZU,e.map(t=>t.buffer)),JU=async n=>{try{return await tx(n,[])}catch(e){throw new Error(`Failed to strip ICC profile: ${e}`)}},e8=(n,e,t)=>new Promise((i,s)=>{const o=c=>{if(!c){s("Failed to convert canvas to blob");return}i(c)};n.toBlob(o,e,t),n.width=n.height=1}),Th=()=>{const n=document.createElement("canvas"),e=n.getContext("2d");return{canvas:n,ctx:e}},t8=n=>{const{ctx:t,canvas:i}=Th();i.width=i.height=50,t.drawImage(n,0,0,50,50);const s=t.getImageData(0,0,50,50).data;i.width=i.height=1;for(let o=3;o<s.length;o+=4)if(s[o]<254)return!0;return!1},n8=async n=>{let e=null;const{promiseReadJpegChunks:t,stack:i}=Zm();return await t(n),i.forEach(({marker:s,view:o})=>{if(!e&&s===225&&o.byteLength>=14&&o.getUint32(0)===1165519206&&o.getUint16(4)===0){e=o;return}}),e},i8="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=";let yf;const r8=()=>new Promise(n=>{if(yf!==void 0)n(yf);else{const e=new Image;e.addEventListener("load",()=>{yf=e.naturalWidth<e.naturalHeight,e.src="//:0",n(yf)}),e.src=i8}}),s8=(n,e)=>{let t,i,s,o;if(!n||n.byteLength<14||n.getUint32(0)!==1165519206||n.getUint16(4)!==0)return;if(n.getUint16(6)===18761)i=!0;else if(n.getUint16(6)===19789)i=!1;else return;if(n.getUint16(8,i)!==42)return;s=8+n.getUint32(10,i);const c=n.getUint16(s-2,i);for(t=0,o=c;o>=0?t<o:t>o;o>=0?++t:--t){if(n.byteLength<s+10)return;n.getUint16(s,i)===274&&e(s+8,i),s+=12}},a8=(n,e)=>{s8(n,(t,i)=>n.setUint16(t,e,i))},o8=async(n,e,t)=>(t&&a8(e,1),ex(n,225,[e.buffer])),l8=(n,e)=>new Promise((t,i)=>{e&&(n.src=e),n.complete?t(n):(n.addEventListener("load",()=>{t(n)}),n.addEventListener("error",()=>{i(new Error("Failed to load image. Probably not an image."))}))}),c8=n=>l8(new Image,n),u8=[1,3],h8=[192,193,194,195,197,198,199,201,202,203,205,206,207],LE={squareSide:[Math.floor(Math.sqrt(5*1e3*1e3)),4096,8192,11180,10836,11402,14188,16384],dimension:[4096,8192,16384,32767,65535]},d8=async n=>{let e=!1;const{promiseReadJpegChunks:t,stack:i}=Zm();return await t(n).then(()=>(i.forEach(({marker:s,view:o})=>{if(!e&&h8.indexOf(s)>=0){const c=o.getUint8(5);u8.indexOf(c)<0&&(e=!0)}}),e)).catch(()=>e)},nx=(n,e)=>{const t={};return(...i)=>{const s=e(i,t);return s in t?t[s]:t[s]=n(...i)}},ix=(n,e)=>{const[t]=n,i=Object.keys(e).map(s=>parseInt(s,10)).sort((s,o)=>s-o);for(let s=0;s<i.length;s++){const o=i[s],c=!!e[o];if(o>t&&c||o<t&&!c)return o}return t},ba={R:55,G:110,B:165,A:255},f8=`rgba(${ba.R}, ${ba.G}, ${ba.B}, ${ba.A/255})`,rx=(n,e)=>{try{const t=[n-1,e-1,1,1],{canvas:i,ctx:s}=Th();i.width=1,i.height=1;const{canvas:o,ctx:c}=Th();o.width=n,o.height=e,c&&(c.fillStyle=f8,c.fillRect(...t),s.drawImage(o,n-1,e-1,1,1,0,0,1,1));const h=s&&s.getImageData(0,0,1,1).data;let d=!1;return h&&(d=h[0]===ba.R&&h[1]===ba.G&&h[2]===ba.B&&h[3]===ba.A),o.width=o.height=1,d}catch{return console.error(`Failed to test for max canvas size of ${n}x${e}.`),!1}};function sx(n){return(...e)=>new Promise(t=>{setTimeout(()=>{const i=n(...e);t(i)},0)})}const m8=sx(nx(rx,ix)),p8=sx(nx(rx,ix)),ax=async(n,e)=>{const t=LE.squareSide.find(c=>c*c>=n*e),i=LE.dimension.find(c=>c>=n&&c>=e);if(!t||!i)throw new Error("Not supported");const[s,o]=await Promise.all([m8(t,t),p8(i,1)]);if(s&&o)return!0;throw new Error("Not supported")},ox=async(n,e,t)=>{try{const{ctx:i,canvas:s}=Th();return s.width=e,s.height=t,i.imageSmoothingQuality="high",i.drawImage(n,0,0,e,t),n instanceof HTMLImageElement&&(n.src="//:0"),n instanceof HTMLCanvasElement&&(n.width=n.height=1),s}catch(i){throw new Error("Canvas resize error",{cause:i})}},g8=({img:n,targetW:e,targetH:t})=>ox(n,e,t),y8=function({sourceW:n,targetW:e,targetH:t,step:i}){const s=[];let o=e,c=t;do s.push([o,c]),o=Math.round(o/i),c=Math.round(c/i);while(o<n*i);return s.reverse()},v8=({img:n,sourceW:e,targetW:t,targetH:i,step:s})=>{const o=y8({sourceW:e,targetW:t,targetH:i,step:s});return o.reduce((c,[h,d],m)=>c.then(y=>ax(h,d).then(()=>ox(y,h,d)).catch(()=>{if(m===o.length-1)throw new Error("Not supported");return y})),Promise.resolve(n))},_8=()=>/iPad|iPhone|iPod/.test(navigator.platform)?!0:navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform),b8=navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform),S0=.71,w8=(n,e)=>{if(n.width*S0*n.height*S0<e.size)throw new Error("Not required");const t=n.width,i=n.height,s=t/i,o=Math.floor(Math.sqrt(e.size*s)),c=Math.floor(e.size/Math.sqrt(e.size*s));return ax(o,c).then(()=>{const{ctx:h}=Th();return"imageSmoothingQuality"in h&&!_8()&&!b8?g8({img:n,targetW:o,targetH:c}):v8({img:n,sourceW:t,targetW:o,targetH:c,step:S0})}).catch(()=>Promise.reject("Not supported"))},E8=async(n,e)=>{try{if(await d8(n))throw new Error("Should skipped");const i=await Promise.allSettled([n8(n),r8(),WU(n)]),o=!i.some(U=>U.status==="rejected"),[c,h,d]=i,m=await JU(n).catch(()=>n),y=await c8(URL.createObjectURL(m));URL.revokeObjectURL(y.src);const _=await w8(y,e);let b="image/jpeg",T=(e==null?void 0:e.quality)||.8;!o&&t8(_)&&(b="image/png",T=void 0);let A=await e8(_,b,T);if(o&&c.status==="fulfilled"&&c.value){const U=c.value,P=h.status==="fulfilled"?h.value:!1;A=await o8(A,U,P)}return o&&d.status==="fulfilled"&&d.value.length>0&&(A=await tx(A,d.value)),A}catch(t){let i;throw t instanceof Error&&(i=t.message),typeof t=="string"&&(i=t),new Error(`Failed to shrink image. ${i?`Message: "${i}".`:""}`,{cause:t})}};function T8(n){let e=new Blob([n],{type:"image/svg+xml"});return URL.createObjectURL(e)}function UE(n="hsl(209, 21%, 65%)",e=32,t=32){return T8(`
  <svg width="${e}" height="${t}" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path fill-rule="evenodd" fill="${n}" d="M9.68848 8.70068C9.68848 8.42454 9.91233 8.20068 10.1885 8.20068H15.0885C15.2211 8.20068 15.3483 8.25336 15.442 8.34713L20.342 13.2471C20.4358 13.3409 20.4885 13.4681 20.4885 13.6007V21.3007C20.4885 21.5768 20.2646 21.8007 19.9885 21.8007H10.1885C9.91233 21.8007 9.68848 21.5768 9.68848 21.3007V8.70068ZM10.6885 9.20068V20.8007H19.4885V14.1007L15.0885 14.1007C14.8123 14.1007 14.5885 13.8768 14.5885 13.6007L14.5885 9.20068H10.6885ZM15.5885 9.90779L18.7814 13.1007L15.5885 13.1007L15.5885 9.90779Z"/>
  </svg>
  `)}function A8(n,e=40){if(n.type==="image/svg+xml")return URL.createObjectURL(n);let t=document.createElement("canvas"),i=t.getContext("2d"),s=new Image,o=new Promise((c,h)=>{s.onload=()=>{let d=s.height/s.width;d>1?(t.width=e,t.height=e*d):(t.height=e,t.width=e/d),i.fillStyle="rgb(240, 240, 240)",i.fillRect(0,0,t.width,t.height),i.drawImage(s,0,0,t.width,t.height),t.toBlob(m=>{if(!m){h();return}let y=URL.createObjectURL(m);c(y)})},s.onerror=d=>{h(d)}});return s.src=URL.createObjectURL(n),o}const VE=16384,S8=/^([0-9]+)x([0-9]+)(?:\s+(\d{1,2}|100)%)?$/i,C8=n=>{const e=S8.exec(n==null?void 0:n.toLocaleLowerCase())||[];if(!e.length)return!1;const t=e[1]*e[2],i=VE*VE;return t>i?(console.warn(`Shrinked size can not be larger than ${Math.floor(i/1e3/1e3)}MP. You have set ${e[1]}x${e[2]} (${Math.ceil(t/1e3/100)/10}MP).`),!1):{quality:e[3]?e[3]/100:void 0,size:t}},Kv=(n,e)=>{let t,i,s;const o=(...c)=>{t?(clearTimeout(i),i=setTimeout(()=>{Date.now()-s>=e&&(n(...c),s=Date.now())},Math.max(e-(Date.now()-s),0))):(n(...c),s=Date.now(),t=!0)};return Object.defineProperty(o,"cancel",{configurable:!1,writable:!1,enumerable:!1,value:()=>{clearTimeout(i)}}),o},gi=Object.freeze({FINISHED:Symbol("FINISHED"),FAILED:Symbol("FAILED"),UPLOADING:Symbol("UPLOADING"),IDLE:Symbol("IDLE")});class Po extends Un{constructor(){super();z(this,"couldBeCtxOwner",!0);z(this,"pauseRender",!0);z(this,"_entrySubs",new Set);z(this,"_entry",null);z(this,"_isIntersecting",!1);z(this,"_debouncedGenerateThumb",wi(this._generateThumbnail.bind(this),100));z(this,"_debouncedCalculateState",wi(this._calculateState.bind(this),100));z(this,"_renderedOnce",!1);z(this,"_updateHint",Kv(()=>{const i=this.$.state===gi.UPLOADING&&this._entry.getValue("externalUrl")&&this._entry.getValue("source")!==Nn.URL&&this._entry.getValue("errors").length===0&&this.$.progressValue===0?this.l10n("waiting-for",{source:this.l10n(`src-type-${this._entry.getValue("source")}`)}):"";this.$.hint=i},100));this.init$={...this.init$,uid:"",itemName:"",errorText:"",hint:"",thumbUrl:"",progressValue:0,progressVisible:!1,badgeIcon:"",isFinished:!1,isFailed:!1,isUploading:!1,isFocused:!1,isEditable:!1,state:gi.IDLE,ariaLabelStatusFile:"",onEdit:()=>{this.$["*currentActivityParams"]={internalId:this._entry.uid},this.$["*currentActivity"]=ct.activities.CLOUD_IMG_EDIT},onRemove:()=>{this.uploadCollection.remove(this.$.uid)},onUpload:()=>{this.upload()}}}_reset(){for(let t of this._entrySubs)t.remove();this._debouncedGenerateThumb.cancel(),this._debouncedCalculateState.cancel(),this._entrySubs=new Set,this._entry=null}_observerCallback(t){let[i]=t;this._isIntersecting=i.isIntersecting,i.isIntersecting&&!this._renderedOnce&&(this.render(),this._renderedOnce=!0),i.intersectionRatio===0?this._debouncedGenerateThumb.cancel():this._debouncedGenerateThumb()}_calculateState(){if(!this._entry)return;let t=this._entry,i=gi.IDLE;t.getValue("errors").length>0?i=gi.FAILED:t.getValue("isUploading")?i=gi.UPLOADING:t.getValue("fileInfo")&&(i=gi.FINISHED),this.$.state=i}async _generateThumbnail(){var i;if(!this._entry)return;let t=this._entry;if(t.getValue("fileInfo")&&t.getValue("isImage")){let s=this.cfg.thumbSize,o=await this.proxyUrl(qi(_h(this.cfg.cdnCname,this._entry.getValue("uuid")),Pa(t.getValue("cdnUrlModifiers"),`scale_crop/${s}x${s}/center`))),c=t.getValue("thumbUrl");c!==o&&(t.setValue("thumbUrl",o),c!=null&&c.startsWith("blob:")&&URL.revokeObjectURL(c));return}if(!t.getValue("thumbUrl"))if((i=t.getValue("file"))!=null&&i.type.includes("image"))try{let s=await A8(t.getValue("file"),this.cfg.thumbSize);t.setValue("thumbUrl",s)}catch{let o=window.getComputedStyle(this).getPropertyValue("--uc-muted-foreground");t.setValue("thumbUrl",UE(o))}else{let s=window.getComputedStyle(this).getPropertyValue("--uc-muted-foreground");t.setValue("thumbUrl",UE(s))}}_subEntry(t,i){let s=this._entry.subscribe(t,o=>{this.isConnected&&i(o)});this._entrySubs.add(s)}_handleEntryId(t){var s;this._reset();let i=(s=this.uploadCollection)==null?void 0:s.read(t);this._entry=i,i&&(this._subEntry("uploadProgress",o=>{this.$.progressValue=o,this._updateHint()}),this._subEntry("fileName",o=>{this.$.itemName=o||i.getValue("externalUrl")||this.l10n("file-no-name"),this._debouncedCalculateState()}),this._subEntry("externalUrl",o=>{this.$.itemName=i.getValue("fileName")||o||this.l10n("file-no-name")}),this._subEntry("fileInfo",o=>{this._debouncedCalculateState(),o&&this._isIntersecting&&this._debouncedGenerateThumb()}),this._subEntry("cdnUrlModifiers",()=>{this._isIntersecting&&this._debouncedGenerateThumb()}),this._subEntry("thumbUrl",o=>{this.$.thumbUrl=o?`url(${o})`:""}),this._subEntry("errors",()=>this._debouncedCalculateState()),this._subEntry("isUploading",()=>this._debouncedCalculateState()),this._subEntry("fileSize",()=>this._debouncedCalculateState()),this._subEntry("mimeType",()=>this._debouncedCalculateState()),this._subEntry("isImage",()=>this._debouncedCalculateState()),this._isIntersecting&&this._debouncedGenerateThumb())}initCallback(){super.initCallback(),this.sub("uid",t=>{this._handleEntryId(t)}),this.sub("state",t=>{this._handleState(t)}),this.subConfigValue("useCloudImageEditor",()=>this._debouncedCalculateState()),this.onclick=()=>{Po.activeInstances.forEach(t=>{t===this?t.setAttribute("focused",""):t.removeAttribute("focused")})},this.sub("*uploadTrigger",t=>{t.has(this._entry.uid)&&setTimeout(()=>this.isConnected&&this.upload())}),Po.activeInstances.add(this)}_handleState(t){var i,s,o,c,h,d;t===gi.FAILED?this.$.badgeIcon="badge-error":t===gi.FINISHED&&(this.$.badgeIcon="badge-success"),t===gi.UPLOADING&&(this.$.isFocused=!1),this.set$({isFailed:t===gi.FAILED,isUploading:t===gi.UPLOADING,isFinished:t===gi.FINISHED,progressVisible:t===gi.UPLOADING,isEditable:this.cfg.useCloudImageEditor&&((i=this._entry)==null?void 0:i.getValue("isImage"))&&((s=this._entry)==null?void 0:s.getValue("cdnUrl")),errorText:(c=(o=this._entry.getValue("errors"))==null?void 0:o[0])==null?void 0:c.message,ariaLabelStatusFile:this.l10n("a11y-file-item-status",{fileName:(h=this._entry)==null?void 0:h.getValue("fileName"),status:this.l10n(((d=t==null?void 0:t.description)==null?void 0:d.toLocaleLowerCase())??"").toLocaleLowerCase()})}),this._updateHint()}destroyCallback(){super.destroyCallback(),Po.activeInstances.delete(this),this._reset()}connectedCallback(){super.connectedCallback(),this._observer=new window.IntersectionObserver(this._observerCallback.bind(this),{threshold:[0,1]}),this._observer.observe(this)}disconnectedCallback(){var t;super.disconnectedCallback(),this._debouncedGenerateThumb.cancel(),(t=this._observer)==null||t.disconnect()}_settingsOfShrink(){return C8(this.cfg.imageShrink)}_processShrink(t){return E8(t,this._settingsOfShrink())}async upload(){var s,o;let t=this._entry;if(!this.uploadCollection.read(t.uid)||t.getValue("fileInfo")||t.getValue("isUploading")||t.getValue("errors").length>0)return;const i=this.cfg.multiple?this.cfg.multipleMax:1;if(!(i&&this.uploadCollection.size>i)){this._debouncedCalculateState(),t.setValue("isUploading",!0),t.setValue("errors",[]);try{let c=new AbortController;t.setValue("abortController",c);const h=async()=>{let m=t.getValue("file");m&&this.cfg.imageShrink&&(m=await this._processShrink(m).catch(()=>m));const y=m||t.getValue("externalUrl")||t.getValue("uuid"),b={...await this.getUploadClientOptions(),fileName:t.getValue("fileName"),source:t.getValue("source"),onProgress:T=>{if(T.isComputable){let A=T.value*100;t.setValue("uploadProgress",A)}},signal:c.signal,metadata:await this.getMetadataFor(t.uid)};return this.debugPrint("upload options",y,b),$C(y,b)};let d=await this.$["*uploadQueue"].add(h);t.setMultipleValues({fileInfo:d,isUploading:!1,fileName:d.originalFilename,fileSize:d.size,isImage:d.isImage,mimeType:((o=(s=d.contentInfo)==null?void 0:s.mime)==null?void 0:o.mime)??d.mimeType,uuid:d.uuid,cdnUrl:t.getValue("cdnUrl")??d.cdnUrl,cdnUrlModifiers:t.getValue("cdnUrlModifiers")??"",uploadProgress:100,source:t.getValue("source")??null}),t===this._entry&&this._debouncedCalculateState()}catch(c){c instanceof Ho&&c.isCancel?t.setMultipleValues({isUploading:!1,uploadProgress:0}):t.setMultipleValues({isUploading:!1,uploadProgress:0,uploadError:c}),t===this._entry&&this._debouncedCalculateState()}}}}Po.template=`
  <div class="uc-inner" set="@finished: isFinished; @uploading: isUploading; @failed: isFailed; @focused: isFocused">
    <div class="uc-thumb" set="style.backgroundImage: thumbUrl">
      <div class="uc-badge">
        <uc-icon set="@name: badgeIcon"></uc-icon>
      </div>
    </div>
    <div aria-atomic="true" aria-live="polite" class="uc-file-name-wrapper" set="@aria-label:ariaLabelStatusFile;">
      <span class="uc-file-name">{{itemName}}</span>
      <span class="uc-file-error" set="@hidden: !errorText">{{errorText}}</span>
      <span class="uc-file-hint" set="@hidden: !hint">{{hint}}</span>
    </div>
    <div class="uc-file-actions">
      <button
        type="button"
        l10n="@title:file-item-edit-button;@aria-label:file-item-edit-button"
        class="uc-edit-btn uc-mini-btn"
        set="onclick: onEdit; @hidden: !isEditable"
      >
        <uc-icon name="edit-file"></uc-icon>
      </button>
      <button
        type="button"
        l10n="@title:file-item-remove-button;@aria-label:file-item-remove-button"
        class="uc-remove-btn uc-mini-btn"
        set="onclick: onRemove;"
      >
        <uc-icon name="remove-file"></uc-icon>
      </button>
      <button type="button" class="uc-upload-btn uc-mini-btn" set="onclick: onUpload;">
        <uc-icon name="upload"></uc-icon>
      </button>
    </div>
    <uc-progress-bar class="uc-progress-bar" set="value: progressValue; visible: progressVisible;"> </uc-progress-bar>
  </div>
`;Po.activeInstances=new Set;const Yl=class Yl extends Ut{constructor(){super();z(this,"_handleBackdropClick",()=>{this._closeDialog()});z(this,"_closeDialog",()=>{this.setOrAddState("*modalActive",!1)});z(this,"_handleDialogClose",()=>{this._closeDialog()});z(this,"_handleDialogMouseDown",t=>{this._mouseDownTarget=t.target});z(this,"_handleDialogMouseUp",t=>{t.target===this.ref.dialog&&t.target===this._mouseDownTarget&&this._closeDialog()});this.init$={...this.init$,"*modalActive":!1,isOpen:!1,closeClicked:this._handleDialogClose}}show(){this.ref.dialog.showModal?this.ref.dialog.showModal():this.ref.dialog.setAttribute("open","")}hide(){this.ref.dialog.close?this.ref.dialog.close():this.ref.dialog.removeAttribute("open")}initCallback(){super.initCallback(),this.ref.dialog.addEventListener("close",this._handleDialogClose),this.ref.dialog.addEventListener("mousedown",this._handleDialogMouseDown),this.ref.dialog.addEventListener("mouseup",this._handleDialogMouseUp),this.sub("*modalActive",t=>{this.$.isOpen!==t&&(this.$.isOpen=t),t&&this.cfg.modalScrollLock?document.body.style.overflow="hidden":document.body.style.overflow=""}),this.subConfigValue("modalBackdropStrokes",t=>{t?this.setAttribute("strokes",""):this.removeAttribute("strokes")}),this.sub("isOpen",t=>{t?(this.show(),this.setAttribute("aria-modal","true")):(this.hide(),this.setAttribute("aria-modal","false"))})}destroyCallback(){super.destroyCallback(),document.body.style.overflow="",this._mouseDownTarget=void 0,this.ref.dialog.removeEventListener("close",this._handleDialogClose),this.ref.dialog.removeEventListener("mousedown",this._handleDialogMouseDown),this.ref.dialog.removeEventListener("mouseup",this._handleDialogMouseUp)}};z(Yl,"styleAttrs",[...ua(Yl,Yl,"styleAttrs"),"uc-modal"]),z(Yl,"StateConsumerScope","modal");let om=Yl;om.template=`
  <dialog ref="dialog">
    <slot></slot>
  </dialog>
`;class lx extends Un{constructor(){super();z(this,"couldBeCtxOwner",!0);z(this,"historyTracked",!0);z(this,"activityType",ct.activities.UPLOAD_LIST);z(this,"_throttledHandleCollectionUpdate",Kv(()=>{this.isConnected&&(this._updateUploadsState(),!this.couldOpenActivity&&this.$["*currentActivity"]===this.activityType&&this.historyBack())},300));this.init$={...this.init$,doneBtnVisible:!1,doneBtnEnabled:!1,uploadBtnVisible:!1,addMoreBtnVisible:!1,addMoreBtnEnabled:!1,headerText:"",commonErrorMessage:"",hasFiles:!1,onAdd:()=>{this.api.initFlow(!0)},onUpload:()=>{this.emit(Qt.UPLOAD_CLICK),this.api.uploadAll(),this._throttledHandleCollectionUpdate()},onDone:()=>{this.emit(Qt.DONE_CLICK,this.api.getOutputCollectionState()),this.api.doneFlow()},onCancel:()=>{this.uploadCollection.clearAll()}}}_updateUploadsState(){const t=this.api.getOutputCollectionState(),i={total:t.totalCount,succeed:t.successCount,uploading:t.uploadingCount,failed:t.failedCount},s=!t.errors.some(b=>b.type==="TOO_MANY_FILES"||b.type==="TOO_FEW_FILES"),o=t.errors.some(b=>b.type==="TOO_MANY_FILES"),c=t.totalCount===(this.cfg.multiple?this.cfg.multipleMax:1),h=i.failed===0&&t.errors.length===0;let d=!1,m=!1,y=!1;if(i.total-i.succeed-i.uploading-i.failed>0&&s)d=!0;else{m=!0;const b=this.cfg.groupOutput?!!t.group:!0;y=i.total===i.succeed&&s&&h&&b}this.set$({doneBtnVisible:m,doneBtnEnabled:y,uploadBtnVisible:d,addMoreBtnEnabled:i.total===0||!o&&!c,addMoreBtnVisible:!c||this.cfg.multiple}),this.bindL10n("headerText",()=>this._getHeaderText(i))}_getHeaderText(t){const i=s=>{const o=t[s];return this.l10n(`header-${s}`,{count:o})};return t.uploading>0?i("uploading"):t.failed>0?i("failed"):t.succeed>0?i("succeed"):i("total")}get couldOpenActivity(){return this.cfg.showEmptyList||this.uploadCollection.size>0}initCallback(){super.initCallback(),this.registerActivity(this.activityType),this.subConfigValue("multiple",this._throttledHandleCollectionUpdate),this.subConfigValue("multipleMin",this._throttledHandleCollectionUpdate),this.subConfigValue("multipleMax",this._throttledHandleCollectionUpdate),this.sub("*groupInfo",t=>{t&&this._throttledHandleCollectionUpdate()}),this.sub("*currentActivity",t=>{!this.couldOpenActivity&&t===this.activityType&&(this.$["*currentActivity"]=this.initActivity)}),this.uploadCollection.observeProperties(this._throttledHandleCollectionUpdate),this.sub("*uploadList",t=>{this._throttledHandleCollectionUpdate(),this.set$({hasFiles:t.length>0}),this.cfg.confirmUpload||this.api.uploadAll()},!1),this.sub("*collectionErrors",t=>{const i=t.filter(s=>s.type!=="SOME_FILES_HAS_ERRORS")[0];if(!i){this.set$({commonErrorMessage:null});return}this.set$({commonErrorMessage:i.message})})}destroyCallback(){super.destroyCallback(),this.uploadCollection.unobserveProperties(this._throttledHandleCollectionUpdate)}}lx.template=`
  <uc-activity-header>
    <span aria-live="polite" class="uc-header-text">{{headerText}}</span>
    <button
      type="button"
      class="uc-mini-btn uc-close-btn"
      set="onclick: *closeModal"
      l10n="@title:a11y-activity-header-button-close;@aria-label:a11y-activity-header-button-close"
    >
      <uc-icon name="close"></uc-icon>
    </button>
  </uc-activity-header>

  <div class="uc-no-files" set="@hidden: hasFiles">
    <slot name="empty"><span l10n="no-files"></span></slot>
  </div>

  <div class="uc-files" repeat="*uploadList" repeat-item-tag="uc-file-item"></div>

  <div class="uc-common-error" set="@hidden: !commonErrorMessage; textContent: commonErrorMessage;"></div>

  <div class="uc-toolbar">
    <button type="button" class="uc-cancel-btn uc-secondary-btn" set="onclick: onCancel;" l10n="clear"></button>
    <div class="uc-toolbar-spacer"></div>
    <button
      type="button"
      class="uc-add-more-btn uc-secondary-btn"
      set="onclick: onAdd; @disabled: !addMoreBtnEnabled; @hidden: !addMoreBtnVisible"
    >
      <uc-icon name="add"></uc-icon><span l10n="add-more"></span>
    </button>
    <button
      type="button"
      class="uc-upload-btn uc-primary-btn"
      set="@hidden: !uploadBtnVisible; onclick: onUpload;"
      l10n="upload"
    ></button>
    <button
      type="button"
      class="uc-done-btn uc-primary-btn"
      set="@hidden: !doneBtnVisible; onclick: onDone;  @disabled: !doneBtnEnabled"
      l10n="done"
    ></button>
  </div>

  <uc-drop-area ghost></uc-drop-area>
`;class cx extends Un{constructor(){super(...arguments);z(this,"couldBeCtxOwner",!0);z(this,"activityType",ct.activities.URL);z(this,"init$",{...this.init$,importDisabled:!0,onUpload:t=>{t.preventDefault();let i=this.ref.input.value;this.api.addFileFromUrl(i,{source:Nn.URL}),this.$["*currentActivity"]=ct.activities.UPLOAD_LIST},onCancel:()=>{this.historyBack()},onInput:t=>{let i=t.target.value;this.set$({importDisabled:!i})}})}initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:()=>{this.ref.input.value="",this.ref.input.focus()}})}}cx.template=`
  <uc-activity-header>
    <button type="button" class="uc-mini-btn" set="onclick: *historyBack" l10n="@title:back;@aria-label:back">
      <uc-icon name="back"></uc-icon>
    </button>
    <div>
      <uc-icon name="url"></uc-icon>
      <span l10n="caption-from-url"></span>
    </div>
    <button
      type="button"
      class="uc-mini-btn uc-close-btn"
      set="onclick: *closeModal"
      l10n="@title:a11y-activity-header-button-close;@aria-label:a11y-activity-header-button-close"
    >
      <uc-icon name="close"></uc-icon>
    </button>
  </uc-activity-header>
  <form class="uc-content">
    <input placeholder="https://" class="uc-url-input" type="text" ref="input" set="oninput: onInput" />
    <button
      type="submit"
      class="uc-url-upload-btn uc-primary-btn"
      set="onclick: onUpload; @disabled: importDisabled"
      l10n="upload-url"
    ></button>
  </form>
`;const x8=()=>typeof navigator.permissions<"u",R8={width:{ideal:1920},height:{ideal:1080},frameRate:{ideal:30}},$E=["camera","microphone"];function vf(n){const e=Math.floor(n/60).toString().padStart(2,"0"),t=Math.floor(n%60).toString().padStart(2,"0");return`${e}:${t}`}const jE="image/jpeg",zE="video/webm";class ux extends Un{constructor(){super();z(this,"couldBeCtxOwner",!0);z(this,"activityType",ct.activities.CAMERA);z(this,"_unsubPermissions",null);z(this,"_chunks",[]);z(this,"_mediaRecorder",null);z(this,"_stream",null);z(this,"_selectedAudioId",null);z(this,"_selectedCameraId",null);z(this,"_chooseActionWithCamera",()=>{var t;if(this._activeTab===jt.PHOTO&&this._shot(),this._activeTab===jt.VIDEO){if(((t=this._mediaRecorder)==null?void 0:t.state)==="recording"){this._stopRecording();return}this._startRecording()}});z(this,"_updateTimer",()=>{const t=Math.floor((performance.now()-this.$._startTime+this.$._elapsedTime)/1e3);if(typeof this.cfg.maxVideoRecordingDuration=="number"&&this.cfg.maxVideoRecordingDuration>0){const i=this.cfg.maxVideoRecordingDuration-t;if(i<=0){this.ref.timer.textContent=vf(i),this._stopRecording();return}this.ref.timer.textContent=vf(i)}else this.ref.timer.textContent=vf(t);this._animationFrameId=requestAnimationFrame(this._updateTimer)});z(this,"_startTimer",()=>{this.$._startTime=performance.now(),this.$._elapsedTime=0,this._updateTimer()});z(this,"_stopTimer",()=>{this._animationFrameId&&cancelAnimationFrame(this._animationFrameId)});z(this,"_startTimeline",()=>{const t=this.ref.video.currentTime,i=this.ref.video.duration;this.ref.line.style.transform=`scaleX(${t/i})`,this.ref.timer.textContent=vf(t),this._animationFrameId=requestAnimationFrame(this._startTimeline)});z(this,"_stopTimeline",()=>{this._animationFrameId&&cancelAnimationFrame(this._animationFrameId)});z(this,"_startRecording",()=>{try{this._chunks=[],this._options={...this.cfg.mediaRecorderOptions};const{mimeType:t}=this.cfg.mediaRecorderOptions||{};t&&MediaRecorder.isTypeSupported(t)?this._options.mimeType=t:MediaRecorder.isTypeSupported(zE)?this._options.mimeType=zE:this._options.mimeType="video/mp4",this._stream&&(this._mediaRecorder=new MediaRecorder(this._stream,this._options),this._mediaRecorder.start(),this._mediaRecorder.addEventListener("dataavailable",i=>{this._chunks.push(i.data)}),this._startTimer(),this.classList.add("uc-recording"),this._setCameraState(rr.PLAY))}catch(t){console.error("Failed to start recording",t)}});z(this,"_stopRecording",()=>{var t,i;(t=this._mediaRecorder)==null||t.addEventListener("stop",()=>{this._previewVideo(),this._stopTimer(),this._setCameraState(rr.STOP)}),(i=this._mediaRecorder)==null||i.stop(),this.classList.remove("uc-recording")});z(this,"_toggleRecording",()=>{var t;((t=this._mediaRecorder)==null?void 0:t.state)!=="recording"&&(!this.ref.video.paused&&!this.ref.video.ended&&this.ref.video.readyState>2?this.ref.video.pause():this.ref.video.paused&&this.ref.video.play())});z(this,"_toggleEnableAudio",()=>{var t;(t=this._stream)==null||t.getAudioTracks().forEach(i=>{i.enabled=!i.enabled,this.$.toggleMicrophoneIcon=i.enabled?"microphone":"microphone-mute",this.$.audioSelectDisabled=!i.enabled})});z(this,"_previewVideo",()=>{var t;try{const i=new Blob(this._chunks,{type:(t=this._mediaRecorder)==null?void 0:t.mimeType}),s=URL.createObjectURL(i);this.ref.video.muted=!1,this.ref.video.volume=1,this.$.video=null,this.ref.video.src=s,this.ref.video.addEventListener("play",()=>{this._startTimeline(),this.set$({currentTimelineIcon:"pause"})}),this.ref.video.addEventListener("pause",()=>{this.set$({currentTimelineIcon:"play"}),this._stopTimeline()})}catch(i){console.error("Failed to preview video",i)}});z(this,"_retake",()=>{this._setCameraState(rr.RETAKE),this._activeTab===jt.VIDEO&&(this.$.video=this._stream,this.ref.video.muted=!0),this.ref.video.play()});z(this,"_accept",()=>{var o,c,h;if(this._setCameraState(rr.ACCEPT),this._activeTab===jt.PHOTO){(o=this._canvas)==null||o.toBlob(d=>{const m=this._createFile("camera","jpeg",jE,d);this._toSend(m)},jE);return}const t=new Blob(this._chunks,{type:(c=this._mediaRecorder)==null?void 0:c.mimeType}),i=this._guessExtensionByMime((h=this._mediaRecorder)==null?void 0:h.mimeType),s=this._createFile("video",i,`video/${i}`,t);this._toSend(s),this._chunks=[]});z(this,"_handlePhoto",t=>{t===rr.SHOT&&this.set$({tabVideoHidden:!0,cameraHidden:!0,tabCameraHidden:!0,cameraActionsHidden:!1,cameraSelectHidden:!0}),(t===rr.RETAKE||t===rr.ACCEPT)&&this.set$({tabVideoHidden:!this._cameraModes.includes(jt.VIDEO),tabCameraHidden:!this._cameraModes.includes(jt.PHOTO),cameraHidden:!1,cameraActionsHidden:!0,cameraSelectHidden:this._cameraDevices.length<=1})});z(this,"_handleVideo",t=>{t===rr.PLAY&&this.set$({timerHidden:!1,tabCameraHidden:!0,cameraSelectHidden:!0,audioSelectHidden:!0,currentTimelineIcon:"pause",currentIcon:"square",mutableClassButton:"uc-shot-btn uc-camera-action uc-stop-record"}),t===rr.STOP&&this.set$({timerHidden:!1,cameraHidden:!0,audioToggleMicrophoneHidden:!0,cameraActionsHidden:!1}),(t===rr.RETAKE||t===rr.ACCEPT)&&this.set$({timerHidden:!0,tabVideoHidden:!this._cameraModes.includes(jt.VIDEO),tabCameraHidden:!this._cameraModes.includes(jt.PHOTO),cameraHidden:!1,cameraActionsHidden:!0,audioToggleMicrophoneHidden:!this.cfg.enableAudioRecording,currentIcon:"video-camera-full",mutableClassButton:"uc-shot-btn uc-camera-action",audioSelectHidden:!this.cfg.enableAudioRecording||this._audioDevices.length<=1,cameraSelectHidden:this._cameraDevices.length<=1})});z(this,"_setCameraState",t=>{this._activeTab===jt.PHOTO&&(t==="shot"||t==="retake"||t==="accept")&&this._handlePhoto(t),this._activeTab===jt.VIDEO&&(t==="play"||t==="stop"||t==="retake"||t==="accept"||t==="pause"||t==="resume")&&this._handleVideo(t)});z(this,"_handleActiveTab",t=>{this.ref.switcher.querySelectorAll("button").forEach(i=>{i.classList.toggle("uc-active",i.getAttribute("data-id")===t)}),t===jt.PHOTO&&this.set$({currentIcon:"camera-full",audioSelectHidden:!0,audioToggleMicrophoneHidden:!0}),t===jt.VIDEO&&this.set$({currentTimelineIcon:"play",currentIcon:"video-camera-full",audioSelectHidden:!this.cfg.enableAudioRecording||this._audioDevices.length<=1,audioToggleMicrophoneHidden:!this.cfg.enableAudioRecording}),this._activeTab=t});z(this,"_createFile",(t,i,s,o)=>{const c=Date.now(),h=`${t}-${c}.${i}`;return new File([o],h,{lastModified:c,type:s})});z(this,"_toSend",t=>{this.api.addFileFromObject(t,{source:Nn.CAMERA}),this.set$({"*currentActivity":ct.activities.UPLOAD_LIST})});z(this,"_setPermissionsState",wi(t=>{this.classList.toggle("uc-initialized",t==="granted");const i=this._activeTab===jt.VIDEO&&this.cfg.enableAudioRecording,s=this._activeTab===jt.PHOTO?"camera-full":"video-camera-full";t==="granted"?this.set$({videoHidden:!1,cameraHidden:!1,tabCameraHidden:!this._cameraModes.includes(jt.PHOTO),tabVideoHidden:!this._cameraModes.includes(jt.VIDEO),messageHidden:!0,timerHidden:!0,currentIcon:s,audioToggleMicrophoneHidden:!i,audioSelectHidden:!i}):t==="prompt"?(this.$.l10nMessage="camera-permissions-prompt",this.set$({videoHidden:!0,cameraHidden:!0,tabCameraHidden:!0,messageHidden:!1}),this._stopCapture()):(this.$.l10nMessage="camera-permissions-denied",this.set$({videoHidden:!0,messageHidden:!1,tabCameraHidden:!this._cameraModes.includes(jt.PHOTO),tabVideoHidden:!this._cameraModes.includes(jt.VIDEO),cameraActionsHidden:!0,mutableClassButton:"uc-shot-btn uc-camera-action"}),this._stopCapture())},300));z(this,"_makeStreamInactive",()=>{var s,o;if(!this._stream)return!1;const t=(s=this._stream)==null?void 0:s.getAudioTracks(),i=(o=this._stream)==null?void 0:o.getVideoTracks();t.forEach(c=>c.stop()),i.forEach(c=>c.stop())});z(this,"_stopCapture",()=>{var t;this._capturing&&(this.ref.video.volume=0,(t=this.$.video)==null||t.getTracks()[0].stop(),this.$.video=null,this._makeStreamInactive(),this._stopTimer(),this._capturing=!1)});z(this,"_capture",async()=>{const t={video:R8,audio:this.cfg.enableAudioRecording?{}:!1};this._selectedCameraId&&(t.video={deviceId:{exact:this._selectedCameraId}}),this._selectedAudioId&&this.cfg.enableAudioRecording&&(t.audio={deviceId:{exact:this._selectedAudioId}}),this.ref.video.volume=0;try{this._setPermissionsState("prompt"),this._stream=await navigator.mediaDevices.getUserMedia(t),this._stream.addEventListener("inactive",()=>{this._setPermissionsState("denied")}),this.$.video=this._stream,this._capturing=!0,this._setPermissionsState("granted")}catch(i){this._setPermissionsState("denied"),console.log("Failed to capture camera",i)}});z(this,"_handlePermissionsChange",()=>{this._capture()});z(this,"_permissionAccess",async()=>{try{for(const t of $E)this[`${t}Response`]=await navigator.permissions.query({name:t}),this[`${t}Response`].addEventListener("change",this._handlePermissionsChange)}catch(t){console.log("Failed to use permissions API. Fallback to manual request mode.",t),this._capture()}});z(this,"_getPermission",()=>{});z(this,"_requestDeviceAccess",async()=>{try{await navigator.mediaDevices.getUserMedia({video:!0,audio:this.cfg.enableAudioRecording}),await this._getDevices(),navigator.mediaDevices.addEventListener("devicechange",this._getDevices)}catch(t){console.log("Failed to get user media",t)}});z(this,"_getDevices",async()=>{var t,i;try{const s=await navigator.mediaDevices.enumerateDevices();this._cameraDevices=s.filter(o=>o.kind==="videoinput").map((o,c)=>({text:o.label.trim()||`${this.l10n("caption-camera")} ${c+1}`,value:o.deviceId})),this._audioDevices=this.cfg.enableAudioRecording&&s.filter(o=>o.kind==="audioinput").map(o=>({text:o.label.trim(),value:o.deviceId})),this._cameraDevices.length>1&&this.set$({cameraSelectOptions:this._cameraDevices,cameraSelectHidden:!1}),this._selectedCameraId=(t=this._cameraDevices[0])==null?void 0:t.value,this._audioDevices.length>1&&this.set$({audioSelectOptions:this._audioDevices,audioSelectHidden:!1}),this._selectedAudioId=(i=this._audioDevices[0])==null?void 0:i.value}catch(s){console.log("Failed to get devices",s)}});z(this,"_onActivate",async()=>{await this._permissionAccess(),await this._requestDeviceAccess(),await this._capture(),this._handleCameraModes(this._cameraModes)});z(this,"_onDeactivate",async()=>{this._unsubPermissions&&this._unsubPermissions(),!!window.chrome||this._setPermissionsState("denied"),this._stopCapture()});z(this,"_handleCameraModes",t=>{this.$.tabVideoHidden=!t.includes(jt.VIDEO),this.$.tabCameraHidden=!t.includes(jt.PHOTO);const i=t[0];(!this._activeTab||!t.includes(this._activeTab))&&this._handleActiveTab(i)});this.init$={...this.init$,video:null,videoTransformCss:null,videoHidden:!0,messageHidden:!0,requestBtnHidden:x8(),cameraSelectOptions:null,cameraSelectHidden:!0,l10nMessage:"",switcher:null,panels:null,timer:null,timerHidden:!0,cameraHidden:!0,cameraActionsHidden:!0,audioSelectOptions:null,audioSelectHidden:!0,audioSelectDisabled:!0,audioToggleMicrophoneHidden:!0,tabCameraHidden:!0,tabVideoHidden:!0,currentIcon:"camera-full",currentTimelineIcon:"play",toggleMicrophoneIcon:"microphone",_startTime:0,_elapsedTime:0,_animationFrameId:null,mutableClassButton:"uc-shot-btn uc-camera-action",onCameraSelectChange:t=>{this._selectedCameraId=t.target.value,this._capture()},onAudioSelectChange:t=>{this._selectedAudioId=t.target.value,this._capture()},onCancel:()=>{this.historyBack()},onShot:()=>this._shot(),onRequestPermissions:()=>this._capture(),onStartCamera:()=>this._chooseActionWithCamera(),onStartRecording:()=>this._startRecording(),onStopRecording:()=>this._stopRecording(),onToggleRecording:()=>this._toggleRecording(),onToggleAudio:()=>this._toggleEnableAudio(),onRetake:()=>this._retake(),onAccept:()=>this._accept(),onClickTab:t=>{const i=t.currentTarget.getAttribute("data-id");i&&this._handleActiveTab(i)}}}_shot(){if(this._setCameraState("shot"),this._canvas=document.createElement("canvas"),this._ctx=this._canvas.getContext("2d"),!this._ctx)throw new Error("Failed to get canvas context");this._canvas.height=this.ref.video.videoHeight,this._canvas.width=this.ref.video.videoWidth,this.cfg.cameraMirror&&(this._ctx.translate(this._canvas.width,0),this._ctx.scale(-1,1)),this._ctx.drawImage(this.ref.video,0,0),this.ref.video.pause()}_guessExtensionByMime(t){const i={mp4:"mp4",ogg:"ogg",webm:"webm",quicktime:"mov","x-matroska":"mkv"};if(t==="")return"webm";if(t&&(t=t.split("/"),(t==null?void 0:t[0])==="video")){t=t.slice(1).join("/");const s=t==null?void 0:t.split(";")[0];if(i[s])return i[s]}return"avi"}get _cameraModes(){return Is(this.cfg.cameraModes)}initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:this._onActivate,onDeactivate:this._onDeactivate}),this.subConfigValue("cameraMirror",t=>{this.$.videoTransformCss=t?"scaleX(-1)":null}),this.subConfigValue("enableAudioRecording",t=>{this.$.audioToggleMicrophoneHidden=!t,this.$.audioSelectDisabled=!t}),this.subConfigValue("cameraModes",t=>{if(!this.isActivityActive)return;const i=dc(t);this._handleCameraModes(i)})}_destroy(){var t,i;for(const s of $E)(t=this[`${s}Response`])==null||t.removeEventListener("change",this._handlePermissionsChange);(i=navigator.mediaDevices)==null||i.removeEventListener("devicechange",this._getDevices)}async destroyCallback(){super.destroyCallback(),this._destroy()}}ux.template=`
  <uc-activity-header>
    <button type="button" class="uc-mini-btn" set="onclick: *historyBack" l10n="@title:back">
      <uc-icon name="back"></uc-icon>
    </button>
    <div set="@hidden: !cameraSelectHidden">
      <uc-icon name="camera"></uc-icon>
      <span l10n="caption-camera"></span>
    </div>
    <uc-select
      class="uc-camera-select"
      set="$.options: cameraSelectOptions; @hidden: cameraSelectHidden; onchange: onCameraSelectChange"
    >
    </uc-select>
    <button
      type="button"
      class="uc-mini-btn uc-close-btn"
      set="onclick: *closeModal"
      l10n="@title:a11y-activity-header-button-close;@aria-label:a11y-activity-header-button-close"
    >
      <uc-icon name="close"></uc-icon>
    </button>
  </uc-activity-header>
  <div class="uc-content">
    <video
      muted
      autoplay
      playsinline
      set="srcObject: video; style.transform: videoTransformCss; @hidden: videoHidden"
      ref="video"
    ></video>
    <div class="uc-message-box" set="@hidden: messageHidden">
      <span l10n="l10nMessage"></span>
      <button
        type="button"
        set="onclick: onRequestPermissions; @hidden: requestBtnHidden"
        l10n="camera-permissions-request"
      ></button>
    </div>
  </div>

  <div class="uc-controls">
    <div ref="switcher" class="uc-switcher" set="@hidden:!timerHidden">
      <button
        data-id="photo"
        type="button"
        class="uc-switch uc-mini-btn"
        set="onclick: onClickTab;  @hidden: tabCameraHidden"
      >
        <uc-icon name="camera"></uc-icon>
      </button>
      <button
        data-id="video"
        type="button"
        class="uc-switch uc-mini-btn"
        set="onclick: onClickTab; @hidden: tabVideoHidden"
      >
        <uc-icon name="video-camera"></uc-icon>
      </button>
    </div>

    <button class="uc-secondary-btn uc-recording-timer" set="@hidden:timerHidden; onclick: onToggleRecording">
      <uc-icon set="@name: currentTimelineIcon"></uc-icon>
      <span ref="timer"> 00:00 </span>
      <span ref="line" class="uc-line"></span>
    </button>

    <div class="uc-camera-actions uc-camera-action" set="@hidden: cameraActionsHidden">
      <button type="button" class="uc-secondary-btn" set="onclick: onRetake">Retake</button>
      <button type="button" class="uc-primary-btn" set="onclick: onAccept">Accept</button>
    </div>

    <button
      type="button"
      class="uc-shot-btn uc-camera-action"
      set="onclick: onStartCamera; @class: mutableClassButton; @hidden: cameraHidden;"
    >
      <uc-icon set="@name: currentIcon"></uc-icon>
    </button>

    <div class="uc-select">
      <button class="uc-mini-btn uc-btn-microphone" set="onclick: onToggleAudio; @hidden: audioToggleMicrophoneHidden;">
        <uc-icon set="@name:toggleMicrophoneIcon"></uc-icon>
      </button>

      <uc-select
        class="uc-audio-select"
        set="$.options: audioSelectOptions; onchange: onAudioSelectChange; @hidden: audioSelectHidden; @disabled: audioSelectDisabled"
      >
      </uc-select>
    </div>
  </div>
`;class hx extends Un{constructor(){super(...arguments);z(this,"requireCtxName",!0)}initCallback(){super.initCallback(),this.$["*eventEmitter"].bindTarget(this)}destroyCallback(){super.destroyCallback(),this.$["*eventEmitter"].unbindTarget(this)}}hx.EventType=Qt;const my=hx;class dx extends Un{constructor(){super(...arguments);z(this,"init$",{...this.init$,visible:!1,value:0,"*commonProgress":0})}initCallback(){super.initCallback(),this._unobserveCollection=this.uploadCollection.observeProperties(()=>{let t=this.uploadCollection.items().some(i=>this.uploadCollection.read(i).getValue("isUploading"));this.$.visible=t}),this.sub("visible",t=>{t?this.setAttribute("active",""):this.removeAttribute("active")}),this.sub("*commonProgress",t=>{this.$.value=t})}destroyCallback(){var t;super.destroyCallback(),(t=this._unobserveCollection)==null||t.call(this)}}dx.template=' <uc-progress-bar set="visible: visible; value: value"></uc-progress-bar> ';class fx extends Ut{constructor(){super(...arguments);z(this,"_value",0);z(this,"_visible",!0);z(this,"init$",{...this.init$,width:0,opacity:0})}initCallback(){super.initCallback(),this.defineAccessor("value",t=>{if(t==null)return;const i=this._value;if(this._value=t,!!this._visible){if(t===100&&this.ref.realProgressLine.addEventListener("transitionend",()=>{this.ref.realProgressLine.classList.toggle("uc-progress--hidden",!0)},{once:!0}),this.ref.fakeProgressLine.classList.toggle("uc-fake-progress--hidden",t!==0),t===0&&i>0){this.ref.realProgressLine.addEventListener("transitionend",()=>{this.style.setProperty("--l-progress-value",this._value.toString())},{once:!0});return}this.style.setProperty("--l-progress-value",this._value.toString())}}),this.defineAccessor("visible",t=>{this._visible=t,this.ref.realProgressLine.classList.toggle("uc-progress--hidden",!t),this.ref.fakeProgressLine.classList.toggle("uc-fake-progress--hidden",!t)})}}fx.template=`
  <div ref="fakeProgressLine" class="uc-fake-progress"></div>
  <div ref="realProgressLine" class="uc-progress"></div>
`;const mc="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=";function mx(...n){return n.reduce((e,t)=>{if(typeof t=="string")return e[t]=!0,e;for(let i of Object.keys(t))e[i]=t[i];return e},{})}function cr(...n){let e=mx(...n);return Object.keys(e).reduce((t,i)=>(e[i]&&t.push(i),t),[]).join(" ")}function I8(n,...e){let t=mx(...e);for(let i of Object.keys(t))n.classList.toggle(i,t[i])}const O8=n=>{if(!n)return zr;const e=dc(n).filter(t=>zr.includes(t));return e.length===0?zr:e};function D8(n){return{"*originalUrl":null,"*faderEl":null,"*cropperEl":null,"*imgEl":null,"*imgContainerEl":null,"*networkProblems":!1,"*imageSize":null,"*editorTransformations":{},"*cropPresetList":[],"*tabList":zr,"*tabId":Xt.CROP,entry:null,extension:null,editorMode:!1,modalCaption:"",isImage:!1,msg:"",src:mc,fileType:"",showLoader:!1,uuid:null,cdnUrl:null,cropPreset:"",tabs:bh(zr),"presence.networkProblems":!1,"presence.modalCaption":!0,"presence.editorToolbar":!1,"presence.viewerToolbar":!0,"*on.retryNetwork":()=>{let e=n.querySelectorAll("img");for(let t of e){let i=t.src;t.src=mc,t.src=i}n.$["*networkProblems"]=!1},"*on.apply":e=>{if(!e)return;let t=n.$["*originalUrl"],i=Pa(zm(e),"preview"),s=qi(t,i),o={originalUrl:t,cdnUrlModifiers:i,cdnUrl:s,transformations:e};n.dispatchEvent(new CustomEvent("apply",{detail:o,bubbles:!0,composed:!0})),n.remove()},"*on.cancel":()=>{n.remove(),n.dispatchEvent(new CustomEvent("cancel",{bubbles:!0,composed:!0}))}}}const k8="<svg width='0' height='0' style='position:absolute'><symbol viewBox='0 0 20 20' id='uc-icon-brightness' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M15 10a5 5 0 0 1-5 5m5-5a5 5 0 0 0-5-5m5 5h-5m0 5a5 5 0 0 1 0-10m0 10V5m0 15v-3M2.93 2.929 5.05 5.05M0 10h3m-.07 7.071 2.12-2.121M10 0v3m7.07 14.071-2.12-2.121M20 10h-3m.07-7.071L14.95 5.05m-.626 2.45H10m4.324 5H10'/></symbol><symbol fill='currentColor' viewBox='0 0 20 20' id='uc-icon-closeMax' xmlns='http://www.w3.org/2000/svg'><path fill-rule='evenodd' d='M8.232 10 3.585 5.353l1.768-1.768L10 8.232l4.648-4.647 1.767 1.768L11.768 10l4.647 4.648-1.767 1.767L10 11.768l-4.647 4.647-1.768-1.767L8.232 10Z' clip-rule='evenodd'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-contrast' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M2 10a8 8 0 1 0 16 0 8 8 0 1 0-16 0m8-8v16m8-8h-8m7.598 2.5H10m6.24 2.5H10m7.6-7.5H10M16.242 5H10'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-crop' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M20 14H7.005C6.45 14 6 13.55 6 12.995V0M0 6h13.067c.515 0 .933.418.933.933V20M14.5.4 13 2l1.5 1.6M13 2h2a3 3 0 0 1 3 3v2M5.5 19.6 7 18l-1.5-1.6M7 18H5a3 3 0 0 1-3-3v-2'/></symbol><symbol fill='currentColor' viewBox='0 0 20 20' id='uc-icon-done' xmlns='http://www.w3.org/2000/svg'><path fill-rule='evenodd' d='m18.057 6.333-9.365 9.125a1.25 1.25 0 0 1-1.768-.023L1.92 10.296l1.791-1.744 4.132 4.243 8.47-8.253 1.744 1.79Z' clip-rule='evenodd'/></symbol><symbol fill='currentColor' viewBox='0 0 25 24' id='uc-icon-edit-file' xmlns='http://www.w3.org/2000/svg'><path fill-rule='evenodd' d='M18.558 2.804a.78.78 0 0 0-.557.235l-.008.007-2.472 2.46 3.847 3.848 2.46-2.473.004-.003a.78.78 0 0 0 0-1.108l-.004-.003-2.712-2.728a.78.78 0 0 0-.558-.235Zm-.248 7.613-3.852-3.852-8.93 8.887-1.516 5.41 5.41-1.515 8.888-8.93Zm-.636-8.934a2.28 2.28 0 0 1 2.512.505l2.702 2.717.002.002a2.278 2.278 0 0 1 0 3.234l-.002.002-12.541 12.602a.75.75 0 0 1-.33.193l-6.884 1.928a.75.75 0 0 1-.925-.924l1.928-6.885a.75.75 0 0 1 .193-.33l12.603-12.54a2.28 2.28 0 0 1 .742-.504Z' clip-rule='evenodd'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-enhance' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M19 13h-2m0 0a4 4 0 0 1-4-4m4 4a4 4 0 0 0-4 4m0-8V7m0 2a4 4 0 0 1-4 4m-2 0h2m0 0a4 4 0 0 1 4 4m0 0v2M8 8.5H6.5m0 0a2 2 0 0 1-2-2m2 2a2 2 0 0 0-2 2m0-4V5m0 1.5a2 2 0 0 1-2 2M1 8.5h1.5m0 0a2 2 0 0 1 2 2m0 0V12M12 3h-1m0 0a1 1 0 0 1-1-1m1 1a1 1 0 0 0-1 1m0-2V1m0 1a1 1 0 0 1-1 1M8 3h1m0 0a1 1 0 0 1 1 1m0 0v1'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-exposure' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M10 20v-3M2.93 2.929 5.05 5.05M0 10h3m-.07 7.071 2.12-2.121M10 0v3m7.07 14.071-2.12-2.121M20 10h-3m.07-7.071L14.95 5.05M5 10a5 5 0 1 0 10 0 5 5 0 1 0-10 0'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-filters' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M4.5 6.5a5.5 5.5 0 1 0 11 0 5.5 5.5 0 1 0-11 0m-3.5 6a5.5 5.5 0 1 0 11 0 5.5 5.5 0 1 0-11 0m7 0a5.5 5.5 0 1 0 11 0 5.5 5.5 0 1 0-11 0'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-flip' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M19.6 5 18 3.5 16.4 5m3.2 10L18 16.5 16.4 15M18 3.523v12.954M3.3 8.5h10.654c.301 0 .415-.395.159-.554L3.459 1.286A.3.3 0 0 0 3 1.542V8.2a.3.3 0 0 0 .3.3zm0 3h10.654c.301 0 .415.395.159.554l-10.654 6.66A.3.3 0 0 1 3 18.458v-6.66a.3.3 0 0 1 .3-.3z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-gamma' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M17 3C9 6 2.5 11.5 2.5 17.5m0 0h1m-1 0v-1m14 1h1m-3 0h1m-3 0h1m-3 0h1m-3 0h1m-3 0h1m-3 0h1m-3-14v-1m0 3v-1m0 3v-1m0 3v-1m0 3v-1m0 3v-1m0 3v-1'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-mirror' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M5 .4 3.5 2 5 3.6M15 .4 16.5 2 15 3.6M3.52 2h12.957M8.5 16.7V6.046c0-.301-.394-.415-.554-.159L1.287 16.541a.3.3 0 0 0 .255.459H8.2a.3.3 0 0 0 .3-.3zm3 0V6.046c0-.301.395-.415.555-.159l6.659 10.654a.3.3 0 0 1-.255.459H11.8a.3.3 0 0 1-.3-.3z'/></symbol><symbol viewBox='0 0 40 40' id='uc-icon-original' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.5' d='M0 40 40 0'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-rotate' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M13.5.4 12 2l1.5 1.6M12.023 2H14.4A3.6 3.6 0 0 1 18 5.6V8M4 17h9a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-sad' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M2 17c4.418-4 11.582-4 16 0M16.5 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-11 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-saturation' xmlns='http://www.w3.org/2000/svg'><defs><linearGradient id='puc-icon-id__a' x1='10.001' y1='1' x2='10.001' y2='19' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient></defs><circle cx='10.001' cy='10' r='9' transform='rotate(90 10 10)' fill='url(#puc-icon-id__a)'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-slider' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M0 10h11m0 0a2 2 0 1 0 4 0m-4 0a2 2 0 1 1 4 0m0 0h5'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-tuning' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M8 10h11M1 10h4M1 4.5h11m3 0h4m-18 11h11m3 0h4m-7-11a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0M5 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0m7 5.5a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-vibrance' xmlns='http://www.w3.org/2000/svg'><path d='M2.125 5.64A8.96 8.96 0 0 0 1.001 10a8.96 8.96 0 0 0 1.124 4.36V5.64z' fill='url(#suc-icon-id__a)'/><path d='M2.875 15.499V4.502a9.053 9.053 0 0 1 1.75-1.72v14.437a9.05 9.05 0 0 1-1.75-1.72z' fill='url(#suc-icon-id__b)'/><path d='M5.375 17.722c.548.33 1.134.601 1.75.809V1.469a8.956 8.956 0 0 0-1.75.81v15.443z' fill='url(#suc-icon-id__c)'/><path d='M7.875 1.253v17.495c.564.136 1.15.22 1.75.244V1.008a9 9 0 0 0-1.75.245z' fill='url(#suc-icon-id__d)'/><path d='M10.375 1.008v17.984a9 9 0 0 0 1.75-.244V1.252a9 9 0 0 0-1.75-.244z' fill='url(#suc-icon-id__e)'/><path d='M12.875 1.469V18.53a8.957 8.957 0 0 0 1.75-.808V2.277a8.957 8.957 0 0 0-1.75-.808z' fill='url(#suc-icon-id__f)'/><path d='M15.375 2.78v14.44a9.053 9.053 0 0 0 1.75-1.72v-11a9.054 9.054 0 0 0-1.75-1.72z' fill='url(#suc-icon-id__g)'/><path d='M17.875 5.638v8.724A8.959 8.959 0 0 0 19.001 10a8.96 8.96 0 0 0-1.126-4.362z' fill='url(#suc-icon-id__h)'/><defs><linearGradient id='suc-icon-id__a' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='suc-icon-id__b' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='suc-icon-id__c' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='suc-icon-id__d' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='suc-icon-id__e' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='suc-icon-id__f' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='suc-icon-id__g' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='suc-icon-id__h' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient></defs></symbol><symbol viewBox='0 0 20 20' id='uc-icon-warmth' xmlns='http://www.w3.org/2000/svg'><path d='m7.5 13.05.429.42.171-.175v-.244h-.6zm5 0h-.6v.245l.172.175.428-.42zM8.1 3.5c0-1.05.85-1.9 1.9-1.9V.4a3.1 3.1 0 0 0-3.1 3.1h1.2zm0 9.55V3.5H6.9v9.55h1.2zm-1 2.45c0-.79.315-1.506.829-2.03l-.858-.84A4.088 4.088 0 0 0 5.9 15.5h1.2zm2.9 2.9a2.9 2.9 0 0 1-2.9-2.9H5.9a4.1 4.1 0 0 0 4.1 4.1v-1.2zm2.9-2.9a2.9 2.9 0 0 1-2.9 2.9v1.2a4.1 4.1 0 0 0 4.1-4.1h-1.2zm-.829-2.03c.514.524.829 1.24.829 2.03h1.2c0-1.117-.447-2.13-1.171-2.87l-.858.84zM11.9 3.5v9.55h1.2V3.5h-1.2zM10 1.6c1.05 0 1.9.85 1.9 1.9h1.2A3.1 3.1 0 0 0 10 .4v1.2z' fill='currentColor'/><path d='M10 14V8' stroke='currentColor' stroke-width='1.2' stroke-linecap='round'/><path d='M14 3h3m-3 3h3m-3 3h3m-8 6.5a1 1 0 1 0 2 0 1 1 0 1 0-2 0' stroke='currentColor' stroke-width='1.2'/></symbol></svg>",M8=`
  ${k8}
  <div class="uc-wrapper uc-wrapper_desktop">
    <uc-presence-toggle class="uc-network_problems_splash" set="visible: presence.networkProblems;">
      <div class="uc-network_problems_content">
        <div class="uc-network_problems_icon">
          <uc-icon name="sad"></uc-icon>
        </div>
        <div class="uc-network_problems_text">Network error</div>
      </div>
      <div class="uc-network_problems_footer">
        <uc-btn-ui theme="primary" text="Retry" set="onclick: *on.retryNetwork"></uc-btn-ui>
      </div>
    </uc-presence-toggle>
    <div class="uc-viewport">
      <div class="uc-file_type_outer">
        <div class="uc-file_type">{{fileType}}</div>
      </div>
      <div class="uc-image_container" ref="img-container-el">
        <img src="${mc}" class="uc-image uc-image_visible_from_editor" ref="img-el" />
        <uc-editor-image-cropper ref="cropper-el"></uc-editor-image-cropper>
        <uc-editor-image-fader ref="fader-el"></uc-editor-image-fader>
      </div>
      <div class="uc-info_pan">{{msg}}</div>
    </div>
    <div class="uc-toolbar">
      <uc-line-loader-ui set="active: showLoader"></uc-line-loader-ui>
      <div class="uc-toolbar_content uc-toolbar_content__editor">
        <uc-editor-toolbar></uc-editor-toolbar>
      </div>
    </div>
  </div>
`;class kc extends Ut{constructor(){super();z(this,"ctxOwner",!0);z(this,"_debouncedShowLoader",wi(this._showLoader.bind(this),300));this.init$={...this.init$,...D8(this)}}_showLoader(t){this.$.showLoader=t}_waitForSize(){return new Promise((i,s)=>{const o=setTimeout(()=>{s(new Error("[cloud-image-editor] timeout waiting for non-zero container size"))},3e3),c=new ResizeObserver(([h])=>{h.contentRect.width>0&&h.contentRect.height>0&&(i(),clearTimeout(o),c.disconnect())});c.observe(this)})}initCallback(){super.initCallback(),this.$["*faderEl"]=this.ref["fader-el"],this.$["*cropperEl"]=this.ref["cropper-el"],this.$["*imgContainerEl"]=this.ref["img-container-el"],this.initEditor()}async updateImage(){if(this.isConnected){if(await this._waitForSize(),this.$.cdnUrl){const t=bC(this.$.cdnUrl),i=_h(this.$.cdnUrl,t);if(i===this.$["*originalUrl"])return;this.$["*originalUrl"]=i;const s=J6(this.$.cdnUrl),o=rL(s);this.$["*editorTransformations"]=o}else if(this.$.uuid){const t=_h(this.cfg.cdnCname,this.$.uuid);if(t===this.$["*originalUrl"])return;this.$["*originalUrl"]=t,this.$["*editorTransformations"]={}}else throw new Error("No UUID nor CDN URL provided");this.$["*tabId"]===Xt.CROP?this.$["*cropperEl"].deactivate({reset:!0}):this.$["*faderEl"].deactivate();try{const t=await this.proxyUrl(qi(this.$["*originalUrl"],Pa("json"))),i=await fetch(t).then(c=>c.json()),{width:s,height:o}=i;this.$["*imageSize"]={width:s,height:o},this.$["*tabId"]===Xt.CROP?this.$["*cropperEl"].activate(this.$["*imageSize"]):this.$["*faderEl"].activate({url:this.$["*originalUrl"]})}catch(t){t&&console.error("Failed to load image info",t)}}}async initEditor(){try{await this._waitForSize()}catch(t){this.isConnected&&console.error(t.message);return}this.ref["img-el"].addEventListener("load",()=>{this._imgLoading=!1,this._debouncedShowLoader(!1),this.$.src!==mc&&(this.$["*networkProblems"]=!1)}),this.ref["img-el"].addEventListener("error",()=>{this._imgLoading=!1,this._debouncedShowLoader(!1),this.$["*networkProblems"]=!0}),this.sub("src",t=>{let i=this.ref["img-el"];i.src!==t&&(this._imgLoading=!0,i.src=t||mc)}),this.sub("cropPreset",t=>{this.$["*cropPresetList"]=GC(t)}),this.sub("tabs",t=>{this.$["*tabList"]=O8(t)}),this.sub("*tabId",t=>{this.ref["img-el"].className=cr("uc-image",{"uc-image_hidden_to_cropper":t===Xt.CROP,"uc-image_hidden_effects":t!==Xt.CROP})}),this.classList.add("uc-editor_ON"),this.sub("*networkProblems",t=>{this.$["presence.networkProblems"]=t,this.$["presence.modalCaption"]=!t}),this.sub("*editorTransformations",t=>{if(Object.keys(t).length===0)return;let i=this.$["*originalUrl"],s=Pa(zm(t),"preview"),o=qi(i,s),c={originalUrl:i,cdnUrlModifiers:s,cdnUrl:o,transformations:t};this.dispatchEvent(new CustomEvent("change",{detail:c,bubbles:!0,composed:!0}))},!1),this.sub("uuid",t=>t&&this.updateImage()),this.sub("cdnUrl",t=>t&&this.updateImage())}}z(kc,"styleAttrs",["uc-cloud-image-editor"]);kc.template=M8;kc.bindAttributes({uuid:"uuid","cdn-url":"cdnUrl","crop-preset":"cropPreset",tabs:"tabs"});class px extends Ut{constructor(){super(),this.init$={...this.init$,dragging:!1},this._handlePointerUp=this._handlePointerUp_.bind(this),this._handlePointerMove=this._handlePointerMove_.bind(this),this._handleSvgPointerMove=this._handleSvgPointerMove_.bind(this)}_shouldThumbBeDisabled(e){let t=this.$["*imageBox"];if(!t)return;if(e===""&&t.height<=et&&t.width<=et)return!0;let i=t.height<=et&&(e.includes("n")||e.includes("s")),s=t.width<=et&&(e.includes("e")||e.includes("w"));return i||s}_createBackdrop(){let e=this.$["*cropBox"];if(!e)return;let{x:t,y:i,width:s,height:o}=e,c=this.ref["svg-el"],h=ir("mask",{id:"backdrop-mask"}),d=ir("rect",{x:0,y:0,width:"100%",height:"100%",fill:"white"}),m=ir("rect",{x:t,y:i,width:s,height:o,fill:"black"});h.appendChild(d),h.appendChild(m);let y=ir("rect",{x:0,y:0,width:"100%",height:"100%",fill:"var(--color-image-background)","fill-opacity":.85,mask:"url(#backdrop-mask)"});c.appendChild(y),c.appendChild(h),this._backdropMask=h,this._backdropMaskInner=m}_resizeBackdrop(){this._backdropMask&&(this._backdropMask.style.display="none",window.requestAnimationFrame(()=>{this._backdropMask&&(this._backdropMask.style.display="block")}))}_updateBackdrop(){let e=this.$["*cropBox"];if(!e)return;let{x:t,y:i,width:s,height:o}=e;this._backdropMaskInner&&ql(this._backdropMaskInner,{x:t,y:i,width:s,height:o})}_updateFrame(){let e=this.$["*cropBox"];if(!(!e||!this._frameGuides||!this._frameThumbs)){for(let t of Object.values(this._frameThumbs)){let{direction:i,pathNode:s,interactionNode:o,groupNode:c}=t,h=i==="",d=i.length===2,{x:m,y,width:_,height:b}=e;if(h)ql(o,{x:m,y,width:_,height:b});else{const A=Kl(Math.min(_,b)/(fy*2+Xu)/2,0,1);let{d:U,center:P}=d?U9(e,i,A):V9(e,i,A);const B=Math.max(EE*Kl(Math.min(_,b)/EE/3,0,1),L9);ql(o,{x:P[0]-B,y:P[1]-B,width:B*2,height:B*2}),ql(s,{d:U})}let T=this._shouldThumbBeDisabled(i);c.setAttribute("class",cr("uc-thumb",{"uc-thumb--hidden":T,"uc-thumb--visible":!T}))}ql(this._frameGuides,{x:e.x-So*.5,y:e.y-So*.5,width:e.width+So,height:e.height+So})}}_createThumb(e,t){let i=ir("g");i.classList.add("uc-thumb"),i.setAttribute("with-effects","");let s=ir("rect",{fill:"transparent"}),o=ir("path",{stroke:"currentColor",fill:"none","stroke-width":qC});i.appendChild(o),i.appendChild(s),e[t]={direction:t,pathNode:o,interactionNode:s,groupNode:i},t===""&&(i.style.cursor="move"),s.addEventListener("pointerdown",this._handlePointerDown.bind(this,t))}_createThumbs(){const e={};for(let t=0;t<3;t++)for(let i=0;i<3;i++){let s=`${["n","","s"][t]}${["w","","e"][i]}`;s!==""&&this._createThumb(e,s)}return this._createThumb(e,""),e}_createGuides(){let e=ir("svg"),t=ir("rect",{x:0,y:0,width:"100%",height:"100%",fill:"none",stroke:"currentColor","stroke-width":So,"stroke-opacity":.5});e.appendChild(t);for(let i=1;i<=2;i++){let s=ir("line",{x1:`${ff*i}%`,y1:"0%",x2:`${ff*i}%`,y2:"100%",stroke:"currentColor","stroke-width":So,"stroke-opacity":.3});e.appendChild(s)}for(let i=1;i<=2;i++){let s=ir("line",{x1:"0%",y1:`${ff*i}%`,x2:"100%",y2:`${ff*i}%`,stroke:"currentColor","stroke-width":So,"stroke-opacity":.3});e.appendChild(s)}return e.classList.add("uc-guides","uc-guides--semi-hidden"),e}_createFrame(){let e=this.ref["svg-el"],t=document.createDocumentFragment(),i=this._createGuides();t.appendChild(i);let s=this._createThumbs();for(let{groupNode:o}of Object.values(s))t.appendChild(o);e.appendChild(t),this._frameThumbs=s,this._frameGuides=i}_handlePointerDown(e,t){if(!this._frameThumbs)return;let i=this._frameThumbs[e];if(this._shouldThumbBeDisabled(e))return;let s=this.$["*cropBox"],{x:o,y:c}=this.ref["svg-el"].getBoundingClientRect(),h=t.x-o,d=t.y-c;this.$.dragging=!0,this._draggingThumb=i,this._dragStartPoint=[h,d],this._dragStartCrop={...s}}_handlePointerUp_(e){this._updateCursor(),this.$.dragging&&(e.stopPropagation(),e.preventDefault(),this.$.dragging=!1)}_handlePointerMove_(e){if(!this.$.dragging||!this._dragStartPoint||!this._draggingThumb)return;e.stopPropagation(),e.preventDefault();let t=this.ref["svg-el"],{x:i,y:s}=t.getBoundingClientRect(),o=e.x-i,c=e.y-s,h=o-this._dragStartPoint[0],d=c-this._dragStartPoint[1],{direction:m}=this._draggingThumb;const y=this._calcCropBox(m,[h,d]);y&&(this.$["*cropBox"]=y)}_calcCropBox(e,t){var m;const[i,s]=t;let o=this.$["*imageBox"],c=this._dragStartCrop??this.$["*cropBox"];const h=(m=this.$["*cropPresetList"])==null?void 0:m[0],d=h?h.width/h.height:void 0;if(e===""?c=j9({rect:c,delta:[i,s],imageBox:o}):c=X9({rect:c,delta:[i,s],direction:e,aspectRatio:d,imageBox:o}),!Object.values(c).every(y=>Number.isFinite(y)&&y>=0)){console.error("CropFrame is trying to create invalid rectangle",{payload:c});return}return sm(Nf(c),this.$["*imageBox"])}_handleSvgPointerMove_(e){if(!this._frameThumbs)return;let t=Object.values(this._frameThumbs).find(i=>{if(this._shouldThumbBeDisabled(i.direction))return!1;let o=i.interactionNode.getBoundingClientRect(),c={x:o.x,y:o.y,width:o.width,height:o.height};return Q9(c,[e.x,e.y])});this._hoverThumb=t,this._updateCursor()}_updateCursor(){let e=this._hoverThumb;this.ref["svg-el"].style.cursor=e?$9(e.direction):"initial"}_render(){this._updateBackdrop(),this._updateFrame()}toggleThumbs(e){this._frameThumbs&&Object.values(this._frameThumbs).map(({groupNode:t})=>t).forEach(t=>{t.setAttribute("class",cr("uc-thumb",{"uc-thumb--hidden":!e,"uc-thumb--visible":e}))})}initCallback(){super.initCallback(),this._createBackdrop(),this._createFrame(),this.sub("*imageBox",()=>{this._resizeBackdrop(),window.requestAnimationFrame(()=>{this._render()})}),this.sub("*cropBox",e=>{e&&(this._guidesHidden=e.height<=et||e.width<=et,window.requestAnimationFrame(()=>{this._render()}))}),this.sub("dragging",e=>{this._frameGuides&&this._frameGuides.setAttribute("class",cr({"uc-guides--hidden":this._guidesHidden,"uc-guides--visible":!this._guidesHidden&&e,"uc-guides--semi-hidden":!this._guidesHidden&&!e}))}),this.ref["svg-el"].addEventListener("pointermove",this._handleSvgPointerMove,!0),document.addEventListener("pointermove",this._handlePointerMove,!0),document.addEventListener("pointerup",this._handlePointerUp,!0)}destroyCallback(){super.destroyCallback(),document.removeEventListener("pointermove",this._handlePointerMove),document.removeEventListener("pointerup",this._handlePointerUp)}}px.template=' <svg class="uc-svg" ref="svg-el" xmlns="http://www.w3.org/2000/svg"></svg> ';class Jm extends Ut{constructor(){super(...arguments);z(this,"init$",{...this.init$,active:!1,title:"",icon:"","on.click":null,"title-prop":""})}initCallback(){super.initCallback(),this._titleEl=this.ref["title-el"],this._iconEl=this.ref["icon-el"],this.sub("title",t=>{this._titleEl&&(this._titleEl.style.display=t?"block":"none")}),this.sub("active",t=>{this.className=cr({"uc-active":t,"uc-not_active":!t})}),this.sub("on.click",t=>{this.onclick=t})}}Jm.template=`
  <button role="option" type="button" set="@aria-label:title-prop;" l10n="@title:title-prop;">
    <uc-icon set="@name: icon;"></uc-icon>
    <div class="uc-title" ref="title-el">{{title}}</div>
  </button>
`;function N8(n){let e=n+90;return e=e>=360?0:e,e}function P8(n,e){return n==="rotate"?N8(e):["mirror","flip"].includes(n)?!e:null}class gx extends Jm{initCallback(){super.initCallback(),this.defineAccessor("operation",e=>{e&&(this._operation=e,this.$.icon=e,this.bindL10n("title-prop",()=>this.l10n("a11y-cloud-editor-apply-crop",{name:this.l10n(e).toLowerCase()})))}),this.$["on.click"]=()=>{let e=this.$["*cropperEl"].getValue(this._operation),t=P8(this._operation,e);this.$["*cropperEl"].setValue(this._operation,t)}}}const $u={FILTER:"filter",COLOR_OPERATION:"color_operation"},xa="original";class yx extends Ut{constructor(){super(...arguments);z(this,"init$",{...this.init$,disabled:!1,min:0,max:100,value:0,defaultValue:0,zero:0,"on.input":t=>{this.$["*faderEl"].set(t),this.$.value=t}})}setOperation(t,i){this._controlType=t==="filter"?$u.FILTER:$u.COLOR_OPERATION,this._operation=t,this._iconName=t,this._title=t.toUpperCase(),this._filter=i,this._initializeValues(),this.$["*faderEl"].activate({url:this.$["*originalUrl"],operation:this._operation,value:this._filter===xa?void 0:this.$.value,filter:this._filter===xa?void 0:this._filter,fromViewer:!1})}_initializeValues(){let{range:t,zero:i}=hc[this._operation],[s,o]=t;this.$.min=s,this.$.max=o,this.$.zero=i;let c=this.$["*editorTransformations"][this._operation];if(this._controlType===$u.FILTER){let h=o;if(c){let{name:d,amount:m}=c;h=d===this._filter?m:o}this.$.value=h,this.$.defaultValue=h}if(this._controlType===$u.COLOR_OPERATION){let h=typeof c<"u"?c:i;this.$.value=h,this.$.defaultValue=h}}apply(){let t;this._controlType===$u.FILTER?this._filter===xa?t=null:t={name:this._filter,amount:this.$.value}:t=this.$.value;let i={...this.$["*editorTransformations"],[this._operation]:t};this.$["*editorTransformations"]=i}cancel(){this.$["*faderEl"].deactivate({hide:!1})}initCallback(){super.initCallback(),this.sub("*originalUrl",t=>{this._originalUrl=t}),this.sub("value",t=>{let i=`${this._filter||this._operation} ${t}`;this.$["*operationTooltip"]=i})}}yx.template=`
  <uc-slider-ui
    ref="slider-el"
    set="disabled: disabled; min: min; max: max; defaultValue: defaultValue; zero: zero; onInput: on.input;"
  ></uc-slider-ui>
`;function Yv(n){let e=new Image;return{promise:new Promise((s,o)=>{e.src=n,e.onload=s,e.onerror=o}),image:e,cancel:()=>{e.naturalWidth===0&&(e.src=mc)}}}function py(n){let e=[];for(let o of n){let c=Yv(o);e.push(c)}let t=e.map(o=>o.image);return{promise:Promise.allSettled(e.map(o=>o.promise)),images:t,cancel:()=>{e.forEach(o=>{o.cancel()})}}}class Xv extends Jm{constructor(){super(),this.init$={...this.init$,active:!1,title:"",icon:"",isOriginal:!1,iconSize:"20","on.click":null}}_previewSrc(){let e=parseInt(window.getComputedStyle(this).getPropertyValue("--l-base-min-width"),10),t=window.devicePixelRatio,i=Math.ceil(t*e),s=t>=2?"lightest":"normal",o=100,c={...this.$["*editorTransformations"]};return c[this._operation]=this._filter!==xa?{name:this._filter,amount:o}:void 0,qi(this._originalUrl,Pa(CC,zm(c),`quality/${s}`,`scale_crop/${i}x${i}/center`))}async _observerCallback(e,t){var s;if(e[0].isIntersecting){let o=await this.proxyUrl(this._previewSrc()),c=this.ref["preview-el"],{promise:h,cancel:d}=Yv(o);this._cancelPreload=d,h.catch(m=>{this.$["*networkProblems"]=!0,console.error("Failed to load image",{error:m})}).finally(()=>{c.style.backgroundImage=`url(${o})`,c.setAttribute("loaded",""),t.unobserve(this)})}else(s=this._cancelPreload)==null||s.call(this)}initCallback(){super.initCallback(),this.$["on.click"]=()=>{this.$.active?this.$.isOriginal||(this.$["*sliderEl"].setOperation(this._operation,this._filter),this.$["*showSlider"]=!0):(this.$["*sliderEl"].setOperation(this._operation,this._filter),this.$["*sliderEl"].apply()),this.$["*currentFilter"]=this._filter},this.defineAccessor("filter",t=>{this._operation="filter",this._filter=t,this.$.isOriginal=t===xa,this.$.icon=this.$.isOriginal?"original":"slider",this.bindL10n("title-prop",()=>this.l10n("a11y-cloud-editor-apply-filter",{name:t.toLowerCase()}))}),this._observer=new window.IntersectionObserver(this._observerCallback.bind(this),{threshold:[0,1]});let e=this.$["*originalUrl"];this._originalUrl=e,this.$.isOriginal?this.ref["icon-el"].classList.add("uc-original-icon"):this._observer.observe(this),this.sub("*currentFilter",t=>{this.$.active=t&&t===this._filter}),this.sub("isOriginal",t=>{this.$.iconSize=t?40:20}),this.sub("active",t=>{if(this.$.isOriginal)return;let i=this.ref["icon-el"];i.style.opacity=t?"1":"0";let s=this.ref["preview-el"];t?s.style.opacity="0":s.style.backgroundImage&&(s.style.opacity="1")}),this.sub("*networkProblems",async t=>{if(!t){let i=await this.proxyUrl(this._previewSrc()),s=this.ref["preview-el"];s.style.backgroundImage&&(s.style.backgroundImage="none",s.style.backgroundImage=`url(${i})`)}})}destroyCallback(){var e,t;super.destroyCallback(),(e=this._observer)==null||e.disconnect(),(t=this._cancelPreload)==null||t.call(this)}}Xv.template=`
  <button type="button" role="option" l10n="@title:title-prop;@aria-label:title-prop">
    <div class="uc-preview" ref="preview-el"></div>
    <uc-icon ref="icon-el" set="@name: icon; @size: iconSize;"></uc-icon>
  </button>
`;class vx extends Jm{constructor(){super(...arguments);z(this,"_operation","")}initCallback(){super.initCallback(),this.$["on.click"]=t=>{this.$["*sliderEl"].setOperation(this._operation),this.$["*showSlider"]=!0,this.$["*currentOperation"]=this._operation},this.defineAccessor("operation",t=>{t&&(this._operation=t,this.$.icon=t,this.bindL10n("title-prop",()=>this.l10n("a11y-cloud-editor-apply-tuning",{name:this.l10n(t).toLowerCase()})),this.bindL10n("title",()=>this.l10n(t)))}),this.sub("*editorTransformations",t=>{if(!this._operation)return;let{zero:i}=hc[this._operation],s=t[this._operation],o=typeof s<"u"?s!==i:!1;this.$.active=o})}}function L8(n,e){let t={};for(let i of e){let s=n[i];(n.hasOwnProperty(i)||s!==void 0)&&(t[i]=s)}return t}function Qv(n,e,t){let s=window.devicePixelRatio,o=Math.min(Math.ceil(e*s),3e3),c=s>=2?"lightest":"normal";return qi(n,Pa(CC,zm(t),`quality/${c}`,`stretch/off/-/resize/${o}x`,`@clib/${Ym}/${Xm}/uc-cloud-image-editor/`))}function U8(n){return n?[({dimensions:t,coords:i})=>[...t,...i].every(s=>Number.isInteger(s)&&Number.isFinite(s)),({dimensions:t,coords:i})=>t.every(s=>s>0)&&i.every(s=>s>=0)].every(t=>t(n)):!0}class _x extends Ut{constructor(){super();z(this,"ctxOwner",!0);this.init$={...this.init$,image:null,"*padding":P9,"*operations":{rotate:0,mirror:!1,flip:!1},"*imageBox":{x:0,y:0,width:0,height:0},"*cropBox":{x:0,y:0,width:0,height:0}},this._commitDebounced=wi(this._commit.bind(this),300),this._handleResizeThrottled=Kv(this._handleResize.bind(this),100),this._imageSize={width:0,height:0}}_handleResize(){!this.isConnected||!this._isActive||(this._initCanvas(),this._syncTransformations(),this._alignImage(),this._alignCrop(),this._draw())}_syncTransformations(){let t=this.$["*editorTransformations"],i=L8(t,Object.keys(this.$["*operations"])),s={...this.$["*operations"],...i};this.$["*operations"]=s}_initCanvas(){let t=this.ref["canvas-el"],i=t.getContext("2d"),s=this.offsetWidth,o=this.offsetHeight,c=window.devicePixelRatio;t.style.width=`${s}px`,t.style.height=`${o}px`,t.width=s*c,t.height=o*c,i==null||i.scale(c,c),this._canvas=t,this._ctx=i}_alignImage(){if(!this._isActive||!this.$.image)return;let t=this.$.image,i=this.$["*padding"],s=this.$["*operations"],{rotate:o}=s,c={width:this.offsetWidth,height:this.offsetHeight},h=Uu({width:t.naturalWidth,height:t.naturalHeight},o),d;if(h.width>c.width-i*2||h.height>c.height-i*2){let m=h.width/h.height,y=c.width/c.height;if(m>y){let _=c.width-i*2,b=_/m,T=0+i,A=i+(c.height-i*2)/2-b/2;d={x:T,y:A,width:_,height:b}}else{let _=c.height-i*2,b=_*m,T=i+(c.width-i*2)/2-b/2,A=0+i;d={x:T,y:A,width:b,height:_}}}else{let{width:m,height:y}=h,_=i+(c.width-i*2)/2-m/2,b=i+(c.height-i*2)/2-y/2;d={x:_,y:b,width:m,height:y}}this.$["*imageBox"]=Nf(d)}_alignCrop(){var b;let t=this.$["*cropBox"],i=this.$["*imageBox"],s=this.$["*operations"],{rotate:o}=s,c=this.$["*editorTransformations"].crop,{width:h,x:d,y:m}=this.$["*imageBox"];if(c){let{dimensions:[T,A],coords:[U,P]}=c,{width:B}=Uu(this._imageSize,o),G=h/B;t=sm(Nf({x:d+U*G,y:m+P*G,width:T*G,height:A*G}),this.$["*imageBox"])}const y=(b=this.$["*cropPresetList"])==null?void 0:b[0],_=y?y.width/y.height:void 0;if(!W9(t,i)||_&&!Z9(t,_)){const T=i.width/i.height;let A=i.width,U=i.height;_&&(T>_?A=Math.min(i.height*_,i.width):U=Math.min(i.width/_,i.height)),t={x:i.x+i.width/2-A/2,y:i.y+i.height/2-U/2,width:A,height:U}}this.$["*cropBox"]=sm(Nf(t),this.$["*imageBox"])}_drawImage(){let t=this._ctx;if(!t)return;let i=this.$.image,s=this.$["*imageBox"],o=this.$["*operations"],{mirror:c,flip:h,rotate:d}=o,m=Uu({width:s.width,height:s.height},d);t.save(),t.translate(s.x+s.width/2,s.y+s.height/2),t.rotate(d*Math.PI*-1/180),t.scale(c?-1:1,h?-1:1),t.drawImage(i,-m.width/2,-m.height/2,m.width,m.height),t.restore()}_draw(){if(!this._isActive||!this.$.image||!this._canvas||!this._ctx)return;let t=this._canvas;this._ctx.clearRect(0,0,t.width,t.height),this._drawImage()}_animateIn({fromViewer:t}){this.$.image&&(this.ref["frame-el"].toggleThumbs(!0),this._transitionToImage(),setTimeout(()=>{this.className=cr({"uc-active_from_viewer":t,"uc-active_from_editor":!t,"uc-inactive_to_editor":!1})}))}_getCropDimensions(){let t=this.$["*cropBox"],i=this.$["*imageBox"],s=this.$["*operations"],{rotate:o}=s,{width:c,height:h}=i,{width:d,height:m}=Uu(this._imageSize,o),{width:y,height:_}=t,b=c/d,T=h/m;return[Kl(Math.round(y/b),1,d),Kl(Math.round(_/T),1,m)]}_getCropTransformation(){let t=this.$["*cropBox"],i=this.$["*imageBox"],s=this.$["*operations"],{rotate:o}=s,{width:c,height:h,x:d,y:m}=i,{width:y,height:_}=Uu(this._imageSize,o),{x:b,y:T}=t,A=c/y,U=h/_,P=this._getCropDimensions(),B={dimensions:P,coords:[Kl(Math.round((b-d)/A),0,y-P[0]),Kl(Math.round((T-m)/U),0,_-P[1])]};if(!U8(B)){console.error("Cropper is trying to create invalid crop object",{payload:B});return}if(!(P[0]===y&&P[1]===_))return B}_commit(){if(!this.isConnected||!this._imageSize)return;let t=this.$["*operations"],{rotate:i,mirror:s,flip:o}=t,c=this._getCropTransformation(),d={...this.$["*editorTransformations"],crop:c,rotate:i,mirror:s,flip:o};this.$["*editorTransformations"]=d}setValue(t,i){this.$["*operations"]={...this.$["*operations"],[t]:i},this._isActive&&(this._alignImage(),this._alignCrop(),this._draw())}getValue(t){return this.$["*operations"][t]}async activate(t,{fromViewer:i}={}){if(!this._isActive){this._isActive=!0,this._imageSize=t,this.removeEventListener("transitionend",this._reset);try{this.$.image=await this._waitForImage(this.$["*originalUrl"],this.$["*editorTransformations"]),this._syncTransformations(),this._animateIn({fromViewer:i})}catch(s){console.error("Failed to activate cropper",{error:s})}this._observer=new ResizeObserver(([s])=>{s.contentRect.width>0&&s.contentRect.height>0&&this._isActive&&this.$.image&&this._handleResizeThrottled()}),this._observer.observe(this)}}deactivate({reset:t=!1}={}){var i;this._isActive&&(!t&&this._commit(),this._isActive=!1,this._transitionToCrop(),this.className=cr({"uc-active_from_viewer":!1,"uc-active_from_editor":!1,"uc-inactive_to_editor":!0}),this.ref["frame-el"].toggleThumbs(!1),this.addEventListener("transitionend",this._reset,{once:!0}),(i=this._observer)==null||i.disconnect())}_transitionToCrop(){let t=this._getCropDimensions(),i=Math.min(this.offsetWidth,t[0])/this.$["*cropBox"].width,s=Math.min(this.offsetHeight,t[1])/this.$["*cropBox"].height,o=Math.min(i,s),c=this.$["*cropBox"].x+this.$["*cropBox"].width/2,h=this.$["*cropBox"].y+this.$["*cropBox"].height/2;this.style.transform=`scale(${o}) translate(${(this.offsetWidth/2-c)/o}px, ${(this.offsetHeight/2-h)/o}px)`,this.style.transformOrigin=`${c}px ${h}px`}_transitionToImage(){let t=this.$["*cropBox"].x+this.$["*cropBox"].width/2,i=this.$["*cropBox"].y+this.$["*cropBox"].height/2;this.style.transform="scale(1)",this.style.transformOrigin=`${t}px ${i}px`}_reset(){this._isActive||(this.$.image=null)}async _waitForImage(t,i){var y;let s=this.offsetWidth;i={...i,crop:void 0,rotate:void 0,flip:void 0,mirror:void 0};let o=await this.proxyUrl(Qv(t,s,i)),{promise:c,cancel:h,image:d}=Yv(o),m=this._handleImageLoading(o);return d.addEventListener("load",m,{once:!0}),d.addEventListener("error",m,{once:!0}),(y=this._cancelPreload)==null||y.call(this),this._cancelPreload=h,c.then(()=>d).catch(_=>(console.error("Failed to load image",{error:_}),this.$["*networkProblems"]=!0,Promise.resolve(d)))}_handleImageLoading(t){let i="crop",s=this.$["*loadingOperations"];return s.get(i)||s.set(i,new Map),s.get(i).get(t)||(s.set(i,s.get(i).set(t,!0)),this.$["*loadingOperations"]=s),()=>{var o;(o=s==null?void 0:s.get(i))!=null&&o.has(t)&&(s.get(i).delete(t),this.$["*loadingOperations"]=s)}}initCallback(){super.initCallback(),this.sub("*imageBox",()=>{this._draw()}),this.sub("*cropBox",()=>{this.$.image&&this._commitDebounced()}),this.sub("*cropPresetList",()=>{this._alignCrop()}),setTimeout(()=>{this.sub("*networkProblems",t=>{t||this._isActive&&this.activate(this._imageSize,{fromViewer:!1})})},0)}destroyCallback(){var t;super.destroyCallback(),(t=this._observer)==null||t.disconnect()}}_x.template=`
  <canvas class="uc-canvas" ref="canvas-el"></canvas>
  <uc-crop-frame ref="frame-el"></uc-crop-frame>
`;function FE(n,e,t){let i=Array(t);t--;for(let s=t;s>=0;s--)i[s]=Math.ceil((s*e+(t-s)*n)/t);return i}function V8(n){return n.reduce((e,t,i)=>i<n.length-1?[...e,[t,n[i+1]]]:e,[])}function $8(n,e,t){let i=V8(n).find(([s,o])=>s<=e&&e<=o);return n.map(s=>{let o=Math.abs(i[0]-i[1]),c=Math.abs(e-i[0])/o;return i[0]===s?e>t?1:1-c:i[1]===s?e>=t?c:1:0})}function j8(n,e){return n.map((t,i)=>t<e?n.length-i:i)}function BE(n,e){let t=hc[n].keypointsNumber,{range:i,zero:s}=hc[n];return[...new Set([...FE(i[0],s,t+1),...FE(s,i[1],t+1),s,e])].sort((o,c)=>o-c)}class z8 extends Ut{constructor(){super(),this._isActive=!1,this._hidden=!0,this._addKeypointDebounced=wi(this._addKeypoint.bind(this),600),this.classList.add("uc-inactive_to_cropper")}_handleImageLoading(e){let t=this._operation,i=this.$["*loadingOperations"];return i.get(t)||i.set(t,new Map),i.get(t).get(e)||(i.set(t,i.get(t).set(e,!0)),this.$["*loadingOperations"]=i),()=>{var s;(s=i==null?void 0:i.get(t))!=null&&s.has(e)&&(i.get(t).delete(e),this.$["*loadingOperations"]=i)}}_flush(){window.cancelAnimationFrame(this._raf),this._raf=window.requestAnimationFrame(()=>{for(let e of this._keypoints){let{image:t}=e;t&&(t.style.opacity=e.opacity.toString(),t.style.zIndex=e.zIndex.toString())}})}async _imageSrc({url:e=this._url,filter:t=this._filter,operation:i,value:s}={}){let o={...this._transformations};i&&(o[i]=t?{name:t,amount:s}:s);let c=this.offsetWidth;return await this.proxyUrl(Qv(e,c,o))}async _constructKeypoint(e,t){return{src:await this._imageSrc({operation:e,value:t}),image:null,opacity:0,zIndex:0,value:t}}_isSame(e,t){return this._operation===e&&this._filter===t}async _addKeypoint(e,t,i){let s=()=>!this._isSame(e,t)||this._value!==i||!!this._keypoints.find(d=>d.value===i);if(s())return;let o=await this._constructKeypoint(e,i),c=new Image;c.src=o.src;let h=this._handleImageLoading(o.src);c.addEventListener("load",h,{once:!0}),c.addEventListener("error",h,{once:!0}),o.image=c,c.classList.add("uc-fader-image"),c.addEventListener("load",()=>{if(s())return;let d=this._keypoints,m=d.findIndex(_=>_.value>i),y=m<d.length?d[m].image:null;!this._container||y&&!this._container.contains(y)||(d.splice(m,0,o),this._container.insertBefore(c,y),this._update(e,i))},{once:!0}),c.addEventListener("error",()=>{this.$["*networkProblems"]=!0},{once:!0})}set(e){e=typeof e=="string"?parseInt(e,10):e,this._update(this._operation,e),this._addKeypointDebounced(this._operation,this._filter,e)}_update(e,t){this._operation=e,this._value=t;let{zero:i}=hc[e],s=this._keypoints.map(h=>h.value),o=$8(s,t,i),c=j8(s,i);for(let[h,d]of Object.entries(this._keypoints))d.opacity=o[h],d.zIndex=c[h];this._flush()}_createPreviewImage(){let e=new Image;return e.classList.add("uc-fader-image","uc-fader-image--preview"),e.style.opacity="0",e}async _initNodes(){let e=document.createDocumentFragment();this._previewImage=this._previewImage||this._createPreviewImage(),!this.contains(this._previewImage)&&e.appendChild(this._previewImage);let t=document.createElement("div");e.appendChild(t);let i=this._keypoints.map(m=>m.src),{images:s,promise:o,cancel:c}=py(i);s.forEach(m=>{let y=this._handleImageLoading(m.src);m.addEventListener("load",y),m.addEventListener("error",y)}),this._cancelLastImages=()=>{c(),this._cancelLastImages=void 0};let h=this._operation,d=this._filter;await o,this._isActive&&this._isSame(h,d)&&(this._container&&this._container.remove(),this._container=t,this._keypoints.forEach((m,y)=>{let _=s[y];_.classList.add("uc-fader-image"),m.image=_,this._container.appendChild(_)}),this.appendChild(e),this._flush())}async setTransformations(e){if(this._transformations=e,this._previewImage){let t=await this._imageSrc(),i=this._handleImageLoading(t);this._previewImage.src=t,this._previewImage.addEventListener("load",i,{once:!0}),this._previewImage.addEventListener("error",i,{once:!0}),this._previewImage.style.opacity="1",this._previewImage.addEventListener("error",()=>{this.$["*networkProblems"]=!0},{once:!0})}}async preload({url:e,filter:t,operation:i,value:s}){this._cancelBatchPreload&&this._cancelBatchPreload();let o=BE(i,s),c=await Promise.all(o.map(d=>this._imageSrc({url:e,filter:t,operation:i,value:d}))),{cancel:h}=py(c);this._cancelBatchPreload=h}_setOriginalSrc(e){let t=this._previewImage||this._createPreviewImage();if(!this.contains(t)&&this.appendChild(t),this._previewImage=t,t.src===e){t.style.opacity="1",t.style.transform="scale(1)",this.className=cr({"uc-active_from_viewer":this._fromViewer,"uc-active_from_cropper":!this._fromViewer,"uc-inactive_to_cropper":!1});return}t.style.opacity="0";let i=this._handleImageLoading(e);t.addEventListener("error",i,{once:!0}),t.src=e,t.addEventListener("load",()=>{i(),t&&(t.style.opacity="1",t.style.transform="scale(1)",this.className=cr({"uc-active_from_viewer":this._fromViewer,"uc-active_from_cropper":!this._fromViewer,"uc-inactive_to_cropper":!1}))},{once:!0}),t.addEventListener("error",()=>{this.$["*networkProblems"]=!0},{once:!0})}async activate({url:e,operation:t,value:i,filter:s,fromViewer:o}){if(this._isActive=!0,this._hidden=!1,this._url=e,this._operation=t||"initial",this._value=i,this._filter=s,this._fromViewer=o,typeof i!="number"&&!s){let h=await this._imageSrc({operation:t,value:i});this._setOriginalSrc(h),this._container&&this._container.remove();return}this._keypoints=await Promise.all(BE(t,i).map(h=>this._constructKeypoint(t,h))),this._update(t,i),this._initNodes()}deactivate({hide:e=!0}={}){this._isActive=!1,this._cancelLastImages&&this._cancelLastImages(),this._cancelBatchPreload&&this._cancelBatchPreload(),e&&!this._hidden?(this._hidden=!0,this._previewImage&&(this._previewImage.style.transform="scale(1)"),this.className=cr({"uc-active_from_viewer":!1,"uc-active_from_cropper":!1,"uc-inactive_to_cropper":!0}),this.addEventListener("transitionend",()=>{this._container&&this._container.remove()},{once:!0})):this._container&&this._container.remove()}}const F8=1;class bx extends Ut{initCallback(){super.initCallback(),this.addEventListener("wheel",e=>{e.preventDefault();let{deltaY:t,deltaX:i}=e;Math.abs(i)>F8?this.scrollLeft+=i:this.scrollLeft+=t},{passive:!1}),this.addEventListener("scroll",()=>{},{passive:!0})}}bx.template=" <slot></slot> ";function B8(n){return`
    <uc-presence-toggle
      class="uc-tab-toggle"
      set="visible: presence.tabToggle.${n}; styles: presence.tabToggleStyles;"
    >
      <uc-btn-ui
        theme="tab"
        ref="tab-toggle-${n}"
        data-id="${n}"
        icon="${n}"
        set="onclick: on.clickTab; aria-role:tab_role; aria-controls:tab_${n}; title-prop: a11y-editor-tab-${n}"
      >
      </uc-btn-ui>
    </uc-presence-toggle>
  `}function H8(n){return`
    <uc-presence-toggle
      id="tab_${n}"
      class="uc-tab-content"
      set="visible: presence.tabContent.${n}; styles: presence.tabContentStyles"
    >
      <uc-editor-scroller hidden-scrollbar>
        <div class="uc-controls-list_align">
          <div
            role="listbox"
            aria-orientation="horizontal"
            class="uc-controls-list_inner"
            ref="controls-list-${n}"
          ></div>
        </div>
      </uc-editor-scroller>
    </uc-presence-toggle>
  `}class wx extends Ut{constructor(){super();z(this,"_updateInfoTooltip",wi(()=>{var c,h;const t=this.$["*editorTransformations"],i=this.$["*currentOperation"];let s="",o=!1;if(this.$["*tabId"]===Xt.FILTERS)if(o=!0,this.$["*currentFilter"]&&((c=t==null?void 0:t.filter)==null?void 0:c.name)===this.$["*currentFilter"]){let d=((h=t==null?void 0:t.filter)==null?void 0:h.amount)||100;s=this.$["*currentFilter"]+" "+d}else s=this.l10n(xa);else if(this.$["*tabId"]===Xt.TUNING&&i){o=!0;let d=(t==null?void 0:t[i])||hc[i].zero;s=this.l10n(i)+" "+d}o&&(this.$["*operationTooltip"]=s),this.ref["tooltip-el"].classList.toggle("uc-info-tooltip_visible",o)},0));this.init$={...this.init$,"*sliderEl":null,"*loadingOperations":new Map,"*showSlider":!1,"*currentFilter":xa,"*currentOperation":null,showLoader:!1,filters:aL,colorOperations:sL,cropOperations:oL,"*operationTooltip":null,"presence.mainToolbar":!0,"presence.subToolbar":!1,"presence.tabToggles":!0,"presence.tabContent.crop":!1,"presence.tabContent.tuning":!1,"presence.tabContent.filters":!1,"presence.tabToggle.crop":!0,"presence.tabToggle.tuning":!0,"presence.tabToggle.filters":!0,"presence.subTopToolbarStyles":{hidden:"uc-sub-toolbar--top-hidden",visible:"uc-sub-toolbar--visible"},"presence.subBottomToolbarStyles":{hidden:"uc-sub-toolbar--bottom-hidden",visible:"uc-sub-toolbar--visible"},"presence.tabContentStyles":{hidden:"uc-tab-content--hidden",visible:"uc-tab-content--visible"},"presence.tabToggleStyles":{hidden:"uc-tab-toggle--hidden",visible:"uc-tab-toggle--visible"},"presence.tabTogglesStyles":{hidden:"uc-tab-toggles--hidden",visible:"uc-tab-toggles--visible"},"on.cancel":()=>{var t;(t=this._cancelPreload)==null||t.call(this),this.$["*on.cancel"]()},"on.apply":()=>{this.$["*on.apply"](this.$["*editorTransformations"])},"on.applySlider":()=>{this.ref["slider-el"].apply(),this._onSliderClose()},"on.cancelSlider":()=>{this.ref["slider-el"].cancel(),this._onSliderClose()},"on.clickTab":t=>{const i=t.currentTarget.getAttribute("data-id");i&&this._activateTab(i,{fromViewer:!1})},tab_role:"tab",[`tab_${Xt.TUNING}`]:`tab_${Xt.TUNING}`,[`tab_${Xt.CROP}`]:`tab_${Xt.CROP}`,[`tab_${Xt.FILTERS}`]:`tab_${Xt.FILTERS}`,cancel:"cancel",apply:"apply","a11y-editor-tab-filters":"a11y-editor-tab-filters","a11y-editor-tab-tuning":"a11y-editor-tab-tuning","a11y-editor-tab-crop":"a11y-editor-tab-crop"},this._debouncedShowLoader=wi(this._showLoader.bind(this),500)}_onSliderClose(){this.$["*showSlider"]=!1,this.$["*tabId"]===Xt.TUNING&&this.ref["tooltip-el"].classList.toggle("uc-info-tooltip_visible",!1)}_createOperationControl(t){let i=new vx;return i.operation=t,i}_createFilterControl(t){let i=new Xv;return i.filter=t,i}_createToggleControl(t){let i=new gx;return i.operation=t,i}_renderControlsList(t){let i=this.ref[`controls-list-${t}`],s=document.createDocumentFragment();t===Xt.CROP?this.$.cropOperations.forEach(o=>{let c=this._createToggleControl(o);s.appendChild(c)}):t===Xt.FILTERS?[xa,...this.$.filters].forEach(o=>{let c=this._createFilterControl(o);s.appendChild(c)}):t===Xt.TUNING&&this.$.colorOperations.forEach(o=>{let c=this._createOperationControl(o);s.appendChild(c)}),[...s.children].forEach((o,c)=>{c===s.childNodes.length-1&&o.classList.add("uc-controls-list_last-item")}),i.innerHTML="",i.appendChild(s)}_activateTab(t,{fromViewer:i}){this.$["*tabId"]=t,t===Xt.CROP?(this.$["*faderEl"].deactivate(),this.$["*cropperEl"].activate(this.$["*imageSize"],{fromViewer:i})):(this.$["*faderEl"].activate({url:this.$["*originalUrl"],fromViewer:i}),this.$["*cropperEl"].deactivate());for(let s of zr){let o=s===t,c=this.ref[`tab-toggle-${s}`];c.active=o,o?(this._renderControlsList(t),this._syncTabIndicator()):this._unmountTabControls(s),this.$[`presence.tabContent.${s}`]=o}}_unmountTabControls(t){let i=this.ref[`controls-list-${t}`];i&&(i.innerHTML="")}_syncTabIndicator(){let t=this.ref[`tab-toggle-${this.$["*tabId"]}`],i=this.ref["tabs-indicator"];i.style.transform=`translateX(${t.offsetLeft}px)`}async _preloadEditedImage(){var t;if(this.$["*imgContainerEl"]&&this.$["*originalUrl"]){let i=this.$["*imgContainerEl"].offsetWidth,s=await this.proxyUrl(Qv(this.$["*originalUrl"],i,this.$["*editorTransformations"]));(t=this._cancelPreload)==null||t.call(this);let{cancel:o}=py([s]);this._cancelPreload=()=>{o(),this._cancelPreload=void 0}}}_showLoader(t){this.$.showLoader=t}initCallback(){super.initCallback(),this.$["*sliderEl"]=this.ref["slider-el"],this.sub("*imageSize",t=>{t&&setTimeout(()=>{this._activateTab(this.$["*tabId"],{fromViewer:!0})},0)}),this.sub("*editorTransformations",t=>{var s;let i=(s=t==null?void 0:t.filter)==null?void 0:s.name;this.$["*currentFilter"]!==i&&(this.$["*currentFilter"]=i)}),this.sub("*currentFilter",()=>{this._updateInfoTooltip()}),this.sub("*currentOperation",()=>{this._updateInfoTooltip()}),this.sub("*tabId",()=>{this._updateInfoTooltip()}),this.sub("*originalUrl",()=>{this.$["*faderEl"]&&this.$["*faderEl"].deactivate()}),this.sub("*editorTransformations",t=>{this._preloadEditedImage(),this.$["*faderEl"]&&this.$["*faderEl"].setTransformations(t)}),this.sub("*loadingOperations",t=>{let i=!1;for(let[,s]of t.entries()){if(i)break;for(let[,o]of s.entries())if(o){i=!0;break}}this._debouncedShowLoader(i)}),this.sub("*showSlider",t=>{this.$["presence.subToolbar"]=t,this.$["presence.mainToolbar"]=!t}),this.sub("*tabList",t=>{this.$["presence.tabToggles"]=t.length>1;for(const i of zr){this.$[`presence.tabToggle.${i}`]=t.includes(i);const s=this.ref[`tab-toggle-${i}`];s.style.gridColumn=t.indexOf(i)+1}t.includes(this.$["*tabId"])||this._activateTab(t[0],{fromViewer:!1})}),this._updateInfoTooltip()}destroyCallback(){this.$["*showSlider"]=!1}}wx.template=`
  <uc-line-loader-ui set="active: showLoader"></uc-line-loader-ui>
  <div class="uc-info-tooltip_container">
    <div class="uc-info-tooltip_wrapper">
      <div ref="tooltip-el" class="uc-info-tooltip uc-info-tooltip_hidden">{{*operationTooltip}}</div>
    </div>
  </div>
  <div class="uc-toolbar-container">
    <uc-presence-toggle
      role="tablist"
      class="uc-sub-toolbar"
      set="visible: presence.mainToolbar; styles: presence.subTopToolbarStyles"
    >
      <div class="uc-tab-content-row">${zr.map(H8).join("")}</div>
      <div class="uc-controls-row">
        <uc-presence-toggle
          class="uc-tab-toggles"
          set="visible: presence.tabToggles; styles: presence.tabTogglesStyles"
        >
          <div ref="tabs-indicator" class="uc-tab-toggles_indicator"></div>
          ${zr.map(B8).join("")}
        </uc-presence-toggle>
        <uc-btn-ui style="order: -1" theme="secondary-icon" icon="closeMax" set="onclick: on.cancel; title-prop:cancel">
        </uc-btn-ui>
        <uc-btn-ui theme="primary-icon" icon="done" set="onclick: on.apply; title-prop:apply"> </uc-btn-ui>
      </div>
    </uc-presence-toggle>
    <uc-presence-toggle
      class="uc-sub-toolbar"
      set="visible: presence.subToolbar; styles: presence.subBottomToolbarStyles"
    >
      <div class="uc-slider">
        <uc-editor-slider ref="slider-el"></uc-editor-slider>
      </div>
      <div class="uc-controls-row">
        <uc-btn-ui theme="secondary" set="onclick: on.cancelSlider" l10n="@text:cancel"> </uc-btn-ui>
        <uc-btn-ui theme="primary" set="onclick: on.applySlider" l10n="@text:apply"> </uc-btn-ui>
      </div>
    </uc-presence-toggle>
  </div>
`;class Wv extends Ut{constructor(){super(),this._iconReversed=!1,this._iconSingle=!1,this._iconHidden=!1,this.init$={...this.init$,text:"",icon:"",iconCss:this._iconCss(),theme:null,"aria-role":"","aria-controls":"","title-prop":""},this.defineAccessor("active",e=>{e?this.setAttribute("active",""):this.removeAttribute("active")})}_iconCss(){return cr("uc-icon",{"uc-icon_left":!this._iconReversed,"uc-icon_right":this._iconReversed,"uc-icon_hidden":this._iconHidden,"uc-icon_single":this._iconSingle})}initCallback(){super.initCallback(),this.sub("icon",e=>{this._iconSingle=!this.$.text,this._iconHidden=!e,this.$.iconCss=this._iconCss()}),this.sub("theme",e=>{e!=="custom"&&(this.className=`uc-${e}`)}),this.sub("text",e=>{this._iconSingle=!1}),this.hasAttribute("theme")||this.setAttribute("theme","default"),this.defineAccessor("aria-role",e=>{this.$["aria-role"]=e||""}),this.defineAccessor("aria-controls",e=>{this.$["aria-controls"]=e||""}),this.defineAccessor("title-prop",e=>{this.$["title-prop"]=e||""})}set reverse(e){this.hasAttribute("reverse")?(this.style.flexDirection="row-reverse",this._iconReversed=!0):(this._iconReversed=!1,this.style.flexDirection=null)}}Wv.bindAttributes({text:"text",icon:"icon",reverse:"reverse",theme:"theme"});Wv.template=`
  <button
    type="button"
    set="@role:aria-role; @aria-controls: aria-controls; @aria-label:title-prop"
    l10n="@title:title-prop;"
  >
    <uc-icon set="className: iconCss; @name: icon; @hidden: !icon"></uc-icon>
    <div class="uc-text">{{text}}</div>
  </button>
`;class Ex extends Ut{constructor(){super(),this._active=!1,this._handleTransitionEndRight=()=>{let e=this.ref["line-el"];e.style.transition="initial",e.style.opacity="0",e.style.transform="translateX(-101%)",this._active&&this._start()}}initCallback(){super.initCallback(),this.defineAccessor("active",e=>{typeof e=="boolean"&&(e?this._start():this._stop())})}_start(){this._active=!0;let{width:e}=this.getBoundingClientRect(),t=this.ref["line-el"];t.style.transition="transform 1s",t.style.opacity="1",t.style.transform=`translateX(${e}px)`,t.addEventListener("transitionend",this._handleTransitionEndRight,{once:!0})}_stop(){this._active=!1}}Ex.template=`
  <div class="uc-inner">
    <div class="uc-line" ref="line-el"></div>
  </div>
`;const _f={transition:"uc-transition",visible:"uc-visible",hidden:"uc-hidden"};class Tx extends Ut{constructor(){super(),this._visible=!1,this._visibleStyle=_f.visible,this._hiddenStyle=_f.hidden,this._externalTransitions=!1,this.defineAccessor("styles",e=>{e&&(this._externalTransitions=!0,this._visibleStyle=e.visible,this._hiddenStyle=e.hidden)}),this.defineAccessor("visible",e=>{typeof e=="boolean"&&(this._visible=e,this._handleVisible())})}_handleVisible(){this.style.visibility=this._visible?"inherit":"hidden",I8(this,{[_f.transition]:!this._externalTransitions,[this._visibleStyle]:this._visible,[this._hiddenStyle]:!this._visible}),this.setAttribute("aria-hidden",this._visible?"false":"true")}initCallback(){super.initCallback(),this.classList.toggle("uc-initial",!0),this._externalTransitions||this.classList.add(_f.transition),this._handleVisible(),setTimeout(()=>{this.classList.toggle("uc-initial",!1)},0)}}Tx.template="<slot></slot> ";class Ax extends Ut{constructor(){super();z(this,"init$",{...this.init$,disabled:!1,min:0,max:100,onInput:null,onChange:null,defaultValue:null,"on.sliderInput":()=>{let t=parseInt(this.ref["input-el"].value,10);this._updateValue(t),this.$.onInput&&this.$.onInput(t)},"on.sliderChange":()=>{let t=parseInt(this.ref["input-el"].value,10);this.$.onChange&&this.$.onChange(t)}});this.setAttribute("with-effects","")}initCallback(){super.initCallback(),this.defineAccessor("disabled",i=>{this.$.disabled=i}),this.defineAccessor("min",i=>{this.$.min=i}),this.defineAccessor("max",i=>{this.$.max=i}),this.defineAccessor("defaultValue",i=>{this.$.defaultValue=i,this.ref["input-el"].value=i,this._updateValue(i)}),this.defineAccessor("zero",i=>{this._zero=i}),this.defineAccessor("onInput",i=>{i&&(this.$.onInput=i)}),this.defineAccessor("onChange",i=>{i&&(this.$.onChange=i)}),this._updateSteps(),this._observer=new ResizeObserver(()=>{this._updateSteps();let i=parseInt(this.ref["input-el"].value,10);this._updateValue(i)}),this._observer.observe(this),this._thumbSize=parseInt(window.getComputedStyle(this).getPropertyValue("--l-thumb-size"),10),setTimeout(()=>{let i=parseInt(this.ref["input-el"].value,10);this._updateValue(i)},0),this.sub("disabled",i=>{let s=this.ref["input-el"];i?s.setAttribute("disabled","disabled"):s.removeAttribute("disabled")});let t=this.ref["input-el"];t.addEventListener("focus",()=>{this.style.setProperty("--color-effect","var(--hover-color-rgb)")}),t.addEventListener("blur",()=>{this.style.setProperty("--color-effect","var(--idle-color-rgb)")})}_updateValue(t){this._updateZeroDot(t);let{width:i}=this.getBoundingClientRect(),c=100/(this.$.max-this.$.min)*(t-this.$.min)*(i-this._thumbSize)/100;window.requestAnimationFrame(()=>{this.ref["thumb-el"].style.transform=`translateX(${c}px)`})}_updateZeroDot(t){if(!this._zeroDotEl)return;t===this._zero?this._zeroDotEl.style.opacity="0":this._zeroDotEl.style.opacity="1";let{width:i}=this.getBoundingClientRect(),c=100/(this.$.max-this.$.min)*(this._zero-this.$.min)*(i-this._thumbSize)/100;window.requestAnimationFrame(()=>{this._zeroDotEl.style.transform=`translateX(${c}px)`})}_updateSteps(){let i=this.ref["steps-el"],{width:s}=i.getBoundingClientRect(),o=Math.ceil(s/2),c=Math.ceil(o/15)-2;if(this._stepsCount===c)return;let h=document.createDocumentFragment(),d=document.createElement("div"),m=document.createElement("div");d.className="uc-minor-step",m.className="uc-border-step",h.appendChild(m);for(let _=0;_<c;_++)h.appendChild(d.cloneNode());h.appendChild(m.cloneNode());for(let _=0;_<c;_++)h.appendChild(d.cloneNode());h.appendChild(m.cloneNode());let y=document.createElement("div");y.className="uc-zero-dot",h.appendChild(y),this._zeroDotEl=y,i.innerHTML="",i.appendChild(h),this._stepsCount=c}destroyCallback(){var t;super.destroyCallback(),(t=this._observer)==null||t.disconnect()}}Ax.template=`
  <div class="uc-steps" ref="steps-el"></div>
  <div ref="thumb-el" class="uc-thumb"></div>
  <input
    class="uc-input"
    type="range"
    ref="input-el"
    set="oninput: on.sliderInput; onchange: on.sliderChange; @min: min; @max: max; @value: defaultValue;"
  />
`;class q8 extends Un{constructor(){super(...arguments);z(this,"couldBeCtxOwner",!0);z(this,"activityType",ct.activities.CLOUD_IMG_EDIT);z(this,"_entry");z(this,"_instance")}get activityParams(){const t=super.activityParams;if("internalId"in t)return t;throw new Error("Cloud Image Editor activity params not found")}initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:()=>this.mountEditor(),onDeactivate:()=>this.unmountEditor()}),this.subConfigValue("cropPreset",t=>{this._instance&&this._instance.getAttribute("crop-preset")!==t&&this._instance.setAttribute("crop-preset",t)}),this.subConfigValue("cloudImageEditorTabs",t=>{this._instance&&this._instance.getAttribute("tabs")!==t&&this._instance.setAttribute("tabs",t)})}handleApply(t){if(!this._entry)return;let i=t.detail;this._entry.setMultipleValues({cdnUrl:i.cdnUrl,cdnUrlModifiers:i.cdnUrlModifiers}),this.historyBack()}handleCancel(){this.historyBack()}mountEditor(){const{internalId:t}=this.activityParams;if(this._entry=this.uploadCollection.read(t),!this._entry)throw new Error(`Entry with internalId "${t}" not found`);const i=this._entry.getValue("cdnUrl");if(!i)throw new Error(`Entry with internalId "${t}" hasn't uploaded yet`);const s=new kc,o=this.cfg.cropPreset,c=this.cfg.cloudImageEditorTabs;s.setAttribute("ctx-name",this.ctxName),s.setAttribute("cdn-url",i),o&&s.setAttribute("crop-preset",o),c&&s.setAttribute("tabs",c),s.addEventListener("apply",h=>{const d=h;this.handleApply(d),this.debugPrint('editor event "apply"',d.detail)}),s.addEventListener("cancel",h=>{const d=h;this.handleCancel(),this.debugPrint('editor event "cancel"',d.detail)}),s.addEventListener("change",h=>{const d=h;this.debugPrint('editor event "change"',d.detail)}),this.innerHTML="",this.appendChild(s),this._instance=s}unmountEditor(){this._instance=void 0,this._entry=void 0,this.innerHTML=""}}const G8=function(n){return n.replace(/[\\-\\[]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},K8=function(n,e="i"){const t=n.split("*").map(G8);return new RegExp("^"+t.join(".+")+"$",e)};function Y8(n,e){return window.getComputedStyle(n).getPropertyValue(e).trim()}const X8=["--uc-font-family","--uc-font-size","--uc-line-height","--uc-button-size","--uc-preview-size","--uc-input-size","--uc-padding","--uc-radius","--uc-transition","--uc-background","--uc-foreground","--uc-primary","--uc-primary-hover","--uc-primary-transparent","--uc-primary-foreground","--uc-secondary","--uc-secondary-hover","--uc-secondary-foreground","--uc-muted","--uc-muted-foreground","--uc-destructive","--uc-destructive-foreground","--uc-border"];function Q8(n){return X8.reduce((e,t)=>{const i=Y8(n,t);return i&&(e[t]=i),e},{})}const W8=["selected-files-change"],Z8=n=>!n||typeof n!="object"?!1:"type"in n&&W8.includes(n.type);class J8{constructor(e){z(this,"_handlerMap",new Map);z(this,"_context");z(this,"_handleMessage",e=>{if(e.source!==this._context)return;const t=e.data;if(!Z8(t))return;const i=this._handlerMap.get(t.type);if(i)for(const s of i)s(t)});this._context=e,window.addEventListener("message",this._handleMessage)}on(e,t){const i=this._handlerMap.get(e)??new Set;this._handlerMap.has(e)||this._handlerMap.set(e,i),i.add(t)}send(e){this._context.postMessage(e,"*")}destroy(){window.removeEventListener("message",this._handleMessage)}}function eV(n){let e=[];for(let[t,i]of Object.entries(n))i==null||typeof i=="string"&&i.length===0||e.push(`${t}=${encodeURIComponent(i)}`);return e.join("&")}class Sx extends Un{constructor(){super();z(this,"couldBeCtxOwner",!0);z(this,"activityType",ct.activities.EXTERNAL);this.init$={...this.init$,activityIcon:"",activityCaption:"",selectedList:[],total:0,isSelectionReady:!1,isDoneBtnEnabled:!1,couldSelectAll:!1,couldDeselectAll:!1,showSelectionStatus:!1,counterText:"",doneBtnTextClass:"uc-hidden",onDone:()=>{for(const t of this.$.selectedList){const i=this.extractUrlFromSelectedFile(t),{filename:s}=t,{externalSourceType:o}=this.activityParams;this.api.addFileFromUrl(i,{fileName:s,source:o})}this.$["*currentActivity"]=ct.activities.UPLOAD_LIST},onCancel:()=>{this.historyBack()},onSelectAll:()=>{var t;(t=this._messageBridge)==null||t.send({type:"select-all"})},onDeselectAll:()=>{var t;(t=this._messageBridge)==null||t.send({type:"deselect-all"})}}}get activityParams(){const t=super.activityParams;if("externalSourceType"in t)return t;throw new Error("External Source activity params not found")}initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:()=>{let{externalSourceType:t}=this.activityParams;if(!t){this.$["*currentActivity"]=null,this.setOrAddState("*modalActive",!1),console.error(`Param "externalSourceType" is required for activity "${this.activityType}"`);return}this.set$({activityCaption:`${t==null?void 0:t[0].toUpperCase()}${t==null?void 0:t.slice(1)}`,activityIcon:t}),this.mountIframe()}}),this.sub("*currentActivityParams",t=>{this.isActivityActive&&(this.unmountIframe(),this.mountIframe())}),this.sub("*currentActivity",t=>{t!==this.activityType&&this.unmountIframe()}),this.subConfigValue("multiple",t=>{this.$.showSelectionStatus=t}),this.subConfigValue("localeName",t=>{this.setupL10n()}),this.subConfigValue("externalSourcesEmbedCss",t=>{this.applyEmbedCss(t)})}extractUrlFromSelectedFile(t){if(t.alternatives){const i=Is(this.cfg.externalSourcesPreferredTypes);for(const s of i){const o=K8(s);for(const[c,h]of Object.entries(t.alternatives))if(o.test(c))return h}}return t.url}async handleSelectedFilesChange(t){if(this.cfg.multiple!==t.isMultipleMode){console.error("Multiple mode mismatch");return}this.bindL10n("counterText",()=>this.l10n("selected-count",{count:t.selectedCount,total:t.total})),this.set$({doneBtnTextClass:t.isReady?"":"uc-hidden",isSelectionReady:t.isReady,isDoneBtnEnabled:t.isReady&&t.selectedFiles.length>0,showSelectionStatus:t.isMultipleMode&&t.total>0,couldSelectAll:t.selectedCount<t.total,couldDeselectAll:t.selectedCount===t.total,selectedList:t.selectedFiles})}handleIframeLoad(){this.applyEmbedCss(this.cfg.externalSourcesEmbedCss),this.applyTheme(),this.setupL10n()}applyTheme(){var t;(t=this._messageBridge)==null||t.send({type:"set-theme-definition",theme:Q8(this)})}applyEmbedCss(t){var i;(i=this._messageBridge)==null||i.send({type:"set-embed-css",css:t})}setupL10n(){var t;(t=this._messageBridge)==null||t.send({type:"set-locale-definition",localeDefinition:this.cfg.localeName})}remoteUrl(){var y,_;const{pubkey:t,remoteTabSessionKey:i,socialBaseUrl:s,multiple:o}=this.cfg,{externalSourceType:c}=this.activityParams,d={lang:((_=(y=this.l10n("social-source-lang"))==null?void 0:y.split("-"))==null?void 0:_[0])||"en",public_key:t,images_only:"false",session_key:i,wait_for_theme:!0,multiple:o.toString()},m=new URL(`/window4/${c}`,s);return m.search=eV(d),m.toString()}mountIframe(){var i;let t=gC({tag:"iframe",attributes:{src:this.remoteUrl(),marginheight:0,marginwidth:0,frameborder:0,allowTransparency:!0}});t.addEventListener("load",this.handleIframeLoad.bind(this)),this.ref.iframeWrapper.innerHTML="",this.ref.iframeWrapper.appendChild(t),t.contentWindow&&((i=this._messageBridge)==null||i.destroy(),this._messageBridge=new J8(t.contentWindow),this._messageBridge.on("selected-files-change",this.handleSelectedFilesChange.bind(this)),this.resetSelectionStatus())}unmountIframe(){var t;(t=this._messageBridge)==null||t.destroy(),this._messageBridge=void 0,this.ref.iframeWrapper.innerHTML="",this.resetSelectionStatus()}resetSelectionStatus(){this.set$({selectedList:[],total:0,isDoneBtnEnabled:!1,couldSelectAll:!1,couldDeselectAll:!1,showSelectionStatus:!1})}}Sx.template=`
  <uc-activity-header>
    <button
      type="button"
      class="uc-mini-btn uc-close-btn"
      set="onclick: *historyBack"
      l10n="@title:a11y-activity-header-button-close;@aria-label:a11y-activity-header-button-close"
    >
      <uc-icon name="close"></uc-icon>
    </button>
  </uc-activity-header>
  <div class="uc-content">
    <div ref="iframeWrapper" class="uc-iframe-wrapper"></div>
    <div class="uc-toolbar">
      <button type="button" class="uc-cancel-btn uc-secondary-btn" set="onclick: onCancel" l10n="cancel"></button>
      <div set="@hidden: !showSelectionStatus" class="uc-selection-status-box">
        <span>{{counterText}}</span>
        <button type="button" set="onclick: onSelectAll; @hidden: !couldSelectAll" l10n="select-all"></button>
        <button type="button" set="onclick: onDeselectAll; @hidden: !couldDeselectAll" l10n="deselect-all"></button>
      </div>
      <button type="button" class="uc-done-btn uc-primary-btn" set="onclick: onDone; @disabled: !isDoneBtnEnabled;">
        <uc-spinner set="@hidden: isSelectionReady"></uc-spinner>
        <span l10n="done" set="@class: doneBtnTextClass"></span>
      </button>
    </div>
  </div>
`;class tV extends Un{constructor(){super(...arguments);z(this,"requireCtxName",!0)}_createValidationInput(){const t=document.createElement("input");return t.type="text",t.name=this.ctxName,t.required=this.cfg.multipleMin>0,t.tabIndex=-1,Mv(t,{opacity:0,height:0,width:0}),t}initCallback(){super.initCallback(),this._validationInputElement=this._createValidationInput(),this.appendChild(this._validationInputElement),this.sub("*collectionState",t=>{var i;{if(this._dynamicInputsContainer||(this._dynamicInputsContainer=document.createElement("div"),this.appendChild(this._dynamicInputsContainer)),!this._validationInputElement){const h=this._createValidationInput();this.appendChild(h),this._validationInputElement=h}if(this._dynamicInputsContainer.innerHTML="",t.status==="uploading"||t.status==="idle"){this._validationInputElement.value="",this._validationInputElement.setCustomValidity("");return}if(t.status==="failed"){const h=(i=t.errors[0])==null?void 0:i.message;this._validationInputElement.value="",this._validationInputElement.setCustomValidity(h);return}const s=t.group?t.group:null;if(s){this._validationInputElement.value=s.cdnUrl,this._validationInputElement.setCustomValidity("");return}const o=t.allEntries.map(h=>h.cdnUrl);if(!this.cfg.multiple&&o.length===1){this._validationInputElement.value=o[0],this._validationInputElement.setCustomValidity("");return}this._validationInputElement.remove(),this._validationInputElement=null;const c=new DocumentFragment;for(let h of o){const d=document.createElement("input");d.type="hidden",d.name=`${this.ctxName}[]`,d.value=h,c.appendChild(d)}this._dynamicInputsContainer.replaceChildren(c)}},!1)}}class nV extends ct{}class Cx extends Ut{constructor(){super(...arguments);z(this,"init$",{...this.init$,currentText:"",options:[],selectHtml:"",onSelect:t=>{var i;t.preventDefault(),t.stopPropagation(),this.value=this.ref.select.value,this.$.currentText=((i=this.$.options.find(s=>s.value==this.value))==null?void 0:i.text)||"",this.dispatchEvent(new Event("change"))}})}initCallback(){super.initCallback(),this.sub("options",t=>{var s;this.$.currentText=((s=t==null?void 0:t[0])==null?void 0:s.text)||"";let i="";t==null||t.forEach(o=>{i+=`<option value="${o.value}">${o.text}</option>`}),this.$.selectHtml=i})}}Cx.template=' <select ref="select" set="innerHTML: selectHtml; onchange: onSelect"></select> ';class xx extends Ut{initCallback(){super.initCallback(),this.subConfigValue("removeCopyright",e=>{this.toggleAttribute("hidden",!!e)})}}z(xx,"template",`
    <a
      href="https://uploadcare.com/?utm_source=copyright&utm_medium=referral&utm_campaign=v4"
      target="_blank noopener"
      class="uc-credits"
      >Powered by Uploadcare</a
    >
  `);class Rx extends jh{}Rx.template=' <div class="uc-spinner"></div> ';const rh=class rh extends Fh{constructor(){super(),this.init$={...this.init$,isHidden:!1}}initCallback(){super.initCallback(),this.defineAccessor("headless",e=>{this.set$({isHidden:Lt(e)})}),this.sub("*modalActive",e=>{this._lastModalActive!==e&&this.emit(e?Qt.MODAL_OPEN:Qt.MODAL_CLOSE,void 0,{debounce:!0}),this._lastModalActive=e},!1)}};z(rh,"styleAttrs",[...ua(rh,rh,"styleAttrs"),"uc-file-uploader-regular"]);let pc=rh;pc.template=`
  <uc-simple-btn set="@hidden: isHidden"></uc-simple-btn>

  <uc-modal strokes block-body-scrolling>
    <uc-start-from>
      <uc-drop-area with-icon clickable></uc-drop-area>
      <uc-source-list role="list" wrap></uc-source-list>
      <button type="button" l10n="start-from-cancel" class="uc-secondary-btn" set="onclick: *historyBack"></button>
      <uc-copyright></uc-copyright>
    </uc-start-from>
    <uc-upload-list></uc-upload-list>
    <uc-camera-source></uc-camera-source>
    <uc-url-source></uc-url-source>
    <uc-external-source></uc-external-source>
    <uc-cloud-image-editor-activity></uc-cloud-image-editor-activity>
  </uc-modal>
`;pc.bindAttributes({headless:null});const sh=class sh extends Fh{initCallback(){super.initCallback();const e=this.ref.uBlock;this.sub("*currentActivity",t=>{t||(this.$["*currentActivity"]=e.initActivity||ct.activities.START_FROM)}),this.sub("*uploadList",t=>{(t==null?void 0:t.length)>0?this.$["*currentActivity"]=ct.activities.UPLOAD_LIST:this.$["*currentActivity"]=e.initActivity||ct.activities.START_FROM}),this.subConfigValue("sourceList",t=>{t!=="local"&&(this.cfg.sourceList="local")}),this.subConfigValue("confirmUpload",t=>{t!==!1&&(this.cfg.confirmUpload=!1)})}};z(sh,"styleAttrs",[...ua(sh,sh,"styleAttrs"),"uc-file-uploader-minimal"]);let gc=sh;gc.template=`
  <uc-start-from>
    <uc-drop-area tabindex="0" clickable l10n="choose-file"></uc-drop-area>
    <uc-copyright></uc-copyright>
  </uc-start-from>
  <uc-upload-list ref="uBlock"></uc-upload-list>
`;const ah=class ah extends Fh{constructor(){super(),this.init$={...this.init$,couldCancel:!1,cancel:()=>{this.couldHistoryBack?this.$["*historyBack"]():this.couldShowList&&(this.$["*currentActivity"]=ct.activities.UPLOAD_LIST)}}}get couldHistoryBack(){const e=this.$["*history"];return e.length>1&&e[e.length-1]!==ct.activities.START_FROM}get couldShowList(){return this.cfg.showEmptyList||this.$["*uploadList"].length>0}initCallback(){super.initCallback();const e=this.ref.uBlock;this.sub("*currentActivity",t=>{t||(this.$["*currentActivity"]=e.initActivity||ct.activities.START_FROM)}),this.sub("*uploadList",t=>{(t==null?void 0:t.length)>0&&this.$["*currentActivity"]===(e.initActivity||ct.activities.START_FROM)&&(this.$["*currentActivity"]=ct.activities.UPLOAD_LIST)}),this.sub("*history",()=>{this.$.couldCancel=this.couldHistoryBack||this.couldShowList})}};z(ah,"styleAttrs",[...ua(ah,ah,"styleAttrs"),"uc-file-uploader-inline"]);let lm=ah;lm.template=`
  <uc-start-from>
    <uc-drop-area with-icon clickable></uc-drop-area>
    <uc-source-list role="list" wrap></uc-source-list>
    <button
      type="button"
      l10n="start-from-cancel"
      class="uc-cancel-btn uc-secondary-btn"
      set="onclick: cancel; @hidden: !couldCancel"
    ></button>
    <uc-copyright></uc-copyright>
  </uc-start-from>
  <uc-upload-list ref="uBlock"></uc-upload-list>
  <uc-camera-source></uc-camera-source>
  <uc-url-source></uc-url-source>
  <uc-external-source></uc-external-source>
  <uc-cloud-image-editor-activity></uc-cloud-image-editor-activity>
`;const oh=class oh extends kc{initCallback(){var e;super.initCallback(),(e=this.a11y)==null||e.registerBlock(this)}};z(oh,"styleAttrs",[...ua(oh,oh,"styleAttrs"),"uc-wgt-common"]);let gy=oh;function Mc(n){for(let e in n){let t=[...e].reduce((i,s)=>(s.toUpperCase()===s&&(s="-"+s.toLowerCase()),i+=s),"");t.startsWith("-")&&(t=t.replace("-","")),t.startsWith("uc-")||(t="uc-"+t),n[e].reg&&n[e].reg(t)}}const C0="UC";async function iV(n,e=!1){return new Promise((t,i)=>{if(typeof document!="object"){t(null);return}if(typeof window=="object"&&window[C0]){t(window[C0]);return}let s=document.createElement("script");s.async=!0,s.src=n,s.onerror=()=>{i()},s.onload=()=>{let o=window[C0];e&&Mc(o),t(o)},document.head.appendChild(s)})}const ep=Object.freeze(Object.defineProperty({__proto__:null,ActivityBlock:ct,ActivityHeader:nV,BaseComponent:jh,Block:Ut,BtnUi:Wv,CameraSource:ux,CloudImageEditor:gy,CloudImageEditorActivity:q8,CloudImageEditorBlock:kc,Config:QC,Copyright:xx,CropFrame:px,Data:St,DropArea:Eh,EditorCropButtonControl:gx,EditorFilterControl:Xv,EditorImageCropper:_x,EditorImageFader:z8,EditorOperationControl:vx,EditorScroller:bx,EditorSlider:yx,EditorToolbar:wx,ExternalSource:Sx,ExternalUploadSource:Qm,FileItem:Po,FileUploaderInline:lm,FileUploaderMinimal:gc,FileUploaderRegular:pc,FormInput:tV,Icon:qv,Img:BU,LineLoaderUi:Ex,Modal:om,PACKAGE_NAME:Ym,PACKAGE_VERSION:Xm,PresenceToggle:Tx,ProgressBar:fx,ProgressBarCommon:dx,Select:Cx,SimpleBtn:wh,SliderUi:Ax,SolutionBlock:Fh,SourceBtn:Gv,SourceList:QU,Spinner:Rx,StartFrom:ZC,UID:$h,UploadCtxProvider:my,UploadList:lx,UploadSource:Nn,UploaderBlock:Un,UrlSource:cx,defineComponents:Mc,defineLocale:HC,loadFileUploaderFrom:iV,toKebabCase:Wm},Symbol.toStringTag,{value:"Module"})),rV=new Set(["children","ref","style","className"]),sV=(n={})=>Object==null?void 0:Object.keys(n).reduce((e,t)=>{var i,s;const o=n==null?void 0:n[t],c=`on${(s=(i=o==null?void 0:o.split("-"))==null?void 0:i.map(h=>h.charAt(0).toUpperCase()+h.slice(1)))==null?void 0:s.join("")}`;return e[c]=o,e},{}),HE=new WeakMap,aV=n=>{let e=HE.get(n);return e===void 0&&(e=new Map,HE.set(n,e)),e},qE=({node:n,nameProp:e,valueProp:t,prevValueProp:i,event:s})=>{if(s!==void 0){if(t!==i){const o=aV(n),c=o.has(s);let h=o.get(s);t!==void 0?c?h.handleEvent=t:(h={handleEvent:t},o.set(s,h),n.addEventListener(s,d=>h.handleEvent(d.detail))):c&&(o.delete(s),n.removeEventListener(s,h))}return}n[e]=t,t==null&&e in HTMLElement.prototype&&n.removeAttribute(e)},oV=(n,e,t)=>{const i={},s={};return Object.entries(n).forEach(([o,c])=>{rV.has(o)?i[o==="className"?"class":o]=c:e.has(o)||o in t.prototype?s[o]=c:i[o]=c}),{reactProps:i,customElProps:s}},Bh=({react:n,tag:e,elClass:t,schemaEvents:i})=>{const s=sV(i),o=new Set(Object.keys(s??{})),c=n.forwardRef((h,d)=>{const m=n.useRef(new Map),y=n.useRef(null),{reactProps:_,customElProps:b}=oV(h,o,t);return n.useLayoutEffect(()=>{if(y.current===null)return;const T=new Map;for(const A in b)qE({node:y.current,nameProp:A,valueProp:b[A],prevValueProp:m.current.get(A),event:s[A]}),m.current.delete(A),T.set(A,h[A]);for(const[A,U]of m.current)qE({node:y.current,nameProp:A,valueProp:void 0,prevValueProp:U,event:s[A]});m.current=T}),n.createElement(e??t.__tag,{..._,ref:n.useCallback(T=>{y.current=T,typeof d=="function"?d(T):d!==null&&(d.current=T)},[d])})});return c.displayName=t.name,c},lV=Bh({react:Hi,tag:"uc-config",elClass:QC}),cV=Bh({react:Hi,tag:"uc-upload-ctx-provider",elClass:my,schemaEvents:my.EventType}),uV=n=>{const e={},t={},i={};for(const[s,o]of Object.entries(n)){if(s.startsWith("on")){e[s]=o;continue}if(s==="headless"){i[s]=o;continue}t[s]=o}return{eventHandlers:e,uploader:i,config:t}},hV="1.4.0",dV="React-Uploader",fV=()=>`${dV}/${hV}`,mV=({children:n})=>n,pV=()=>{const[n,e]=j.useState(!1);return j.useEffect(()=>{typeof window<"u"&&e(!0)},[]),n};Mc(ep);const gV=Bh({react:Hi,tag:"uc-file-uploader-regular",elClass:pc}),yV=({ctxName:n,className:e,classNameUploader:t,apiRef:i,fallback:s,...o})=>{const c=j.useMemo(()=>n??$h.generate(),[n]),{eventHandlers:h,config:d,uploader:m}=j.useMemo(()=>uV(o),[o]),y=pV();return Hi.createElement(mV,{condition:y,fallback:s},Hi.createElement("div",{className:e},Hi.createElement(lV,{userAgentIntegration:fV(),"ctx-name":c,...d}),Hi.createElement(cV,{ref:i,"ctx-name":c,...h}),Hi.createElement(gV,{class:t,"ctx-name":c,...m})))};Mc(ep);Bh({react:Hi,tag:"uc-file-uploader-minimal",elClass:gc});Mc(ep);Bh({react:Hi,tag:"uc-file-uploader-inline",elClass:gc});Mc(ep);const Ix=({fileEntry:{files:n},onChange:e,multiple:t=!0,showPreview:i=!0})=>{const[s,o]=j.useState([]),c=j.useRef(null),h=j.useCallback(_=>e({files:n.filter(b=>b.uuid!==_)}),[n,e]),d=()=>{var _;return(_=c.current)==null?void 0:_.uploadCollection.clearAll()},m=()=>{d(),e({files:[...n,...s]}),o([])},y=_=>{o([..._.allEntries.filter(b=>b.status==="success")])};return C.jsxs("div",{children:[C.jsx(yV,{imgOnly:!0,multiple:t,removeCopyright:!0,confirmUpload:!1,apiRef:c,onModalClose:m,onChange:y,pubkey:"c71165ea8e2c8f68587e"}),i&&C.jsx("div",{className:"previews",children:n.map(({uuid:_,cdnUrl:b,fileInfo:T})=>C.jsxs("div",{className:"preview",children:[C.jsx("img",{className:"previewImage",src:`${b}/-/format/webp/-/quality/smart/-/stretch/fill/`,width:"100",alt:(T==null?void 0:T.originalFilename)||"",title:(T==null?void 0:T.originalFilename)||""},_),C.jsx("button",{className:"previewRemoveButton",type:"button",onClick:()=>h(_),children:""})]},_))})]})},vV=()=>{const n=Go(),{user:e}=pr(),[t,i]=j.useState({files:[]}),[s,o]=j.useState({caption:"",photos:[],likes:0,userLikes:[],userId:null,date:new Date}),[c,h]=j.useState(!1),d=async m=>{var b;if(m.preventDefault(),!((b=t==null?void 0:t.files)!=null&&b.length)||e===null)return;h(!0);const y=t.files.map(({cdnUrl:T,uuid:A})=>({cdnUrl:T||"",uuid:A||""})),_={...s,userId:e.uid||"",photos:y};try{await p6(_)}catch(T){console.log("Error while creating post: ",T)}finally{h(!1)}n("/")};return C.jsx(Vh,{children:C.jsx("div",{className:"flex justify-center",children:C.jsxs("div",{className:"border max-w-3xl w-full",children:[C.jsx("h3",{className:"bg-slate-800 text-white text-center text-lg p-2",children:"Create Post"}),C.jsx("div",{className:"p-8",children:C.jsxs("form",{onSubmit:d,children:[C.jsxs("div",{className:"flex flex-col",children:[C.jsx(lr,{className:"mb-4",htmlFor:"caption",children:"Photo Caption"}),C.jsx(Vm,{className:"mb-8 field-sizing-content resize-none max-h-60",id:"caption",placeholder:"What's in your photo!",value:s.caption,onChange:m=>o({...s,caption:m.target.value})})]}),C.jsxs("div",{className:"flex-flex-col",children:[C.jsx(lr,{className:"mb-4",htmlFor:"photos",children:"Photos"}),C.jsx(Ix,{fileEntry:t,onChange:i})]}),C.jsxs(Mn,{className:"mt-8 w-32 cursor-pointer",type:"submit",children:[c?C.jsx(hr,{color:""}):"Post",c?"Loading...":""]})]})})]})})})},_V=()=>{const n=Go(),{user:e}=pr()??{},t={id:"",userId:(e==null?void 0:e.uid)||"",userBio:"Add here what defines or motivates you...",photoURL:(e==null?void 0:e.photoURL)||"",displayName:(e==null?void 0:e.displayName)||"Guest User"},[i,s]=j.useState(t),{loading:o,data:c}=fC();j.useEffect(()=>{e&&m(e==null?void 0:e.uid)},[e]);const h=()=>c.map(y=>{var _,b;return C.jsxs("div",{className:"relative",children:[C.jsx("div",{className:"group absolute transition-all duration-200 bg-transparent hover:bg-slate-950 hover:opacity-75 top-0 left-0 bottom-0 right-0 w-full h-full",children:C.jsxs("div",{className:"flex justify-center items-center gap-2 w-full h-full",children:[C.jsx("div",{className:"hidden group-hover:block text-white text-2xl",children:y.likes}),C.jsx(Um,{className:"hidden group-hover:block fill-white w-7 h-7"})]})}),C.jsx("img",{src:`${(_=y==null?void 0:y.photos[0])==null?void 0:_.cdnUrl}/-/progressive/yes/-/scale_crop/300x300/center/`,alt:"posted photo"})]},(b=y==null?void 0:y.photos[0])==null?void 0:b.uuid)}),d=()=>{n("/edit-profile",{state:i})},m=async y=>{var b;const _=y?await MN(y):null;_&&((b=Object.keys(_))==null?void 0:b.length)>0&&s(_)};return C.jsx(Vh,{children:C.jsx("div",{className:"flex justify-center",children:C.jsxs("div",{className:"border max-w-3xl w-full",children:[C.jsx("h3",{className:"bg-slate-800 text-white text-center text-lg p-2",children:"Profile"}),C.jsxs("div",{className:"p-8 pb-2 border-b",children:[C.jsxs("div",{className:"flex flex-row items-center pb-2 mb-2",children:[C.jsx("div",{className:"mr-2",children:C.jsx("img",{src:(i==null?void 0:i.photoURL)||jm,alt:"Avatar",className:"w-28 h-28 rounded-full border-2 border-slate-800 object-cover"})}),C.jsxs("div",{children:[C.jsx("div",{className:"text-xl ml-3",children:i.displayName}),C.jsx("div",{className:"text-xl ml-3",children:(e==null?void 0:e.email)||""})]})]}),C.jsx("div",{className:"mb-4",children:i==null?void 0:i.userBio}),C.jsx("div",{children:C.jsxs(Mn,{onClick:d,children:[C.jsx(JN,{className:"mr-2 w-4 h-4"})," Edit Profile"]})})]}),C.jsxs("div",{className:"p-8 relative",children:[C.jsx("h2",{className:"mb-5",children:"My Posts"}),o?C.jsx("div",{className:"flex justify-center items-center bg-transparent",children:C.jsx(hr,{color:"text-slate-800"})}):c!=null&&c.length?C.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 relative",children:h()}):C.jsx("p",{className:"text-slate-800 text-center absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:"Your posted photos will show here..."})]})]})})})},bV=()=>{var P,B,G,Q;const{user:n,updateProfileInfo:e}=pr(),t=Go(),i=mr(),{id:s,userId:o,userBio:c,displayName:h,photoURL:d}=i.state,[m,y]=j.useState({userId:o,userBio:c,displayName:h,photoURL:d}),[_,b]=j.useState(!1),[T,A]=j.useState({files:[]}),U=async ue=>{var V,te,k,I,R,D;ue.preventDefault();try{if(b(!0),!((V=m==null?void 0:m.displayName)!=null&&V.trim())||!((te=m==null?void 0:m.userBio)!=null&&te.trim()))throw Error("Please fill all the fields first!");const L=(I=(k=T==null?void 0:T.files)==null?void 0:k[0])!=null&&I.cdnUrl?`${(D=(R=T==null?void 0:T.files)==null?void 0:R[0])==null?void 0:D.cdnUrl}/-/preview/-/crop/face/200px200p/-/crop/1:1/center/-/border_radius/50p/`:m==null?void 0:m.photoURL;s?await NN(s,{...m,photoURL:L}):await kN({...m,photoURL:L});const H={user:n,displayName:m.displayName,photoURL:L};e(H),t("/profile")}catch(L){console.log("Error: ",L)}finally{b(!1)}};return C.jsx(Vh,{children:C.jsx("div",{className:"flex justify-center",children:C.jsxs("div",{className:"border max-w-3xl w-full",children:[C.jsx("h3",{className:"bg-slate-800 text-white text-center text-lg p-2",children:"Edit Profile"}),C.jsx("div",{className:"p-8",children:C.jsxs("form",{onSubmit:U,children:[C.jsxs("div",{className:"flex-flex-col",children:[C.jsx(lr,{className:"mb-4",htmlFor:"photos",children:"Profile picture"}),C.jsx("div",{className:"mb-4",children:C.jsx("img",{src:(B=(P=T==null?void 0:T.files)==null?void 0:P[0])!=null&&B.cdnUrl?`${(Q=(G=T==null?void 0:T.files)==null?void 0:G[0])==null?void 0:Q.cdnUrl}/-/preview/-/crop/face/200px200p/-/crop/1:1/center/-/border_radius/50p/`:(m==null?void 0:m.photoURL)||jm,alt:"avatar",className:"w-28 h-28 rounded-full border-2 border-slate-800 object-cover"})}),C.jsx(Ix,{fileEntry:T,onChange:A,multiple:!1,showPreview:!1})]}),C.jsxs("div",{className:"flex flex-col",children:[C.jsx(lr,{className:"mb-4",htmlFor:"displayName",children:"User name"}),C.jsx(Mo,{className:"mb-8 field-sizing-content resize-none max-h-60",id:"displayName",placeholder:"Enter your username...",value:(m==null?void 0:m.displayName)||"",onChange:ue=>y({...m,displayName:ue.target.value})})]}),C.jsxs("div",{className:"flex flex-col",children:[C.jsx(lr,{className:"mb-4",htmlFor:"userBio",children:"User Bio"}),C.jsx(Vm,{className:"mb-8 field-sizing-content resize-none max-h-60",id:"userBio",placeholder:"Add here what defines or motivates you...",value:(m==null?void 0:m.userBio)||"",onChange:ue=>y({...m,userBio:ue.target.value})})]}),C.jsxs("div",{className:"flex flex-row justify-center items-center",children:[C.jsx(Mn,{className:"mt-8 w-32 mr-8 cursor-pointer",type:"submit",onClick:()=>t("/profile"),children:"Cancel"}),C.jsxs(Mn,{variant:"destructive",className:"mt-8 w-32 mr-8 cursor-pointer",type:"submit",children:[_?C.jsx(hr,{}):"",_?"Saving ...":"Update"]})]})]})})]})})})},wV={email:"",password:"",confirmPassword:""},EV=()=>{const n=Go(),{googleSignIn:e,signUp:t}=pr(),[i,s]=j.useState(wV),[o,c]=j.useState(!1),h=y=>{var _,b;s({...i,[y.target.name]:((b=(_=y.target)==null?void 0:_.value)==null?void 0:b.trim())||""})},d=async y=>{y.preventDefault();try{const{email:_,password:b,confirmPassword:T}=i;if(!_||!b)throw new Error("Please enter valid credentials!");if(b!==T)throw new Error("Password and confirm password do not match");c(!0),await t(_,b),n("/")}catch(_){console.log("Error while signing up: ",_)}finally{c(!1)}},m=async y=>{y.preventDefault();try{c(!0),await e(),n("/")}catch(_){console.log("Error while signing in with google: ",_)}finally{c(!1)}};return C.jsx(hC,{children:C.jsx(Rv,{children:C.jsxs("form",{onSubmit:d,children:[C.jsx(Iv,{className:"space-y-6 mb-4",children:C.jsx(cc,{className:"text-2xl m-auto",children:"Photogram"})}),C.jsxs(Ov,{className:"grid gap-4",children:[C.jsxs("div",{className:"grid gap-2",children:[C.jsx(lC,{children:"Enter your email below to create your account"}),C.jsxs(Mn,{type:"button",className:"cursor-pointer",variant:"outline",onClick:m,children:[C.jsx(dC.google,{}),"Google"]})]}),C.jsxs("div",{className:"relative",children:[C.jsx("div",{className:"absolute inset-0 flex items-center",children:C.jsx("span",{className:"w-full border-t"})}),C.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:C.jsx("span",{className:"bg-card px-2 text-muted-foreground",children:"Or"})})]}),C.jsxs("div",{className:"grid gap-2",children:[C.jsx(lr,{htmlFor:"email",children:"Email"}),C.jsx(Mo,{name:"email",type:"email",placeholder:"m@example.com",value:i.email,onChange:h})]}),C.jsxs("div",{className:"grid gap-2",children:[C.jsx(lr,{htmlFor:"password",children:"Password"}),C.jsx(Mo,{name:"password",type:"password",value:i.password,onChange:h})]}),C.jsxs("div",{className:"grid gap-2",children:[C.jsx(lr,{htmlFor:"password",children:"Confirm Password"}),C.jsx(Mo,{name:"confirmPassword",type:"password",value:i.confirmPassword,onChange:h})]})]}),C.jsxs(Dv,{className:"flex flex-col gap-4 mt-4",children:[C.jsxs(Mn,{className:"w-full cursor-pointer",type:"submit",children:[o?C.jsx(hr,{color:"#ffffff"}):"",o?"Signing you in...":"Create account"]}),C.jsxs(cc,{children:["Already have an account? ",C.jsx(Lo,{to:"/login",children:"Login"})]})]})]})})})},TV=a4([{element:C.jsx(FN,{}),children:[{path:"/",element:C.jsx(A6,{}),errorElement:C.jsx(Eo,{})},{path:"/post",element:C.jsx(vV,{}),errorElement:C.jsx(Eo,{})},{path:"/myphotos",element:C.jsx(O6,{}),errorElement:C.jsx(Eo,{})},{path:"/profile",element:C.jsx(_V,{}),errorElement:C.jsx(Eo,{})},{path:"/edit-profile",element:C.jsx(bV,{}),errorElement:C.jsx(Eo,{})}]},{path:"/login",element:C.jsx(I6,{}),errorElement:C.jsx(Eo,{})},{path:"/register",element:C.jsx(EV,{}),errorElement:C.jsx(Eo,{})}]),AV=()=>C.jsx(DN,{children:C.jsx(LN,{children:C.jsx(_4,{router:TV})})});fR.createRoot(document.getElementById("root")).render(C.jsx(j.StrictMode,{children:C.jsx(AV,{})}));
